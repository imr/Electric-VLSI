<HTML><HEAD><TITLE>Using The Electric VLSI Design System</TITLE></HEAD>
<BODY BGCOLOR="#FFFFFF">
<HTML><HEAD>
<TITLE>Using the Electric VLSI Design System</TITLE></HEAD>
<BODY BGCOLOR="#FFFFFF">
<FONT SIZE="6"><B>
<CENTER>Using the Electric<SUP><FONT SIZE="5">TM</FONT></SUP> VLSI Design System</CENTER>
</B></FONT>
<P>
<CENTER>
<TABLE BORDER="0">
<TR>
	<TD ROWSPAN="3"><IMG SRC="iconplug.png" ALT="icon"></TD>
	<TD><FONT SIZE="5"><CENTER><I>Steven M. Rubin</I></CENTER></FONT></TD>
	<TD ROWSPAN="3"><IMG SRC="iconplug.png" ALT="icon"></TD>
</TR>
<TR>
	<TD><FONT SIZE="4"><B><CENTER>September 15, 2006</CENTER></B></FONT></TD>
</TR>
<TR>
	<TD><FONT SIZE="4"><B><CENTER>Version 8.04</CENTER></B></FONT></TD>
</TR>
</TABLE>
<P>
<IMG SRC="screenshotbusy.png" ALT="design example">
</CENTER>
<HR>
Copyright (c) 2006 <A HREF="http://www.staticfreesoft.com">Static Free Software</A>.
<P>
	Electric<SUP><FONT SIZE="2">TM</FONT></SUP> is a trademark of <A HREF="http://www.staticfreesoft.com">
		Static Free Software</A>
.
<P>
	Permission is granted to make and distribute verbatim copies of this manual 
	provided the copyright notice and this permission notice are preserved on all 
	copies.
</P>
<P>
	Permission is granted to copy and distribute modified versions of this manual 
	under the conditions for verbatim copying, provided also that they are labeled 
	prominently as modified versions, that the authors' names and title from this 
	version are unchanged (though subtitles and additional authors' names may be 
	added), and that the entire resulting derived work is distributed under the 
	terms of a permission notice identical to this one.
</P>
<P>
	Permission is granted to copy and distribute translations of this manual into 
	another language, under the above conditions for modified versions.
</P>
<HR>
<CENTER><H1><A NAME="chap01-01">Chapter 1: Introduction</A></H1></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="title.html#title.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>1-1: Welcome</H2></CENTER></TD>
<TD><CENTER><A HREF="chap01-02.html#chap01-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
Now you have it!
<P>
A state-of-the-art computer-aided design system for VLSI circuit design.
<P>
Electric designs MOS and bipolar integrated circuits,
printed-circuit-boards, or any type of circuit you choose.
It has many editing styles including layout, schematics, artwork, and architectural specifications.
<P>
A large set of tools is available including design-rule checkers,
simulators, routers, layout generators, and more.
<P>
Electric interfaces to most popular CAD specifications including EDIF, LEF/DEF, VHDL, CIF and GDS.
<P>
The most valuable aspect of Electric is its layout-constraint system,
which enables top-down design by enforcing consistency of connections.
<P>
This manual explains the concepts and commands necessary to use Electric.
It begins with essential features and builds on them to explain all aspects of the system.
As with any computer system manual, the reader is encouraged to have a machine handy and to try out each operation.
<!-- PAGE BREAK --><A NAME="chap01-02"></A>
<CENTER><FONT SIZE=6><B>Chapter 1: Introduction</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap01-01.html#chap01-01.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>1-2: About Electric</H2></CENTER></TD>
<TD><CENTER><A HREF="chap01-03.html#chap01-03.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Help/About Electric... -->
<!-- COMMAND Help/User's Manual... -->
The <B>About Electric...</B> command (in menu <B>Help</B>)
shows you the names of the Electric development team.
It also outlines you legal rights with respect to Electric.
<P>
<CENTER><IMG SRC="fig01-27.png" ALT="Figure 1.27"></CENTER>
<P>
This manual is available while running Electric.
Use the <B>User's Manual...</B> command (in menu <B>Help</B>)
to see this manual (you may already be doing that).
<P>
While inside of the manual, click "Menu Help"
 to get help with
Electric's pulldown menus.
It displays a pulldown menu inside of the manual page which mimics the real
pulldown menu.
Select any command from this new menu to get help for the real pulldown menu entry.
<!-- PAGE BREAK --><A NAME="chap01-03"></A>
<CENTER><FONT SIZE=6><B>Chapter 1: Introduction</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap01-02.html#chap01-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>1-3: Requirements</H2></CENTER></TD>
<TD><CENTER><A HREF="chap01-04.html#chap01-04.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
Electric is written in the Java programming language and is distributed as a single ".jar" file,
typically called "electric.jar".
There are two variations on the ".jar" file: with or without source code.
Either of these files can run Electric, but the one with source-code is larger because it also has
all of the Java code.
<P>
Electric requires Java version 1.5 or later.
<P>
If you extract the source code from the ".jar" file and wish to build Electric, note that there are
some Macintosh vs. non-Macintosh issues to consider.
<UL>
<LI><B>Build on a Macintosh</B>
The easiest thing to do is to remove references to "AppleJavaExtensions.jar" from the Ant script
(build.xml).
This package is a collection of "stubs" to replace Macintosh functions that are unavailable elsewhere.
You can also build a native "App" by running the "mac-app" Ant script.
This script makes use of files in the "packaging" folder.
Macintosh computers must be running OS 10.3 or later.
</LI>
<LI><B>Build on non-Macintosh</B>
If you are building Electric on and for a non-Macintosh platform,
remove references to "AppleJavaExtensions.jar" from the Ant script
(build.xml).
Also, remove the module "com.sun.electric.MacOSXInterface.java".
It is sufficient to delete this module, because Electric automatically
detects its presence and is able to run without it.</LI>
<LI><B>Build on non-Macintosh, to run on all platforms</B>
To build Electric so that it can run on all platforms, Macintosh and other,
you will need to keep the module "com.sun.electric.MacOSXInterface.java".
However, in order to build it, you will need the stub package "AppleJavaExtensions.jar".
The package can be downloaded from Apple at
<A HREF="http://developer.apple.com/samplecode/AppleJavaExtensions/AppleJavaExtensions.html">
http://developer.apple.com/samplecode/AppleJavaExtensions/AppleJavaExtensions.html</A>.</LI>
</UL>
<P>
<H3>Memory Control</H3>
<P>
One problem with Java is that the Java Virtual Machine has a memory limit.
This limit prevents programs from growing too large.
However, it prevents large circuits from being edited.
<P>
If Electric runs out of memory, you can request that more be used.
To do this, use General Preferences (in menu <B>File / Preferences...</B>, "General" section, "General" tab).
At the bottom of the dialog are two memory limit fields, for <I>heap space</I> and <I>permanent space</I>.
<P>
The heap space limit is the most important because increasing it will offer much more circuitry capacity.
Note that 32-bit JVMs can only grow so far.
On 32-bit Windows systems you should not set it above 1500 (1.5 Gigabytes).
On 32-bit Linux or Macintosh system, you should not set it above 3600 (3.6 Gigabytes).
<P>
Permanent space is an additional section of memory that can be insufficiently small.
For very large chips, a value of 200 or larger may enhance performance.
<P>
After changing these values, you will have to quit Electric and restart it for the new memory limits to take effect.
<!-- PAGE BREAK --><A NAME="chap01-04"></A>
<CENTER><FONT SIZE=6><B>Chapter 1: Introduction</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap01-03.html#chap01-03.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>1-4: Setup</H2></CENTER></TD>
<TD><CENTER><A HREF="chap01-05.html#chap01-05.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
Running Electric varies with the different platforms.
Most systems also allow you to double-click on the .jar file.
<P>
If double-clicking doesn't work, try running it from the command-line by typing:
<CENTER><CODE>java -jar electric.jar</CODE></CENTER>
<P>
An alternate command-line is:
<CENTER><CODE>java -classpath electric.jar com.sun.electric.Launcher</CODE></CENTER><P>
<P>
There are a number of options that can be given at the end of the command line:
<UL>
<LI><CODE>-mdi</CODE> force a multiple document interface style
(where Electric is one big window with smaller edit windows in it).</LI>
<LI><CODE>-sdi</CODE> force a single document interface style
(where each Electric window is separate).</LI>
<LI><CODE>-s &lt;script&gt;</CODE> run the &lt;script&gt; file through the Bean shell.</LI>
<LI><CODE>-batch</CODE> run in batch mode (no windows or other user iterface are shown).</LI>
<LI><CODE>-version</CODE> provides full version information including build date.</LI>
<LI><CODE>-v</CODE> provides brief version information.</LI>
<LI><CODE>-help</CODE> prints a list of available command options.</LI>
</UL>
<!-- PAGE BREAK --><A NAME="chap01-05"></A>
<CENTER><FONT SIZE=6><B>Chapter 1: Introduction</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap01-04.html#chap01-04.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>1-5: Plug-Ins</H2></CENTER></TD>
<TD><CENTER><A HREF="chap01-06.html#chap01-06.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
Electric plug-ins are additional pieces of code that can be downloaded separately
to enhance the system's functionality.
Currently, these plug-ins are available:
<UL>
<LI><B>IRSIM</B>
The IRSIM simulator is a gate-level simulator from Stanford University.
Although originally written in C, it was translated to Java so that it could plug into Electric.
The Electric version is available from <A HREF="http://www.staticfreesoft.com">Static Free Software</A> at
<A HREF="http://www.staticfreesoft.com/electricIRSIM-8.04.jar">www.staticfreesoft.com/electricIRSIM-8.04.jar</A>.
</LI>
<LI><B>PIE</B>
Port Interchange Experiment (PIE) is an experimental version of NCC
(see <A HREF="chap09-07-01.html#chap09-07-01">Section 9-7-1</A>).
Because it is ever-evolving, it is left as a plug-in so that frequent updates can be made.
The latest version is available from <A HREF="http://www.staticfreesoft.com">Static Free Software</A> at
<A HREF="http://www.staticfreesoft.com/electricPIE-8.04.jar">www.staticfreesoft.com/electricPIE-8.04.jar</A>.
</LI>
<LI><B>Bean Shell</B>
The Bean Shell is used to do parameter evaluation in Electric.
Advanced operations that make use of cell parameters will need this plug-in.
The Bean Shell is available from <A HREF="http://www.beanshell.org">www.beanshell.org</A>.
</LI>
<LI><B>3D</B>
The 3D facility lets you view an integrated circuit in three-dimensions.
Although most of the viewer is included with Electric, there is one extra part that
can be installed (a 3D axis controller).
Also, none of the 3D display can function unless you have installed the Java3D package.
The Java3D package is available from the Java Community Site,
<A HREF="http://www.j3d.org">www.j3d.org</A>.
The 3D axis controller is available from <A HREF="http://www.staticfreesoft.com">Static Free Software</A> at
<A HREF="http://www.staticfreesoft.com/electricJava3D-8.04.jar">www.staticfreesoft.com/electricJava3D-8.04.jar</A>
</LI>
<LI><B>Animation</B>
To enable 3D animation, you need the 3D facility (described above) as well as the
Java Media Framework (JMF) and the animation code.
The Java Media Framework is available from <A HREF="http://www.sun.com">Sun Microsystems</A> at
<A HREF="http://java.sun.com/products/java-media/jmf/">java.sun.com/products/java-media/jmf</A>
and the animation code is available from <A HREF="http://www.staticfreesoft.com">Static Free Software</A> at
<A HREF="http://www.staticfreesoft.com/electricJMF-8.04.jar">www.staticfreesoft.com/electricJMF-8.04.jar</A>.
</LI>
<LI><B>Russian User's Manual</B>
An earlier version of the user's manual (8.02) has been translated into Russian.
This manual is available from <A HREF="http://www.staticfreesoft.com">Static Free Software</A> at
<A HREF="http://www.staticfreesoft.com/electricRussianManual-8.04.jar">www.staticfreesoft.com/electricRussianManual-8.04.jar</A>.
</LI>
</UL>
<P>
To attach a plugin, it must be in the CLASSPATH.
The simplest way to do that is to invoked Electric from the command line, and specify the classpath.
For example, to add the beanshell (a file named "bsh-2.0b1.jar"), type:
<CENTER><CODE>java -classpath electric.jar:bsh-2.0b1.jar com.sun.electric.Launcher</CODE></CENTER>
<P>
On Windows, you must use the ";" to separate jar files,
and you might also have to quote the collection since ";" separates commands:
<CENTER><CODE>java -classpath "electric.jar;bsh-2.0b1.jar" com.sun.electric.Launcher</CODE></CENTER>
<P>
Note that you must explicitly mention the main Electric class (com.sun.electric.Launcher)
when using plug-ins since all of the jar files are grouped together as the "classpath".
<P>
<!-- PAGE BREAK --><A NAME="chap01-06"></A>
<CENTER><FONT SIZE=6><B>Chapter 1: Introduction</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap01-05.html#chap01-05.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>1-6: Fundamental Concepts</H2></CENTER></TD>
<TD><CENTER><A HREF="chap01-07.html#chap01-07.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<U>MOST CAD SYSTEMS</U> use two methods to do circuit design: <I>connectivity</I>
and <I>geometry</I>.
<UL>
<LI>The <B>connectivity</B> approach is used by every Schematic design system:
you place components and draw connecting wires.
The components remain connected, even when they move.
<LI>The <B>geometry</B> approach is used by most Integrated Circuit (IC) layout systems:
rectangles of "paint" are laid down on different layers to form the masks for chip fabrication.
</UL>
<P>
<U>ELECTRIC IS DIFFERENT</U>
because it uses connectivity for all design, even IC layout. 
This means that you place components (MOS transistors, contacts, etc.) and draw 
wires (metal-2, polysilicon, etc.) to connect them. The screen shows the true 
geometry, but it knows the connectivity too.
<P>
The advantages of connectivity-based IC layout are many:
<UL>
<LI><B>No node extraction.</B>
Node extraction is not a separate, error-prone step. Instead, the connectivity 
is part of the layout description and is instantly available. This speeds up 
all network-oriented operations, including simulation, layout-versus-schematic (LVS),
and electrical 
rules checkers.
<LI><B>No geometry errors.</B>
Complex components are no longer composed of unrelated pieces of geometry that 
can be moved independently. In paint systems, you can accidentally move the 
gate geometry away from a transistor, thus deleting the transistor. In 
Electric, the transistor is a single component, and cannot be accidentally 
destroyed.
<LI><B>More powerful editing.</B>
Browsing the circuit is more powerful because the editor can show the entire 
network whenever part of it is selected. Also, Electric combines the 
connectivity with a layout constraint system to give the editor powerful 
manipulation tools. These tools keep the design well-connected, even as the 
circuit is modified on different levels of hierarchy.
<LI><B>Tools are smarter</B>
when they can use connectivity information. For example, the Design Rule 
checker knows when the layout is connected and uses different spacing rules.
<LI><B>Simpler design process.</B>
When doing schematics and layout at the same time,
 getting a correct LVS
typically involves many steps of design rule cleaning.
This is because node extraction must be done to obtain the connectivity of the IC layout,
and node extractors cannot work when the design rules are bad.
So, each time LVS problems are found, the layout must be fixed and made DRC clean again.
Since Electric can extract connectivity for LVS without having perfect design rules,
the first step is to get the layout and schematics to match.
Then the design rules can be cleaned-up without fear of losing the LVS match.
<LI><B>Common user interface.</B>
One CAD system, with a single user interface, can be used to do both IC layout 
and schematics. Electric tightly integrates the process of drawing separate 
schematics and has an LVS tool to compare them.
</UL>
<P>
<!-- NEED 2in -->
The disadvantages of connectivity-based IC layout are also known:
<UL>
<LI>
<B>It is different</B>
from all the rest and requires retraining. This is true, but many have 
converted and found it worthwhile. Users who are familiar with paint-based IC 
layout systems typically have a harder time learning Electric than those with 
no previous IC design experience.
<LI>
<B>Requires extra work</B>
on the user's part to enter the connectivity as well as the geometry. While 
this may be true in the initial phases of design, it is not true overall. This 
is because the use of connectivity, early in the design, helps the system to 
find problems later on. In addition, Electric has many power tools for 
automatically handling connectivity.
<LI>
<B>Design is not WYSIWYG</B>
(what-you-see-is-what-you-get) because objects that touch on the screen may or 
may not be truly connected. Electric has many tools to ensure that the 
connectivity has been properly constructed.
</UL>
<P>
<TABLE>
<TR>
<TD>
The way that Electric handles all types of circuit design is by viewing it as a 
collection of <I>nodes</I> and <I>arcs</I>, woven into a network. The nodes are 
electrical components such as transistors, contacts, and logic gates. Arcs are 
simply wires that connect two components. <I>Ports</I> are the connection sites 
on nodes where the wires connect.
</TD>
<TD><CENTER><IMG SRC="fig01-01.png" ALT="Figure 1.1"></CENTER>
</TD>
</TR>
</TABLE>
<P>
In the above example, the transistor node on the left has three pieces of geometry on 
different layers: polysilicon, active, and well. This node can be scaled, 
rotated, and otherwise manipulated without concern for specific layer sizes. 
This is because rules for drawing the node have been coded in a <I>technology</I>
,
which describes nodes and arcs in terms of specific layers.
<P>
Because Electric uses nodes and arcs for design, it is important that they be 
used to make all of the relevant connections. Although layout may appear to be 
connected when two components touch, a wire must still be used to indicate the 
connectivity to Electric. This requires a bit more effort when designing a 
circuit, but that effort is paid back in the many ways that Electric 
understands your circuit.
<P>
Besides creating meaningful electrical networks, arcs which form wires in 
Electric can also hold <I>constraints</I>. A constraint helps to control 
geometric changes, for example, the <I>rigid</I>
constraint holds two components in a fixed configuration while the rest of the 
circuit stretches. These constraints propagate through the circuit, even across 
hierarchical levels of design, so that very complex circuits can be 
intelligently manipulated.
<P>
A <I>cell</I> is a collection of these nodes and arcs, forming a circuit 
description. There can be different <I>views</I> of a cell, such as the 
schematic, layout, icon, etc. Also, each view of a cell can have different <I>versions</I>, 
forming a history of design. Multiple views and versions of a cell are organized into
<i>Cell groups</i>.
<P>
For example, a clock cell may consist of a schematic view and a layout view. 
The schematic view may have two versions: 1 (older) and 2 (newer). In such a 
situation, the clock cell group contains 3 cells: the layout view called 
"clock{lay}", the current schematic view called "clock{sch}", and the older 
schematic view called "clock;1{sch}".
<P>
Hierarchy is implemented by placing instances of one cell into another. When 
this is done, the cell that is placed is considered to be lower in the 
hierarchy, and the cell where it is placed is higher. Therefore, the notion of 
going <I>down</I> the hierarchy implies moving into a cell instance, and the 
notion of going <I>up</I> the hierarchy implies popping out to where the cell 
is placed. Note that cell instances are actually nodes, just like the 
primitive transistors and gates. By defining <I>exports</I>
inside of a cell, these become the connection sites, or ports, on instances of 
that cell.
<P>
A collection of cells forms a <I>library</I>, and is treated on disk as a 
single file. Because the entire library is handled as a single entity, it can 
contain a complete hierarchy of cells. Any cell in the library can contain 
instances of other cells.
A complete circuit can be stored in a single library, or it can be broken up
into multiple libraries.
<!-- PAGE BREAK --><A NAME="chap01-07"></A>
<CENTER><FONT SIZE=6><B>Chapter 1: Introduction</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap01-06.html#chap01-06.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>1-7: The Display</H2></CENTER></TD>
<TD><CENTER><A HREF="chap01-08.html#chap01-08.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Window/Side Bar/On Left -->
<!-- COMMAND Window/Side Bar/On Right -->
The Electric display varies from platform to platform.
The image below shows a typical display with some essential features.
<P>
<CENTER><IMG SRC="fig01-02.png" ALT="Figure 1.2"></CENTER>
<P>
The <I>editing window</I> is the largest window that initially says "No cell in this window"
(this indicates that no circuit is being displayed in that window).
You can create multiple editing windows to see different parts of the design.
<P>
<!-- NEED 2in -->
<TABLE><TR><TD>
The left side of the edit window is the <I>side bar</I> that has 3 tabbed sections,
the <I>components menu</I>, the <I>cell explorer</I>, and the <I>layers</I>.
You can move it to the right side with the
<B>On Right</B> command (of menu <B>Windows / Side Bar</B>)
and move it back with the <B>On Left</B> command.
You can also request that the side bar always be on the right by checking
"Side bar defaults to the right side" in the Display Control Preferences
(in menu <B>File / Preferences...</B>, "Display" section, "Display Control" tab).
<P>
The cell explorer lets you examine the hierarchy, system activity, and error messages
(see <A HREF="chap04-08.html#chap04-08">Section 4-8</A> for more).
<P>
The <I>components menu</I> shows a list of nodes (blue border) and arcs (red border)
that can be used in design.
The arrangement of the entries in the components menu varies with the different technologies.
For MOS technologies, see <A HREF="chap07-04-02.html#chap07-04-02">Section 7-4-2</A>;
for schematics, see <A HREF="chap07-05-01.html#chap07-05-01">Section 7-5-1</A>; and
for artwork, see <A HREF="chap07-06-01.html#chap07-06-01">Section 7-6-1</A>.
<P>
The top three entries in the components menu let you place pure-layer nodes
(see <A HREF="chap06-10-01.html#chap06-10-01">Section 6-10-1</A>),
miscellaneous objects (see <A HREF="chap07-06-03.html#chap07-06-03">Section 7-6-3</A>)
and instances of cells (see <A HREF="chap03-03.html#chap03-03">Section 3-3</A>).
<P>
The layers tab lets you control which parts of the display are visible.
See <A HREF="chap04-05.html#chap04-05">Section 4-5</A> for more on layer visibility.
<P>
Below the edit window is the <I>messages window</I>, which is used for all textual communication.
<P>
Above the edit windows is a <I>pulldown menu</I> along the top with command options.
On some operating systems, the pulldown menu is part of the edit window, and on others it is separate.
Below the pulldown menu is a <I>tool bar</I> which has buttons for common functions.
</TD><TD><CENTER><IMG SRC="fig01-33.png" ALT="Figure 1.33"></CENTER></TD></TR></TABLE>
<P>
Finally, the <I>status area</I> gives useful information about the design state.
It appears along the bottom of the editing window or (in this example)
at the bottom of the screen.
The status area shows cursor coordinates, and can show global coordinates when traversing
the hierarchy (see <A HREF="chap04-03.html#chap04-03">Section 4-3</A>).
<!-- PAGE BREAK --><A NAME="chap01-08"></A>
<CENTER><FONT SIZE=6><B>Chapter 1: Introduction</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap01-07.html#chap01-07.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>1-8: The Mouse</H2></CENTER></TD>
<TD><CENTER><A HREF="chap01-09.html#chap01-09.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
Electric makes use of only two mouse buttons: left and right.
On systems with three-button mice, the middle button is not used.
On Macintosh systems with only one button, the right button is obtained
by holding the Command key when clicking.
<P>
<center>
<table border=1>
<tr>
<th>Modifier</th><th>Button</th><th>Action</th></tr>
<tr>
<td>&nbsp;</td><td>Left Mouse Click</td><td>Select</td></tr>
<tr>
<td>&nbsp;</td><td>Left Mouse Drag</td><td>Move selected objects</td></tr>
<tr>
<td>&nbsp;</td><td>Left Mouse Double Click</td><td>Get Info</td></tr>
<tr>
<td>CTRL</td><td>Left Mouse Click</td><td>Cycle through selected objects</td></tr>
<tr><td>SHIFT</td><td>Left Mouse Click</td><td>Invert selection</td></tr>
<tr><td>CTRL + SHIFT</td><td>Left Mouse Click</td><td>Cycle through objects to Invert</td></tr>
<tr>
<td>&nbsp;</td><td>Right Mouse Click</td><td>Draw or Connect Wire</td></tr>
<tr>
<td>SHIFT</td><td>Right Mouse Click</td><td>Zoom Out</td></tr>
<tr>
<td>SHIFT</td><td>Right Mouse Drag</td><td>Zoom In</td></tr>
<tr>
<td>CTRL + SHIFT</td><td>Right Mouse Drag</td><td>Draw Box</td></tr>
<tr>
<td>&nbsp;</td><td>Wheel Mouse Up/Down</td><td>Scroll Up/Down</td></tr>
<tr>
<td>SHIFT</td><td>Wheel Mouse Up/Down</td><td>Scroll Right/Left</td></tr>
</table>
</center>
<P>
By combining special keystrokes with the mouse functions, advanced
layout operations can be done:
<UL>
<LI><b>Switch Wiring Targets</b> Hit <i>Space</i> while holding the
    Right mouse button to switch between possible wiring targets under the mouse.
</LI>
<LI><b>Switch Layers</b> Hit a number between <i>1-6</i> to switch
    layout layers. Additionally, if you have a port highlighted that can
    connect to the new layer, a contact cut will be created at that point and connected
    to the port.
</LI>
<LI><B>Abort</B> Type <I>ESCAPE</I> to abort the current operation.</LI>
</UL>
<!-- PAGE BREAK --><A NAME="chap01-09"></A>
<CENTER><FONT SIZE=6><B>Chapter 1: Introduction</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap01-08.html#chap01-08.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>1-9: The Keyboard</H2></CENTER></TD>
<TD><CENTER><A HREF="chap01-10-01.html#chap01-10-01.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- PREFERENCE General/Key Bindings -->
<!-- COMMAND Help/Show Key Bindings -->
<TABLE><TR><TD>
Many common commands can be invoked by typing "quick keys" for them.
These quick keys are shown in the pulldown menus next to the item.
For example, the <B>New Cell...</B> command (in menu <B>Cell</B>) has the quick key "Control-N".
On the Macintosh, the menu shows "<IMG SRC="iconcommand.png" ALT="CMD-">N",
indicating that you must hold the command key while typing the "N";
on Windows and UNIX systems, the menu shows "Ctrl-N",
indicating that you must hold the Control key while typing "N".
There are also unshifted quick keys (for example,
the letter "n" runs the <B>Place Cell Instance</B> command).
</TD><TD><CENTER><IMG SRC="fig01-16.png" ALT="Figure 1.16"></CENTER></TD></TR></TABLE>
<P>
To change the bindings of quick keys,
use the Key Bindings Preferences (in menu <B>File / Preferences...</B>, "General" section, "Key Bindings" tab).
The dialog shows the hierarchical structure of the pulldown menus on the top,
and lets you add or remove key bindings in the bottom area.
<P>
You can remove a quick key binding with the "Remove" button,
and you can add a quick key binding with the "Add" button.
The "Reset" button restores default quick key bindings.
Change key bindings with caution, because it customizes your user interface,
making it more difficult for other users to work at your computer.
<P>
You can get to EVERY menu command with key sequences.
The keys to use are underlined in the menus.
For example, the <B>File</B> menu has the "F" underlined, and the <B>Print...</B>
command of that menu has the "P" underlined.
This means that you can hold the Alt key and type "FP" to issue the print command.
<P>
Here are the current key bindings (use the <B>Show Key Bindings</B> command in menu <B>Help</B> to see the current set):
<P>
<CENTER><TABLE BORDER=1>
<TR><TD ALIGN=CENTER WIDTH="10%">Ctrl</TD><TD WIDTH="40%">&nbsp;</TD><TD ALIGN=CENTER WIDTH="10%">Plain</TD><TD WIDTH="40%">&nbsp;</TD></TR>
<TR><TD ALIGN=CENTER>A</TD><TD>Select All (<A HREF="chap02-01-01.html#chap02-01-01">see 2-1-1</A>)</TD>
    <TD ALIGN=CENTER>a</TD><TD>Add Signal to Waveform Window (<A HREF="chap04-12-01.html#chap04-12-01">see 4-12-1</A>)</TD></TR>
<TR><TD ALIGN=CENTER>B</TD><TD>Size Interactively (<A HREF="chap02-05-01.html#chap02-05-01">see 2-5-1</A>)</TD>
    <TD ALIGN=CENTER>b</TD><TD>&nbsp;</TD></TR>
<TR><TD ALIGN=CENTER>C</TD><TD>Copy (<A HREF="chap06-01.html#chap06-01">see 6-1</A>)</TD>
    <TD ALIGN=CENTER>c</TD><TD>Change (<A HREF="chap06-06.html#chap06-06">see 6-6</A>)</TD></TR>
<TR><TD ALIGN=CENTER>D</TD><TD>Down Hierarchy (<A HREF="chap03-05.html#chap03-05">see 3-5</A>)</TD>
    <TD ALIGN=CENTER>d</TD><TD>Down Hierarchy In-place (<A HREF="chap03-05.html#chap03-05">see 3-5</A>)</TD></TR>
<TR><TD ALIGN=CENTER>E</TD><TD>Create Export (<A HREF="chap03-06-01.html#chap03-06-01">see 3-6-1</A>)</TD>
    <TD ALIGN=CENTER>e</TD><TD>&nbsp;</TD></TR>
<TR><TD ALIGN=CENTER>F</TD><TD>Focus on Highlighted (<A HREF="chap04-04-01.html#chap04-04-01">see 4-4-1</A>)</TD>
    <TD ALIGN=CENTER>f</TD><TD>Full Unit Movement (<A HREF="chap02-04-01.html#chap02-04-01">see 2-4-1</A>)</TD></TR>
<TR><TD ALIGN=CENTER>G</TD><TD>Toggle Grid (<A HREF="chap04-07-01.html#chap04-07-01">see 4-7-1</A>)</TD>
    <TD ALIGN=CENTER>g</TD><TD>Set Signal Low (<A HREF="chap04-12-01.html#chap04-12-01">see 4-12-1</A>)</TD></TR>
<TR><TD ALIGN=CENTER>H</TD><TD>&nbsp;</TD>
    <TD ALIGN=CENTER>h</TD><TD>Half Unit Movement (<A HREF="chap02-04-01.html#chap02-04-01">see 2-4-1</A>)</TD></TR>
<TR><TD ALIGN=CENTER>I</TD><TD>Object Properties (<A HREF="chap02-04-02.html#chap02-04-02">see 2-4-2</A>)</TD>
    <TD ALIGN=CENTER>i</TD><TD>&nbsp;</TD></TR>
<TR><TD ALIGN=CENTER>J</TD><TD>Rotate 90 Counterclockwise (<A HREF="chap02-06.html#chap02-06">see 2-6</A>)</TD>
    <TD ALIGN=CENTER>j</TD><TD>&nbsp;</TD></TR>
<TR><TD ALIGN=CENTER>K</TD><TD>Show Network (<A HREF="chap06-09-01.html#chap06-09-01">see 6-9-1</A>)</TD>
    <TD ALIGN=CENTER>k</TD><TD>&nbsp;</TD></TR>
<TR><TD ALIGN=CENTER>L</TD><TD>Find Text (<A HREF="chap04-10.html#chap04-10">see 4-10</A>)</TD>
    <TD ALIGN=CENTER>l</TD><TD>&nbsp;</TD></TR>
<TR><TD ALIGN=CENTER>M</TD><TD>Duplicate (<A HREF="chap06-01.html#chap06-01">see 6-1</A>)</TD>
    <TD ALIGN=CENTER>m</TD><TD>Measure Mode (<A HREF="chap04-07-04.html#chap04-07-04">see 4-7-4</A>)</TD></TR>
<TR><TD ALIGN=CENTER>N</TD><TD>New Cell (<A HREF="chap03-02.html#chap03-02">see 3-2</A>)</TD>
    <TD ALIGN=CENTER>n</TD><TD>Place Cell Instance (<A HREF="chap03-03.html#chap03-03">see 3-3</A>)</TD></TR>
<TR><TD ALIGN=CENTER>O</TD><TD>Open Library (<A HREF="chap03-09-02.html#chap03-09-02">see 3-9-2</A>)</TD>
    <TD ALIGN=CENTER>o</TD><TD>Overlay Signal in Waveform Window (<A HREF="chap04-12-02.html#chap04-12-02">see 4-12-2</A>)</TD></TR>
<TR><TD ALIGN=CENTER>P</TD><TD>Peek (<A HREF="chap03-04.html#chap03-04">see 3-4</A>)</TD>
    <TD ALIGN=CENTER>p</TD><TD>Pan Mode (<A HREF="chap04-04-02.html#chap04-04-02">see 4-4-2</A>)</TD></TR>
<TR><TD ALIGN=CENTER>Q</TD><TD>Quit (<A HREF="chap01-10-09.html#chap01-10-09">see 1-10-9</A>)</TD>
    <TD ALIGN=CENTER>q</TD><TD>Cycle through windows (<A HREF="chap04-03.html#chap04-03">see 4-3</A>)</TD></TR>
<TR><TD ALIGN=CENTER>R</TD><TD>&nbsp;</TD>
    <TD ALIGN=CENTER>r</TD><TD>Remove Signal from Waveform Window (<A HREF="chap04-12-02.html#chap04-12-02">see 4-12-2</A>)</TD></TR>
<TR><TD ALIGN=CENTER>S</TD><TD>Save All Libraries (<A HREF="chap03-09-03.html#chap03-09-03">see 3-9-3</A>)</TD>
    <TD ALIGN=CENTER>s</TD><TD>Select Mode (<A HREF="chap02-01-01.html#chap02-01-01">see 2-1-1</A>)</TD></TR>
<TR><TD ALIGN=CENTER>T</TD><TD>Toggle Negation (<A HREF="chap05-04-02.html#chap05-04-02">see 5-4-2</A>)</TD>
    <TD ALIGN=CENTER>t</TD><TD>Place Annotation Text (<A HREF="chap02-02-01.html#chap02-02-01">see 2-2-1</A>)</TD></TR>
<TR><TD ALIGN=CENTER>U</TD><TD>Up Hierarchy (<A HREF="chap03-05.html#chap03-05">see 3-5</A>)</TD>
    <TD ALIGN=CENTER>u</TD><TD>&nbsp;</TD></TR>
<TR><TD ALIGN=CENTER>V</TD><TD>Paste (<A HREF="chap06-01.html#chap06-01">see 6-1</A>)</TD>
    <TD ALIGN=CENTER>v</TD><TD>Set Signal High (<A HREF="chap04-12-01.html#chap04-12-01">see 4-12-1</A>)</TD></TR>
<TR><TD ALIGN=CENTER>W</TD><TD>Close Window (<A HREF="chap04-03.html#chap04-03">see 4-3</A>)</TD>
    <TD ALIGN=CENTER>w</TD><TD>&nbsp;</TD></TR>
<TR><TD ALIGN=CENTER>X</TD><TD>Cut (<A HREF="chap06-01.html#chap06-01">see 6-1</A>)</TD>
    <TD ALIGN=CENTER>x</TD><TD>Set Signal undefined (<A HREF="chap04-12-01.html#chap04-12-01">see 4-12-1</A>)</TD></TR>
<TR><TD ALIGN=CENTER>Y</TD><TD>Redo (<A HREF="chap06-07.html#chap06-07">see 6-7</A>)</TD>
    <TD ALIGN=CENTER>y</TD><TD>Outline Edit Mode (<A HREF="chap06-10-02.html#chap06-10-02">see 6-10-2</A>)</TD></TR>
<TR><TD ALIGN=CENTER>Z</TD><TD>Undo (<A HREF="chap06-07.html#chap06-07">see 6-7</A>)</TD>
    <TD ALIGN=CENTER>z</TD><TD>Zoom Mode (<A HREF="chap04-04-01.html#chap04-04-01">see 4-4-1</A>)</TD></TR>
</TABLE></CENTER>
<P>
<!-- NEED 3in -->
<CENTER><TABLE BORDER=1>
<TR><TD ALIGN=CENTER WIDTH="10%">Ctrl</TD><TD WIDTH="40%">&nbsp;</TD><TD ALIGN=CENTER WIDTH="10%">Plain</TD><TD WIDTH="40%">&nbsp;</TD></TR>
<TR><TD ALIGN=CENTER>0</TD><TD>Zoom Out (<A HREF="chap04-04-01.html#chap04-04-01">see 4-4-1</A>)</TD>
    <TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
<TR><TD ALIGN=CENTER>1</TD><TD>&nbsp;</TD>
    <TD ALIGN=CENTER>F1</TD><TD>Mimic Stitch (<A HREF="chap09-06-03.html#chap09-06-03">see 9-6-3</A>)</TD></TR>
<TR><TD ALIGN=CENTER>2</TD><TD>Pan Down (<A HREF="chap04-04-02.html#chap04-04-02">see 4-4-2</A>)</TD>
    <TD ALIGN=CENTER>F2</TD><TD>Auto Stitch (<A HREF="chap09-06-02.html#chap09-06-02">see 9-6-2</A>)</TD></TR>
<TR><TD ALIGN=CENTER>3</TD><TD>&nbsp;</TD>
    <TD ALIGN=CENTER>F3</TD><TD>&nbsp;</TD></TR>
<TR><TD ALIGN=CENTER>4</TD><TD>Pan Left (<A HREF="chap04-04-02.html#chap04-04-02">see 4-4-2</A>)</TD>
    <TD ALIGN=CENTER>F4</TD><TD>&nbsp;</TD></TR>
<TR><TD ALIGN=CENTER>5</TD><TD>Center cursor (<A HREF="chap04-04-02.html#chap04-04-02">see 4-4-2</A>)</TD>
    <TD ALIGN=CENTER>F5</TD><TD>Run DRC (<A HREF="chap09-02-01.html#chap09-02-01">see 9-2-1</A>)</TD></TR>
<TR><TD ALIGN=CENTER>6</TD><TD>Pan Right (<A HREF="chap04-04-02.html#chap04-04-02">see 4-4-2</A>)</TD>
    <TD ALIGN=CENTER>F6</TD><TD>Array (<A HREF="chap06-04.html#chap06-04">see 6-4</A>)</TD></TR>
<TR><TD ALIGN=CENTER>7</TD><TD>Zoom In (<A HREF="chap04-04-01.html#chap04-04-01">see 4-4-1</A>)</TD>
    <TD ALIGN=CENTER>F7</TD><TD>&nbsp;</TD></TR>
<TR><TD ALIGN=CENTER>8</TD><TD>Pan Up (<A HREF="chap04-04-02.html#chap04-04-02">see 4-4-2</A>)</TD>
    <TD ALIGN=CENTER>F8</TD><TD>&nbsp;</TD></TR>
<TR><TD ALIGN=CENTER>9</TD><TD>Fill Window (<A HREF="chap04-04-01.html#chap04-04-01">see 4-4-1</A>)</TD>
    <TD ALIGN=CENTER>F9</TD><TD>Tile Windows Vertically (<A HREF="chap04-03.html#chap04-03">see 4-3</A>)</TD></TR>
<TR><TD ALIGN=CENTER>&nbsp;</TD><TD>&nbsp;</TD>
    <TD ALIGN=CENTER>F10</TD><TD>&nbsp;</TD></TR>
<TR><TD ALIGN=CENTER>&nbsp;</TD><TD>&nbsp;</TD>
    <TD ALIGN=CENTER>F11</TD><TD>&nbsp;</TD></TR>
<TR><TD ALIGN=CENTER>&nbsp;</TD><TD>&nbsp;</TD>
    <TD ALIGN=CENTER>F12</TD><TD>&nbsp;</TD></TR>
<TR><TD ALIGN=CENTER>=</TD><TD>Increase all Text Size (<A HREF="chap06-08-04.html#chap06-08-04">see 6-8-4</A>)</TD>
    <TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
<TR><TD ALIGN=CENTER>-</TD><TD>Decrease all Text Size (<A HREF="chap06-08-04.html#chap06-08-04">see 6-8-4</A>)</TD>
    <TD>&nbsp;</TD><TD>&nbsp;</TD></TR>
<TR><TD>&nbsp;</TD><TD>&nbsp;</TD>
    <TD ALIGN=CENTER>DEL</TD><TD>Erase (<A HREF="chap02-03.html#chap02-03">see 2-3</A>)</TD></TR>
<TR><TD>&nbsp;</TD><TD>&nbsp;</TD>
    <TD ALIGN=CENTER>&amp;</TD><TD>Repeat Last Action (<A HREF="chap06-07.html#chap06-07">see 6-7</A>)</TD></TR>
<TR><TD>&nbsp;</TD><TD>&nbsp;</TD>
    <TD ALIGN=CENTER>&gt;</TD><TD>Show Next Error (<A HREF="chap09-01.html#chap09-01">see 9-1</A>)</TD></TR>
<TR><TD>&nbsp;</TD><TD>&nbsp;</TD>
    <TD ALIGN=CENTER>&lt;</TD><TD>Show Previous Error (<A HREF="chap09-01.html#chap09-01">see 9-1</A>)</TD></TR>
</TABLE></CENTER>
		
<!-- PAGE BREAK --><A NAME="chap01-10-01"></A>
<CENTER><FONT SIZE=6><B>Chapter 1: Introduction</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap01-09.html#chap01-09.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>1-10-1: IC Layout Tutorial: Make a Cell</H2></CENTER></TD>
<TD><CENTER><A HREF="chap01-10-02.html#chap01-10-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
This section takes you through the design of some simple IC layout.
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig01-03.png" ALT="Figure 1.3"></CENTER></TD><TD>
Before you can place any IC layout, the editing window must have a cell in it.
Use the <B>New Cell...</B> command (in menu <B>Cell</B>).
This will show a dialog that lets you type a new cell name.
Type the name ("MyCircuit" is used here) and click OK.
The editing window will no longer have the "No cell in this window" message,
and circuitry may now be created.
</TD></TR></TABLE>
<P>
<TABLE><TR><TD>
After creating a cell, look at the cell explorer (in the status bar on the left side of the edit window).
Under the "LIBRARIES" icon, you will see the list of libraries (currently only one called "noname").
If you open that library's icon, you will see the cells in the library (currently only "MyCircuit").
</TD><TD><CENTER><IMG SRC="fig01-04.png" ALT="Figure 1.4"></CENTER></TD></TR></TABLE>
<H3>1-10-2: IC Layout Tutorial: Create a Node</H3>
Layout is placed by selecting nodes from the side bar's components menu,
and then wiring them together.
This example shows two nodes that have been created.
This was done by clicking on the appropriate component menu entry,
and then clicking again in the editing window to place that node.
After clicking on the component menu entry,
the cursor changes to a pointing hand to indicate that you must select a location for the node.
When placing the node, if you press the button and do not release it,
you will see an outline of the new node,
which you can drag to its proper location before releasing the button.
<P>
<TABLE><TR><TD>
<BR><BR>
In this example, the top node is called Metal-1-Polysilicon-1-Con
(a contact between metal layer 1 and polysilicon layer 1,
found in the fifth entry from the bottom in the right column of the component menu).
The node on the bottom is called N-Transistor
(lower-right entry of the component menu).
Both of these nodes are from the MOSIS CMOS technology
(which is listed as "mocmos" in the status area).
<BR><BR>
</TD><TD><CENTER><IMG SRC="fig01-05.png" ALT="Figure 1.5"></CENTER></TD></TR></TABLE>
<H3>1-10-3: IC Layout Tutorial: Highlighting</H3>
<TABLE><TR>
<TD><CENTER><IMG SRC="fig01-06.png" ALT="Figure 1.6"></CENTER></TD><TD>
A <I>highlighted</I> node has two selected areas: the node and a port on that node.
Note that the transistor is highlighted in the previous example,
and the contact is highlighted in the example here.
The larger selected area covers the node, and it surrounds the "important" part
(for example, on the Transistor, it covers only the overlap area,
excluding the tabs of active and gate on the four sides).
The smaller selected area is the currently highlighted port
(there are four possible ports on the transistor, but only one on the contact).
</TD></TR></TABLE>
<P>
To highlight a node, use the
<I><A HREF="chap01-08.html#chap01-08">left</A></I> button.
The node, and the closest port to the cursor, will be selected.
After highlighting,
you can hold the mouse button down and drag the highlighted object to a new location.
If nothing is under the cursor when the selection button is pushed,
you may drag the cursor while the button remains down to define an area in which all objects will be selected.
<P>
Another way to affect what is highlighted is to use the
<I><A HREF="chap01-08.html#chap01-08">shift-left</A></I> button.
This button causes object highlighting to be reversed
(highlighted objects become unhighlighted and unhighlighted objects are highlighted).
<P>
The shape of the highlighted port is important.
Ports are the sites of arc connections,
so the end point of the arc must fall inside this port area.
Ports may be rectangles, lines, single points (displayed as a "+"),
or any arbitrary shape.
For example, when the active tabs of a transistor are highlighted,
the port is shown as a line.
<!-- NEED 3in -->
<H3>1-10-4: IC Layout Tutorial: Make an Arc</H3>
<TABLE><TR><TD>
To wire a component, select it, move the cursor away from the component,
and use the <I><A HREF="chap01-08.html#chap01-08">right</A></I> button.
A wire will be created that runs from the component to the location of the cursor.
Note that the wire is a fixed-angle wire which means that it will be drawn along a horizontal or vertical path from the originating node.
</TD><TD><CENTER><IMG SRC="fig01-07.png" ALT="Figure 1.7"></CENTER></TD></TR></TABLE>
<P>
To see where the wire will end,
click but do not release the button and drag the outline of the wire's terminating node
(a pin) until it is in the proper location.
It is highly recommended that you do all wiring operations this way, because wiring is quite complex and can follow many different paths.
<P>
Once a wire has been created, the other end is highlighted (see above).
This is the highlighting of a <I>pin</I> node that was created to hold the other end of the arc.
Because it is a node,
the <I><A HREF="chap01-08.html#chap01-08">right</A></I> button can be used again to continue the wire to a new location.
If, during wiring, the cursor is dragged on top of an existing component,
the wire will attach to that component.
<P>
To remove wires or components, you can issue the <B>Undo</B> command (in menu <B>Edit</B>) to remove the last created object.
Alternatively, you can select the component and use the <B>Selected</B> command (in menu <B>Edit / Erase</B>).
<H3>1-10-5: IC Layout Tutorial: Constraints</H3>
Once components are wired, moving them will also move their connecting wires.
Notice that the wires stretch and move to maintain the connections.
What actually happens is that the programmable constraint system follows instructions stored on the wires,
and reacts to node changes.
The default wire is <I>fixed-angle</I> and <I>slidable</I>,
so the letters "FS" are shown when the wire is highlighted.
<P>
<CENTER><IMG SRC="fig01-29.png" ALT="Figure 1.29"></CENTER>
<P>
Select a wire and issue the <B>Rigid</B> command (in menu <B>Edit / Arc</B>).
The letters change to "R" on the arc and the wire no longer stretches when nodes move.
Find another arc and issue the <B>Not Fixed-angle</B> command.
Now observe the effects of an unconstrained arc as its neighboring nodes move.
These arc constraints can be reversed with the <B>Rigid</B> and <B>Fixed-angle</B> commands.
See <A HREF="chap05-02-01.html#chap05-02-01">Section 5-2-1</A> for
more on these constraints.
<!-- NEED 4in -->
<H3>1-10-6: IC Layout Tutorial: Adding Contacts to a Transistor</H3>
<TABLE><TR><TD>
One very common structure in IC layout is the transistor-contact combination.
Here you will see the proper way to construct it.
<P>
<TABLE><TR>
<TD><CENTER><IMG SRC="fig01-43.png" ALT="Figure 1.43"></CENTER></TD><TD>
<UL>
<LI>Start with a transistor (in this example on the left, an n-transistor).</LI>
<LI>Rotate the transistor so that the gate is vertical.
To do this, use the <B>90 Degree Counterclockwise</B> command
(in menu <B>Edit / Rotate</B>), or just type Control-J.</LI>
<LI>Note that the active gate on the left is highlighted (it is just a line).</LI>
</UL>
</TD><TD><CENTER><IMG SRC="fig01-44.png" ALT="Figure 1.44"></CENTER></TD></TR></TABLE>
<P>
<TABLE><TR>
<TD><CENTER><IMG SRC="fig01-54.png" ALT="Figure 1.54"></CENTER></TD><TD>
Although the default transistor is 2x3 in size, most people want them to be wider.
For the purposes of this example, make the transistor be 12 wide.
To do this, select the node and use the <B>Object Properties</B> command
(in menu <B>Edit / Properties</B>).
Two easier ways to see the objects properties are to double-click on the node,
or select it and type Control-I.
When the "node Properties" dialog appears, make the width 12 and click OK.
</TD><TD><CENTER><IMG SRC="fig01-45.png" ALT="Figure 1.45"></CENTER></TD></TR></TABLE>
<TABLE><TR>
<TD><CENTER><IMG SRC="fig01-46.png" ALT="Figure 1.46"></CENTER></TD><TD>
Next we need a contact.
Choose a "Metal-1-N-Active-Con" to connect the N-Active to Metal-1.
Make its size be 5x12 instead of the default 5x5.
Notice that contacts are "smart" about the cuts, and add them to fill the node.
Note also that the port (the inner rectangle) grows with the node.
</TD><TD><CENTER><IMG SRC="fig01-47.png" ALT="Figure 1.47"></CENTER></TD></TR></TABLE>
<P>
Designers who have used polygon-based systems will be tempted to move these two nodes
together so that they form the desired structure:
<P>
<CENTER><TABLE><TR><TD><CENTER><IMG SRC="fig01-48.png" ALT="Figure 1.48"></CENTER></TD>
<TD><CENTER><FONT SIZE="7">THIS IS WRONG!</FONT></CENTER><BR>
Electric is a connectivity-oriented system, and insists that these components be wired together.
</TD></TR></TABLE></CENTER>
<P>
The easiest way to connect the contact to the transistor is to spread the nodes apart,
wire them, and then push them back together.
<P>
<TABLE><TR>
<TD><CENTER><IMG SRC="fig01-49.png" ALT="Figure 1.49"></CENTER></TD><TD>
These two figures show the transistor and contact nodes, spread apart, and connected by an arc.
</TD><TD><CENTER><IMG SRC="fig01-50.png" ALT="Figure 1.50"></CENTER></TD></TR></TABLE>
On the left, the nodes and their ports; on the right, the arc.
<P>
The arc was made by selecting one node,
clicking and HOLDING the <I><A HREF="chap01-08.html#chap01-08">right</A></I> button,
dragging the mouse over the other component, and then releasing the button
to create the arc.
<P>
Notice that the ends of an arc are centered and indented from the edge by half of the arc's width
(the ends are illustrated by "+" on the right).
The ends of an arc must sit inside of the ports.
If an arc moves such that its ends are still in the ports, then the nodes don't have to move.
See <A HREF="chap05-04-03.html#chap05-04-03">Section 5-4-3</A> for more
arc arc geometry.
<P>
<CENTER><TABLE><TR><TD><CENTER><IMG SRC="fig01-51.png" ALT="Figure 1.51"></CENTER></TD>
<TD><CENTER><FONT SIZE="7">THIS IS RIGHT!</FONT></CENTER><BR>
Now that the nodes are wired together, bring the contact in close.
Notice that the arc has shrunk down to a square, with the endpoints very close together.
If you make the arc rigid, the two nodes will be held together in this configuration.
To do this, use the <B>Rigid</B> command (in menu <B>Edit / Arc</B>).
As shown here, the "R" on the selected arc tells you that it has been made rigid.
See <A HREF="chap05-02-01.html#chap05-02-01">Section 5-2-1</A> for more
arc constraints.
</TD></TR></TABLE></CENTER>
<P>
Another common situation in making contacts meet transistors is when the sizes are not the same.
In this example, the contact is the default size.
<P>
<TABLE><TR>
<TD><CENTER><IMG SRC="fig01-52.png" ALT="Figure 1.52"></CENTER></TD><TD>
The arc runs from the center of the contact's port to the top of the transistor's port.
The finished layout is shown on the right.
</TD><TD><CENTER><IMG SRC="fig01-53.png" ALT="Figure 1.53"></CENTER></TD></TR></TABLE>
<P>
Here are some points about connecting nodes with arcs:
<UL>
<LI>By doing it, the system understands your circuit connectivity and uses
it in many other places.</LI>
<LI>The design-rule checker will flag objects that touch but are not connected.</LI>
<LI>After you create one of these structures, it can be copied-and-pasted many times.
Use the <B>Copy</B> and <B>Paste</B> commands (in menu <B>Edit</B>).
Note that when pasting, you must not have anything selected, or else it tries
to replace the selected objects with the copied objects.
Therefore, to duplicate some circuitry, select it, <B>Copy</B>, click away to deselect,
and then <B>Paste</B>.
<LI>If you want to rotate or mirror these structures,
select all of it (both nodes and the arc) and use the <B>Rotate</B> or
<B>Mirror</B> commands (in menu <B>Edit</B>).</LI>
</UL>
<!-- NEED 4in -->
<H3>1-10-7: IC Layout Tutorial: Hierarchy</H3>
<TABLE><TR><TD>
Electric supports hierarchy by allowing you to place instances of another cell.
These instances are nodes, just like the simpler ones in the component menu.
To see hierarchy in action,
create a new cell with the <B>New Cell...</B> command (in menu <B>Cell</B>).
Make sure the "Make new window" option is checked in the dialog.
Then type the new cell name ("Higher" is used in the example here).
</TD><TD><CENTER><IMG SRC="fig01-08.png" ALT="Figure 1.8"></CENTER></TD></TR></TABLE>
<P>
A new (empty) cell will appear in a separate window.
Try creating a few simple nodes in this new window (place a contact or two).
<TABLE><TR>
<TD><CENTER><IMG SRC="fig01-10.png" ALT="Figure 1.9"></CENTER></TD><TD>
Now place an instance of the other cell by using the <B>Place Cell Instance...</B> command (in menu <B>Cell</B>).
You can also click the "Cell" entry in the component menu.
You will be given a list of cells to create: select the one that is in the OTHER window
(the one called "MyCircuit" in this example).
Then click in the newer cell to create the instance.
</TD></TR></TABLE>
<P>
<TABLE><TR><TD>
The box that appears is a node in the same sense as the contacts and transistors:
it can be moved, wired, and so on.
In addition, because the node contains subcomponents,
you can see its contents by selecting it and using the
<B>One Level Down</B> command (in menu <B>Cell / Expand Cell Instances</B>,
or click on the opened-eye button in the tool bar).
Note that if the objects in a cell no longer fit in the display window,
use the <B>Fill Display</B> command (in menu <B>Window</B>).
</TD><TD><CENTER><IMG SRC="fig01-11.png" ALT="Figure 1.11"></CENTER></TD></TR></TABLE>
<H3>1-10-8: IC Layout Tutorial: Exports</H3>
Before you can attach wires to the instance node,
there must be connection sites, or <I>ports</I> on that node.
Primitive nodes such as contacts and transistors already have their ports established,
but you must explicitly create ports for cell instances.
<P>
<TABLE><TR>
<TD><CENTER><IMG SRC="fig01-12.png" ALT="Figure 1.12"></CENTER></TD><TD>
This is done by creating <I>exports</I> inside the cell definition.
Move the cursor to the window with the lower-level cell
("MyCircuit") and select the contact node.
Then issue the <B>Create Export...</B> command (in menu <B>Export</B>).
You will be prompted for an export name and its characteristic
(the characteristics can be ignored for now).
</TD></TR></TABLE>
<P>
<TABLE><TR>
<TD><CENTER><IMG SRC="fig01-09.png" ALT="Figure 1.9"></CENTER></TD><TD>
This takes the port on the contact node and exports it to the outside world.
Its name will be visible on the unexpanded instance node in the higher-level cell.
<P>
You can now connect wires to that node in just the same way as you wired the contact.
</TD><TD><CENTER><IMG SRC="fig01-13.png" ALT="Figure 1.13"></CENTER></TD></TR></TABLE>
<H3>1-10-9: IC Layout Tutorial: Final Points</H3>
<!-- COMMAND File/Quit -->
Some final commands that should be mentioned in this introductory example are the <B>Save Library</B>
and the <B>Quit</B> commands which can be found in the <B>File</B> menu.
They do the obvious things.
<!-- PAGE BREAK --><A NAME="chap01-11-01"></A>
<CENTER><FONT SIZE=6><B>Chapter 1: Introduction</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap01-10-09.html#chap01-10-09.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>1-11-1: Schematics Tutorial: Make a Cell</H2></CENTER></TD>
<TD><CENTER><A HREF="chap01-11-02.html#chap01-11-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
This section takes you through the design of some simple schematics.
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig01-32.png" ALT="Figure 1.32"></CENTER></TD><TD>
Before you can place any schematics, the editing window must have a cell in it.
Use the <B>New Cell...</B> command (in menu <B>Cell</B>).
Type the name ("MyCircuit" is used here) and select the "schematic" view.
</TD></TR></TABLE>
<P>
The editing window will no longer have the "No cell in this window" message,
and circuitry may now be created.
Note that the component menu on the left will change to show schematics primitives.
Also, the Schematic technology is now listed in the status area at the bottom
of the screen.
<P>
<TABLE><TR><TD>
After creating a cell, look at the cell explorer (in the status bar on the left side of the edit window).
In the "LIBRARIES" icon, you will see the list of libraries (currently only one called "noname").
If you open that library's icon, you will see the cells in the library (currently only "MyCircuit").
</TD><TD><CENTER><IMG SRC="fig01-26.png" ALT="Figure 1.26"></CENTER></TD></TR></TABLE>
<!-- NEED 3in -->
<H3>1-11-2: Schematics Tutorial: Make a Node</H3>
<TABLE><TR><TD>
Schematic nodes are placed by selecting them from the side bar's components menu (on the left),
and then wiring them together.
This example shows two nodes that have been created.
This was done by clicking on the appropriate component menu entry,
and then clicking again in the editing window to place that node.
</TD><TD><CENTER><IMG SRC="fig01-17.png" ALT="Figure 1.17"></CENTER></TD></TR></TABLE>
<P>
After clicking on the component menu entry,
the cursor changes to a pointing hand to indicate that you must select a location for the node.
When placing the node, if you press the button and do not release it,
you will see an outline of the new node,
which you can drag to its proper location before releasing the button.
<P>
In this example,
the top node is called a Buffer (found on the right side of the component
menu in the third entry from the top).
The node on the bottom is called an And (top entry on the right).
<H3>1-11-3: Schematics Tutorial: Highlighting</H3>
<TABLE><TR>
<TD><CENTER><IMG SRC="fig01-18.png" ALT="Figure 1.18"></CENTER></TD><TD>
A <I>highlighted</I> node has two selected parts: the node and a port on that node.
Note that the And is highlighted in the previous example,
and the Buffer is highlighted in the example here.
The little "+" sign is the currently highlighted port
(there are two possible ports on these nodes, on the input and the output).
</TD></TR></TABLE>
<P>
To highlight a node, use the <I><A HREF="chap01-08.html#chap01-08">left</A></I> button.
The node, and the closest port to the cursor, will be selected.
After highlighting, you can hold the mouse button down and drag the highlighted object to a new location.
If nothing is under the cursor when the selection button is pushed,
you may drag the cursor while the button remains down to define an area in which all objects will be selected.
<P>
Another way to affect what is highlighted is to use the
<I><A HREF="chap01-08.html#chap01-08">shift-left</A></I> button.
This button causes object highlighting to be reversed
(highlighted objects become unhighlighted and unhighlighted objects are highlighted).
<P>
The shape of the highlighted port is important.
Ports are the sites of arc connections,
so the end point of the arc must fall inside this port area.
Ports may be rectangles, lines, single points (displayed as a "+"), or any arbitrary shape.
For example, the entire left side of the And gate is the input port and so its highlighting is a line.
<!-- NEED 3in -->
<H3>1-11-4: Schematics Tutorial: Make an Arc</H3>
<TABLE><TR><TD>
To wire a component, select it, move the cursor away from the component,
and use the <I><A HREF="chap01-08.html#chap01-08">right</A></I> button.
If you click the right button and hold it without releasing,
then you can move around and see where the wire will go when you do release.
</TD><TD><CENTER><IMG SRC="fig01-19.png" ALT="Figure 1.19"></CENTER></TD></TR></TABLE>
<P>
A wire will be created that runs from the component to the location of the cursor.
Note that the wire is a fixed-angle wire which means that it will be drawn along a horizontal, vertical,
or 45-degree path from the originating node.
To see where the wire will end,
click but do not release the button and drag the outline of the wire's terminating node
(a pin) until it is in the proper location.
It is highly recommended that you do all wiring operations this way,
because wiring is quite complex and can follow many different paths.
<P>
Once a wire has been created, the other end is highlighted (see above).
This is the highlighting of a <I>pin</I> node that was created to hold the other end of the arc.
Because it is a node,
the <I><A HREF="chap01-08.html#chap01-08">right</A></I>
button can be used again to continue the wire to a new location.
If, while wiring, the dragged location is over an existing component,
the wire will attach to that component.
<P>
To remove wires or nodes,
you can issue the <B>Undo</B> command (in menu <B>Edit</B>) to remove the last created object.
Alternatively, you can select the component and use the <B>Selected</B> command
(in menu <B>Edit / Erase</B>).
<H3>1-11-5: Schematics Tutorial: Multi-Input gates and Negation</H3>
One aspect of the And, Or, and Xor gates that you will notice is that their left side
(the input side) can accept any number of wires.
To see this in action, place one of these components in the cell.
Then repeatedly select its left side and use the
<I><A HREF="chap01-08.html#chap01-08">right</A></I> button to draw wires out of it.
Each wire will connect at a different location in the input port,
and once the side fills with arcs, it will automatically grow to fit more.
Note that the vertical cursor location along the input side is used to select the position that will be used when a new wire is added.
<P>
<CENTER><IMG SRC="fig01-14.png" ALT="Figure 1.14"></CENTER>
<P>
<TABLE><TR><TD>
To negate an input or output of a digital gate,
select the port or the arc and use the <B>Toggle Port Negation</B> command (in menu <B>Edit / Technology Specific</B>
).
With this facility, you can construct arbitrary gate configurations.
</TD><TD><CENTER><IMG SRC="fig01-15.png" ALT="Figure 1.15"></CENTER></TD></TR></TABLE>
<H3>1-11-6: Schematics Tutorial: Constraints</H3>
Once components are wired, moving them will also move their connecting wires.
Notice that the wires stretch and move to maintain the connections.
What actually happens is that the programmable constraint system follows instructions stored on the
wires, and reacts to component changes.
The default wire is <I>fixed-angle</I>,
so the letter "F" is shown when the wire is highlighted.
<P>
<CENTER><IMG SRC="fig01-30.png" ALT="Figure 1.30"></CENTER>
<P>
Select a wire and issue the <B>Rigid</B> command (in menu <B>Edit / Arc</B>).
The letter changes to "R" on the arc and the wire no longer stretches when components move.
Find another arc and issue the <B>Not Fixed-angle</B> command.
Now observe the effects of an unconstrained arc as its neighboring nodes move.
These arc constraints can be reversed with the <B>Rigid</B> and <B>Fixed-angle</B> commands.
See <A HREF="chap05-02-01.html#chap05-02-01">Section 5-2-1</A> for
more on these constraints.
<H3>1-11-7: Schematics Tutorial: Hierarchy and Icons</H3>
Electric supports hierarchy by allowing you to create icons for a schematic and place them in another cell.
Before creating an icon, all connection points to the schematic should be defined.
<!-- NEED 2in -->
<P>
<TABLE><TR>
<TD><CENTER><IMG SRC="fig01-22.png" ALT="Figure 1.22"></CENTER></TD><TD>
To define connection points for a schematic, you must create <I>exports</I> on the schematic.
To see an example of this, select the output port of the Buffer node and issue the
<B>Create Export...</B> command (in menu <B>Export</B>).
You will be prompted for an export name and its characteristics
(set the characteristics to "output").
</TD></TR></TABLE>
<P>
<TABLE><TR><TD>
<BR><BR><BR>
The output port on the buffer node is now exported to the outside world.
Run a wire from the input side of the And node and export the pin at the end of the wire.
Your circuit should look like this.
<BR><BR><BR>
</TD><TD><CENTER><IMG SRC="fig01-20.png" ALT="Figure 1.20"></CENTER></TD></TR></TABLE>
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig01-21.png" ALT="Figure 1.21"></CENTER></TD><TD>
You can now make an icon for this circuit by using the <B>Make Icon</B> command (in menu <B>View</B>).
The icon will be placed in your circuit (you may have to move it away from the rest of the circuitry).
The result will look like this.
</TD></TR></TABLE>
<P>
<TABLE><TR><TD>
To test this icon in a circuit, create a new cell in which to place instances of the icon.
Use the <B>New Cell...</B> command (in menu <B>Cell</B>).
Type the new cell name ("Higher" is used in the example here) and make sure its view is "schematic".
<P>
A new (empty) cell will appear in a separate window.
Try creating a few simple nodes in this new window (place a gate or two).
</TD><TD><CENTER><IMG SRC="fig01-25.png" ALT="Figure 1.25"></CENTER></TD></TR></TABLE>
<TABLE><TR>
<TD><CENTER><IMG SRC="fig01-28.png" ALT="Figure 1.28"></CENTER></TD><TD>
Now place an instance of the other cell by using the <B>Place Cell Instance...</B> command (in menu <B>Cell</B>).
You can also click the "Cell" entry in the component menu.
You will be given a list of cells to create:
select the one that is in the OTHER window (the one called "MyCircuit{ic}" in this example).
Then click in the newer cell to create the instance.
</TD></TR></TABLE>
<P>
<TABLE><TR><TD>
The icon that appears is a node in the same sense as the Buffer and And gate:
it can be moved, wired, and so on.
In addition, because the node contains subcomponents,
you can see its contents by selecting it and using the
<B>Down Hierarchy</B> command (in menu <B>Cell / Down Hierarchy</B>).
Note that if the objects in a cell no longer fit in the display window,
use the <B>Fill Window</B> command (in menu <B>Window</B>).
</TD><TD><CENTER><IMG SRC="fig01-23.png" ALT="Figure 1.23"></CENTER></TD></TR></TABLE>
<H3>1-11-8: Schematics Tutorial: Final Points</H3>
Some final commands that should be mentioned in this introductory example are the <B>Save Library</B>
and the <B>Quit</B> commands which can be found in the <B>File</B> menu.
They do the obvious things.
<!-- PAGE BREAK --><A NAME="chap01-12-01"></A>
<CENTER><FONT SIZE=6><B>Chapter 1: Introduction</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap01-11-08.html#chap01-11-08.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>1-12-1: Schematics and Layout Tutorial: Introduction</H2></CENTER></TD>
<TD><CENTER><A HREF="chap01-12-02.html#chap01-12-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
This tutorial was originally written by David Harris at Harvey Mudd College
as the first in a set of lab instructions for an undergraduate-level CMOS VLSI design class.
It provides very basic instructions to acclimatize first-time users with Electric.
As such, it is not a full introduction to using Electric, nor does it cover many commonly used commands.
<P>
What this tutorial does cover is:
<UL>
<LI>Basic schematic editing.
You will create a simple "nand" gate.</LI>
<LI>Layout drawing.
You will create the IC layout of the "nand" gate.</LI>
<LI>Hierarchy.
You will assemble the "nand" with an "inverter" to build an "and" gate.</LI>
<LI>Analysis.
You will run the design rule checker on the layout, and will compare the layout with the schematic.</LI>
</UL>
<P>
To begin, load the "mipscells" library
with the <B>MIPS Cells</B> command (in menu <B>Help / Load Built-in Libraries</B>).
This library contains many parts of the MIPS processor that are provided to you.
You will add your new design to the library as you work through the tutorial.
<H3>1-12-2: Schematics and Layout Tutorial: Schematic Entry</H3>
Your first task is to create a schematic for a 2-input NAND gate.
Each design is kept in a <I>cell</I>; for example, your schematic will be in the "nand2{sch}" cell,
while your layout will eventually go in the "nand2{lay}" cell and your AND gate will go in the "and2{sch}" cell.
Use the <B>New Cell</B> command (in menu <B>Cell</B>), or just type Ctrl-N.
Enter "nand2" as the cell name and select "schematic" as the view.
The editing window will now have the title "mipscells:nand2{sch}" indicating the library, cell name, and view.
It is useful to put a label inside a cell, in addition to assigning its given name.
To label your cell, select the "Components" tab of the sidebar (on the left), click on "Misc.", and select "Annotation text".
Move the cursor to the location where you want the label to appear, and click to create the text.
Change the text by double-clicking on it and typing "nand2".
When done typing, click away from the text to exit the in-place editing (the text is now selected with an "X" through it).
Then bring up the full properties dialog for this text with the <B>Object Properties</B> command
(in menu <B>Edit / Properties</B>), or just type Ctrl-I.
Set the "Text Size" to 5 units and click OK.
When your cell is finished, you can move this label to a sensible location.
<P>
Electric defines various technologies for schematics and layout.
To draw transistor-level schematics, you can use the symbols in the Components tab of the side bar.
<P>
<TABLE><TR><TD>
Your goal is to draw a gate like the one shown here.
Turn on the grid to help you align objects.
To do this, use the <B>Toggle Grid</B> command (in menu <B>Window</B>), or just type Ctrl-G.
Click on an nMOS transistor symbol in the Components tab on the left side of the screen.
Then click in your schematic window to place the transistor in the circuit (perform this as two separate clicks, not drag-and-drop).
Repeat until you have two nMOS transistors, two pMOS transistors, the Power symbol,
and the Ground symbol arranged on the page.
</TD><TD><CENTER><IMG SRC="fig01-34.png" ALT="Figure 1.34"></CENTER></TD></TR></TABLE>
<P>
These symbols are <I>nodes</I> in Electric parlance.
You may move the nodes around by clicking and dragging.
The transistors default to a width/length value of 2/2.
Double-click on the pMOS transistor and change its width to 12.
Recall that nMOS transistors are roughly twice as strong as pMOS transistors.
So a single nMOS transistor would only have to be 6 wide.
However, because the nMOS transistors are in series, they should also be 12 wide.
<P>
Now, connect the nodes with wires (called <I>arcs</I> in Electric parlance).
Notice that when you click on a node, the closest <I>port</I> is also selected.
These ports are the sides of arc connections.
Click on a port such as the gate, source, or drain of a transistor.
Right-click, hold the mouse, and drag away from the node.
When you release the mouse, an arc will be created from the original node to the location of the cursor.
A new "pin" node will also be created at the cursor to hold the other end of the arc.
If you right-click and drag over an existing node, then you will connect to it.
If two objects to be connected are not lined up, Electric will create two arcs to join them.
The location of the cursor determines the angle of the bend, so wiggle it to see how the two arcs will run
before releasing the button and creating the connection.
See <A HREF="chap02-02-02.html#chap02-02-02">Section 2-2-2</A> for more on arc creation.
<P>
When the schematic is wired, you will need to create <I>exports</I> which define inputs and outputs of the cell.
From the Components tab, select the "Off-Page" symbol and place it in the circuit.
Connect the tip of the arrow the proper place in the circuit.
To make an export on the other side of the Off-Page, select that port and use the <B>Create Export</B> command
(in menu <B>Export</B>), or just type Ctrl-E.
Name the export "a" and define its characteristic as "input".
Similarly, create Off-Page symbols and exports for "b" and "y".
<P>
Now is a good time to save your library.
Use the <B>Save Library</B> command (in menu <B>File</B>), or just type Ctrl-S.
Get into the habit of saving your library regularly.
Also, learn the keyboard shortcuts for the commands you use frequently.
<H3>1-12-3: Schematics and Layout Tutorial: Layout</H3>
Now that you have a schematic, it is time to draw the layout.
Use the <B>New Cell</B> command (in menu <B>Cell</B>) to bring up the new cell dialog.
Enter "nand2" as the cell name and "layout" as the view.
Notice that the Components change from schematic symbols to layout primitives.
The default technology is "mocmos" (MOSIS CMOS) but can be changed with the pop-up menu at the top of the Components tab.
The "mocmos" technology has many options, such as the number of metal layers.
To see these options, use the <B>Preferences</B> command (in menu <B>File</B>),
and choose the "Technology" tab from the "Technology" section.
In the "MOSIS CMOS" section, set the number of Metal layers to 6.
(This settings is remembered, and you will not have to set it again in future sessions with Electric.)
See <A HREF="chap07-04-02.html#chap07-04-02">Section 7-4-2</A> for more on the MOSIS CMOS technology.
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig01-35.png" ALT="Figure 1.35"></CENTER></TD><TD>
Your goal is to draw a layout like the one shown here.
It is important to choose a consistent layout style so that various cells can "snap together."
In this project's style, power and ground run horizontally in Metal-2 at the top and bottom of the cell, respectively.
The spacing between power and ground is 80 units, center to center.
No other Metal-2 is used in the cell, allowing the designer to connect cells with Metal-2 over the top later on.
nMOS transistors occupy the bottom half of the cell and pMOS transistors occupy the top half.
Each cell has at least one well and substrate contact.
Inputs and outputs are given Metal-1 exports within the cell.
<P>
You may find it convenient to have another sample of layout visible on the screen while you draw your gate.
Use the <B>Place Cell Instance</B> command (in menu <B>Cell</B>) and select "inv{lay}".
Then click to drop this inverter in the layout window.
To view the contents of the inverter, highlight the inverter and use the <B>One Level Down</B> command
(in menu <B>Cell / Expand Cell Instances</B>), or click on the "opened eye" icon in the toolbar.
</TD></TR></TABLE>
<P>
The inverter instance is really just a node, and its contents are unavailable for editing.
To extract the contents, so that the individual nodes and arcs are available for editing,
use the <B>Extract Cell Instance</B> command (in menu <B>Cell</B>).
Note that this command flattens makes a copy of the inverter cell inside of your NAND cell.
Study the inverter until you understand what each piece represents.
<P>
<TABLE><TR><TD>
Start by drawing your nMOS transistors.
Recall that an nMOS transistor is formed when polysilicon crosses N-diffusion.
N-diffusion is represented in Electric as green diffusion,
surrounded by a dotted yellow N-select layer all within a hashed brown P-well background.
This set of layers is conveniently provided as a 3-terminal transistor node in Electric.
Move the mouse to the Components tab on the left side of the screen.
</TD><TD><CENTER><IMG SRC="fig01-36.png" ALT="Figure 1.36"></CENTER></TD></TR></TABLE>
<P>
As you move the mouse over various nodes, their name will appear in the status area at the bottom of the screen.
Click on the N-Transistor, and click again in the layout window to drop the transistor in place.
To rotate the transistor so that the red polysilicon gate is oriented vertically,
use the <B>90 Degrees Counterclockwise</B> command (in menu <B>Edit / Rotate</B>), or just type Ctrl-J.
There are two nMOS transistors in series in a 2-input NAND gate, so we would like to make each wider to compensate.
Double-click on the transistor (or type Ctrl-I).
In the node properties dialog, adjust the width to 12.
<P>
We need two transistors in series, so copy and paste the transistor you have drawn.
You can also duplicate the selected object with the <B>Duplicate</B> command (in menu <B>Edit</B>) or just type Ctrl-M.
Drag the two transistors along side each other so they are not quite touching.
Click the diffusion (source/drain) of one of the transistors and right click on the diffusion of the other transistor to connect the two.
Notice that Electric uses nodes and arcs in IC layout as well as in schematics.
Once connected, drag the two transistors until the polysilicon gates are 3 units apart, looking like they do below.
You will probably find it helpful to turn on the grid (type Ctrl-G).
The grid defaults to small dots every unit and large dots every 10 units.
You can change this with the <B>Preferences</B> command (in menu <B>File</B>), "Display" section, "Grid" panel.
Change the "Frequency of bold dots" to 7, because the cells in this library have a wire pitch of seven.
<P>
You can move objects around with the arrow keys on the keyboard.
The distance that they move defaults to 1 unit, but this can be changed by using the "Full", "Half", or "Qtr" icons in the toolbar
(or by pressing the "f", "h", or "q" keys).
You will avoid messy problems by keeping your layout on a unit grid as much as possible.
Inevitably, though, you will create structures that are an odd number of units in width and thus will have either centers or edges on a half-unit boundary.
(To move an object 7 units per click, or the equivalent of one bold-spaced unit, press Control and then press the appropriate arrow key.
If you first hit "h" and then the control-arrow key will move an item one-half the distance of a bold-spaced unit, 3.5 in this case.)
<P>
Electric has an interactive design rule checker (DRC).
If you place elements too closely together, it will report errors in the "Messages" window.
Try dragging one of the transistors until its gate is only 2 units from the other.
Observe the DRC error.
Then drag the transistors back to proper spacing.
When you are in doubt about spacing, you can recheck the cell with the <B>Check Hierarchically</B> command
(in menu <B>Tool / DRC</B>), or just type the F5 key.
<P>
<TABLE><TR><TD>
Next we will create the contacts from the N-diffusion to Metal-1.
Diffusion is also referred to as "active".
Drop a Metal-1-N-Active-Contact node in the layout window and double-click to change its Y size to 12.
You will need a second contact for the other end of the series stack of nMOS transistors, so duplicate the contact you have drawn (type Ctrl-M).
Move the contacts near each end of the transistor stack and draw diffusion lines to connect to the transistors.
<P>
A quick way to connect many items that are touching is to use the "auto router".
To do this, select all of the objects to be routed (click and drag a selection box over them) and use the <B>Auto-Stitch Highlighted Now</B>
command (in menu <B>Tool / Routing</B>), or just type the F2 key.
See <A HREF="chap09-06-02.html#chap09-06-02">Section 9-6-2</A> for more on auto-stitching.
</TD><TD><CENTER><IMG SRC="fig01-37.png" ALT="Figure 1.37"></CENTER></TD></TR></TABLE>
<P>
Once the contacts are connected to the transistors; you will need a gap of only 1 unit between the metal and polysilicon.
Use the design rule checker to ensure you are as close as possible but no closer.
Using similar steps, draw two pMOS transistors in parallel and create contacts from the P-diffusion to Metal-1.
At this point, your layout should look something like this.
<P>
Draw wires to connect the polysilicon gates, forming inputs "a" and "b", and the Metal-1 output node "y".
Then add Metal-2 power and ground lines.
You can create these Metal-2 wires by creating a "Metal-2-Pin" node and right-clicking on it to draw a wire.
Use the grid to make sure that the Metal-2 wires are 80 units apart.
This is the same spacing as the power/ground lines of the inverter.
Note that when two objects are selected, the Properties dialog box (Ctrl-I), also tells the distance between them.
<P>
A via, called "Metal-1-Metal-2-Con", is required to connect the Metal-1 to the Metal-2 lines.
Select an active contact and right-click to connect it to the ground line.
Electric will automatically create the necessary via for you while making the connection.
Complete the other connections to power and ground.
Let power and ground extend 2 units beyond the contents of the cell (excluding wells) on either side so that cells may "snap together"
with their contents separated by 4 units (so design rules are satisfied).
<P>
Recall that well contacts are required to keep the diodes between the cells and source/drain diffusion reverse biased.
We will place an N-well contact and a P-well contact in each cell.
It is often easiest to drop the "Metal-1-N-Well-Con" near the desired destination (near VDD), then right click on the power line to create the via.
Then drag the contact until it overlaps the via to form a stack of N+ diffusion, the diffusion to Metal-1 contact, Metal-1,
the Metal-1-Metal-2-Con, and Metal-2.
Repeat with the P-well.
<P>
In our datapath design style, we will be connecting gates, with horizontal and Metal-2 lines.
Metal-2 cannot connect directly to the polysilicon gates.
Therefore, we will add contacts from the polysilicon gate inputs to Metal-1 to facilitate connections later in our design.
Place a "Metal-1-Polysilicon-1-Con" node near the left polysilicon gate.
Connect it to the polysilicon gate and drag it near the gate.
You will find a 3 unit separation requirement from the Metal-1 in the contact to the metal forming the output "y".
Add a short strip of Metal-1 near the contact to give yourself a landing pad for a via later in the design.
You may find Electric wants to draw your strip from the contact in polysilicon rather than Metal-1.
To tell Electric explicitly which layer you want, click over the Metal-1 arc in the Component tab (arcs have red borders).
Then draw your wire.
<P>
Electric is agnostic about the polarity of well and substrate; it generates both n- and p-well layers.
In our process that has a p-substrate already, the p-well, indicated by brown slanting lines, will be ignored.
The n-well, indicated by small brown dots, will define the well on the chip.
Electric only generates enough well to surround the n and p diffusion regions of the chip.
(Electric creates well contacts that are only 11 units wide!
This will generate a DRC error, but this behavior is intentional.
Wells should be 12 units wide to meet DRC's expectations.)
It is a good idea to create rectangles of well to entirely cover each cell so that when you abut
multiple cells you don't end up with awkward gaps between wells that cause design rule errors.
To do this, click on the "Pure" entry of the Components tab and select "N-Well-Node" or "P-Well-Node".
To change its size so that it entirely covers the existing well,
resize it with the <B>Interactively</B> command (in menu <B>Edit / Size</B>) or just type Ctrl-B.
You will find the pure layer nodes are annoying because you will tend to select them when you really want to select a transistor or wire.
To avoid this problem, select them and use the <B>Make Selected Hard</B> command
(in menu <B>Edit / Selection</B>) to make the node hard-to-select.
Once an item is defined as hard-to-select, you must use "special select" mode to be able to select it
(click on the arrow with the letters "SP" in the toolbar).
You can use the <B>Make Selected Easy</B> command if you want to restore a node or arc to be easily selected.
Electric also provides the <B>Coverage Implants Generator</B> command (in menu <B>Tool / Generation</B>) that automatically creates
hard-to-select pure layer nodes for N and P wells.
This command is convenient for simple geometries inside of a cell.
<P>
Create exports for the cell.
When you use the cell in another design, the exports define the locations that you can connect to the cell.
Click near the end of the short Metal-1 input line that you just drew on the left gate, and select the Metal-1-Pin node.
If you accidentally select the Metal-1 arc instead, click elsewhere in space to deselect the arc, then try again to find the pin.
You may also try holding the Control key while clicking to cycle through everything that is under the cursor.
Add an input export called "a" (type Ctrl-E to get the export dialog).
Repeat for input "b".
Export output "y" from the metal line connecting the nMOS and pMOS transistors.
You may have to place an extra pin and connect it to the output line to give yourself a pin to export as "y".
Also export "vdd" and "gnd" from the Metal-2 arcs; these should be of type power and ground, respectively.
Electric recognizes "vdd" and "gnd" as special names, so be sure to use them.
<H3>1-12-4: Schematics and Layout Tutorial: Hierarchical Design</H3>
Now that you have a 2-input NAND gate, you can use it, and an inverter, to construct a 2-input AND gate.
Such hierarchical design is very important in the creation of complex systems.
You have found that the layout of an individual cell can be quite time consuming.
It is very helpful to reuse cells wherever possible to avoid unnecessary drawing.
Moreover, hierarchical design makes fixing errors much easier.
For example, if you had a chip with a thousand NAND gates and made an error in the NAND design,
you would prefer to have to fix only one NAND cell so that all thousand instances of it inherit the correction.
<P>
Each schematic has a corresponding symbol, called an icon, used to represent the cell in a higher-level schematic.
For example, open the "inv{sch}" and "inv{ic}" cells to see the inverter schematic and icon.
You will need to create an icon for your 2-input NAND gate.
When creating your icon, it is a good idea to keep everything aligned to the 1 unit grid;
this will make connecting icons simpler and cleaner when you use it in another cell.
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig01-38.png" ALT="Figure 1.38"></CENTER></TD><TD>
Edit your "nand2{sch}" cell and use the <B>Make Icon View</B> command (in menu <B>View</B>).
Electric will create a generic icon based on the exports as shown here.
It will drop the icon in the schematic for handy reference;
drag the icon away from the transistors so it leaves the schematic readable.
</TD></TR></TABLE>
<P>
<TABLE><TR><TD>
A schematic is easier to read when familiar icons are used instead of generic boxes.
Modify the icon to look like this.
Pay attention to the dimensions of the icon; the overall design will look more readable if icons are of consistent sizes.
</TD><TD><CENTER><IMG SRC="fig01-39.png" ALT="Figure 1.39"></CENTER></TD></TR></TABLE>
<P>
To edit the icon, click on it and use the <B>Down Hierarchy</B> command
(in menu <B>Cell / Down Hierarchy</B>) or just type Ctrl-D.
The Component tab will now show with various shapes (this is the "Artwork" technology).
Delete the generic black box but leave the input and output wires.
Turn on the grid.
<P>
The body of the NAND is formed from an open C-shaped polygon, a semicircle, and a small negating circle.
To form the semicircle, create an unfilled circle node.
Double-click to change its size to 6x6 and to span only 180 degrees of the circle.
Use the rotate commands under the <B>Edit</B> menu to rotate the semicircle into place.
Place another circle, adjust its size to 1x1, and move it into place.
Alternatively, you can type "h" and use the arrow keys to move objects by 1/2 grid increments,
then press "f" to return to full grid movement.
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig01-40.png" ALT="Figure 1.40"></CENTER></TD><TD>
The Opened-Polygon node can be used to form the C-shaped body.
When first created, it appears as a zig-zag, shown here.
To manipulate its shape, select it and enter "outline edit mode" by using the <B>Toggle Outline Edit</B> command
(in menu <B>Edit / Modes / Edit</B>), or just type "y", or click on the "castle" icon in the toolbar.
</TD></TR></TABLE>
<P>
In this mode, you can use the left button to select and move points and the right button to create points.
Since the default Opened-Polygon node has 4 points already, you should be able to form the "C" shape simply by clicking and dragging these points.
Outline edit mode is not entirely intuitive at first, but you will master it with practice.
When done, use the same command to exit the mode (just type "y").
See <A HREF="chap06-10-01.html#chap06-10-01">Section 6-10-1</A> for more on outline editing.
<P>
Electric is finicky about moving the lines with inputs or outputs.
If you click and drag to select the line along with the input, everything moves as expected.
If you try to move only the export name, it wont move as you might expect.
Therefore, make a habit of moving both the line and export simultaneously when editing icons.
For appearance, remove the thin export connector lines.
Replace these with bold black lines.
You can easily do this by left clicking on a wire of the icon, then right-clicking,
placing the cursor where you want the end point of the wire to be.
Electric draws a wire that extends from the artwork of the icon.
<P>
Use the "Text" item in the Component tab to place a label "nand2" in the center of the icon.
Make the text be 2 units high.
<P>
Now that you have an icon with three exports, create a new schematic called "and2" (don't forget to set the view to "schematic").
Use the <B>Place Cell Instance</B> command (in menu <B>Edit</B>) to instantiate a "nand2{ic}" and an "inv{ic}".
Wire the two together and create exports on inputs "a" and "b" and output "y".
Double-click on the wire between the two gates and give it a name like "yb" so you know what you are looking at in simulation.
It is good practice to label every net in a design.
When you are done, your "and2" schematic should look like this.
<P>
<CENTER><IMG SRC="fig01-41.png" ALT="Figure 1.41"></CENTER>
<P>
Next, create a new layout called "and2" (remember to select the "layout" view).
Instantiate the "nand2{lay}" and "inv{lay}" layouts.
ALWAYS use the <B>Place Cell Instance</B> command to create layout from pre-existing facets.
NEVER build a cell by cutting and pasting entire existing cells.
If you do, then make a correction to the original cell, your correction will not propagate to the new layout.
<P>
<TABLE><TR><TD>
Initially the cell instances appear as black boxes with ports.
Select both instances and use the <B>All the Way</B> command
(in menu <B>Cell / Expand Cell Instances</B>) to view the contents of each layout.
Wire power and ground to each other.
Move the cells together as closely as possible without violating design rules.
You may need to place large blobs of pure layer nodes over the n-well and p-well to avoid introducing well-related errors from notches in the wells.
Connect the output of the "nand2" to the input of the "inv" using Metal-1.
Remember that connections may only occur between the ports of the two cells.
Also connect the power and ground lines of the cells using Metal-2.
Export the two inputs, the output, and power and ground.
An easy way to do this is to use the <B>Re-Export Everything</B> command (in menu <B>Exports</B>) to bring exports to the surface level.
The Messages window confirms how many ports were exported.
The final and gate should resemble this.
</TD><TD><CENTER><IMG SRC="fig01-42.png" ALT="Figure 1.42"></CENTER></TD></TR></TABLE>
<H3>1-12-5: Schematics and Layout Tutorial: Analysis</H3>
<H3>Design Rule Checking</H3>
<P>
At any time, you can check your layout against the design rules by using the
<B>Check Hierarchically</B> command (in menu <B>Tool / DRC</B>), or just type the F5 key.
When DRC is done, use the ">" key to step through and highlight errors; see the Messages window for comments.
<P>
You can also use this command to check a schematic.
Schematic design rules are simply "rules of ettiquite" which report unusual situations in the circuit drawing.
See <A HREF="chap09-02-01.html#chap09-02-01">Section 9-2-1</A> for more on DRC.
<P>
<H3>Network Consistency Checking</H3>
<P>
One of the most useful analysis tools is Network Consistency Checking (NCC).
This compares the networks in two different cells to make sure they are equivalent
(this step is sometimes called LVS: layout-versus-schematic).
<P>
To run NCC, edit either the layout or the schematic cell, and use the
<B>Schematic and Layout Views of Cell in Current Window</B> command
(in menu <B>Tool / NCC</B>).
This check will not consider transistor sizes, only circuit connectivity.
<P>
When the circuit has passed NCC at the connectivity level, turn on transistor size checking.
To do this, check "Check transistor sizes" in the NCC Preferences
(use the <B>Preferences</B> command in menu <B>File</B>, section "Tools", tab "NCC").
<P>
Electric ideally likes layout, schematic and icons of the same items to be named identically
(i.e. "nand2{sch}" and "nand2{lay}" have identical names).
Having the same name places cells in the same cell group.
(Much of this naming happens automatically in Electric when new views of a current cell are made.)
If the two cells to be compared are not in the same group,
additional work is needed to tell NCC what to compare.
See <A HREF="chap09-07-01.html#chap09-07-01">Section 9-7-1</A> for more on NCC.
<P>
<H3>Simulation</H3>
<P>
Electric has two built-in simulators, and can interface to many more.
The built-in simulators are ALS and IRSIM.
ALS is a logic-level simulator, and is not useful for transistor-level design.
IRSIM is a gate-level simulator, and can handle the transistors in this example.
Unfortunately, IRSIM is not packaged with the basic Electric system (it is a free, but separate, "plugin").
See <A HREF="chap01-05.html#chap01-05">Section 1-5</A>
for details on adding the IRSIM simulator to Electric.
<P>
To simulate a circuit with IRSIM, use the <B>IRSIM: Simulate Current Cell</B> command
(in menu <B>Tool / Simulation (Built-in)</B>).
A waveform window appears to show the simulation status.
To get the waveform window and your schematic/layout to appear side-by-side, use the
<B>Tile Vertically</B> command (in menu <B>Window / Adjust Position</B>).
<P>
The exported signals of your design will automatically appear in the waveform window.
To add an internal signal to the waveform display,
select it and use the <B>Add to Waveform in New Panel</B> (in menu <B>Edit / Selection</B>),
or just type "a".
To set a "1" value on a signal, select it (in either the waveform or the schematic/layout)
and use <B>Set Signal High at Main Time</B> (in menu <B>Tool / Simulation (Built-in)</B>),
or just type "V".
You can drag the "main" time cursor (the dashed line) to any point in the waveform window.
Notice that as you drag it, level information is displayed in the schematic/layout.
See <A HREF="chap09-05-01.html#chap09-05-01">Section 9-5-1</A> for more on the IRSIM simulator.
<P>
Besides built-in simulation, Electric can generate input decks for many popular external simulators
(see <A HREF="chap09-04-01.html#chap09-04-01">Section 9-4-1</A>).
For example, to simulate with Spice, follow these steps:
<UL>
<LI>Use the Spice Preferences to select the Spice engine that you have (Spice 3, HSpice, PSpice,
SmartSpice, etc.)</LI>
<LI>Use the <B>Write Spice Deck...</B> command (in menu <B>Tool / Simulation (Spice)</B>)
to generate an input deck for Spice.</LI>
<LI>Run the simulation externally</LI>
<LI>Use the <B>Plot Spice Listing...</B> command (in menu <B>Tool / Simulation (Spice)</B>)
to read the output of Spice and display it in a waveform window.</LI>
</UL>
See <A HREF="chap09-04-03.html#chap09-04-03">Section 9-4-3</A> for more on Spice.
<HR>
<CENTER><H1><A NAME="chap02-01-01">Chapter 2: Basic Editing</A></H1></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap01-12-05.html#chap01-12-05.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>2-1-1: Selecting Nodes and Arcs</H2></CENTER></TD>
<TD><CENTER><A HREF="chap02-01-02.html#chap02-01-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Edit/Selection/Select Object... -->
<!-- COMMAND Edit/Selection/Deselect All Arcs -->
<!-- COMMAND Edit/Selection/Select All Like This -->
<!-- COMMAND Edit/Selection/Select Next Like This -->
<!-- COMMAND Edit/Selection/Select Previous Like This -->
<!-- COMMAND Edit/Selection/Select All -->
<!-- COMMAND Edit/Selection/Select Nothing -->
<!-- COMMAND Edit/Modes/Edit/Click/Zoom/Wire -->
Electric is a <I>noun/verb</I> system, meaning that all commands work by first selecting something (the noun)
and then doing an operation (the verb).
For this reason, selection is important.
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig02-03.png" ALT="Figure 2.3"></CENTER></TD><TD>
Selection (and movement, wiring, and zooming) are done in "selection" mode, which is the default mode.
This mode is indicated by having the "selection" icon highlighted in the tool bar.
</TD></TR></TABLE>
<P>
Selection is done with clicks of the
<I><A HREF="chap01-08.html#chap01-08">left</A></I> button.
Individual nodes and arcs are selected by clicking over them.
You can tell in advance what will be selected by the button click, because the next object to be selected
is shown in blue.
This advance selection is called "mouse-over highlighting" and can be disabled
(see <A HREF="chap02-01-04.html#chap02-01-04">section 2-1-4</A>).
Once selected, objects are highlighted on the screen.
If you use the
<I><A HREF="chap01-08.html#chap01-08">shift-left</A></I> button, unhighlighted nodes
and arcs are added to the selection, but objects that are already highlighted become deselected.
<P>
There are often multiple objects under the cursor (for example, in the area where an arc overlaps a node).
To get the object you want, hold the control key while clicking.
The <I><A HREF="chap01-08.html#chap01-08">control-left</A></I> button cycles through all objects under the cursor.
<P>
The notion of toggling selection (shift-left) and cycling through what is under the cursor (control-left)
can be combined.
If there are multiple objects under the cursor,
 and you are trying to toggle the selection,
use the <I><A HREF="chap01-08.html#chap01-08">control-shift-left</A></I> button to cycle through them
.
<P>
<TABLE><TR><TD>
To select an object by its name, use the <B>Select Object...</B> command (in menu <B>Edit / Selection</B>).
The resulting dialog lets you select nodes, arcs, exports, or networks in the cell.
You can also search for objects by name (the search field supports regular expressions).
<P>
To select everything in the cell,
use the <B>Select All</B> command (in menu <B>Edit / Selection</B>).
To deselect everything, use <B>Select Nothing</B>.
<P>
To select everything in the cell that is the same as the currently selected objects,
use the <B>Select All Like This</B> command (in menu <B>Edit / Selection</B>).
To loop through the objects similar to the selected one, use <B>Select Next Like This</B>
and <B>Select Previous Like This</B>.
<P>
The <B>Deselect All Arcs</B> command deselects all selected arcs.
This is useful when you wish to select a set of nodes,
but you have selected the entire area, including nodes and arcs.
</TD><TD><CENTER><IMG SRC="fig02-14.png" ALT="Figure 2.14"></CENTER></TD></TR></TABLE>
<H3>2-1-2: Selection Appearance</H3>
<TABLE><TR><TD><CENTER><IMG SRC="fig02-04.png" ALT="Figure 2.4"></CENTER></TD><TD>
Highlighted objects have a box drawn around them.
In some cases, the object extends beyond the box,
but the box encloses the essential part of the object.
For example, MOS transistors are highlighted where the two materials cross,
even though the materials extend on all four sides.
Also, CMOS active arcs have implants that surround them,
but the highlight covers only the central active part.
</TD></TR></TABLE>
<P>
Besides the basic box, there will be other things drawn when an object is highlighted.
Highlighted arcs have their constraint characteristics displayed.
The example above shows an arc that is both fixed-angle ("F") and slidable ("S").
The letter "R" is used for rigid arcs, and an "X" appears when none of these constraints apply.
See <A HREF="chap05-01.html#chap05-01">Section 5-1</A> for more information on arc constraints.
<P>
When nodes are selected, a port is also highlighted.
The port that is highlighted is the one closest to the cursor when the node is selected.
If the port is a single point, you see a "+" at the port.
If the port is larger than a single point, it is shown as a line or rectangle.
<P>
<TABLE><TR><TD>
Highlighted nodes will also show the entire network that extends out of the highlighted port.
Arcs in that network will be drawn with dashed lines,
and nodes in that network will be indicated with dots.
The example here shows the highlighting of a pin node (in the upper-right)
with a single-point port ("+") which is connected to a contact and a transistor.
</TD><TD><CENTER><IMG SRC="fig02-08.png" ALT="Figure 2.8"></CENTER></TD></TR></TABLE>
<P>
It is important to understand that Electric is not exactly a WYSIWYG editor (what-you-see-is-what-you-get).
Nodes that are touching on the screen may not actually be connected if there are no arcs joining them.
The best way to ensure that the circuit is correct is to highlight a node and see the extent of the connections on it.
<H3>2-1-3: Unusual Selection: Areas and Text</H3>
<!-- COMMAND Edit/Modes/Select/Select Area -->
<!-- COMMAND Edit/Modes/Select/Select Objects -->
<!-- COMMAND Edit/Selection/Enclosed Objects -->
Besides highlighting nodes and arcs, Electric can also highlight an arbitrary rectangular area.
The notion of a <I>highlighted area</I>, as opposed to a <I>highlighted object</I>,
is used in some commands, and it generally implies highlighting of everything in the area.
<P>
There are two ways to highlight an area.
If you click the <I><A HREF="chap01-08.html#chap01-08">left</A></I> button where there is no object,
and hold it down while dragging over objects, all of those objects will be highlighted.
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig02-15.png" ALT="Figure 2.15"></CENTER></TD><TD>
To more precisely define a highlighted area, switch to area selection (as opposed to object selection)
with the <B>Select Area</B> command (in menu <B>Edit / Modes / Select</B>, or click on the "Area Selection" icon in the tool bar).
Use <B>Select Objects</B> to revert back to object selection.
</TD></TR></TABLE>
<P>
Once in area selection mode, each click and drag of the
<I><A HREF="chap01-08.html#chap01-08">left</A></I> button leaves the highlight rectangle on the screen exactly as it was drawn.
You can convert this selection to a set of actual nodes and arcs with the <B>Enclosed Objects</B> command
(in menu <B>Edit / Selection</B>).
<P>
<H3>Selecting Text</H3>
<P>
<I>Highlighted text</I> appears as an "X" over the letters.
However, text is a special case, so it will not be covered until later
(<A HREF="chap06-08-02.html#chap06-08-02">Section 6-8-2</A>).
For now, if you highlight some text, it is best to click again and select something else.
<!-- NEED 5in -->
<H3>2-1-4: Controlling Selection</H3>
<!-- COMMAND Edit/Selection/Push Selection -->
<!-- COMMAND Edit/Selection/Pop Selection -->
<!-- PREFERENCE General/Selection -->
Once a selection is made, you can save it with the <B>Push Selection</B> command
(in menu <B>Edit / Selection</B>).
The highlighting is not changed, but it is saved on a stack.
To restore this selection at a later time, use the <B>Pop Selection</B> command.
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig02-09.png" ALT="Figure 2.9"></CENTER></TD><TD>
There are some selection preferences that can be set with Selection Preferences
(in menu <B>File / Preferences...</B>, "General" section, "Selection" tab).
"Easy selection of cell instances" controls whether instances can be selected with simple clicks,
or whether they require extra effort to select
(see the <A HREF="chap02-01-05.html#chap02-01-05">next section</A> for more).
<P>
The "Dragging must enclose entire object" requests that area-selection completely enclose an object in order to select it.
The default is that any object touching the area is selected.
</TD></TR></TABLE>
<P>
To prevent accidental moving of an object after selecting it,
object movement is disabled for a short time after the selection click.
This delay can be controlled.
<P>
When the cursor roams over a circuit, it shows a "preview" of what will be selected by the next click.
The advance preview is shown in a different color than the actual highlighting
(initially blue, but this can be changed with the Layers Preferences,
see <A HREF="chap04-06-02.html#chap04-06-02">Section 4-6-2</A>).
This feature is called "mouse-over highlighting".
If you do not want to see this preview, uncheck "Enable Mouse-over highlighting".
<H3>2-1-5: Easy and Hard Selection</H3>
<!-- COMMAND Edit/Modes/Select/Toggle Special Select -->
<!-- COMMAND Edit/Selection/Select All Easy -->
<!-- COMMAND Edit/Selection/Select All Hard -->
<!-- COMMAND Edit/Selection/Make Selected Easy -->
<!-- COMMAND Edit/Selection/Make Selected Hard -->
In a busy circuit, many objects may overlap, causing confusion when selecting.
To simplify selection, objects can be marked so that they are no longer <I>easy-to-select</I>,
which means that standard selection does not work on them.
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig02-16.png" ALT="Figure 2.16"></CENTER></TD><TD>
To select hard-to-select objects,
use the <B>Toggle Special Select</B> command (in menu <B>Edit / Modes / Select</B>).
You can also click on the "Special Select" tool bar button to enable "special selection".
Once in this mode, all objects are selectable.
</TD></TR></TABLE>
<P>
Ease of selection extends to more than just nodes and arcs.
There are four "classes" of objects that can be selected:
<UL>
<LI>Basic objects (all arcs, primitive nodes, and port names)
<LI>Cell instances
<LI>Node and arc text (names and other text placed on nodes and arcs)
<LI>Instance names (an unexpanded cell instance's name)
</UL>
By default, the first three classes are easy-to-select, and instance names are hard-to-select.
If you uncheck "Easy selection of cell instances" in the Selection Preferences dialog,
then cell instances become hard-to-select.
<P>
Although all nodes and arcs are typically easy-to-select,
you can control them individually by unchecking the "Easy to Select" field in their properties dialog
(use the <B>Object Properties...</B> command in menu <B>Edit / Properties</B>).
If multiple objects are selected, the <B>Object Properties...</B> dialog has a popup on the right for changing their selection difficulty.
<P>
Special commands exist in the <B>Selection</B> menu for dealing with easy-to-select nodes and arcs.
You can select all of the easy-to-select objects in the current cell with the <B>Select All Easy</B> command.
Similarly, you can select those that are not easy-to-select with the <B>Select All Hard</B> command.
To change the ease of selection for a set of objects,
highlight them and use either <B>Make Selected Easy</B> or <B>Make Selected Hard</B>.
<!-- PAGE BREAK --><A NAME="chap02-02-01"></A>
<CENTER><FONT SIZE=6><B>Chapter 2: Basic Editing</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap02-01-05.html#chap02-01-05.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>2-2-1: Node Creation</H2></CENTER></TD>
<TD><CENTER><A HREF="chap02-02-02.html#chap02-02-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Edit/Text/Add Text Annotation -->
Node creation is done by selecting a node from the component menu in the side bar (on the left).
Nodes in the component menu are outlined in blue.
After clicking on one of these nodes, click in the edit window to place the node.
<P>
The location of the cursor is aligned to the nearest grid unit.
This adjustment can be controlled with the
Grid Preferences (in menu <B>File / Preferences...</B>, "Display" section, "Grid" tab,
see <A HREF="chap04-07-02.html#chap04-07-02">Section 4-7-2</A>).
<P>
When placing a node, the cursor points to the <I>anchor point</I> of the newly created node.
This is the center (for primitives) or the location of the cell-center (for cell instances).
Cell instances can change their anchor point by moving the Cell-Center node inside of their layout
(see <A HREF="chap03-03.html#chap03-03">Section 3-3</A>).
<P>
Besides basic components, there are special entries in the component menu for creation of additional nodes:
<UL>
<LI>The "Cell" button displays a list of cell instances that can be created
(see <A HREF="chap03-03.html#chap03-03">Section 3-3</A>).</LI>
<LI>The "Pure" button (only available in layout technologies) lets you place pure-layer nodes
(see <A HREF="chap06-10-01.html#chap06-10-01">Section 6-10-1</A>).</LI>
<LI>The "Spice" button (only available in schematics) lets you place Spice primitives
(see <A HREF="chap09-04-03.html#chap09-04-03">Section 9-4-3</A>).</LI>
<LI>The "Misc" button has a collection of special objects that can be created.</LI>
</UL>
<TABLE><TR><TD><CENTER><IMG SRC="fig02-17.png" ALT="Figure 2.17"></CENTER></TD><TD>
These objects can be created with the "Misc" button:
<UL>
<LI>"Cell Instance" brings up a dialog to select an instance to place
(see <A HREF="chap03-03.html#chap03-03">Section 3-3</A>).</LI>
<LI>"Annotation Text" places a node that contains only text
(see <A HREF="chap06-08-01.html#chap06-08-01">Section 6-8-1</A>).
This can also be accomplished with the <B>Add Text Annotation</B> command
(in menu <B>Edit / Text</B>)</LI>
<LI>"Layout Text..." brings up a dialog to create text from layout nodes
(see <A HREF="chap06-10-03.html#chap06-10-03">Section 6-10-3</A>).</LI>
<LI>"Annular Ring..." brings up a dialog to create circular shapes
(see <A HREF="chap06-10-03.html#chap06-10-03">Section 6-10-3</A>).</LI>
<LI>"Cell Center" places a node that defines the origin of the cell
(see <A HREF="chap03-03.html#chap03-03">Section 3-3</A>).</LI>
<LI>"Essential Bounds" places a node that defines the corners of the cell's essential bounds
(see <A HREF="chap07-06-03.html#chap07-06-03">Section 7-6-3</A>).</LI>
</UL>
</TD></TR></TABLE>
<P>
<UL>
<LI>"Spice Code" places a text-only node that will be inserted into Spice decks
(see <A HREF="chap09-04-03.html#chap09-04-03">Section 9-4-3</A>).</LI>
<LI>"Spice Declaration" places a text-only node that will be inserted into Spice decks near the top
(see <A HREF="chap09-04-03.html#chap09-04-03">Section 9-4-3</A>).</LI>
<LI>"Verilog Code" places a text-only node that will be inserted into the code area of Verilog decks
(see <A HREF="chap09-04-02.html#chap09-04-02">Section 9-4-2</A>).</LI>
<LI>"Verilog Declaration" places a text-only node that will be inserted into the declaration area of Verilog decks
(see <A HREF="chap09-04-02.html#chap09-04-02">Section 9-4-2</A>).</LI>
<LI>"Simulation Probe" places a node that can be used to display simulation results
(see <A HREF="chap04-12-01.html#chap04-12-01">Section 4-12-1</A>).</LI>
<LI>"DRC Exclusion" places a node that covers DRC errors and causes them to be ignored
(see <A HREF="chap09-02-03.html#chap09-02-03">Section 9-2-3</A>).</LI>
<LI>"AFG Exclusion" places a node that tells Auto-Fill Generation to ignored the area
(see <A HREF="chap09-08-02.html#chap09-08-02">Section 9-8-2</A>).</LI>
<LI>"Invisible Pin" places an invisible-pin node
(see <A HREF="chap07-06-03.html#chap07-06-03">Section 7-6-3</A>).</LI>
<LI>"Universal Pin" places an universal-pin node
(see <A HREF="chap07-06-03.html#chap07-06-03">Section 7-6-3</A>).</LI>
<LI>"Unrouted Pin" places an unrouted-pin node
(see <A HREF="chap07-06-03.html#chap07-06-03">Section 7-6-3</A>).</LI>
</UL>
<H3>2-2-2: Arc Creation</H3>
As the introductory example showed, arcs are created by clicking the
<I><A HREF="chap01-08.html#chap01-08">right</A></I> button.
This can actually function in two different ways, depending on what is highlighted.
<P>
<H3>Segment Wiring</H3>
<P>
If one node is highlighted, <I>segment wiring</I> is done,
in which an arc is drawn from the highlighted node to the location of the cursor.
If there is nothing at that location, a pin is created, and it is left highlighted.
Using the <I>right</I> button again runs an arc from that pin to another location.
By clicking and holding the <I>right</I> button,
you can see the path that the new arc will follow.
<P>
In general, all wiring operations should be done by clicking and <U>holding</U> the <I>right</I> button,
then moving the cursor until the intended wiring is shown,
and finally releasing.
This is recommended because wiring is quite complex and can follow many different paths.
<P>
If you type a digit key while the right button is pressed, it changes the wiring layer by inserting contacts
to that layer of metal.
For example, if you are running a metal-1 wire, and type "3" during the wiring, then two contacts will be
added (metal-1-metal-2 and metal-2-metal-3) to make the wire run in metal-3.
<P>
If the cursor is over another object when the <I>right</I> button is released,
the new wire attaches to that object.
If there are multiple objects under the cursor, press the <I>space bar</I> (while the right button is pressed)
to cycle through the possible endpoints (including the possibility of connecting to none of them).
<P>
<H3>Two-Point Wiring</H3>
<P>
The other way that the creation button can operate is <I>two-point wiring</I>,
in which two nodes are highlighted and one or more arcs are created to connect them.
Highlighting of these two nodes is done by clicking the
<I><A HREF="chap01-08.html#chap01-08">left</A></I> button over the first one,
and then using the <I><A HREF="chap01-08.html#chap01-08">shift-left</A></I> button on the second.
Note that if the second node is obscured by other objects, you can cycle through the objects under the cursor with the
<I><A HREF="chap01-08.html#chap01-08">control-shift-left</A></I> button.
Once the two nodes are highlighted,
use the <I><A HREF="chap01-08.html#chap01-08">right</A></I> button to wire them together.
Note that the highlighted ports on the selected nodes are important:
arcs will run between them, so they must be compatible in their wiring capabilities.
<P>
Two-point wire creation first attempts to run a single arc.
Generally, this can happen only if the ports are lined up accurately.
Failing single arc placement,
an attempt is made to connect with two arcs and an intermediate node.
These two arcs can bend in one of two directions, determined by the location of the cursor.
<P>
<H3>Special Considerations</H3>
<P>
<TABLE><TR><TD>
In addition to running an arc between two nodes,
you can also use arcs as the starting or ending point of arc creation.
</TD><TD><CENTER><IMG SRC="fig02-05.png" ALT="Figure 2.5"></CENTER></TD></TR></TABLE>
<P>
If it is sensible,
the creation command actually uses one of the nodes on an end of the selected arc.
However, if the connection falls inside the arc,
it is split and a new node is created to make a "T" connection.
<P>
Electric will allow you to connect two nodes or arcs as long as there is some way in the current
technology for those objects to be connected.  For example, if connecting between metal-1-pin and
a metal-3-pin in the MOSIS CMOS technology, Electric will place metal-1-metal-2 and metal-2-metal-3
contact cuts down, and wire between all four nodes.
When vias are inserted, they are placed closest to the "destination" node (or farthest from the original node).
<P>
As mentioned in <A HREF="chap01-08.html#chap01-08">Section 1-8</A>, pressing
the number keys for a valid layer switches to that layer.  If a node is highlighted, it will
route to that layer from the node, creating contacts as necessary.
<H3>2-2-3: Special Cases</H3>
<!-- COMMAND Edit/Cleanup Cell/Cleanup Pins -->
<!-- COMMAND Edit/Cleanup Cell/Cleanup Pins Everywhere -->
<!-- COMMAND Edit/Arc/Insert Jog In Arc -->
The default width is set by the Arcs Preferences (in menu <B>File / Preferences...</B>, "General" section, "Arcs" tab).
If there are other arcs of this type already connected to the new one,
and they are wider than normal, then the new arc will use that width.
<P>
Note that all arcs overlap their endpoint by half of their width,
so very wide arcs may overlap their destination with too much geometry.
You can turn off this overlap by using the <B>Toggle End Extension of Head</B> and
<B>Toggle End Extension of Tail</B> commands (in menu <B>Edit / Arc</B>).
See <A HREF="chap05-04-03.html#chap05-04-03">Section 5-4-3</A> for more on end extension.
<P>
<TABLE><TR><TD>
An unusual circuit creation command is the <B>Insert Jog In Arc</B> command (in menu <B>Edit / Arc</B>).
This command inserts a jog in the highlighted arc by replacing it with three new arcs.
Two of the new arcs run to the location of the cursor,
and the third arc is perpendicular to them, connecting the ends at the cursor location
(initially it has zero length).
</TD><TD><CENTER><IMG SRC="fig02-11.png" ALT="Figure 2.11"></CENTER></TD></TR></TABLE>
<P>
Once the jog is inserted, either half of the arc may be moved without affecting the other half,
and the perpendicular arc will keep the circuit connected.
<P>
Beginning users often leave many extra pins in their circuits.
With the <B>Cleanup Pins</B> command (in menu <B>Edit / Cleanup Cell</B>),
these pins are automatically removed from your circuit, leaving a cleaner network.
The command does other pin organizations, such as making sure that text on these pins is located correctly,
identifying zero-sized pins, and identifying oversized pins.
The <B>Cleanup Pins Everywhere</B> command does this function for all cells at once.
<!-- PAGE BREAK --><A NAME="chap02-03"></A>
<CENTER><FONT SIZE=6><B>Chapter 2: Basic Editing</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap02-02-03.html#chap02-02-03.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>2-3: Circuit Deletion</H2></CENTER></TD>
<TD><CENTER><A HREF="chap02-04-01.html#chap02-04-01.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Edit/Erase/Selected -->
<!-- COMMAND Edit/Erase/Arcs Connected to Selected Nodes -->
<!-- COMMAND Edit/Erase/Arcs Connected Between Selected Nodes -->
To remove circuitry, select nodes and/or arcs and use the <B>Selected</B> command
(in menu <B>Edit / Erase</B>).
A keyboard shortcut for this is the Delete key.
If there is a highlighted area rather than a highlighted object,
everything in the area is erased.
<P>
Note that an arc always connects two nodes, and therefore it cannot remain if one of the nodes is gone.
This means that certain rules apply to circuit deletion:
<UL>
<LI>When a node is erased, all connecting arcs are also deleted.
However, if a node is deleted that has exactly two arcs,
connected as though the node were in the middle of a single arc,
then the node and two arcs are replaced with a single arc.
</LI>
</UL>
<TABLE><TR><TD VALIGN=TOP>
<UL>
<LI>In the interest of cleanliness, if an arc is erased,
any isolated pins are also erased.</LI>
<LI>If an erased node has an export on it (as in this example),
then the export disappears and so do all arcs connected to the port on instances of the current cell
(for more information on hierarchy, see <A HREF="chap03-01.html#chap03-01">Chapter 3</A>).</LI>
</UL>
</TD><TD><CENTER><IMG SRC="fig02-06.png" ALT="Figure 2.6"></CENTER></TD></TR></TABLE>
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig03-14.png" ALT="Figure 3.14"></CENTER></TD><TD>
<!-- NEED 3in -->
When an area is selected instead of objects
(see <A HREF="chap04-07-02.html#chap04-07-02">Section 4-7-2</A>)
the <B>Edit / Erase / Selected</B> command erases all geometry in the highlighted area.
All arcs that cross into that area will be truncated.
Thus, this command erases precise geometry, independent of the structure of nodes and arcs.
Note that the area to be erased is adjusted by the current alignment values
(see <A HREF="chap04-07-02.html#chap04-07-02">Section 4-7-2</A>).
</TD></TR></TABLE>
<P>
Two special arc deletion commands are <B>Arcs Connected to Selected Nodes</B> and
<B>Arcs Connected Between Selected Nodes</B> (in menu <B>Edit / Erase</B>).
The first command removes all arcs that have either end on a selected node.
The second command removes all arcs that have both ends on selected nodes.
<!-- PAGE BREAK --><A NAME="chap02-04-01"></A>
<CENTER><FONT SIZE=6><B>Chapter 2: Basic Editing</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap02-03.html#chap02-03.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>2-4-1: Movement</H2></CENTER></TD>
<TD><CENTER><A HREF="chap02-04-02.html#chap02-04-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Edit/Modes/Movement/Full motion -->
<!-- COMMAND Edit/Modes/Movement/Half motion -->
<!-- COMMAND Edit/Modes/Movement/Quarter motion -->
Components can be moved by clicking on them with the
<I><A HREF="chap01-08.html#chap01-08">left</A></I> button and then dragging them around while keeping the button pressed.
During the drag, the new location of the components will be shown (as well as the amount of motion),
and once the button is released the circuitry will be moved.
<P>
Another way to move objects is to use the arrow keys.
When a node or arc is selected, each press of an arrow key moves that object by one grid unit.
If the shift key or the control key is held, then the arrow keys move the object by a block of grid units.
A block of grid units is defined in the
Grid Preferences (in menu <B>File / Preferences...</B>, "Display" section, "Grid" tab)
to be the frequency of bold dots in the grid,
 initially 10.
If you hold both the shift key and the control key,
then the distance moved will be a block squared (i.e. initially 100).
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig02-18.png" ALT="Figure 2.18"></CENTER></TD><TD>
The distance that the arrow keys move is also affected by the <B>Movement</B> commands (in menu <B>Edit / Modes</B>).
These commands are also available in the tool bar.
</TD></TR></TABLE>
<P>
The <B>Quarter motion</B> command causes the amount to be quartered (so unshifted arrow keys will move by a quarter unit).
The <B>Half motion</B> command causes the amount to be halved (so unshifted arrow keys will move by a half unit).
The <B>Full motion</B> command causes the amount to be full (so unshifted arrow keys will move by one unit).
Note that the Half and Full menu items are attached to the "h" and "f" keys.
<P>
To move objects along only one line (just horizontally or vertically but not both),
hold the Control key down during motion.
Note that holding the Control key down before clicking will change the nature of the mouse action,
so you must click first, and then press Control.
When editing schematics, this will constrain objects to movement along 45 degree angles.
<P>
When arcs are moved by a large amount, they cause the connecting nodes to move with them.
However, for small arc motion, the arc may shift within its ports.
This can only happen if the port has nonzero area and if the arc has the <I>slidable</I> constraint
(shown with the letter "S" when highlighted).
These constraints are discussed in greater detail in <A HREF="chap05-02-02.html#chap05-02-02">Section 5-2-2</A>.
<!-- NEED 3in -->
<H3>2-4-2: Other Modification</H3>
<!-- COMMAND Edit/Move/Move Objects By... -->
<!-- COMMAND Edit/Properties/Object Properties... -->
<TABLE><TR><TD>
Another way to move a node is to use the <B>Object Properties...</B> command
(in menu <B>Edit / Properties</B>),
and type new X and Y positions.
This dialog allows other modifications to be made as well (orientation, etc.)
<P>
The dialog shows the location of the anchor-point of the node.
</TD><TD><CENTER><IMG SRC="fig02-01.png" ALT="Figure 2.1"></CENTER></TD></TR></TABLE>
<P>
The dialog also has a field for the node's name.
This name is not related to network information, but it must be unique, and can be used for identification.
If a schematic node is given an arrayed name (such as "and[0:3]") then it indicates that the node is arrayed that many times.
Nodes (and arcs) are automatically given unique names when first created (such as "nmos@0").
<P>
The Object Properties dialog is modeless: it can remain on the screen while other editing is being done.
If a different node is selected, the dialog updates to show that node's information.
The "Apply" button changes the selected node to match the new values typed into the dialog.
<P>
The <B>Object Properties...</B> dialog can also expand to show more information.
When the "More" button is clicked, it grows to full size as shown.
<P>
<TABLE><TR><TD>
The full size <B>Object Properties...</B> dialog has many new controls,
which vary according to the type of node selected:
<P>
<UL>
<LI>"Expanded" and "Unexpanded" control how the node is drawn (if it is a cell instance).
An expanded instance is one that shows its contents; an unexpanded instance is drawn as a black box
(see <A HREF="chap03-04.html#chap03-04">Section 3-4</A>).
</LI>
<LI>"Easy to Select" sets whether this node is selectable with a simple click.
This feature allows you to eliminate pieces of circuitry from active editing
(see <A HREF="chap02-01-05.html#chap02-01-05">Section 2-1-5</A>).</LI>
</UL>
</TD><TD><CENTER><IMG SRC="fig02-13.png" ALT="Figure 2.13"></CENTER></TD></TR></TABLE>
<UL>
<LI>"Invisible Outside Cell" 
indicates that this node will not be drawn when the current cell is viewed from higher-up the hierarchy.</LI>
<LI>"Locked" nodes may not be changed (moved, deleted).</LI>
</UL>
<P>
The bottom of the expanded <B>Object Properties...</B> dialog has a scroll area that can view "Ports" or "Attributes".
By default, a list of the node's ports is shown, including any exports, connections, and highlight details.
If the "Attributes" button is selected, the list shows the attributes on the node.
When "Attributes" is selected, the entries in the list let you modify individual values.
Note that there is also an "Attributes" button, which brings up a full dialog for editing them.
See <A HREF="chap06-08-05.html#chap06-08-05">Section 6-8-5</A> for more on Attributes.
<P>
<!-- NEED 4in -->
If many objects are selected,
you can move them by a specific distance with the <B>Move Objects By...</B>
command (in menu <B>Edit / Move</B>).
<P>
If many nodes are selected, the <B>Object Properties...</B> command will list all of them,
and allow appropriate changes to be made (depending on what is selected).
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig02-12.png" ALT="Figure 2.12"></CENTER></TD><TD>
Changes are only made in the fields where you type a value.
To remove an item from the list of selected objects, use the "Remove" button.
To remove all but the selected item, use "Remove Others".
If only two objects are selected, this dialog shows the distance between their centers.
</TD></TR></TABLE>
<!-- PAGE BREAK --><A NAME="chap02-05-01"></A>
<CENTER><FONT SIZE=6><B>Chapter 2: Basic Editing</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap02-04-02.html#chap02-04-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>2-5-1: Node Sizing</H2></CENTER></TD>
<TD><CENTER><A HREF="chap02-05-02.html#chap02-05-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Edit/Size/Interactively -->
<!-- COMMAND Edit/Size/All Selected Nodes... -->
To change the size of a node, select it and use the <B>Interactively</B> command (in menu <B>Edit / Size</B>).
After you do that, your mouse movements will stretch an outline around the node.
The outline is anchored at the corner farthest from the cursor, and stretches the corner closest to the cursor.
The anchored corner changes as you roam the cursor over the node, but it stops changing when you click
(and keep dragging).
When you release the button, the node changes size.
<P>
While stretching the node, hold the Control key to constrain the size to just one axis,
and hold the Shift key to constrain the X and Y sizes so that they scale uniformly.
If you hold the Control and Shift keys, then the node will resize about its center.
<P>
It is recommended that you hold the mouse button down while dragging so you can see the final size of the node.
Release the mouse button to actually resize the node.
To abort this operation, type Escape.
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig02-10.png" ALT="Figure 2.10"></CENTER></TD><TD>
To change the size of more than one node at a time,
select the nodes and use the <B>All Selected Nodes...</B> command (in menu <B>Edit / Size</B>).
The dialog allows you to set the X and Y sizes of the selected nodes.
If you leave one of these size fields empty, that coordinate is not changed.
</TD></TR></TABLE>
<P>
Note that when typing size amounts into a dialog, specify the size of the highlighted area.
In a typical MOS transistor, the highlighted area
(where active and polysilicon cross) is 2x3,
even though the component is much larger if you include the four overlap regions sticking out.
<!-- NEED 4in -->
<H3>2-5-2: Arc Sizing</H3>
<!-- COMMAND Edit/Size/All Selected Arcs... -->
To change the width of an arc, issue the <B>Interactively</B> command (in menu <B>Edit / Size</B>
).
Note that the arc stretches about its center so that an edge is at the cursor location.
Click a button to make the change.
To change the size of more than one arc at a time, select the arcs and use the <B>All Selected Arcs...</B> command.
<P>
<TABLE><TR><TD>
Another way to change an arc's width is to select it and use the <B>Object Properties...</B> command
(in menu <B>Edit / Properties</B>).
<P>
Note that when typing size amounts into a dialog, specify the size of the highlighted area.
A CMOS active arc shows highlighting only on its active area,
even though the complete arc has implant regions that are much larger.
<P>
The "Name" field lets you name an arc (see <A HREF="chap06-08-01.html#chap06-08-01">Section 6-8-1</A>).
Arc names are only displayed on the arc if they have been explicitly typed into this dialog.
You can also use the "Props." button to show a dialog that controls all aspects of a displayed arc name.
<P>
The "Easy to Select" checkbox enables selection of the arc with a simple click
(see <A HREF="chap02-01-05.html#chap02-01-05">Section 2-1-5</A>).
</TD><TD><CENTER><IMG SRC="fig02-02.png" ALT="Figure 2.2"></CENTER></TD></TR></TABLE>
<P>
Many pieces of state can be changed here, including
Rigid and Fixed-angle (see <A HREF="chap05-02-01.html#chap05-02-01">Section 5-2-1</A>),
Slidable (see <A HREF="chap05-02-02.html#chap05-02-02">Section 5-2-2</A>),
Directionality (see <A HREF="chap05-04-01.html#chap05-04-01">Section 5-4-1</A>),
Ends extension (see <A HREF="chap05-04-03.html#chap05-04-03">Section 5-4-3</A>), and
Negation (see <A HREF="chap05-04-02.html#chap05-04-02">Section 5-4-2</A>).
<P>
When an Artwork arc has been selected (see <A HREF="chap07-06-01.html#chap07-06-01">Section 7-6-1</A>),
the "Color and Pattern..." button is available for setting its color.
<!-- PAGE BREAK --><A NAME="chap02-06"></A>
<CENTER><FONT SIZE=6><B>Chapter 2: Basic Editing</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap02-05-02.html#chap02-05-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>2-6: Changing Orientation</H2></CENTER></TD>
<TD><CENTER><A HREF="chap03-01.html#chap03-01.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Edit/Rotate/90 Degrees Clockwise -->
<!-- COMMAND Edit/Rotate/90 Degrees Counterclockwise -->
<!-- COMMAND Edit/Rotate/180 Degrees -->
<!-- COMMAND Edit/Rotate/Other... -->
<!-- COMMAND Edit/Mirror/Up <-\> Down -->
<!-- COMMAND Edit/Mirror/Left <-\> Right -->
There are two commands that can be used to change the orientation of circuitry.
The <B>Rotate</B> command (in menu <B>Edit</B>)
has a submenu that allows the currently highlighted objects to rotate in any of three Manhattan directions or by an arbitrary amount.
<P>
The <B>Mirror</B> command (in menu <B>Edit</B>)
has a submenu that allows you to flip the currently highlighted objects about their vertical centerline (left/right mirroring)
or their horizontal centerline (up/down mirroring).
<P>
For individual nodes, the <B>Object Properties...</B> dialog (in menu <B>Edit / Properties</B>)
lets you control its rotation and mirroring.
<P>
Be aware that mirroring is not the same as rotating, even though both may produce the same visual results.
Mirroring causes the node to be flipped about its horizontal or vertical centerline, and thus appear backwards.
<HR>
<CENTER><H1><A NAME="chap03-01">Chapter 3: Hierarchy</A></H1></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap02-06.html#chap02-06.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>3-1: Cells</H2></CENTER></TD>
<TD><CENTER><A HREF="chap03-02.html#chap03-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Cell/Rename Cell... -->
A collection of nodes and arcs is called a <I>cell</I>,
and instances of cells can be placed in other cells.
When a cell instance is placed, that instance is also a node,
and is treated just like the simpler transistor and contact nodes.
Thus, nodes come in two forms: <I>primitive</I> and <I>complex</I>.
Primitive nodes are found in the component menu and are pre-defined by the technologies
(transistors, contacts, pins).
Complex nodes are actually instances of other cells, and are found in libraries.
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig03-12.png" ALT="Figure 3.12"></CENTER></TD><TD>
Besides organizing cells into a hierarchy,
Electric also organizes cells into <I>cell groups</I>
and gives each cell a <I>view</I> and a <I>version</I>.
A cell's view describes its contents (for example "layout", "schematics", "netlist", etc.)
A cell's version defines its design age.
The full name of a cell is:
<P>
<CENTER>CELLNAME;VERSION{VIEW}</CENTER>
<P>
where CELLNAME is the name of the cell,
VIEW is the abbreviated name of this cell's view,
and VERSION is the version number of this view of the cell.
When no version number is displayed,
it implies that this cell is the most recent version (has the largest number).
Thus, the cell "gate;2{lay}" is more recent than "gate;1{lay}" but less recent than "gate{lay}"
(which must have a higher version number, probably 3).
</TD></TR></TABLE>
<P>
<TABLE><TR><TD>
In this example, there is a library with two cell groups.
One group has a set of cells called "gate" and the other has a set of cells called "latch".
On the right is the explorer view of these cells.
See <A HREF="chap04-08.html#chap04-08">Section 4-8</A> for more on the cell explorer.
<P>
Although it is not necessary for cells in a group to all have the same name,
the system presumes that common names will be grouped together.
Once in a group, you can rename a cell to give it a different name than the others
in its group.
Use the <B>Rename Cell...</B> command (in menu <B>Cell</B>).
You can also use context menus in the cell explorer to rearrange groups.
</TD><TD><CENTER><IMG SRC="fig03-04.png" ALT="Figure 3.4"></CENTER></TD></TR></TABLE>
<!-- PAGE BREAK --><A NAME="chap03-02"></A>
<CENTER><FONT SIZE=6><B>Chapter 3: Hierarchy</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap03-01.html#chap03-01.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>3-2: Cell Creation and Deletion</H2></CENTER></TD>
<TD><CENTER><A HREF="chap03-03.html#chap03-03.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Cell/New Cell... -->
<!-- COMMAND Cell/Duplicate Current Cell -->
<!-- COMMAND Cell/Duplicate Cell... -->
<!-- COMMAND Cell/New Version of Current Cell -->
<!-- COMMAND Cell/Delete Cell... -->
<!-- COMMAND Cell/Edit Cell... -->
<!-- COMMAND Cell/Delete Unused Old Versions -->
<TABLE><TR><TD><CENTER><IMG SRC="fig03-01.png" ALT="Figure 3.1"></CENTER></TD><TD>
Cells are created with the <B>New Cell...</B> command (in menu <B>Cell</B>).
<P>
The <B>New Cell...</B> command requests a new cell name as well as its view and technology.
You can choose to show the cell in the current window, or create a new one.
<P>
Cell names may not contain spaces, tabs, unprintable characters, or a colon.
</TD></TR></TABLE>
<P>
Another way to create a new cell is to make a copy of an existing one.
The <B>Duplicate Current Cell</B> and <B>Duplicate Cell...</B> commands (in menu <B>Cell</B>)
copy a cell to a different one with a new name (you will be prompted for the new name).
The <B>New Version of Current Cell</B> command makes a copy of the cell in the current window,
but since it is a "new version", it has the same cell name.
The newly created cell is displayed in the window.
<P>
Once cells are created you can edit them with the
<B>Edit Cell...</B> command (in menu <B>Cell</B>).
Cells can also be edited by using the cell explorer
(see <A HREF="chap04-08.html#chap04-08">Section 4-8</A> for more).
<P>
<TABLE><TR><TD>
To delete a cell, use the <B>Delete Cell...</B> command (in menu <B>Cell</B>).
When deleting a cell, there cannot be any instances of this cell, or the deletion fails.
As a side effect of failure, you are shown a list of all other cells that have instances of this,
so you can see the extent of its use.
To find out whether a cell is being used elsewhere in the hierarchy, use the <B>List Cell Usage</B>
command (in menu <B>Cell / Cell Info</B>).
<P>
Because Electric is able to keep old versions of cells,
deleting the latest version will cause an older version to become the "most recent".
Old versions are those whose cell names include the ";VERSION"
clause indicating that there is a newer version of this view of the cell.
For example, if you have cell "Adder" and an older version "Adder;1",
then deleting "Adder" will cause "Adder;1" to be renamed to "Adder".
This might make you think that the deletion failed, because there is still a cell called "Adder",
but this cell is actually the older (but now most recent) version.
</TD><TD><CENTER><IMG SRC="fig03-11.png" ALT="Figure 3.11"></CENTER></TD></TR></TABLE>
<P>
To clean-up old and unused versions of cells,
use the <B>Delete Unused Old Versions</B> command (in menu <B>Cell</B>).
Any such cells that are no longer used as instances in other cells will be deleted from the library.
You will get a list of deleted cells,
and it is possible to undo this command.
<!-- PAGE BREAK --><A NAME="chap03-03"></A>
<CENTER><FONT SIZE=6><B>Chapter 3: Hierarchy</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap03-02.html#chap03-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>3-3: Creating Instances</H2></CENTER></TD>
<TD><CENTER><A HREF="chap03-04.html#chap03-04.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Cell/Place Cell Instance... -->
To place an instance of a cell in another cell,
use the "Cell" button in the component menu.
After choosing a cell from the popup list, click in the edit window to place the instance.
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig03-17.png" ALT="Figure 3.17"></CENTER></TD><TD>
Another way to place an instance of a cell is to use the <B>Place Cell Instance...</B> command (in menu <B>Cell</B>).
You will be shown a list of cells that are available for creation.
After selecting one, click to create an instance in the current cell.
<P>
The cell selection dialog has three controls at the top for viewing cells.
The "Library" popup lets you choose which library to examine.
You can choose "ALL" to see cells from all libraries.
The "View" popup lets you see only those cells in the specified view.
Again, you can choose "All" to see all views.
The "Filter" field contains a regular expression that must match a cell name in order to list it.
<P>
If you place an instance from a different library, that library will be linked to the current one.
Linked libraries are read from disk together, and form a single hierarchy that spans multiple files.
See <A HREF="chap03-09-01.html#chap03-09-01">Section 3-9-1</A> for
more on libraries.
</TD></TR></TABLE>
<P>
An alternate way to create a cell instance is to duplicate an existing one on the screen.
This requires that an instance of that particular cell already exist.
Select the existing cell and use the <B>Duplicate</B> command (in menu <B>Edit</B>).
Then move the cursor to the intended location of the new instance and click to create the copy.
Note that this command copies all attributes of the original node including its orientation.
<P>
<TABLE><TR><TD>
<BR><BR><BR><BR><BR><BR>
When a cell instance is being created,
the cursor points to its <I>anchor point</I>.
The anchor point is that point inside of the cell where the coordinate space has its origin.
This is often defined by the location of a <I>cell-center</I> node inside of the cell
(see <A HREF="chap07-06-03.html#chap7-06-03">Section 7-6-3</A>).
<BR><BR><BR><BR><BR><BR>
</TD><TD><CENTER><IMG SRC="fig03-08.png" ALT="Figure 3.8"></CENTER></TD></TR></TABLE>
<P>
Most cells have a cell-center node placed automatically in them.
If there isn't one and you want it, click on the "Misc" button in the component menu on the left,
and choose "Cell Center".
A cell-center node, placed inside of the cell definition, affects the anchor point for all subsequent
creation of instances of the cell. 
<P>
<H3>Schematic Instances</H3>
<P>
When drawing schematics, you place instances of the icon cell, not the schematics cell.
An icon cell can be automatically created with the <B>Make Icon View</B> command
(in menu <B>View</B>, see <A HREF="chap03-11-04.html#chap03-11-04">Section 3-11-4</A>).
The icon cell can then be edited to have any appearance
(see <A HREF="chap07-06-01.html#chap07-06-01">Section 7-6-1</A>).
<!-- PAGE BREAK --><A NAME="chap03-04"></A>
<CENTER><FONT SIZE=6><B>Chapter 3: Hierarchy</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap03-03.html#chap03-03.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>3-4: Examining Cell Instances</H2></CENTER></TD>
<TD><CENTER><A HREF="chap03-05.html#chap03-05.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Cell/Expand Cell Instances/One Level Down -->
<!-- COMMAND Cell/Expand Cell Instances/All the Way -->
<!-- COMMAND Cell/Expand Cell Instances/Specified Amount... -->
<!-- COMMAND Cell/Unexpand Cell Instances/One Level Up -->
<!-- COMMAND Cell/Unexpand Cell Instances/All the Way -->
<!-- COMMAND Cell/Unexpand Cell Instances/Specified Amount... -->
<!-- COMMAND Cell/Look Inside Highlighted -->
When instances are initially created, they are drawn as black boxes with nothing inside.
This form of instance display is called <I>unexpanded</I>.
When the instances show the actual layout inside of them, they are <I>expanded</I>.
This distinction applies only in layout; schematic icons never show their actual contents.
<P>
To expand a cell instance, select it and use the commands of the <B>Cell / Expand Cell Instances</B>
 menu.
The <B>One Level Down</B> command opens up the next closed level;
the <B>All the Way</B> command opens up all levels to the bottom;
and the <B>Specified Amount...</B> lets you type a number of levels of hierarchy to expand.
These commands expand all highlighted cells.
If a highlighted cell is already expanded,
this command expands any subcells inside of the instance, repeatedly down the hierarchy.
<P>
Once expanded,
a cell instance will continue to be drawn with its contents shown until the commands of the <B>Cell / Unexpand Cell Instances</B>
command are used.
These commands return cell instances to their black-box form,
starting with the deepest subcells that are expanded at the bottom of the hierarchy.
The <B>One Level Up</B> command closes up the bottommost expanded level;
the <B>All the Way</B> command closes all levels from the bottom;
and the <B>Specified Amount...</B> lets you type a number of levels of hierarchy to close.
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig03-25.png" ALT="Figure 3.25"></CENTER></TD><TD>
You can also use the expansion (opened eye) and unexpansion (closed eye) icons from the tool bar to expand and unexpand by one level.
</TD></TR></TABLE>
<P>
The expansion information can also be controlled by using the <B>Object Properties...</B>
command (in menu <B>Edit / Properties</B>) and clicking on the "Expanded" or "Unexpanded" buttons.
<P>
There are times when you want to see the layout inside of a cell instance, but only temporarily.
The <B>Look Inside Highlighted</B> command (in menu <B>Cell</B>) displays everything in the highlighted area,
down through all hierarchical levels.
This is a one-shot display that reverts to unexpanded form if the window is shifted, scaled, or redrawn.
<P>
There is a slight difference in specification between the <B>Expand Cell Instances</B>
commands and the <B>Look Inside Highlighted</B> command.
The <B>Expand Cell Instances</B> commands affect cell instances only,
and thus any instances that are highlighted or in the highlighted area will be completely expanded.
The <B>Look Inside Highlighted</B> command affects layout display in an area,
so only those parts of instances that are inside of the highlighted area will be shown.
Thus, the command <B>Look Inside Highlighted</B> is more precise in what it expands and can be used,
in conjunction with Area selection, to show only a specific part of the circuit
(see <A HREF="chap02-01-03.html#chap02-01-03">Section 2-1-3</A> for more on area selection).
<!-- PAGE BREAK --><A NAME="chap03-05"></A>
<CENTER><FONT SIZE=6><B>Chapter 3: Hierarchy</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap03-04.html#chap03-04.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>3-5: Moving Up and Down the Hierarchy</H2></CENTER></TD>
<TD><CENTER><A HREF="chap03-06-01.html#chap03-06-01.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Cell/Down Hierarchy/Down Hierarchy -->
<!-- COMMAND Cell/Down Hierarchy/Down Hierarchy, Keep Focus -->
<!-- COMMAND Cell/Down Hierarchy/Down Hierarchy, New Window -->
<!-- COMMAND Cell/Down Hierarchy/Down Hierarchy, Keep Focus, New Window -->
<!-- COMMAND Cell/Down Hierarchy/Down Hierarchy In Place -->
<!-- COMMAND Cell/Down Hierarchy/Down Hierarchy In Place To Object -->
<!-- COMMAND Cell/Up Hierarchy -->
Each editing window in Electric displays a single cell.
Editing changes can be made only to that cell, and not to any subcells that appear as instances.
Thus, you may be able to see the contents of a cell instance,
but you cannot edit it.
<P>
To edit a cell instance, use one of these commands in the <B>Cell / Down Hierarchy</B> menu:
<UL>
<LI><B>Down Hierarchy</B> descends into the definition of the currently selected cell instance.
You will now be able to edit that cell.
</LI>
<LI><B>Down Hierarchy, Keep Focus</B> descends while keeping the same window zoom and pan.</LI>
<LI><B>Down Hierarchy, New Window</B> creates a new window in which to show the lower-level cell.</LI>
<LI><B>Down Hierarchy, Keep Focus, New Window</B> creates a new window in which to show the lower-level cell,
while maintaining the zoom and pan factor.</LI>
</UL>
<P>
The opposite of going down the hierarchy is the <B>Up Hierarchy</B> command
(in menu <B>Cell</B>),
which pops you to the next higher cell in the hierarchy.
If there was an associated <B>Down Hierarchy</B> command,
then this returns you to the place where you started, up the hierarchy.
If the <B>Down Hierarchy</B> commands were not used,
Electric attempts to figure out the next higher cell in the hierarchy,
switching icons for schematics where appropriate.
If there are multiple possibilities
(because the current cell is used in many locations) then you will be prompted for a specific location.
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig03-22.png" ALT="Figure 3.22"></CENTER></TD><TD>
Besides using the <B>Up Hierarchy</B> and <B>Down Hierarchy</B> commands, you can also use
the tool bar "back" and "forward" buttons to move through the hierarchy.
If you right-click on these icons, you are given a list of cells and can jump directly to one of them.
</TD></TR></TABLE>
<P>
When going down or up the hierarchy, if an export or port is selected,
then the equivalent port or export is shown after the level of hierarchy has changed.
<P>
<H3>Layout Considerations</H3>
<P>
If a layout cell is selected, you can use the <B>Down Hierarchy In Place</B> command to
edit the cell while showing the upper level of the hierarchy.
The surrounding geometry at the upper level is not editable, and is grayed-out.
<P>
The <B>Down Hierarchy In Place To Object</B> command finds the object under the cursor
(at any level of the hierarchy) and descends to that level.
This may go down the hierarchy many times.
It descends "in place" so that the original geometry is visible, but higher-levels
are greyed-out.
It is useful when trying to quickly find the hierarchy that exists at that point, and see which instances
were used to construct it.
<P>
<H3>Schematic Considerations</H3>
<P>
If an icon is selected, the <B>Down Hierarchy</B> commands will take you to the associated schematic.
If the icon that is selected is already in its own schematic
(you can place an icon inside its own schematic for documentation purposes),
then the <B>Down Hierarchy</B> command takes you to the actual icon so that you can edit it.
<P>
Schematic nodes can be arrayed by giving them array names
(see <A HREF="chap06-09-03.html#chap06-09-03">Section 6-9-3</A>).
When you descend into an arrayed node, the system does not know which element of the array
you are entering.
Most of the time, the specific element is irrelevant, but if the circuit is being simulated,
the specific instance may be necessary for cross-probing.
Therefore, if the cell is being simulated and you descend into an arrayed node, you will be
prompted for the specific element that you wish to visit.
<P>
There are other situations that cannot be detected, where the specific element needs to be known.
To solve this problem, you can request that Electric prompt for the specific element
in all situations where an arrayed node is visited.
To do this, check "Always prompt for index when descending into array nodes"
in the Nodes Preferences (in menu <B>File / Preferences...</B>, "General" section, "Nodes" tab)
<!-- PAGE BREAK --><A NAME="chap03-06-01"></A>
<CENTER><FONT SIZE=6><B>Chapter 3: Hierarchy</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap03-05.html#chap03-05.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>3-6-1: Export Creation</H2></CENTER></TD>
<TD><CENTER><A HREF="chap03-06-02.html#chap03-06-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Cell/Merge Libraries/Add Exports from Library... -->
<!-- COMMAND Export/Create Export... -->
<!-- COMMAND Export/Re-Export Everything -->
<!-- COMMAND Export/Re-Export Selected -->
<!-- COMMAND Export/Re-Export Selected, With Wired Ports -->
<!-- COMMAND Export/Re-Export Selected Port on All Nodes -->
<!-- COMMAND Export/Re-Export Power and Ground -->
<!-- COMMAND Export/Re-Export Highlighted Area -->
<!-- COMMAND Export/Re-Export Highlighted Area, With Wired Ports -->
<!-- COMMAND Export/Re-Export Deep Highlighted Area -->
<!-- COMMAND Export/Re-Export Deep Highlighted Area, With Wired Ports -->
<!-- COMMAND Export/Show Ports on Node -->
<!-- COMMAND Export/Manipulate Ports on Node... -->
All nodes in Electric have connection sites, called <I>ports</I>,
which indicate where wires may be attached.
The primitive nodes have predefined ports,
but ports on cell instances must be defined by the user.
To do this, simply select a port on a node inside the cell,
and turn it into an <I>export</I>,
which makes it available on all instances of the current cell.
Although most ports are on nodes along the edge of the cell,
Electric makes no port location restrictions,
so they may appear anywhere.
<P>
To see the location of all ports on the selected nodes, use the <B>Show Ports on Node</B>
command (in menu <B>Export</B>).
<P>
<TABLE><TR><TD>
To create an export,
select a port on a node and use the <B>Create Export...</B> command (in menu <B>Export</B>).
The resulting dialog requests an export name and some characteristics.
</TD><TD><CENTER><IMG SRC="fig03-02.png" ALT="Figure 3.2"></CENTER></TD></TR></TABLE>
<P>
All export names on a cell must be unique;
if a nonunique name is given, it is modified to be unique.
This modification involves adding "_1", "_2", etc. to the end of scalar export names,
or changing the index (from [1] to [2], etc.) for arrayed export names.
Like cell names, export names may not contain spaces,
tabs, or unprintable characters.
Although no case distinction is made between uppercase and lowercase characters;
the original case usage is preserved.
<P>
Behavioral characteristics can be associated with an export by selecting the appropriate field
in the export creation dialog.
These behavior characteristics are stored with the export and used primarily by simulators.
The characteristics include the following:
<UL>
<LI>Directional: "input", "output", and "bidirectional".
<LI>Supply: "power" and "ground".
<LI>Clocking: "clock" (a generic clock export) and "clock phase 1" through "clock phase 6".
<LI>Reference: "reference input", "reference output", and "reference base".
In addition, reference exports carry an associated export name that is used by the CIF netlister.
</UL>
<P>
The "Always drawn" check box requests that the export label should always appear,
regardless of the connection or expansion of its cell.
Typically, an export label on an instance of a cell is not displayed when that port is
connected to an arc or when the instance is expanded.
This check box overrides the suppression.
<P>
Another special check box, "Body only," requests that this export not appear when an icon is generated for the cell.
This is useful for power and ground exports or duplicate connection sites on a single network.
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig03-33.png" ALT="Figure 3.33"></CENTER></TD><TD VALIGN=TOP>
You can control exporting of all of the ports on the currently highlighted node with the
<B>Manipulate Ports on Node...</B> command (in menu <B>Export</B>).
This dialog shows all ports, and lets you select sets of them for reexport.
</TD></TR></TABLE>
<P>
There are many special exporting commands that are primarily used in array-based layout.
If a cell instance is replicated many times and the instances are wired together,
then ports on the edge of the array are the only ones that are not wired.
These ports define the connections for the next level of hierarchy.
What you want to do is to create exports for all unwired ports,
automatically generating unique names.
To do this, use these commands in menu <B>Export</B>:
<UL>
<LI><B>Re-Export Everything</B> reexports all ports on all nodes in the current cell.
</LI>
<LI><B>Re-Export Selected</B> reexports only ports on currently highlighted nodes.</LI>
<LI><B>Re-Export Selected, With Wired Ports</B> reexports current nodes, but allows wired ports to be reexported.</LI>
<LI><B>Re-Export Selected Port on All Nodes</B> reexports the selected port on the every node in the cell that
is the same as the current one.</LI>
<LI><B>Re-Export Power and Ground</B> reexports only Power and Ground exports.</LI>
<LI><B>Re-Export Highlighted Area</B> reexports only ports inside the currently highlighted area
(for precise area selection, see <A HREF="chap02-01-03.html#chap02-01-03">Section 2-1-3</A>).</LI>
<LI><B>Re-Export Highlighted Area, With Wired Ports</B> reexports highlighted ports,
but allows wired ports to be reexported.</LI>
<LI><B>Re-Export Deep Highlighted Area</B> reexports only ports inside the currently highlighted area,
but goes all the way down the hierarchy, reexporting from the lowest level.
This causes unconnected exports deep down the hierarchy to become available for connection.</LI>
<LI><B>Re-Export Deep Highlighted Area, With Wired Ports</B> reexports highlighted ports all the way
down the hierarchy, and allows wired ports to be reexported.</LI>
</UL>
<P>
Note that ports on primitive nodes are not exported with these commands.
See <A HREF="chap06-04.html#chap06-04">Section 6-4</A> for more about arrays,
and see <A HREF="chap09-06-01.html#chap09-06-01">Section 9-6-1</A> for more on automatic wiring.
<P>
Another special command for export creation is <B>Add Exports from Library...</B>
(in menu <B>Cell / Merge Libraries</B>),
which copies exports from another library into the current one.
The other library is examined for cells whose names match ones in the current library.
When a cell is found in the other library, all of its exports are copied to the cell in the current library
(if they don't already exist) and placed in the same location.
This command is useful in managing standard cell libraries that are imported from other file formats
(see <A HREF="chap03-09-04.html#chap03-09-04">Section 3-9-4</A> on Standard Cell Libraries).
Because some formats contain geometry and others contain connectivity, this command is needed to put them together.
<!-- NEED 6in -->
<H3>3-6-2: Export Information</H3>
<!-- COMMAND Export/Rename Export... -->
<!-- COMMAND Export/List Exports -->
<!-- COMMAND Export/Summarize Exports -->
<!-- COMMAND Export/Show Exports -->
<!-- COMMAND Tool/Network/List Exports on Network -->
<!-- COMMAND Tool/Network/List Exports below Network -->
<!-- PREFERENCE Display/Ports/Exports -->
Exports are selected by clicking on their text,
or by clicking on the node from which they are exported.
If a very dense design makes export selection hard,
you can choose from a list by using the <B>Select Object...</B>
command (in menu <B>Edit / Selection</B>).
<P>
To see all exports that have been defined in the current cell,
use the <B>Show Exports</B> command (in menu <B>Export</B>).
The <B>List Exports</B> command gives the same information, but in text form, and the <B>Summarize Exports</B>
command gives a text list that is reduced where sensible.
To see a list of exports that are electrically connected to the current object,
at multiple levels of hierarchy,
use the <B>List Exports on Network</B> and <B>List Exports below Network</B> commands
(in menu <B>Tool / Network</B>).
<P>
<TABLE><TR><TD>
Once a port has been exported,
its characteristics can be modified by selecting the export name and using the <B>Object Properties...</B>
command (in menu <B>Edit / Properties</B>).
You can change basic export information such as the name, characteristic, and reference name (if applicable).
You can control export state such as whether it is always drawn, and whether or not it appears on icons.
You can also change the appearance of the export by editing the size, font, color, style,
anchor point, and rotation of the name.
See <A HREF="chap06-08-01.html#chap06-08-01">Section 6-8-1</A> for more about text appearance.
See <A HREF="chap06-08-04.html#chap06-08-04">Section 6-8-4</A> for "smart" export text control.
</TD><TD><CENTER><IMG SRC="fig03-03.png" ALT="Figure 3.3"></CENTER></TD></TR></TABLE>
<P>
Special buttons in the Export Properties dialog allow you to examine related objects.
The "Highlight Owner" button shows the node on which this export resides,
and the "Attributes" button brings up an Attributes dialog for the export
(see <A HREF="chap06-08-05.html#chap06-08-05">Section 6-8-5</A> for more on Attributes).
<P>
You can change the characteristics of many exports at once by selecting them and using the <B>Object Properties...</B>
command (in menu <B>Edit / Properties</B>).
This multi-object dialog has popups that will change all export characteristics at once.
You can change the name of exports by using the <B>Rename Export...</B> command (in menu <B>Export</B>).
<P>
<H3>Displaying Ports and Exports</H3>
<P>
Ports and exports can be displayed on the screen in many different ways.
To control this, use the
Ports/Exports Preferences (in menu <B>File / Preferences...</B>, "Display" section, "Ports/Exports" tab).
<P>
<TABLE><TR><TD VALIGN=TOP>
The dialog offers three options for ports and exports:
"Full Names" shows full text names,
"Short Names" shows port and export names only up to the first nonalphabetic character,
and "Crosses" shows crosses at the locations.
<P>
With short names, the exports "Power-left" and "Power-1" are both written as "Power,"
which allows multiple exports with the same functionality but different names to be displayed
as if they have the same name.
To remove port display completely, use the "Layers" tab of the side bar
(see <A HREF="chap04-05.html#chap04-05">Section 4-5</A>).
In this panel are options to make exports text completely invisible.
</TD><TD><CENTER><IMG SRC="fig03-09.png" ALT="Figure 3.9"></CENTER></TD></TR></TABLE>
<H3>3-6-3: Export Deletion and Movement</H3>
<!-- COMMAND Export/Delete Export -->
<!-- COMMAND Export/Delete Exports on Selected -->
<!-- COMMAND Export/Delete Exports in Highlighted Area -->
<!-- COMMAND Export/Move Export -->
You can delete an export simply by selecting its name and using the <B>Selected</B>
command of the <B>Edit / Erase</B> menu (or typing the Delete key).
You can also use the <B>Delete Export</B> command (in menu <B>Export</B>).
<P>
To remove many exports at once,
the <B>Delete Exports on Selected</B> command removes all exports on all highlighted nodes.
Also, the <B>Delete Exports in Highlighted Area</B> command removes only those exports that are in the selected area
.
When an export is deleted, all arcs connected to that port on instances of the current cell
(higher up the hierarchy) are also deleted
(see <A HREF="chap02-03.html#chap02-03">Section 2-3</A>).
<P>
To move export text, simply select it and drag it.
The location of the text has no effect on the location of the export:
moving the text is only for improvement of the display.
However, if you check "Move node with export name" in the
Ports/Exports Preferences (in menu <B>File / Preferences...</B>, "Display" section, "Ports/Exports" tab),
then moving an export name will cause the node (and the export) to move as well.
<P>
It is sometimes desirable to keep an export but to transfer it to another node.
If a cell is in use higher in the hierarchy,
unexporting and then reexporting deletes all existing connections.
Instead, the <B>Move Export</B> command (in menu <B>Export</B>) can be used.
Before using this command,
two nodes and their ports must be highlighted with
<I><A HREF="chap01-08.html#chap01-08">left</A></I>
button and
<I><A HREF="chap01-08.html#chap01-08">shift-left</A></I> button.
The export is moved from the first node to the second node.
<!-- PAGE BREAK --><A NAME="chap03-07-01"></A>
<CENTER><FONT SIZE=6><B>Chapter 3: Hierarchy</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap03-06-03.html#chap03-06-03.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>3-7-1: Cell Lists</H2></CENTER></TD>
<TD><CENTER><A HREF="chap03-07-02.html#chap03-07-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Cell/Cell Info/Describe this Cell -->
<!-- COMMAND Cell/Cell Info/General Cell Lists... -->
<!-- COMMAND Cell/Cell Info/List Nodes in this Cell -->
<!-- COMMAND Cell/Cell Info/Number of Transistors -->
<!-- COMMAND Cell/Cell Info/List Cell Usage -->
<!-- COMMAND Cell/Cell Info/List Cell Instances -->
<TABLE><TR><TD>
To get some basic information about the current cell
(size, dates, etc) use the <B>Describe this Cell</B> command
(in menu <B>Cell / Cell Info</B>).
<P>
To get information about more than one cell, use the <B>General Cell Lists...</B> command.
The dialog selects a subset of the cells in the current library.
<P>
The section labeled "Which cells:" selects the cells to be listed
(all, only those used in other cells,
only those NOT used in the current cell,
only those in the current cell,
or only "placeholder" cells: those created because of cross-library dependency failures,
see <A HREF="chap03-09-01.html#chap03-09-01">Section 3-9-1</A>).
<P>
The section labeled "View filter:" allows only certain views to be displayed.
<P>
The section labeled "Version filter:" allows removal of older or newer versions of cells.
<P>
The section labeled "Display ordering:" controls the order in which the selected cells will be listed.
<P>
The section labeled "Destination:" allows you to dump this listing to a disk file,
formatted for spreadsheets (tab-separated).
</TD><TD><CENTER><IMG SRC="fig03-21.png" ALT="Figure 3.21"></CENTER></TD></TR></TABLE>
<P>
The result of cell information listing looks like this:<BR>
<PRE>
-Cell------------Version----Creation date----------Revision Date---------Size----Usage--L-I-C-D
tech-Artwork{}       1  Dec 31, 1969 16:00:00  Dec 15, 2004 11:34:15  131.0x83.0   0    L
tech-Bipolar{ic}     1  Dec 15, 2004 11:34:25  Dec 15, 2004 11:34:25   10.0x12.0   1
tech-Bipolar{lay}    1  Jul 23, 1990 23:25:49  Dec 15, 2004 12:38:11   37.0x73.5   0
tech-Bipolar{sch}    1  Jul 26, 1990 23:58:58  Dec 15, 2004 11:34:27  58.75x59.5   0    L I
tech-DigitalFilter{} 1  Dec 31, 1969 16:00:00  Dec 01, 2000 13:56:47   48.0x45.5   0
tech-MOSISCMOS{lay}  1  Jul 24, 1998 16:10:55  Dec 09, 2001 12:35:29   85.5x83.0   0          D
tech-PCB7404{}       1  Dec 31, 1969 16:00:00  Dec 15, 2004 11:45:03   12.5x28.5   1
tool_NCC{sch}        1  Mar 27, 2001 06:35:49  Jan 25, 2002 15:57:57   44.0x41.5   0    L I</PRE>
<P>
The last five columns show the usage and four state bits.
The usage is the number of times that this cell appears as an instance in other cells.
The state bits are:
<UL>
<LI>"L" if the cell contents are locked</LI>
<LI>"I" if instances in the cell are locked</LI>
<LI>"C" if the cell is part of a cell library</LI>
<LI>"D" if the cell has passed design-rule checking</LI>
</UL>
<P>
For more cell information, use the commands of menu <B>Cell / Cell Info</B>:
<UL>
<LI><B>List Nodes in this Cell</B> counts the number of nodes in current cell and below.
This is a hierarchical count: if two cell instances each have two transistors inside of them,
the total is 4 transistors.
However, it counts only actual nodes, ignoring arrayed nodes
(see <A HREF="chap06-09-03.html#chap06-09-03">Section 6-9-3</A>).
</LI>
<LI><B>List Cell Instances</B> shows all cell instances below the current cell.
</LI>
<LI><B>List Cell Usage</B> looks up the hierarchy and finds cells that contain the
current cell as an instance.
</LI>
<LI><B>Number of Transistors</B> counts the number of transistors in the current cell and below
(considering arrayed instances, see <A HREF="chap02-04-02.html#chap02-04-02">Section 2-4-2</A>).</LI>
</UL>
<H3>3-7-2: Cell Graphing</H3>
<!-- COMMAND Cell/Cell Info/Graphically, Entire Library -->
<!-- COMMAND Cell/Cell Info/Graphically, From Current Cell -->
<TABLE><TR><TD>
Cell graphing shows the hierarchical structure of your circuit.
The graph is stored in a new cell called "CellStructure", built from Artwork nodes.
<P>
The <B>Graphically, Entire Library</B> command (in menu <B>Edit / Cell Info</B>)
displays a graph of every cell in the library.
The <B>Graphically, From Current Cell</B> command displays a graph that places the current cell at the top.
<P>
A cell graph can be edited like anything else in Electric.
Click and drag the cell names to rearrange the graph.
</TD><TD><CENTER><IMG SRC="fig03-20.png" ALT="Figure 3.20"></CENTER></TD></TR></TABLE>
<!-- NEED 3in -->
<H3>3-7-3: Cell Properties</H3>
<!-- COMMAND Cell/Cell Properties... -->
To examine and set more information about existing cells,
use the <B>Cell Properties...</B> command (in menu <B>Cell</B>):
The left side of the dialog lists cells by library.
On the right are the properties of the cells.
<P>
<CENTER><IMG SRC="fig03-10.png" ALT="Figure 3.10"></CENTER>
<P>
The checkbox "Disallow modification of anything in this cell",
allows you to control whether the contents of a cell is editable or not.
When modification is disallowed, no changes may be made.
This is useful when you want to allow examination without accidental modification.
<P>
The checkbox "Disallow modification of instances in this cell",
also prevents changes to the selected cell, but in this case, only instances of sub-cells are locked.
This is useful when you have a correct instance placement and are doing wiring.
<TABLE><TR><TD>
If you make a change that has been disallowed,
a dialog appears that asks if you want to override the lock.
You may make the change ("Yes"), disallow the change ("No"), or remove the lock
("Always", which unchecks the locks in this dialog).
</TD><TD><CENTER><IMG SRC="fig03-15.png" ALT="Figure 3.15"></CENTER></TD></TR></TABLE>
<P>
The check box "Part of a cell-library"
indicates that this cell is from a library of standard cells and should be treated accordingly.
<P>
The check box "Part of technology editor library"
indicates that this cell helps to define a technology.
For more on the technology editor, see <A HREF="chap08-01.html#chap08-01">Section 8-1</A>.
<P>
For the first 4 checkboxes in this dialog, there are buttons on the right which
allow you to set or clear these flags for all cells in the library.
<P>
The "Expand new instances" and "Unexpand new instances"
buttons choose whether newly created instances of this cell are expanded
(contents visible) or unexpanded (drawn with a black outline)
See <A HREF="chap03-04.html#chap03-04">Section 3-4</A> for more on expansion.
<P>
The "Characteristic Spacing" is the spacing of this cell when arrayed
(see <A HREF="chap06-04.html#chap06-04">Section 6-4</A>).
<P>
Each cell is tied to a specific technology.
The cell's technology is set when the cell is created.
You can change the technology that is associated with a cell by using the "Technology" popup.
<P>
The section labeled "For Textual Cells" lets you set the font and size of the text in that cell
(see <A HREF="chap04-10.html#chap04-10">Section 4-10</A>).
<P>
At the bottom is the cell frame control.
The frame is a border that is usually drawn around schematics.
You can set the frame size, whether it is wider (Landscape mode) or taller (Portrait mode),
and whether a title box is drawn in the corner.
Additionally, you can set the designer name to be drawn for each cell.
Other information in the title box (company name, project name) are set on a per-user or per-library basis
with the Frame Preferences (in menu <B>File / Preferences...</B>, "Display" section, "Frame" tab).
See <A HREF="chap07-05-02.html#chap07-05-02">Section 7-5-2</A> for more on frames.
<!-- PAGE BREAK --><A NAME="chap03-08"></A>
<CENTER><FONT SIZE=6><B>Chapter 3: Hierarchy</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap03-07-03.html#chap03-07-03.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>3-8: Rearranging Cell Hierarchy</H2></CENTER></TD>
<TD><CENTER><A HREF="chap03-09-01.html#chap03-09-01.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Cell/Package Into Cell... -->
<!-- COMMAND Cell/Extract Cell Instance -->
In order to manipulate hierarchical circuits,
it is useful to create and delete levels of the hierarchy.
The <B>Package Into Cell...</B> command (in menu <B>Cell</B>)
collects everything in the highlighted area into a new cell.
You will be prompted for the cell name.
The most convenient way to specify an area for packaging is to use the
 Area Selection
commands (see <A HREF="chap02-01-03.html#chap02-01-03">Section 2-1-3</A>).
Every node touching the area is included in the new cell.
All arcs between nodes in the area are also included.
The highlighted circuitry is not affected.
<P>
After packaging circuitry into a new cell, that circuitry can be deleted and replaced with an instance of that cell.
<P>
The opposite function is the removal of levels of hierarchy.
This is done with the <B>Extract Cell Instance</B> command,
which takes the currently highlighted cell instances and replaces them with their contents.
Repeated use of this command goes further down the hierarchy until it is fully instantiated.
All arcs that were connected to the cell instances are reconnected to the correct parts of the instantiated circuitry.
<!-- PAGE BREAK --><A NAME="chap03-09-01"></A>
<CENTER><FONT SIZE=6><B>Chapter 3: Hierarchy</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap03-08.html#chap03-08.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>3-9-1: Introduction to Libraries</H2></CENTER></TD>
<TD><CENTER><A HREF="chap03-09-02.html#chap03-09-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND File/Change Current Library... -->
<!-- COMMAND File/Rename Library... -->
<!-- COMMAND File/New Library... -->
<!-- COMMAND File/Close Library -->
<!-- COMMAND File/List Libraries -->
<!-- COMMAND Help/Load Built-in Libraries/MOSIS CMOS Pads -->
<!-- COMMAND Help/Load Built-in Libraries/MIPS Cells -->
A <I>library</I> is a collection of cells that forms a consistent hierarchy.
To enforce this consistency,
Electric stores an entire library in one disk file that is read or written at one time.
It is possible, however, to have multiple libraries in Electric.
Only one library is the current one, and this sometimes affects commands that work at the library level.
When there are multiple libraries, you can switch between them with the <B>Change Current Library...</B>
command (in menu <B>File</B>) or by using the library's context menu in the cell explorer
(see <A HREF="chap04-08.html#chap04-08">Section 4-8</A>).
To see which libraries are read in, use the <B>List Libraries</B> command.
<P>
To create a new, empty library, use the <B>New Library...</B> command (in menu <B>File</B>).
To change the name of the current library, use the <B>Rename Library...</B> command.
To delete a library, use the <B>Close Library</B> command.
This removes only the memory representation, not the disk file.
<P>
It is possible to link two libraries by placing an instance of a cell from one library into another
(this is done with the <B>Place Cell Instance...</B> command in menu <B>Cell</B>).
When this happens, the library with the instance
(the main library) is linked to the library with the actual cell (this is the <I>reference library</I>).
Because the reference library is needed to complete the main library,
it will be read whenever the main library is read.
<P>
If referenced libraries are edited independently,
it is possible that a reference to a cell in another library will not match the actual cell in that library.
When this happens, Electric creates a "placeholder" cell that matches the original specification.
Thus, the link to the referenced library is broken because the cell there does not fit where the instance should be.
To see a list of all placeholder cells that were created because of such problems,
use the <B>General Cell Lists...</B> command (in menu <B>Cell / Cell Info</B>) and select "Only placeholder cells".
<P>
Electric comes with some built-in libraries:
<UL>
<LI>There are two Spice primitive libraries (see <A HREF="chap09-04-03.html#chap09-04-03">Section 9-4-3</A>).
</LI>
<LI>A library of examples can be loaded with the <B>Sample Cells</B> command (in menu <B>Help / Load Built-in Libraries</B>).
Another simple library can be found in the <B>Load Library</B> command (in menu <B>Help / 3D Showcase</B>).
</LI>
<LI>A set of MOSIS CMOS pads can be loaded with the <B>MOSIS CMOS Pads</B> command (in menu <B>Help / Load Built-in Libraries</B>).
</LI>
<LI>A set of cells used in the design of a MIPS processor (and used by the tutorial,
see <A HREF="chap01-12-01.html#chap01-12-01">Section 1-12-1</A>) is available with the
<B>MIPS Cells</B> command (in menu <B>Help / Load Built-in Libraries</B>).</LI>
<LI>A set of gates, useful for Logical Effort (see <A HREF="chap09-09.html#chap09-09">Section 9-9</A>),
can be loaded with the <B>Load Logical Effort Libraries (Purple, Red, and Orange)</B>
command (in menu <B>Tool / Logical Effort</B>).
</LI>
</UL>
Additional libraries are available at the Static Free Software website
(<A HREF="http://www.staticfreesoft.com">www.staticfreesoft.com</A>).
<!-- NEED 3in -->
<H3>3-9-2: Reading Libraries</H3>
<!-- COMMAND File/Open Library... -->
<!-- COMMAND File/Import/LEF (Library Exchange Format)... -->
<!-- COMMAND File/Import/ELIB... -->
<!-- COMMAND File/Import/Readable Dump... -->
The <B>Open Library...</B> command (in menu <B>File</B>) brings a new library into Electric from disk.
These libraries may have the extension ".elib", ".jelib", or ".delib" (the jelib format is the default,
see <A HREF="chap10-01.html#chap10-01">Section 10-1</A>).
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig03-23.png" ALT="Figure 3.23"></CENTER></TD><TD>
You can also use the open-library icon from the tool bar.
</TD></TR></TABLE>
<P>
Electric users with very old ".elib" files may have difficulty reading them into Electric.
If you have been using versions of Electric prior to 7.00, it may help to upgrade to that version and read the libraries.
Saving ".elib" files from version 7.00 will work properly in the current system.
<P>
By default Electric searches for libraries in the working directory,
absolute file path references, and Electric's internal library directory.
Users can specify additional directories to search by using a file called
"LIBDIRS" placed in the working directory.
This file specifies additional paths to search for library files.
The file has the following syntax:
<P>
<code>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <i>&lt;comments&gt;</i><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;include <i>&lt;another_LIBDIRS_file&gt;</i><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i>&lt;library_directory&gt;</i>
</code>
<P>
Paths may be absolute or relative.
<P>
Besides Electric libraries,
it is possible to read circuit descriptions that are in other formats with these commands in the <B>File / Import</B> menu:
<UL>
<LI><B>CIF (Caltech Intermediate Format)</B> is used to describe integrated circuit layout.
It contains no connectivity, so after the library is read, it does not know about transistors and contacts:
just layers.
You can use the node extractor to convert CIF to real Electric components
(see <A HREF="chap09-10-02.html#chap09-10-02">Section 9-10-2</A>).
To affect how CIF is read, use the CIF Preferences (in menu File / Preferences..., "I/O" section, "CIF" tab).
See <A HREF="chap07-03-02.html#chap07-03-02">Section 7-3-2</A> for more on CIF.</LI>
<LI><B>GDS II (Stream)</B> is also used to describe integrated circuit layout.
It contains no connectivity, so after the library is read, it does not know about transistors and contacts: just layers.
You can use the node extractor to convert GDS to real Electric components
(see <A HREF="chap09-10-02.html#chap09-10-02">Section 9-10-2</A>).
To affect how GDS is read, use the GDS Preferences (in menu File / Preferences..., "I/O" section, "GDS" tab).
See <A HREF="chap07-03-03.html#chap07-03-03">Section 7-3-3</A> for more on GDS.</LI>
<LI><B>EDIF (Electronic Design Interchange Format)</B> is used to describe both schematics and layout.
Electric reads EDIF version 2 0 0.
Use the EDIF Preferences (in menu File / Preferences..., "I/O" section, "EDIF" tab) to affect how EDIF is read
(see <A HREF="chap07-03-04.html#chap07-03-04">Section 7-3-4</A>).</LI>
<LI><B>LEF (Library Exchange Format)</B> is an interchange format that describes the cells in a library.
The cells that are read in contain ports, but very little contents.</LI>
<LI><B>DEF (Design Exchange Format)</B> is an interchange format that describes the contents of a library.
DEF input often makes use of associated LEF files which must already have been read.
Use the DEF Preferences (in menu File / Preferences..., "I/O" section, "DEF" tab) to affect how DEF is read
(see <A HREF="chap07-03-05.html#chap07-03-05">Section 7-3-5</A>).</LI>
<LI><B>DXF (AutoCAD)</B> is a solid-modeling interchange format, and so it may contain 3D objects that cannot be read into Electric.
Nevertheless, Electric creates a library of artwork primitives as well as it can.
Use the DXF Preferences (in menu File / Preferences..., "I/O" section, "DXF" tab) to affect how DXF is read
(see <A HREF="chap07-03-07.html#chap07-03-07">Section 7-3-7</A>).</LI>
<LI><B>SUE (Schematic User Environment)</B> is a schematic editor that captures a single cell in each file.
The circuitry in SUE files is added to the current library instead of being placed in its own library
(because many SUE files may have to be read to build up a single Electric library).
Use the SUE Preferences (in menu File / Preferences..., "I/O" section, "SUE" tab) to affect how SUE is read
(see <A HREF="chap07-03-08.html#chap07-03-08">Section 7-3-8</A>).</LI>
<LI><B>ELIB</B> is an older Electric library format that is in an undocumented binary format.
</LI>
<LI><B>Readable Dump</B> is an older Electric library format that captures the entire database in a text-readable format.
These files were used when the ".elib" file was the main way of saving libraries, because a way was needed of reading
library files.
Now that the newer ".jelib" format is also text-readable, there is no need to use Readable Dumps anymore.</LI>
<LI><B>Text Cell Contents</B> is used to read a text file into a text cell.
The current window must be a textual view (such as VHDL, Verilog, documentation, etc.)
See <A HREF="chap04-10.html#chap04-10">Section 4-10</A> for more on text windows.
</LI>
</UL>
<H3>3-9-3: Writing Libraries</H3>
<!-- COMMAND File/Save Library -->
<!-- COMMAND File/Save Library As... -->
<!-- COMMAND File/Save All Libraries -->
<!-- COMMAND File/Save All Libraries in Format... -->
<!-- COMMAND File/Mark All Libraries for Saving -->
<!-- COMMAND File/Export/LEF (Library Exchange Format)... -->
<!-- COMMAND File/Export/L... -->
<!-- COMMAND File/Export/Eagle... -->
<!-- COMMAND File/Export/ECAD... -->
<!-- COMMAND File/Export/HPGL... -->
<!-- COMMAND File/Export/Pads... -->
<!-- COMMAND File/Export/PostScript... -->
<!-- COMMAND File/Export/PNG (Portable Network Graphics)... -->
<!-- COMMAND File/Export/ELIB (Version 6)... -->
<!-- COMMAND File/Export/JELIB (Version 8.03)... -->
<!-- PREFERENCE I/O/Library -->
<!-- PROJECTSETTING Netlists -->
Writing libraries to disk is done with the <B>Save Library</B> command (in menu <B>File</B>).
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig03-24.png" ALT="Figure 3.24"></CENTER></TD><TD>
The <B>Save All Libraries</B> command writes all libraries that have changed.
You can also use the save-libraries icon from the tool bar.
To force all libraries to be saved, use the <B>Mark All Libraries for Saving</B> command,
or use <B>Save All Libraries in Format...</B> to specify how they are to be saved.
</TD></TR></TABLE>
<P>
If a library was read from disk, it is written back to the same file.
If, however, you wish to write the library to a new file
(thus preserving the original) then use the <B>Save Library As...</B> command.
<P>
<TABLE><TR><TD VALIGN=TOP>
The Library Preferences (in menu <B>File / Preferences...</B>, "I/O" section, "Library" tab)
offers options for writing libraries to disk.
By default, saved libraries overwrite the previous files and no backup is created.
If you choose "Backup of last library file",
then the former library is renamed so that it has a "~" at the end.
If you choose "Backup history of library files",
then the former library is renamed so that it has its creation date as part of its name.
</TD><TD><CENTER><IMG SRC="fig03-19.png" ALT="Figure 3.19"></CENTER></TD></TR></TABLE>
<P>
<!-- NEED 2in -->
Electric can also write external format files with these commands in the <B>File / Export</B> menu:
<UL>
<LI><B>CIF (Caltech Intermediate Format)</B> is used to describe integrated circuit layout.
The output file contains only the current cell and any circuitry below that in the hierarchy.
Use the CIF Preferences (in menu <B>File / Preferences...</B>, "I/O" section, "CIF" tab)
 to affect how CIF is written.
See <A HREF="chap07-03-02.html#chap07-03-02">Section 7-3-2</A> for more on CIF.
</LI>
<LI><B>GDS II (Stream)</B> is also used to describe integrated circuit layout.
The output file contains only the current cell and any circuitry below that in the hierarchy.
Use the GDS Preferences (in menu <B>File / Preferences...</B>, "I/O" section, "GDS" tab)
 to affect how GDS is written.
See <A HREF="chap07-03-03.html#chap07-03-03">Section 7-3-3</A> for more on GDS.</LI>
<LI><B>EDIF (Electronic Design Interchange Format)</B> can write either the Netlist or the Schematic view of the circuit.
Electric writes EDIF version 2 0 0.
Use the EDIF Preferences (in menu <B>File / Preferences...</B>, "I/O" section, "EDIF" tab) to affect how EDIF is written.
See <A HREF="chap07-03-04.html#chap07-03-04">Section 7-3-4</A> for more on EDIF.</LI>
<LI><B>LEF (Library Exchange Format)</B> is an interchange format that describes the exports on cells in a library.</LI>
<LI><B>L</B> is the GDT language, still appearing in some commercial systems.
The output file contains only the current cell and any circuitry below that in the hierarchy.</LI>
<LI><B>Eagle</B> is an interface to the Eagle schematics design system (its netlist format).
Before writing Eagle files, you must give every node the "ref_des" attribute, and every port on these nodes the "pin" attribute.
If you also place the "pkg_type" attribute on the node, it overrides the cell name.</LI>
<LI><B>ECAD</B> is an interface to the ECAD schematics design system (its netlist format).
Before writing ECAD files, you must give every node the "ref_des" attribute, and every port on these nodes the "pin" attribute.
If you also place the "pkg_type" attribute on the node, it overrides the cell name.</LI>
<LI><B>Pads</B> is an interface to the Pads schematics design system (its netlist format).
Before writing Pads files, you must give every node the "ref_des" attribute, and every port on these nodes the "pin" attribute.
If you also place the "pkg_type" attribute on the node, it overrides the cell name.</LI>
<LI><B>Text Cell Contents</B> is used to write a text file from a text cell.
The current window must be a textual view (such as VHDL, Verilog, documentation, etc.)
See <A HREF="chap04-10.html#chap04-10">Section 4-10</A> for more on text windows.</LI>
<LI><B>PostScript</B> is the Adobe printing language.
The output file contains only a visual representation of the current cell
(or part of that cell).
PostScript options can be controlled with the
Printing Preferences (in menu <B>File / Preferences...</B>, "General" section, "Printing" tab).</LI>
<LI><B>HPGL</B> is the Hewlett-Packard printing language.
The output file contains only a visual representation of the current cell
(or part of that cell).</LI>
<LI><B>PNG (Portable Network Graphics)</B> is an image format that captures the current window.</LI>
<LI><B>DXF (AutoCAD)</B> is a solid-modeling interchange format.
Use the DXF Preferences (in menu <B>File / Preferences...</B>, "I/O" section, "DXF" tab) to affect how DXF is written.
See <A HREF="chap07-03-07.html#chap07-03-07">Section 7-3-7</A> for more on DXF.</LI>
<LI><B>ELIB (Version 6)</B> writes old-format binary files.
These files can be read by version 6 of Electric.
<LI><B>JELIB (Version 8.03)</B> writes old-format JELIB files.
These files are useful for versions 8.03 and earlier.
</LI>
</UL>
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig03-13.png" ALT="Figure 3.13"></CENTER></TD><TD VALIGN=TOP>
The exported files from Electric are often considered to be proprietary information, and must be marked appropriately.
Copyright information can be inserted into exported files with the
Netlists Project Settings (in menu <B>File / Project Settings...</B>, "Netlists" tab).
Since each export file has a different format for comments, the copyright text should not contain any such characters.
Instead, the system will insert the proper comment characters for the particular export format.
<P>
The copyright information will be inserted into decks exported for CIF, LEF, and PostScript,
as well as in simulation netlists for
Verilog, Spice, Silos, ESIM/RSIM/RNL/COSMOS, FastHenry, Maxwell, and IRSIM.
</TD></TR></TABLE>
<P>
Most netlisters insert date and version information in the comments at the head of the generated file.
You can request that this information be omitted by unchecking "Include date and version in output files".
<P>
Information about resistor ignoring can be found in <A HREF="chap07-05-01.html#chap07-05-01">Section 7-5-1</A>.
<H3>3-9-4: Standard Cell Libraries</H3>
Electric comes with few useful libraries for doing design
(see <A HREF="chap03-09-01.html#chap03-09-01">Section 3-9-1</A>).
However, the system is able to make use of <A HREF="http://www.artisan.com">Artisan</A> libraries.
These libraries are free, provided that you sign an Artisan license.
Once you are licensed, you will have standard cell libaries, pad libraries, memory libraries, and more.
<P>
Artisan libraries are not distributed in Electric format.
Instead, they come in a variety of formats that can be read into Electric.
The GDS files contain the necessary geometry, and the LEF files contain the connectivity.
By combining them, Electric creates a standard cell library that can be placed-and-routed and can be fabricated.
Note that the data is not node-extracted, so not all of Electric's capabilities can be used with this data.
<P>
To create an Artisan library, follow these steps:
<UL>
<LI>Select the Artisan data that you want, and extract the GDS and LEF files for it.
The GDS files will have the extension ".gds2", which is not what Electric expects
(Electric expects them to end with ".gds"), so you may want to rename them.</LI>
<LI>Read the LEF file into Electric with the <B>LEF (Library Exchange Format)...</B>
command (in menu <B>File / Import</B>).
Keep in mind that the LEF data may come in multiple versions for different numbers of metal layers.</LI>
<LI>Read the GDS data into Electric with the <B>GDS II (Stream)...</B>
command (in menu <B>File / Import</B>).
Note that the proper GDS layers must be established first
(with the GDS Preferences, see <A HREF="chap07-03-03.html#chap07-03-03">Section 7-3-3</A>).
There will now be two libraries in memory: one with the GDS data and one with the LEF data.</LI>
<LI>Merge the port information from the LEF library into the GDS library.
It is important that the GDS library be the "current library"
(use the <B>Change Current Library...</B> command in menu <B>File</B> if it is not).
To merge the LEF port information, use the <B>Add Exports from Library...</B> command
(of menu <B>Cell / Merge Libraries</B>).
You will be prompted for another library, and should select the one with the LEF data.</LI>
<LI>At this point, the GDS library now has standard cells in it, including the export information
that was in the LEF library.
Before saving it to disk, you should probably use the <B>Cell Properties...</B>
command (of menu <B>Cells</B>, see <A HREF="chap03-07-03.html#chap03-07-03">Section 3-7-3</A>)
and set all of the cells to be "Part of a cell-library".</LI>
</UL>
<!-- PAGE BREAK --><A NAME="chap03-10"></A>
<CENTER><FONT SIZE=6><B>Chapter 3: Hierarchy</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap03-09-04.html#chap03-09-04.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>3-10: Copying Cells Between Libraries</H2></CENTER></TD>
<TD><CENTER><A HREF="chap03-11-01.html#chap03-11-01.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Cell/Cross-Library Copy... -->
In general, different libraries are completely separate collections of cells that do not relate.
For example,
two cells in different libraries can have the same name without being the same size or having the same content.
Although a cell from one library can be used as an instance in another,
this causes the two libraries to be linked together.
It may be simpler to copy the cells from one library to another,
thus allowing a single library to contain the entire design.
<P>
A simple way to copy cells from one library to another is to drag them in the Explorer window
(see <A HREF="chap04-08.html#chap04-08">Section 4-8</A>).
A more powerful method is the <B>Cross-Library Copy...</B> command (in menu <B>Cell</B>).
This command provides a dialog for copying cells between libraries.
<P>
<TABLE><TR><TD>
The left and right columns show the contents of two different libraries
(and the pulldowns above each column let you select the two libraries that you want to see).
<P>
When there is a cell with the same name in both libraries,
the system compares them to determine which is newer.
If you check "Date and content" (and then "Compare" to do comparison again)
Electric will compare the actual contents of cells when determining their equality.
Unchecking "Examine quietly" will cause the system to describe differences found during comparison.
</TD><TD><CENTER><IMG SRC="fig03-05.png" ALT="Figure 3.5"></CENTER></TD></TR></TABLE>
<P>
By choosing one or more cells in the right-hand library and clicking "&lt;&lt; Copy",
those cells are copied into the left-hand library.
The "Copy &gt;&gt;" button does the reverse.
If "Delete after copy" is checked, the buttons change to "&lt;&lt; Move" and "Move &gt;&gt;".
<P>
The system can be requested to copy additional cells that relate to the selected one.
By checking "Copy subcells", all subcells of the copied cell are also transfered.
By checking "Copy all related views", all related views (icon, schematic, layout, etc.) are also transfered.
Note that if "Copy all related views" is off but you want to "Copy subcells", it still copies related views
in a limited fashion (i.e. schematics and icons are copied together).
<P>
When there is a reference to an instance inside of a copied cell, and that instance already exists in the destination library,
there are many ways to handle the transfer.
For example, library "Frank" has cell "A" which has, inside of it, an instance of cell "B" ("B" is also in library "Frank").
You want to copy cell "A" to library "Tom", but there is already a cell called "B" in library "Tom".
These things may happen:
<UL>
<LI>If "Copy subcells" is checked, then a new version of "Tom:B" is created from "Frank:B",
and this cell is instantiated in the copied "Tom:A".
<LI>If "Copy subcells" is not checked, the instance in the new "Tom:A" points to the old "Frank:B".
<LI>If "Copy subcells" is not checked and "Use existing subcells" is checked,
the instance in the new "Tom:A" points to the existing cell "Tom:B".
In order for this to work, however, the size and exports of "Tom:B" must match the original in "Frank:B".
</UL>
Therefore, if "Copy subcells" is checked, "Use existing subcells" is implied.
<!-- PAGE BREAK --><A NAME="chap03-11-01"></A>
<CENTER><FONT SIZE=6><B>Chapter 3: Hierarchy</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap03-10.html#chap03-10.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>3-11-1: Setting a Cell's View</H2></CENTER></TD>
<TD><CENTER><A HREF="chap03-11-02.html#chap03-11-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND View/Change Cell's View... -->
Each cell has a <I>view</I>, which provides a description of its contents.
A view consists of a full name and an abbreviation to be used in cell naming.
For example, the "layout" view is abbreviated "lay" and so the layout view of cell "adder" is called "adder{lay}."
When no view name appears, the cell has the "unknown" view.
Possible views are:
<UL>
<LI>"layout" (for IC layout)
<LI>"schematic" (for logic designs)
<LI>"icon" (to describe a cell symbolically)
<LI>"layout.skeleton" (a minimal view)
<LI>"documentation" (a text-only view)
<LI>"VHDL" or "Verilog" (text-only views for hardware-description languages)
<LI>a number of "netlist" views
(text-only views that list connectivity for various tools such as "netlisp", "als", "quisc", "rsim", and "silos")
<LI>"unknown" (no specified view)
</UL>
<P>
<TABLE><TR><TD>
When creating a cell with the <B>New Cell...</B> command,
you can specify its view.
After creation,
you can change the current cell's view with the <B>Change Cell's View...</B> command (in menu <B>View</B>).
You can also use context menus in the cell explorer to change a cell's view.
</TD><TD><CENTER><IMG SRC="fig03-06.png" ALT="Figure 3.6"></CENTER></TD></TR></TABLE>
<H3>3-11-2: Switching between Views of a Cell</H3>
<!-- COMMAND View/Edit Layout View -->
<!-- COMMAND View/Edit Schematic View -->
<!-- COMMAND View/Edit Icon View -->
<!-- COMMAND View/Edit VHDL View -->
<!-- COMMAND View/Edit Documentation View -->
<!-- COMMAND View/Edit Skeleton View -->
<!-- COMMAND View/Edit Other View... -->
<!-- COMMAND View/Make Schematic View -->
<!-- COMMAND View/Make Alternate Layout View... -->
<!-- COMMAND View/Make Skeleton View -->
<!-- COMMAND View/Make VHDL View -->
When editing one view of a cell,
there are commands in the <B>View</B> menu that will switch to an alternate view of the same cell.
<UL>
<LI>Use <B>Edit Layout View</B> to switch to the layout view.
<LI>Use <B>Edit Schematic View</B> to switch to the schematic view.
<LI>Use <B>Edit Icon View</B> to switch to the Icon view.
<LI>Use <B>Edit VHDL View</B> to switch to the VHDL view.
<LI>Use <B>Edit Documentation View</B> to switch to the text-only documentation view.
<LI>Use <B>Edit Skeleton View</B> to switch to the Skeleton view.
</UL>
For all other view types, use <B>Edit Other View...</B> and select the desired view.
Note that these commands are equivalent to the <B>Edit Cell...</B> command (in menu <B>Cell</B>) with an appropriate selection.
<P>
When editing cells with text-only views (VHDL, Documentation, etc.), the window becomes a text editor.
You may then use the <B>Text Cell Contents...</B> commands (in menu <B>File / Export</B> and <B>File / Import</B>)
to save and restore this text to disk.
See <A HREF="chap04-10.html#chap04-10">Section 4-10</A> for more on text editing.
<P>
The commands to edit another view work only when that cell exists.
To create a new cell of a particular type, use the <B>Make...</B> commands of the <B>View</B> menu.
These view conversion commands are available:
<UL>
<LI><B>Make Icon View</B> creates an icon from a schematic
(see <A HREF="chap03-11-04.html#chap03-11-04">Section 3-11-4</A> for more on this).
</LI>
<LI><B>Make Schematic View</B> creates a schematic from a layout.</LI>
<LI><B>Make Alternate Layout View...</B> converts from layout or schematic to an alternate layout.
You must choose a specific layout technology, and the new layout will use components from that technology.
</LI>
<LI><B>Make Skeleton View</B> makes a skeletonized layout from a layout
(the only thing in the skeleton is the exports and the frame; it is a "layout icon").
</LI>
<LI><B>Make VHDL View</B> converts the current layout or schematic into structural VHDL.
This VHDL is used by the Silicon Compiler (see <A HREF="chap09-12.html#chap09-12">Section 9-12</A>)
and the ALS simulator (see <A HREF="chap09-05-02.html#chap09-05-02">Section 9-5-2</A>).
Note that there are 5 schematic primitives which can exist in a normal and negated form ("buffer", "and",
"or", "xor", and "mux").
You can choose the names to use for these two forms in the "Schematics" section of the Technology Preferences
(in menu <B>File / Preferences...</B>, "Technology" section, "Technology" tab).
</LI>
</UL>
<H3>3-11-3: Creating and Deleting Views</H3>
<!-- COMMAND View/View Control... -->
<TABLE><TR><TD>
If the list of possible views is not sufficient to describe a cell,
new views can be created with the <B>View Control...</B> command (in menu <B>View</B>).
This command shows all views and lets you create and delete them.
<P>
When creating a new view, a name and an abbreviation are required.
The abbreviation should be the first few letters of the full view name.
This abbreviation will be used when describing cells with that view.
For example, the view "fast-layout" might have the abbreviation "fast".
<P>
The "Text View" checkbox indicates that this is a text-only view,
like "Documentation", "Netlist", "Verilog", and "VHDL".
</TD><TD><CENTER><IMG SRC="fig03-07.png" ALT="Figure 3.7"></CENTER></TD></TR></TABLE>
<P>
The "Delete" button deletes views that you have created (it cannot delete the views that exist on startup
,
such as "layout", "schematic", etc).
Also, there must be no cells with the view that is being deleted.
<H3>3-11-4: Automatic Icon Generation</H3>
<!-- COMMAND View/Make Icon View -->
<!-- PREFERENCE Technology/Icon -->
A particularly useful view type is icon.
The icon cell is used for instances of an associated <I>contents</I> cell,
which contains schematics.
For example, you may have a cell called "adder{sch}" which contains a schematic.
You may then create a cell called "adder{ic}" that contains a circle with a plus sign inside
(these are nodes in the Artwork technology).
This is then the icon for the contents cell "adder{sch}".
Now, if you create an instance of the schematic cell,
the icon cell will actually be placed, because it is the symbol that gets used for instances.
<P>
To generate an icon cell automatically, use the <B>Make Icon View</B> command (in menu <B>View</B>).
Be sure to create all relevant exports before issuing this command,
so that the proper icon can be constructed.
Note that any export that has its "Body only" attribute checked will be omitted from the icon.
<P>
To control the look of the icons, use the
Icon Preferences (in menu <B>File / Preferences...</B>, "Technology" section, "Icon" tab).
The top part of the dialog lets you place each of the different export types on any of the four sides of the icon.
<P>
The middle section of the dialog controls the body and leads of the icon.
<P>
<TABLE><TR><TD>
You can choose whether or not to draw the body and leads.
You can set the spacing and length of leads.
You can choose the location of the exports (at the end of the leads,
in the middle of the leads, or on the body).
You can choose the style of the export text (whether it grows inward, outward).
</TD><TD><CENTER><IMG SRC="fig03-18.png" ALT="Figure 3.18"></CENTER></TD></TR></TABLE>
<P>
The bottom part of the dialog has miscellaneous controls.
You can choose the technology of the exports
("Universal" uses nodes from the Generic technology which can connect to any arc;
"Schematic" uses nodes from the Schematic technology and can connect only to other Schematic arcs).
Exports are arranged alphabetically around the icon,
and you can choose to reverse the alphabetical order.
Finally, you can choose the location of the icon instance in the original schematic
(when you use the <B>Make Icon View</B> command,
it generates the icon and places an instance of that icon in the schematic).
A button at the bottom requests that an icon be made now, and takes the place of the <B>Make Icon View</B>
command.
<P>
The icon cell is correctly tied to its contents in most respects.
If you descend into it (with the commands in the <B>Cell / Down Hierarchy</B> menu),
then you actually find yourself editing the associated contents cell.
The <B>Up Hierarchy</B> command properly returns you to the location of the icon instance.
Also, the network consistency checker and the simulators correctly substitute the contents whenever an icon appears.
In order for this to work, however,
all exports in the contents cell must exist with the same name in the icon cell
(with the exception of those that are marked "Body Only").
<HR>
<CENTER><H1><A NAME="chap04-01">Chapter 4: Display</A></H1></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap03-11-04.html#chap03-11-04.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>4-1: The Tool Bar</H2></CENTER></TD>
<TD><CENTER><A HREF="chap04-02.html#chap04-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
The tool bar sits near the top of the screen, below the menu bar.
It provides shortcuts for many common commands.
<P>
<CENTER><IMG SRC="fig04-07.png" ALT="Figure 4.7"></CENTER>
<P>
The tool bar has these sections:
<UL>
<LI><B>Library Control</B>
Icons to read a library (<A HREF="chap03-09-02.html#chap03-09-02">Section 3-9-2</A>)
and to save libraries (<A HREF="chap03-09-03.html#chap03-09-03">Section 3-9-3</A>).
</LI>
<LI><B>Editing Modes</B>
Icons for
selection (<A HREF="chap02-01-01.html#chap02-01-01">Section 2-1-1</A>),
panning (<A HREF="chap04-04-02.html#chap04-04-02">Section 4-4-2</A>),
zooming (<A HREF="chap04-04-01.html#chap04-04-01">Section 4-4-1</A>),
outline edit (<A HREF="chap06-10-02.html#chap06-10-02">Section 6-10-2</A>),
and measuring (<A HREF="chap04-07-04.html#chap04-07-04">Section 4-7-4</A>).</LI>
<LI><B>Arrow Distance</B>
Icons set the distance that arrow keys will move, to full, half, and quarter units (<A HREF="chap02-04-01.html#chap02-04-01">Section 2-4-1</A>).</LI>
<LI><B>Object or Area</B>
Icons switch between object selection and area definition (<A HREF="chap02-01-03.html#chap02-01-03">Section 2-1-3</A>).</LI>
<LI><B>Hard Select</B>
Icon to toggle the selection of hard-to-select objects (<A HREF="chap02-01-05.html#chap02-01-05">Section 2-1-5</A>).</LI>
<LI><B>Preferences</B>
Icon to show the preferences dialog (<A HREF="chap06-03.html#chap06-03">Section 6-3</A>).</LI>
<LI><B>Undo</B>
Icons to undo and redo (<A HREF="chap06-07.html#chap06-07">Section 6-7</A>).</LI>
<LI><B>Hierarchy</B>
Icons to go back and forward while traversing the hierarchy (<A HREF="chap03-05.html#chap03-05">Section 3-5</A>).</LI>
<LI><B>Expansion</B>
Icons to expand and unexpand cell instances (<A HREF="chap03-04.html#chap03-04">Section 3-4</A>).</LI>
</UL>
<!-- PAGE BREAK --><A NAME="chap04-02"></A>
<CENTER><FONT SIZE=6><B>Chapter 4: Display</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap04-01.html#chap04-01.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>4-2: The Messages Window</H2></CENTER></TD>
<TD><CENTER><A HREF="chap04-03.html#chap04-03.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Window/Messages Window/Save Messages... -->
<!-- COMMAND Window/Messages Window/Clear -->
<!-- COMMAND Window/Messages Window/Set Font... -->
The messages window is a text window near the bottom of the screen.
Many commands list their results in the messages window, and minor error messages are reported there.
<P>
The text in the messages window can be selected with the cursor and edited with the <B>Cut</B>, <B>Copy</B>,
and <B>Paste</B> commands (in menu <B>Edit</B>).
You can remove all text with the <B>Clear</B> command (in menu <B>Window / Messages Window</B>).
In addition, you can right-click in the messages window to Cut, Copy, Clear, or Paste text.
<P>
The text in the messages window can be saved to disk by using the <B>Save Messages...</B>
command (in menu <B>Window / Messages Window</B>).
You will be prompted for the place to save the text.
<P>
You can select the messages window font with the <B>Set Font...</B> command.
<!-- PAGE BREAK --><A NAME="chap04-03"></A>
<CENTER><FONT SIZE=6><B>Chapter 4: Display</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap04-02.html#chap04-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>4-3: Creating and Deleting Editing Windows</H2></CENTER></TD>
<TD><CENTER><A HREF="chap04-04-01.html#chap04-04-01.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Window/Close Window -->
<!-- COMMAND Window/Adjust Position/Tile Horizontally -->
<!-- COMMAND Window/Adjust Position/Tile Vertically -->
<!-- COMMAND Window/Adjust Position/Cascade -->
<!-- COMMAND Window/Adjust Position/Move to Other Display -->
<!-- COMMAND Window/Adjust Position/Remember Location of Display -->
<!-- PREFERENCE Display/Display Control -->
Initially, there is only one editing window on the screen.
Electric allows you to create multiple editing windows,
each of which can show a different cell.
You can also have the same cell in more than one window to see it at different scales and locations.
<P>
New windows are created by checking the appropriate checkbox in the <B>New Cell...</B> or <B>Edit Cell...</B>
commands (in menu <B>Cell</B>).
New windows can also be created from the cell explorer by using the context menu on a cell name.
<P>
All of the windows are listed at the bottom of the <B>Window</B> pulldown menu,
including the Messages Window.
To bring a window to the top for editing, select its name from this list.
To cycle through the different windows, type "q".
<P>
To delete a window, click its close box, or use the <B>Close Window</B> command (in menu <B>Window</B>).
Note that you cannot delete the last window on systems where the pulldown menu is inside of each window,
because then the pulldown menus would become unavailable.
<P>
When there are many editing windows on the display,
you can arrange them neatly with the <B>Window / Adjust Position</B> commands.
The <B>Tile Horizontally</B> command adjusts the windows so that they are full-width,
but just tall enough to fill the screen, one above the other.
The <B>Tile Vertically</B> command adjusts the windows so that they are full-height,
but just wide enough to fill the screen, one next to the other.
The <B>Cascade</B> command adjusts the windows so that they are all the same size and overlap each other uniformly from the upper-left to the lower-right.
<P>
<H3>Window Frames</H3>
<P>
When Electric runs on the Windows operating systems, each editing window lives inside of a larger frame on the display.
This is called an MDI (Multiple Document Interface) interaction.
On non-Windows systems (UNIX/Linux, Macintosh, etc.) each editing window is a separate frame on the display.
This is called an SDI (Single Document Interface) interaction.
Note that Windows users can request an SDI interaction, and non-Windows users can request MDI interaction.
This is done with command-line switches (see <A HREF="chap01-04.html#chap01-04">Section 1-4</A>).
<P>
When running in SDI mode, there are two extra commands (in menu <B>Windows</B>) for controlling the frames:
<UL>
<LI><B>Move to Other Display</B> requests that the current window frame be moved to a different display.
Some systems (Macintosh) let you drag the frames between displays, but others keep each display distinct, requiring
this command to make the move.</LI>
<LI><B>Remember Location of Display</B> requests that the current editing window's frame location be used as the
initial location when Electric runs again.
This command can also be used to start the system on a different display.</LI>
</UL>
<P>
<!-- NEED 4in -->
<H3>Display Considerations</H3>
<P>
Electric offers many settings for controlling the display, available in the Display Control Preferences
(in menu <B>File / Preferences...</B>, "Display" section, "Display Control" tab).
<P>
<CENTER><IMG SRC="fig04-20.png" ALT="Figure 4.20"></CENTER>
<P>
The status area at the bottom of the screen shows current selection, cursor coordinates, etc.
If "Show hierarchical cursor coordinates in status bar" is checked,
it will also show global coordinates when traversing the hierarchy.
<P>
The side bar can be set to always show on the right by checking "Side Bar defaults to the right side".
See <A HREF="chap01-07.html#chap01-07">Section 1-7</A> for more on the side bar.
<P>
When panning the window using menu commands, the distance to pan can be controlled with the
"Panning distance" selection (see <A HREF="chap04-04-02.html#chap04-04-02">Section 4-4-2</A> for more on panning).
<P>
<!-- NEED 4in -->
<H3>Display Algorithms</H3>
<P>
Electric has three different display algorithms:
<UL>
<LI>The "Pixel Display Algorithm" is the older.
It was the only display algorithm prior to version 8.04 of Electric.</LI>
<LI>The "Vector Display Algorithm" is newer, and is faster for panning and zooming.
This algorithm optimizes the display of circuitry by simplifying the display of objects when they get to be very small.
For example, when zoomed-out very far, a transistor may be only 1 screen pixel in size, and it does not make sense to carefully
compute and draw all of its parts.
In such cases, the algorithm "simplifies" display of the object, usually drawing it as a single dot.
<P>
Besides simplifying individual nodes and arcs, Electric also simplifies the display of entire cells
if their contents are all too small to draw.
Such simplification consists of keeping a small "image" of the cell, which can be quickly scaled and drawn in the proper place.
<P>
There are some controls for the Vector Display Algorithm.
The first control determines the size at which objects are simplified.
The default is to "Simplify objects smaller than 3 pixels".
Making this value smaller will cause more detailled drawing, but take longer.
The next control determines the threshold for simplifying entire cells.
Although a cell's contents may be small, the cell may be quite large on the screen, and so should not be simplified
(this happens to top-level cells in a deep hierarchy).
The default limit is to "Do not simplify cells greater than 10 percent of the screen".
Making this number smaller causes more cells to be drawn fully.
Making this number zero turns off cell simplification.</LI>
<LI>The "Layer Display Algorithm" is the newest, but still experimental.
It has controls for the use of pattern displays, and has controls for Alpha blending (used in layer composition).
When zoomed out below the "Alpha blending overcolor limit", standard alpha blending composition rule is used.
When zoomed in above this limit, alphablending with overcolor composition rule is used.</LI>
</UL>
<!-- PAGE BREAK --><A NAME="chap04-04-01"></A>
<CENTER><FONT SIZE=6><B>Chapter 4: Display</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap04-03.html#chap04-03.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>4-4-1: Zooming</H2></CENTER></TD>
<TD><CENTER><A HREF="chap04-04-02.html#chap04-04-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Window/Zoom In -->
<!-- COMMAND Window/Zoom Out -->
<!-- COMMAND Window/Fill Window -->
<!-- COMMAND Window/Special Zoom/Focus on Highlighted -->
<!-- COMMAND Window/Special Zoom/Zoom Box -->
<!-- COMMAND Window/Special Zoom/Make Grid Just Visible -->
<!-- COMMAND Window/Special Zoom/Match Other Window -->
<!-- COMMAND Edit/Modes/Edit/Toggle Zoom -->
The scale of a window's contents can be controlled in a number of ways.
The <B>Zoom In</B> command (in menu <B>Window</B>) zooms in, magnifying the contents of the display.
The <B>Zoom Out</B> command does the opposite - it shrinks the display.
Both zoom by a factor of two.
<P>
During normal editing, you can zoom the display with the shift-right button
(see <A HREF="chap01-08.html#chap01-08">Section 1-8</A>).
Holding shift-right while dragging a rectangular area causes the display to zoom into that area, making it fill the screen.
Clicking shift-right in a single location causes the display to zoom out, centered at that point.
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig04-08.png" ALT="Figure 4.8"></CENTER></TD><TD>
You can also use the Zoom tool from the tool bar to zoom in and out.
This has the same zoom in and out functions, but they are now attached to the left button (no shift needed).
To zoom into an area, click and drag out that area.
To zoom out, hold the shift key and click in the center of the desired area.
The Zoom tool can also scale continuously by clicking the right button and dragging up and down.
This mode can also be invoked with the
<B>Toggle Zoom</B> command (in menu <B>Edit / Modes / Edit</B>).
</TD></TR></TABLE>
<P>
The most useful scale change command is <B>Fill Window</B> (in menu <B>Window</B>),
which makes the current cell fill the window.
<P>
There are four special zooming commands in the <B>Window / Special Zoom</B> menu:
<UL>
<LI><B>Focus on Highlighted</B> makes the highlighted objects fill the display.
This is useful for examining a specific area of the display.
To examine a specific area of the display that is not necessarily aligned with nodes and arcs,
use the area select commands (see <A HREF="chap02-01-03.html#chap02-01-03">Section 2-1-3</A>).</LI>
<LI><B>Zoom Box</B> allows you to drag-out a rectangle, and then zooms to that area.
</LI>
<LI><B>Make Grid Just Visible</B> zooms in or out until the grid
 is minimally visible.
Any futher zoom-out from this point will make the grid invisible.
If the grid is not being displayed, it is turned on.
See <A HREF="chap04-07-01.html#chap04-07-01">Section 4-7-1</A> for more on the grid.
</LI>
<LI><B>Match Other Window</B> redraws the current window at the same scale as the other.
If there are more than two windows, you will be asked to select the window to match.</LI>
</UL>
<!-- NEED 3in -->
<H3>4-4-2: Panning</H3>
<!-- COMMAND Window/Pan Left -->
<!-- COMMAND Window/Pan Right -->
<!-- COMMAND Window/Pan Up -->
<!-- COMMAND Window/Pan Down -->
<!-- COMMAND Window/Special Pan/Center Selection -->
<!-- COMMAND Window/Special Pan/Center Cursor -->
<!-- COMMAND Window/Special Pan/Match Other Window in X -->
<!-- COMMAND Window/Special Pan/Match Other Window in Y -->
<!-- COMMAND Window/Special Pan/Match Other Window in X, Y, and Scale -->
<!-- COMMAND Window/Redisplay Window -->
<!-- COMMAND Edit/Modes/Edit/Toggle Pan -->
Besides scaling, you can also pan the window contents,
shifting it about on the display.
This is typically done with the sliders on the right and bottom of the window.
On systems that have a mouse wheel, you can use it to pan vertically
(and hold the shift key while rolling the mouse wheel to pan horizontally).
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig04-09.png" ALT="Figure 4.9"></CENTER></TD><TD>
You can also use the Pan tool from the tool bar to move the window contents.
Once in this mode, clicking and dragging slides the circuitry smoothly.
This mode can also be invoked with the
<B>Toggle Pan</B> command (in menu <B>Edit / Modes / Edit</B>).
</TD></TR></TABLE>
<P>
Yet another way to control screen panning is to use menu commands.
The <B>Pan Left</B>, <B>Pan Right</B>, <B>Pan Up</B>,
and <B>Pan Down</B> commands (in menu <B>Window</B>) all shift the window contents appropriately
(and because they are bound to quick keys, these operations can even be done from the keyboard).
By default, these commands shift the screen by about 30% of its size.
You can use the Display Control Preferences
(in menu <B>File / Preferences...</B>, "Display" section, "Display Control" tab),
to change that amount.
The <B>Small</B> panning distance causes subsequent shifts to be about 15% of the screen size.
The <B>Medium</B> panning distance causes subsequent shifts to be about 30% of the screen size.
The <B>Large</B> panning distance causes subsequent shifts to be about 60% of the screen size.
<P>
There are five special panning commands in the <B>Window / Special Pan</B> menu:
<UL
<LI><B>Center Selection</B> makes the window shift so that the highlighted objects are in the center of the window.</LI>
<LI><B>Center Cursor</B> makes the window shift so that the current cursor location is in the center of the window.
Note that this command is useful only when bound to a keystroke,
because you cannot issue the command and have a valid cursor location at the same time.</LI>
<LI><B>Match Other Window in X</B> redraws the current window so that it has the same horizontal pan as the other.
If there are more than two windows, you will be asked to select the window to match.</LI>
<LI><B>Match Other Window in Y</B> redraws the current window so that it has the same vertical pan as the other.
If there are more than two windows, you will be asked to select the window to match.</LI>
<LI><B>Match Other Window in X, Y and Scale</B> redraws the current window so that it has the same zoom and pan as the other.
If there are more than two windows, you will be asked to select the window to match.</LI>
</UL>
<P>
One final command is useful if the display appears incorrect.
If this happens, redraw the screen with the <B>Redisplay Window</B> command (in menu <B>Window</B>).
<!-- NEED 3in -->
<H3>4-4-3: Focus</H3>
<!-- COMMAND Window/Go To Previous Focus -->
<!-- COMMAND Window/Go To Next Focus -->
<!-- COMMAND Window/Set Focus... -->
A particular scale and pan in a window is called a <I>focus</I>.
Each time you zoom in or out, the focus is saved in a list.
<P>
You can move back through the list and show the last focus with the
<B>Go To Previous Focus</B> command (in menu <B>Windows</B>).
You can move forward in the list with the
<B>Go To Next Focus</B> command.
<P>
<TABLE><TR><TD>
The <B>Set Focus...</B> command (in menu <B>Window</B>) lets you type specific pan and zoom factors.
The "X Center" and "Y Center" fields are the database coordinates of the center of the screen.
The "Horizontal Grid Units" field is the number of database grid units across the screen.
</TD><TD><CENTER><IMG SRC="fig04-02.png" ALT="Figure 4.2"></CENTER></TD></TR></TABLE>
<!-- PAGE BREAK --><A NAME="chap04-05"></A>
<CENTER><FONT SIZE=6><B>Chapter 4: Display</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap04-04-03.html#chap04-04-03.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>4-5: Layer Visibility</H2></CENTER></TD>
<TD><CENTER><A HREF="chap04-06-01.html#chap04-06-01.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<TABLE><TR><TD>
The nodes and arcs on the display are composed of more basic <I>layers</I>.
By using the "Layers" tab of the Side Bar,
you can control which layers are actually drawn.
<P>
The layers tab shows the layers in the current technology.
Changing the technology popup at the top of this tab will change the current technology.
When a layer is checked, it is visible.
You can turn the check on and off by double-clicking on a line.
You can also use the "Make Visible" and "Make Invisible" buttons.
The "Select All" button selects every layer so that the "Make..." buttons will work on the entire set.
<P>
Note that the layers are listed in order of height, and that you can select multiple entries in the list by using
the Shift key.
This means that you can easily control visibility by depth in the chip.
<P>
Two buttons in the middle control the <I>highlighting</I> of layers.
By selecting a layer and clicking "Toggle", it makes that layer stand out on the display.
Use "Clear" to return to normal layer display.
<P>
The bottom of the tab lets you choose which of the different types of text will be visible.
These different types of text are described more fully in <A HREF="chap06-08-01.html#chap06-08-01">Section 6-8-1</A>.
</TD><TD><CENTER><IMG SRC="fig04-01.png" ALT="Figure 4.1"></CENTER></TD></TR></TABLE>
<!-- PAGE BREAK --><A NAME="chap04-06-01"></A>
<CENTER><FONT SIZE=6><B>Chapter 4: Display</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap04-05.html#chap04-05.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>4-6-1: Electric's Color Model</H2></CENTER></TD>
<TD><CENTER><A HREF="chap04-06-02.html#chap04-06-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
The Layers Preferences (in menu <B>File / Preferences...</B>, "Display" section, "Layers" tab)
controls the appearance of individual layers in the editing window.
<P>
Before explaining this panel,
it is useful to understand the distinction between <I>transparent</I> and <I>opaque</I> layers in Electric.
<P>
Every layer in a technology is either transparent or opaque.
Transparent layers are able to overlap each other, and it is possible to see all of them.
Typically, the most commonly used layers are transparent because it is clearer to distinguish.
<P>
The remaining layers in a technology are opaque,
meaning that when drawn,
they completely obscure anything underneath.
These layers typically have stipple patterns so that they do not cover all of the bits.
In this way, the opaque layers can combine without obscuring the display.
Because opaque color does obscure everything under it,
the less common layers are drawn in this style.
<P>
When editing colors, the opaque layers have only one color,
whereas the transparent layers have many different colors,
considering their interaction with other transparent layers.
<!-- NEED 6in -->
<H3>4-6-2: Editing Colors and Patterns</H3>
<!-- COMMAND Window/Color Schemes/Restore Default Colors -->
<!-- COMMAND Window/Color Schemes/Black Background Colors -->
<!-- COMMAND Window/Color Schemes/White Background Colors -->
<!-- PREFERENCE Display/Layers -->
The Layers Preferences
(in menu <B>File / Preferences...</B>, "Display" section, "Layers" tab)
controls the appearance of layers and other display elements.
The top of the dialog lists all possible things that can have their color changed:
<UL>
<LI>The layers in each technology.</LI>
<LI>Special colors such as the background, text, waveform windows, etc.
(these are found at the bottom of the "Layer" list).</LI>
</UL>
<P>
<CENTER><IMG SRC="fig04-06.png" ALT="Figure 4.6"></CENTER>
<P>
Each layer has a color on the left and a pattern on the right.
The color can be specified directly in the color picker, or it can be set to one of the
transparent layers.
If you change the color of a layer that has transparency assigned to it,
the change will affects all layers assigned to that transparency.
<P>
You can draw in the pattern area to set a pattern,
and you can choose from a set of predefined patterns by clicking on their image
below the pattern-editing area.
You can also choose an outline texture to draw.
<P>
The lower-right controls the appearance of the layer on the printed page.
A separate "Use Fill Pattern" control lets you use patterns on a printer, even if they are not used on the display.
The Opacity is also used for printer blending, and for some display algorithms.
<P>
When changing the background color,
note that it must contrast with both the highlight color and the inverse of the highlight color
(the inverse is black in the default settings).
<P>
After many changes to layer colors and patterns,
you can restore the original state by pressing the "Factory Reset All Layers" button.
<P>
To save the trouble of hand-editing all of the colors, there are three predefined color schemes,
available with the commands of the <B>Window / Color Schemes</B> menu:.
<UL>
<LI><B>Black Background Colors</B> sets the background to black.</LI>
<LI><B>White Background Colors</B> sets the background to white.</LI>
<LI><B>Restore Default Colors</B> sets the background to gray (the default).
</LI>
</UL>
<!-- PAGE BREAK --><A NAME="chap04-07-01"></A>
<CENTER><FONT SIZE=6><B>Chapter 4: Display</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap04-06-02.html#chap04-06-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>4-7-1: Drawing a Grid</H2></CENTER></TD>
<TD><CENTER><A HREF="chap04-07-02.html#chap04-07-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Window/Toggle Grid -->
<!-- PREFERENCE Display/Grid -->
The <B>Toggle Grid</B> command (in menu <B>Window</B>) turns the grid display on and off.
The grid consists of dots at every grid unit, and bolder dots every 10 units,
but both of these distances are settable.
<P>
Initially, the grid dots are spaced 1 unit apart.
The size of a grid unit can be related to real-world distance by considering the <I>scale</I> of the
technology.
For example, in the MOSIS CMOS technology, the scale is 0.2 microns,
as shown in the status area.
When the grid is displayed, the dots are therefore 0.2 microns apart.
For more information on scaling,
<A HREF="chap07-02-01.html#chap07-02-01">Section 7-2-1</A>.
<P>
Note that the grid display changes as you zoom in and out.
When zoomed too far out to show all of the dots, only the bolder dots are shown.
When zoomed too far out to show even the bolder dots, the grid is not displayed.
However, the fact that the grid should be on is remembered,
so it reappears when you zoom back in.
Use the <B>Make Grid Just Visible</B> command (in menu <B>Window / Special Zoom</B> to change the zoom factor
so that the grid is minimally visible.
<P>
<TABLE><TR><TD>
The Grid Preferences (in menu <B>File / Preferences...</B>, "Display" section, "Grid" tab)
presents a dialog in which grid spacing may be set.
You can change the grid spacing for the current window,
and also set a default grid spacing to be used in new windows.
<P>
It is possible to change the horizontal and vertical grid dot spacings.
You can also change number of grid dots between bold ones.
When the X and Y axes are shown, they pass through the cell center.
</TD><TD><CENTER><IMG SRC="fig04-03.png" ALT="Figure 4.3"></CENTER></TD></TR></TABLE>
<P>
The grid spacing is used by arrow keys when they move objects
(see <A HREF="chap02-04-01.html#chap02-04-01">Section 2-4-1</A> for more on arrow key motion).
<P>
The Alignment part of this Preferences panel is discussed in the
<A HREF="chap04-07-02.html#chap04-07-02">next Section</A>
<H3>4-7-2: Aligning to a Grid</H3>
<!-- COMMAND Edit/Move/Align to Grid -->
When moving or creating circuitry,
the cursor location is snapped to a grid so that editing is cleaner.
This snapping is controlled by the alignment options
(which are not necessarily the same as the grid options).
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig04-03.png" ALT="Figure 4.3"></CENTER></TD><TD>
<P>
The Grid Preferences
(in menu <B>File / Preferences...</B>, "Display" section, "Grid" tab)
presents a dialog in which alignment values may be set.
For example, if the grid spacing is 2x3, and the alignment is 0.5,
then there are up to six different positions for placement inside a displayed grid rectangle.
<P>
Because there are distance settings, there are 3 alignment values.
The settings are labeled "Full", "Half", and "Quarter", so sensible users should scale the values accordingly.
However, for more flexibility, any value can be entered here.
The settings are controlled by the toolbar icons and the commands in the <B>Edit / Modes / Movement</B> menu
(see <A HREF="chap02-04-01.html#chap02-04-01">Section 2-4-1</A>).
</TD></TR></TABLE>
<P>
The <B>Align to Grid</B> command (in menu <B>Edit / Move</B>)
cleans up the selected objects by moving them to aligned coordinates.
This is useful for circuitry that has been imported from external sources,
and needs to be placed cleanly for further editing.
<H3>4-7-3: Aligning to Objects</H3>
<!-- COMMAND Edit/Move/Align Horizontally to Left -->
<!-- COMMAND Edit/Move/Align Horizontally to Right -->
<!-- COMMAND Edit/Move/Align Horizontally to Center -->
<!-- COMMAND Edit/Move/Align Vertically to Top -->
<!-- COMMAND Edit/Move/Align Vertically to Bottom -->
<!-- COMMAND Edit/Move/Align Vertically to Center -->
It is often the case that a collection of objects should line-up uniformly.
The commands of the <B>Edit / Move</B> menu offer six possible ways to do this.
<P>
The command <B>Align Horizontally to Left</B> (and <B>Align Horizontally to Right</B>)
moves all of the selected objects so that their left edge (or right edge) is moved to the leftmost (or rightmost)
edge of those objects.
The command <B>Align Horizontally to Center</B> moves all of the selected objects so that their X center
is at the location of the X center coordinate of those objects.
<P>
The command <B>Align Vertically to Top</B> (and <B>Align Vertically to Bottom</B>)
moves all of the selected objects so that their top edge (or bottom edge) is moved to the topmost (or bottommost)
edge of those objects.
The command <B>Align Vertically to Center</B> moves all of the selected objects so that their Y center
is at the location of the Y center coordinate of those objects.
<!-- NEED 2in -->
<H3>4-7-4: Measuring</H3>
<!-- COMMAND Edit/Modes/Edit/Toggle Measure Distance -->
<TABLE><TR><TD><CENTER><IMG SRC="fig04-04.png" ALT="Figure 4.4"></CENTER></TD><TD>
If you wish to find the distance between any two points on the display,
use the "Measure" tool from the tool bar.
</TD></TR></TABLE>
<P>
This mode can also be invoked with the
<B>Toggle Measure Distance</B> command (in menu <B>Edit / Modes / Edit</B>).
Another way to measure distances is to use the cursor coordinates, displayed in the status area.
<P>
In measure mode, each click places a new point on the display, and shows the distance to the previous point.
Clicking the right button lets you start a new measure point without connecting it to the previous one.
Double-clicking the right button removes the measurements.
<P>
The measured distance can be used by the <B>Array...</B> command (in menu <B>Edit</B>) to specify spacing
(see <A HREF="chap06-04.html#chap06-04">Section 6-4</A>).
<!-- PAGE BREAK --><A NAME="chap04-08"></A>
<CENTER><FONT SIZE=6><B>Chapter 4: Display</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap04-07-04.html#chap04-07-04.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>4-8: The Cell Explorer</H2></CENTER></TD>
<TD><CENTER><A HREF="chap04-09.html#chap04-09.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
The cell explorer resides in the "Explorer" tab of the side bar.
It shows a hierarchical tree with three main sections: LIBRARIES, ERRORS, and JOBS.
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig03-16.png" ALT="Figure 3.16"></CENTER></TD><TD>
The LIBRARIES section of the explorer lists all libraries and cells.
You can examine them in three different ways:
<UL>
<LI><B>Alphabetically</B> all cells are listed alphabetically.</LI>
<LI><B>By group</B> all cells are listed alphabetically, but are also organized into cell groups.</LI>
<LI><B>By hierarchy</B> only the "top level" cells of each library
 are listed
(top level cells are those that are not used as instances in any other cells).
Inside of a cell are the subcells that comprise it, along with the number of times that that cell appears.</LI>
</UL>
To change the view, right-click on the LIBRARIES icon and choose a view.
Note that libraries and cells which have been modified are listed in bold-face.
</TD></TR></TABLE>
<P>
The second part of the cell explorer is the ERRORS section.
This lists all errors that were generated by other tools (DRC, ERC, NCC, etc.)
and which can be examined with the "&lt;" and "&gt;" keys.
<P>
The third section of the explorer is the JOBS section.
Here are listed all running tasks in Electric.
The section is usually empty, but if multiple jobs are running at the same time,
you can examine them and manipulate them.
<P>
Many special functions can be done in the cell explorer.
You can double-click on any cell name to see that cell in the right half of the window.
You can drag a cell or cell-group from one library to another.
This makes a copy of that cell or group in the destination library.
<!-- NEED 3in -->
<P>
<H3>Context Menus for Libraries</H3>
<P>
There are special context menus available by right-clicking on an entry
(use command-click on the Macintosh).
<P>
<TABLE><TR><TD>
<BR><BR>
The context menu for the LIBRARIES icon has 4 parts.
The top three entries let you control the expansion of the tree.
The middle entry lets you create a new cell.
The next three entries lets you view the libraries in different ways (explained above).
The bottom entry lets you search for a cell by name.
<BR><BR>
</TD><TD><CENTER><IMG SRC="fig03-26.png" ALT="Figure 3.26"></CENTER></TD></TR></TABLE>
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig03-27.png" ALT="Figure 3.27"></CENTER></TD><TD>
The context menu for each library icon has 5 parts.
The top three entries let you control the expansion of the tree.
The next entry lets you make the library the current library.
The next entry lets you manage the library with Project Management
(see
 <A HREF="chap06-12.html#chap06-12">Section 6-12</A>).
The next entry lets you create a new cell in the library.
The bottom four entries let you rename, save, delete, or reload the library.
</TD></TR></TABLE>
<P>
<TABLE><TR><TD>
The context menu for each cell icon has 5 parts.
The top two entries let you edit the cell (in the current or in a new window).
The next two entries let you place an instance of the cell and create a new cell.
The next three entries let you create a new cell version, create a new cell copy, or delete the cell.
The next two entries let you rename the cell or change its view.
The bottom entry lets you rearrange cell groups.
</TD><TD><CENTER><IMG SRC="fig03-28.png" ALT="Figure 3.28"></CENTER></TD></TR></TABLE>
<P>
<!-- NEED 3in -->
<TABLE><TR><TD><CENTER><IMG SRC="fig03-29.png" ALT="Figure 3.29"></CENTER></TD><TD>
The context menu for each cell group has 3 parts.
The top three entries let you control the expansion of the tree.
The middle entry let you create a new cell in the group.
The bottom two entries let you rename or duplicate every cell in the group.
</TD></TR></TABLE>
<P>
<TABLE><TR><TD>
The context menu for a multi-page schematic cell has two parts
(see <A HREF="chap07-05-02.html#chap07-05-02">Section 7-5-2</A> for more on multi-page schematics).
The top two entries let you edit the cell (in the current or in a new window).
The bottom entries let you add a new page to the current multi-page schematic,
or delete the current page of the multi-page schematic.
</TD><TD><CENTER><IMG SRC="fig03-30.png" ALT="Figure 3.30"></CENTER></TD></TR></TABLE>
<P>
<H3>Context Menus for Errors and Jobs</H3>
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig03-32.png" ALT="Figure 3.32"></CENTER></TD><TD>
In the ERRORS section, each collection of errors has a context menu with 4 entries:
"Delete" removes this set of errors;
"Get Info" describes this set of errors;
"Save" saves the errors to a disk file; and
"Set Current" makes this the current set of errors (which can be examined with the "&lt;" and "&gt;" keys).
</TD></TR></TABLE>
<P>
<TABLE><TR><TD>
<BR><BR>
The context menu for individual jobs under the JOBS icon has 3 entries:
"Get Info" requests any additional information about the job;
"Abort" requests that the Job stop itself (not always possible); and
"Delete" removes a job from the queue.
<BR><BR>
</TD><TD><CENTER><IMG SRC="fig03-31.png" ALT="Figure 3.31"></CENTER></TD></TR></TABLE>
<!-- PAGE BREAK --><A NAME="chap04-09"></A>
<CENTER><FONT SIZE=6><B>Chapter 4: Display</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap04-08.html#chap04-08.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>4-9: Printing</H2></CENTER></TD>
<TD><CENTER><A HREF="chap04-10.html#chap04-10.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND File/Print... -->
<!-- COMMAND File/Page Setup... -->
<!-- PREFERENCE General/Printing -->
To make a paper copy of the contents of the current window,
use the <B>Print...</B> command (in menu <B>File</B>).
You can use the <B>Page Setup...</B> command for general print settings.
<P>
As an alternative to printing, you can request the system to write a PostScript, HPGL, or PNG file.
To do this,
use the <B>PostScript...</B>, <B>HPGL</B>, and <B>PNG (Portable Network Graphics)...</B> commands
(in menu <B>File / Export</B>).
<P>
For specific printing and PostScript settings, use the
Printing Preferences (in menu <B>File / Preferences...</B>, "General" section, "Printing" tab).
<P>
<TABLE><TR><TD>
The "For all printing" section at the top has some general options.
The default is to include the entire cell,
but you can choose to print only what is highlighted or only what is displayed by selecting the appropriate buttons.
</TD><TD><CENTER><IMG SRC="fig04-05.png" ALT="Figure 4.5"></CENTER></TD></TR></TABLE>
<P>
Note that when printing the highlighted area,
a precise selection can be made with Area selection
(see <A HREF="chap02-01-03.html#chap02-01-03">Section 2-1-3</A>).
<P>
The "Plot Date In Corner" option causes additional information to appear in the corner of the plot.
<P>
The "Print resolution" is the number of dots-per-inch (DPI) that the printer expects.
Higher resolutions use more memory for the print image.
<P>
<!-- NEED 2in -->
There are many PostScript options, available in the lower section.
<UL>
<LI>
"Encapsulated" requests that the PostScript output to be insertable in other documents (EPS).
</LI>
<LI>
"Color" offers four color choices: "Black&amp;White",
uses stipple patterns for the layers;
"Color" uses solid colors,
but does not handle overlap (because PostScript does not handle transparency);
"Color Stippled" uses color stipple patterns for better overlap; and
"Color Merged" computes layer overlap and generates blended colors to recreate the appearance on the screen
(this takes time and memory).
</LI>
<LI>"Printer" and "Plotter" let you specify the size of the page
(choose "Printer" for devices that print onto single pieces of paper,
and "Plotter" for devices that print onto continuous rolls of paper).
The "Margin" field is the amount of white space to leave on the sides.
All distances in the "Height", "Width", and "Margin" fields are in inches.
</LI>
<LI>
"Line Width" controls the width of PostScript lines.  Although they default to 1, this may be too thin
on some printers.
</LI>
<LI>
"Rotation" controls rotation of the image by 90 degrees so that it fits better on the page.
The default is "No Rotation", but the popup can switch to "Rotate plot 90 degrees" or
"Auto-rotate plot to fit".
</LI>
<LI>
"Synchronize to file" requests that PostScript files be synchronized with the current cell.
Clicking the "Set" button prompts you for a file name,
which is stored with the current cell.
Whenever you write any PostScript,
Electric checks all synchronized cells to see if they are newer than their associated disk file.
If they are newer, the files are regenerated.
Thus, you can specify PostScript files for many different cells in a library,
and when PostScript is generated, all of the files will be properly updated to reflect the state of the design.
</LI>
<LI>"EPS Scale" sets the scale factor of the specified cell when it is written as encapsulated PostScript.
</LI>
</UL>
<!-- PAGE BREAK --><A NAME="chap04-10"></A>
<CENTER><FONT SIZE=6><B>Chapter 4: Display</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap04-09.html#chap04-09.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>4-10: Text Windows</H2></CENTER></TD>
<TD><CENTER><A HREF="chap04-11-01.html#chap04-11-01.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Edit/Text/Find Text... -->
<!-- COMMAND File/Import/Text Cell Contents... -->
<!-- COMMAND File/Export/Text Cell Contents... -->
<TABLE><TR><TD>
Some cells are textual in nature (VHDL, Verilog, Netlists, or Documentation), and cause text to appear in the edit window.
<P>
When text editing, the standard point-and-click commands apply.
You can use the <B>Cut</B>, <B>Copy</B>, and <B>Paste</B> commands (in menu <B>Edit</B>).
</TD><TD><CENTER><IMG SRC="fig04-12.png" ALT="Figure 4.12"></CENTER></TD></TR></TABLE>
<P>
The contents of a text window can be saved to disk with the <B>Text Cell Contents...</B>
command (in menu <B>File / Export</B>)
and restored from disk with the <B>Text Cell Contents...</B> command (in menu <B>File / Import</B>).
<P>
Note that there is no "saving" of text windows because they are editing internal data structures.
Therefore every change updates the information in Electric
(but the library must be saved to truly preserve changes).
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig04-13.png" ALT="Figure 4.13"></CENTER></TD><TD>
Text searching is done with the <B>Find Text...</B> command (in menu <B>Edit / Text</B>).
You can find and/or replace text with the appropriate buttons.
Check boxes allow the search to be case sensitive, have regular expressions,
and to go in the reverse direction.
In addition, you can jump directly to a specified line number.
</TD></TR></TABLE>
<P>
Interestingly, the <B>Find Text...</B> command can also be used outside of the text edit window.
If you are editing a layout or schematic, this dialog will search all of the node, arc, export, and other names.
The checkboxes in the "Objects to Search" area control which of these pieces of text will be considered.
"Automatically Generated" names are those created for you by the system.
They can be included in the search but normally are not.
<!-- PAGE BREAK --><A NAME="chap04-11-01"></A>
<CENTER><FONT SIZE=6><B>Chapter 4: Display</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap04-10.html#chap04-10.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>4-11-1: 3D Introduction</H2></CENTER></TD>
<TD><CENTER><A HREF="chap04-11-02.html#chap04-11-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Window/3D Window/3D View -->
<!-- COMMAND Window/3D Window/Test Hardware -->
Electric has the ability to view an integrated circuit in 3-dimensions as shown below,
allowing a fuller understanding of the interaction between layers.
When displaying 3D, you can rotate, zoom, and pan the image to get a better view, however
you can no longer change the circuit.
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig04-10.png" ALT="Figure 4.10"></CENTER></TD><TD>
The 3D View is based on Java3D, the Java interface for interactive 3D graphics.
Because not everyone has a full 3D capability on their computer, the 3D facilities are dependent on
these extra plugins:
<UL>
<LI><B>Java3D</B> is the core 3D package and <U>must</U> be installed.</LI>
<LI><B>3D axes</B> is an optional extra download from Static Free Software that shows a 3D axis.</LI>
<LI><B>JMF</B> is an optional package from Sun Microsystems that enables animation.</LI>
<LI><B>Animation</B> is an optional extra download from Static Free Software that does animation (it needs JMF).</LI>
</UL>
See <A HREF="chap01-05.html#chap01-05">Section 1-5</A> for details about getting these extensions.
</TD></TR></TABLE>
<P>
To see the 3D view of a layout cell, use the <B>3D View</B> command (in menu <B>Window / 3D Window</B>).
The cell is displayed in 3D, and mouse movements will rotate, pan, or zoom the circuit.
Use the left button to rotate, the right button for panning, and the middle one for zooming.
When zooming, drag the middle button in one direction to zoom in, and the other direction to zoom out.
Standard pan and zoom operations (in menu <B>Window</B>) are also available
(see <A HREF="chap04-04-01.html#chap04-04-01">Section 4-4-1</A> and 
<A HREF="chap04-04-02.html#chap04-04-02">Section 4-4-2</A>).
<P>
Each layer of a node or arc is drawn as a separate object in the 3D view.
If you click on a node or arc in a 2D view, all of its layers will be highlighted in the 3D view.
Conversely, clicking on any layer of a node or arc in the 3D view will show the entire component in the 2D view.
<P> 
<TABLE><TR><TD><CENTER><IMG SRC="fig04-16.png" ALT="Figure 4.16"><BR>
<IMG SRC="fig04-17.png" ALT="Figure 4.17"></CENTER></TD><TD>
Cell instances will be drawn as bounding boxes if they are unexpanded (top illustration), and will show
their contents if expanded (bottom illustration).
</TD></TR></TABLE>
<P>
<H3>Troubleshooting</H3>
<P>
If you are running on Windows and are using MDI mode (multiple document interface)
the 3D display may not work properly.
See <A HREF="chap01-04.html#chap01-04">Section 1-4</A> for instructions on running Electric in SDI mode.
<P>
Because Java3D makes use of the graphics hardware on your computer, it may be useful to test that
hardware with the <B>Test Hardware </B> command (in menu <B>Window / 3D Window</B>). 
<!-- NEED 5in -->
<H3>4-11-2: 3D Preferences</H3>
<!-- PREFERENCE Display/3D -->
To control the 3D view,
use the 3D Preferences (in menu <B>File / Preferences...</B>, "Display" section, "3D" tab).
This provides access to most of the parameters that control 3D viewing.
The only other controls available are the colors used to draw 3D features,
which are available in the Layers Preferences (see <A HREF="chap04-06-02.html">Section 4-6-2</A>).
<P>
In the 3D Preferences, the thickness and Z distance (height) of each layer can be controlled as well as the view mode,
the Z-axis scale, and use of antialiasing.
<P>
<TABLE><TR><TD>
On the left side of this dialog is a list of layers in the current technology.
On the right side is a cross sectional view of the chip, showing the relative position of each layer.
You can select a layer by clicking on either side of the dialog.
The currently selected layer is highlighted in the list on the left and shown in red in the right-hand view.
Change the "3D HIGHLIGHTED INSTANCES" entry in the Layers Preferences to change the color used for
highlighting layers in the 3D view and 
in the preferences.
<P>
The distance of the layer from the wafer bottom and its thickness are the most important values.
These values are not only used for the 3D view; they are also used whenever layers are presented in "height" order.
Once selected,
<!--you can drag layers to the desired height (on the right side) or -->
you can type new values into the "Thickness" and "Distance" fields.
</TD><TD><CENTER><IMG SRC="fig04-11.png" ALT="Figure 4.11"></CENTER></TD></TR></TABLE>
<P>
By default, a perspective view is shown.
Uncheck "Use Perspective" to see a parallel display.
Antialiasing can be turned on by checking "Use Antialiasing".
Due to performance issues, antialiasing is not on by default.
You can also control the display of cell bounds and axes.
The limit on the number of nodes prevents massively large circuits from swamping the 3D system.
<P>
The transparency option controls whether you can see through layers, allowing finer control of the display.
The transparency factor ranges from 0 (fully opaque: not transparent at all) 
to 1 (completely transparent: an invisible shape).
The transparency mode sets the 
rasterization technique to use during rendering.
Possible values are NONE, BLENDED, FASTEST, 
NICEST or SCREEN DOOR.
The default setting of "NONE" indicates that all objects are opaque. 
Refer to <A HREF="http://www.j3d.org">www.j3d.org</A> for technical details.
<P>
Other controls are available in this dialog, for example the initial zoom factor and rotation.
If the displayed layers are too thin along the Z axis (compared to their X and Y values),
use the "Z Scale" field to make everything thicker.
<P>
<H3>Lights</H3>
<P>
The 3D view uses one the ambient (background) light and two directional lights.
The ambient light is always on, but the directional light can be enabled or disabled with the checkboxes.
<P>
The directional lights sit outside of the circuit and point in the given direction.
The default directions of (-1, 1, -1) and (1, -1, -1) illuminate the 3D view from the front. 
Although the lights have a default color of white, this can be changed by editing the
"SPECIAL: 3D DIRECTIONAL LIGHT" entry in the Layers Preferences.
<P>
Ambient light is the background light that fills a space.
It is used to illuminate those areas that are not directly hit by the directional lights. 
The default color of the ambient light is gray, but this can be changed by editing the
"SPECIAL: 3D AMBIENT LIGHT" entry in the Layers Preferences.
<P>
<TABLE><TR>
<TD>
If Java3D is not installed, the distance and the thickness can still be controlled.
In such a situation, the 3D Preferences dialog has much more limited information.
The cross-section information on the right shows layers and their range of depth.
You can choose either the layer name or its cross-section name.
</TD>
<TD><CENTER><IMG SRC="fig04-19.png" ALT="Figure 4.19"></CENTER></TD></TR></TABLE>
<H3>4-11-3: 3D Behaviors and Animation</H3>
<!-- COMMAND Window/3D Window/Capture Frame/Animate -->
<!-- COMMAND Help/3D Showcase/Load Library -->
<!-- COMMAND Help/3D Showcase/3D View of Cage Cell -->
<!-- COMMAND Help/3D Showcase/Animate Cage Cell -->
Behaviors are controls that affect the 3D display.
In Electric, there are 3 types of behaviors available.
<TABLE><TR><TD>
<OL>
<LI><B>Orbit Behavior</B> combines three basic mouse behaviors: zoom, pan and rotate.
The left button rotates, the right button pans, and the middle button zooms.
Click and drag to alter the display.</LI>
<LI><B>3D Axis Behavior</B> is available when the 3D axis is shown.
Clicking on the axis affects rotation (but not panning or zooming).
This axis is not part of the standard Electric distribution and must be installed separately
(see <A HREF="chap01-05.html#chap01-05">Section 1-5</A>).</LI>
<LI>
<B>Navigator Behavior</B> is controlled by special keys.
Use the up/down/left/right arrow keys as shown in the table.</LI>
</OL>
</TD><TD WIDTH="40%">
<center>
<table border=1>
<tr><th>Key Press</th><th>Effect</th></tr>
<tr><td>DOWN Arrow</td><td>Move along -Z axis</td></tr>
<tr><td>UP Arrow</td><td>Move along +Z axis</td></tr>
<tr><td>CTRL + DOWN Arrow</td><td>Move along -Y axis</td></tr>
<tr><td>CTRL + UP Arrow</td><td>Move along +Y axis</td></tr>
<tr><td>ALT + LEFT Arrow</td><td>Move along -X axis</td></tr>
<tr><td>ALT + RIGHT Arrow</td><td>Move along +X axis</td></tr>
<tr><td>RIGHT Arrow</td><td>Rotate along -Y axis</td></tr>
<tr><td>LEFT Arrow</td><td>Rotate along +Y axis</td></tr>
<tr><td>CTRL + RIGHT Arrow</td><td>Rotate along -Z axis</td></tr>
<tr><td>CTRL + LEFT Arrow</td><td>Rotate along +Z axis</td></tr>
<tr><td>ALT + DOWN Arrow</td><td>Rotate along -X axis</td></tr>
<tr><td>ALT + UP Arrow</td><td>Rotate along +X axis</td></tr>
</table>
</center>
</TD></TR></TABLE>
<P>
<!-- NEED 2in -->
<B>Animation</B>
<P>
A 3D display can be animated by creating "key frames" along a time line.
Interpolators examine the key frames and smoothly animate the 3D view.
There are two types of interpolators: <I>simple</I> and <I>path</I>.
Simple interpolators have a start 
and end frame, varying the view between them linearly.
Path interpolators allow multiple key frames to combine into a single smooth animation. 
<P>
<TABLE>
<TR>
<TD>
Spline interpolators can be created and controlled with the <B>Capture Frame/Animate</B>
command (in menu <B>Window / 3D Window</B>).
To animate, you must create a sequence of key frames that define the view changes. 
Each key frame represents a different 3D view of the scene.
</TD>
<TD><CENTER><IMG SRC="fig04-18.png" ALT="Figure 4.18"></CENTER></TD>
</TABLE>
<P>
To control the animation, make changes to the display and click "Enter Frame".
You can enter as many frames as you want and animate them later. 
The animated sequence is a "demo" that can be saved to disk and restored later for playback.
A QuickTime movie can be created by using the "Create Movie" button.
For this option, the JMF plugin must be available (see <A HREF="chap01-05.html#chap01-05">Section 1-5</A>).
<P>
There is a built-in demo of animation, available in the <B>Help / 3D Showcase</B> menu.
First, use the <B>Load Library</B> command to load the demo library.
Next, use the <B>3D View of Cage Cell</B> command to start the 3D viewer on the cage cell (used on the cover page of this manual).
Finally, use the <B>Animate Cage Cell</B> command to start an animation demo on the 3D view of the cage cell.</LI>
<P> 
<!-- PAGE BREAK --><A NAME="chap04-12-01"></A>
<CENTER><FONT SIZE=6><B>Chapter 4: Display</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap04-11-03.html#chap04-11-03.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>4-12-1: Digital Waveform Windows</H2></CENTER></TD>
<TD><CENTER><A HREF="chap04-12-02.html#chap04-12-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Edit/Selection/Add to Waveform in New Panel -->
<!-- COMMAND Edit/Selection/Remove from Waveform -->
<!-- COMMAND Tool/Simulation (Built-in)/Set Signal High at Main Time -->
<!-- COMMAND Tool/Simulation (Built-in)/Set Signal Low at Main Time -->
<!-- COMMAND Tool/Simulation (Built-in)/Set Signal Undefined at Main Time -->
<!-- COMMAND Tool/Simulation (Built-in)/Set Clock on Selected Signal... -->
<!-- COMMAND Tool/Simulation (Built-in)/Update Simulation Window -->
<!-- COMMAND Tool/Simulation (Built-in)/Get Information about Selected Signals -->
<!-- COMMAND Tool/Simulation (Built-in)/Clear Selected Stimuli -->
<!-- COMMAND Tool/Simulation (Built-in)/Clear All Stimuli on Selected Signals -->
<!-- COMMAND Tool/Simulation (Built-in)/Clear All Stimuli -->
<!-- COMMAND Tool/Simulation (Built-in)/Save Stimuli to Disk... -->
<!-- COMMAND Tool/Simulation (Built-in)/Restore Stimuli from Disk... -->
The waveform window is able to display digital simulation output.
This simulation output can come from external simulators (such as Verilog and ArchSim)
or built-in simulators (such as ALS and IRSIM).
When displaying the results of external simulators, the system reads the simulation output and shows it.
When internal simulators are displayed, you have the additional capability of changing the stimuli.
<P>
The digital waveform window looks like the picture below.
Note also that there is a side bar with a cell explorer in the window, just like in all windows,
but the explorer has a "SIGNALS" section that lists the signals found in the simulation.
<P>
<CENTER><IMG SRC="fig09-37.png" ALT="Figure 9.37"></CENTER>
<H3>Wave Panels</H3>
<P>
The waveform window contains a set of <I>panels</I>, each with a signal name and signal waveform.
In each panel, signal names are shown on the left, and their waveform on the right.
Between the name and the waveform are two control buttons:
<UL>
<LI><B>Close</B> (an "X") to remove that panel from the waveform window.</LI>
<LI><B>Hide</B> to stop displaying the panel, but keep it available
(it can be restored by selecting its name from the popup at the top of the waveform window).</LI>
</UL>
The waveforms can be single signals or busses.
Busses are collections of single signals that display integer values (for example, "himb[1:10]").
To expand a bus, and show its individual signals in separate panels, double-click on its name.
To contract the bus (removing its individual signals), double-click on the bus name again.
<P>
Although the color of the waveforms is usually the same, it can vary with the strength of the signal.
To enable such a display, check "Multistate display" in the Simulators Preferences
(in menu <B>File / Preferences...</B>, "Tools" section, "Simulators" tab).
To control the actual colors used in multistate display, use the Layers Preferences
(in menu <B>File / Preferences...</B>, "Display" section, "Layers" tab)
and set the colors for "WAVEFORM: OFF STRENGTH", "WAVEFORM: NODE (WEAK) STRENGTH",
"WAVEFORM: GATE STRENGTH", and "WAVEFORM: POWER STRENGTH".
<P>
You can select a signal by selecting either its name or the actual waveform.
A selected signal is highlighted, and the selected panel is marked with a bold white line
(see the "out" signal above).
Note that when you click on a signal,
the equivalent network in the associated schematic or layout window is also highlighted
(more on this below).
<P>
You can rearrange the order of the signals by dragging their names to a new location.
<P>
You can add a new panel to the waveform window by double-clicking on its name in the "SIGNALS" area
(or by dragging that name to the waveform part on the right).
If the layout or schematics cell that produced the simulation is being displayed in another window,
and the currently selected network in that window is found in the simulation output,
then that output can be added to the waveform window with
the <B>Add to Waveform in New Panel</B> command (in menu <B>Edit / Selection</B>).
You can also use the <B>Remove from Waveform</B> command to remove the currently selected network from the waveform display.
<P>
The order of signals in the waveform window is saved in the original cell
so that subsequent simulations will show the same signals.
You can also save the configuration of the waveform window with the
<B>Save Waveform Window Configuration to Disk...</B> command (in menu <B>Window / Waveform Window</B>)
and you can restore the configuration with the <B>Restore Waveform Window Configuration from Disk...</B> command.
<P>
<H3>Time Control</H3>
<P>
Two vertical cursors appear in the window, called "main" and "extension"
(the extension cursor is dotted).
Their time values and their difference are shown at the top of the window.
You can click over the cursors and drag them to different time locations.
You can also use the "Center" buttons to bring these cursors to the center of the display.
<P>
The time axis of the simulation window can be controlled with the appropriate <B>Window</B> menu commands.
Use <B>Zoom Out</B> and <B>Zoom In</B> to scale the time axis by a factor of two.
Use <B>Focus on Highlighted</B> (in menu <B>Window / Special Zoom</B>)
to display the range between the main and extension cursors.
<BR>
<TABLE><TR><TD><CENTER><IMG SRC="fig04-09.png" ALT="Figure 4.9"></CENTER></TD><TD>
Besides controlling time with menu commands, you can also use the Pan and Zoom tools of the toolbar
to change the view.
</TD><TD><CENTER><IMG SRC="fig04-08.png" ALT="Figure 4.8"></CENTER></TD></TR></TABLE>
<BR>
The pan tool lets you smoothly shift time when you click and drag.
In the zoom tool, you zoom into an area by clicking and dragging out that area.
To zoom out, hold the shift key and click in the center of the desired area.
<P>
The time axis is drawn linearly, but it can be changed to a logarithmic scale by right-clicking on the ruler and choosing
"Logarithmic" (use "Linear" to restore the scale).
<P>
The different panels in the waveform window are locked in time: they all show the same range of time,
as shown at the top of the waveform window.
If you click on the "time lock" button at the top of the waveform window
(looks like a lock with the time on it:&nbsp;<IMG SRC="fig09-18.png" ALT="Figure 9.18">&nbsp;)
then time is unlocked, and each panel has its own time scale.
Now individual panels can show a different range of time than the rest.
<P>
Electric does crossprobing between the waveform window and an edit window with the original circuit.
If the original circuit is being displayed, selection in the waveform window is mirrored in that cell.
Also, whenever the main time cursor changes, the electrical state of the circuit is shown in that cell.
Wires are colored differently according to their high/low/X/Z value in the simulation at that time.
If you connect <I>Simulation Probe</I> nodes to any part of the circuit,
those nodes light up with the appropriate color instead,
which allows better visualization of activity patterns (see <A HREF="chap07-06-03.html#chap07-06-03">Section 7-6-3</A>).
You can control the colors used in crossprobing by using the Layers Preferences
(in menu <B>File / Preferences...</B>, "Display" section, "Layers" tab)
and setting the colors for "WAVEFORM: CROSSPROBE LOW", "WAVEFORM: CROSSPROBE HIGH",
"WAVEFORM: CROSSPROBE UNDEFINED", and "WAVEFORM: CROSSPROBE FLOATING".
<P>
For best visualization of the simulation activity, there is a set of VCR buttons to control an animation of the main time cursor.
The play rate can be controlled by the up-arrow and down-arrow buttons, to the right of the VCR controls.
These make the playback run faster or slower.
As the time cursor sweeps across the waveform window, the original circuit can be seen to change levels.
<P>
These window functions apply to the digital simulation windows:
<UL>
<LI><B>Window / Fill Window</B> make all data fit in window.</LI>
<LI><B>Window / Zoom Out</B> show twice as much time.</LI>
<LI><B>Window / Zoom In</B> show half as much time.
</LI>
<LI><B>Window / Special Zoom / Focus on Highlighted</B> show from main to extension cursors.
</LI>
<LI><B>Window / Pan Left</B> show earlier time.
</LI>
<LI><B>Window / Pan Right</B> show later time.
</LI>
<LI><B>"Pan" tool in tool bar</B> freehand drag of time.</LI>
<LI><B>"Zoom" tool in tool bar</B> drag area to zoom in, hold shift to zoom out.</LI>
<LI><B>"Measure" tool in tool bar</B> for measuring time.</LI>
</UL>
<P>
<H3>Stimuli (for Built-in Simulators only)</H3>
<P>
When the waveform window displays the output of built-in simulators, you can set stimuli on the
signals to affect the simulation.
Each stimulus that you set is marked with a large red box at the time of the stimulus (see signals "cc" and "in").
You can select the stimuli by clicking on the red box.
A selected stimulus has a green box in it
(see the rightmost stimulus on signal "in").
<P>
To set stimuli, select either a waveform or the equivalent network in the original schematic or layout.
Once selected, use the <B>Set Signal High at Main Time</B>
(in menu <B>Tool / Simulation (Built-in)</B>)
to make that signal go to "high" at the time indicated by the Main cursor.
Use <B>Set Signal Low at Main Time</B> to set the selected signal "low", and use
<B>Set Signal Undefined at Main Time</B> to set the selected signal "undefined" (X).
Use the <B>Get Information about Selected Signals</B> command to show stimuli and
other information on the selected signals.
<P>
To remove the selected stimulus, use the <B>Clear Selected Stimuli</B> command.
To remove all stimuli on a the selected waveforms, use <B>Clear All Stimuli on Selected Signals</B>.
To remove all stimuli in the simulation, use <B>Clear All Stimuli</B>.
<!-- NEED 3in -->
<P>
<TABLE><TR><TD>
Besides simple test vectors,
the ALS simulator can also set clock patterns on the currently selected signal
by using the <B>Set Clock on Selected Signal...</B> command.
There are two ways to specify a clock: by frequency (in cycles per second) or period (in seconds).
</TD><TD><CENTER><IMG SRC="fig09-40.png" ALT="Figure 9.40"></CENTER></TD></TR></TABLE>
<P>
Note that the clock cycles infinitely,
but Electric generates simulation events to fill only the current waveform window.
If you want more clock events generated,
zoom-out the waveform window before issuing the clock command.
<P>
Once a set of stimuli has been established, you can save it to disk with the
<B>Save Stimuli to Disk...</B> command.
These stimuli can be restored later with the <B>Restore Stimuli from Disk...</B> command.
Each built-in simulator has its own format for saving stimuli.
<P>
The Simulators Preferences (in menu <B>File / Preferences...</B>, "Tools" section, "Simulators" tab),
offers some controls for built-in simulators.
<UL>
<LI>"Auto advance time" requests that the main time cursor advance after each stimulus is added.
This allows each stimulus added to occur at a new time.</LI>
<LI>"Resimulate each change" requests that the simulator rerun the simulation after any change to the stimuli.
Because the process of simulating a circuit can be costly, you might want to delay
resimulation until all stimuli have been set.
If you uncheck this item, you must issue the <B>Update Simulation Window</B> command to re-run the simulation.
</UL>
<P>
<H3>Other Controls</H3>
<P>
At the top of the waveform window, above the signal names, are many useful controls.
Those relating to time have already been discussed.
Here are the remaining buttons:
<UL>
<LI><B>"Refresh"</B>&nbsp;<IMG SRC="fig09-28.png" ALT="Figure 9.28">&nbsp;&nbsp;
Refreshing the simulation causes it to reload from the original source.
In the case of external simulation, it is assumed that the simulation was re-run and the
output file is different, so the simulation output file is re-read.
In the case of built-in simulators, it is assumed that the original circuit has changed,
so it is re-evaluated and reloaded into the simulator.
This function is also available with the <B>Refresh Simulation Data</B> command
(in menu <B>Window / Waveform Window</B>).</LI>
<LI><B>The Panel popup</B> This is a list of all panels, including the hidden ones.
Selecting a panel from this list toggles its "hidden" state, making a visible one disappear,
and making a hidden one reappear.</LI>
<LI><B>"Grow" and "Shrink"</B>&nbsp;<IMG SRC="fig09-31.png" ALT="Figure 9.31">&nbsp;&nbsp;
These buttons, which show a waveform being stretched or squeezed,
cause the minimum panel size to change.
By shrinking the panel size, more of them can fit in the window without having to use a slider to access them.</LI>
</UL>
<!-- NEED 5in -->
<H3>4-12-2: Analog Waveform Windows</H3>
<!-- COMMAND Edit/Selection/Add to Waveform in Current Panel -->
<!-- COMMAND Window/Waveform Window/Save Waveform Window Configuration to Disk... -->
<!-- COMMAND Window/Waveform Window/Restore Waveform Window Configuration from Disk... -->
<!-- COMMAND Window/Waveform Window/Refresh Simulation Data -->
The waveform window is able to display analog simulation output.
This simulation output comes from external simulators (such as Spice).
When the system is asked to display the results of an external simulation, it reads
the simulation output and shows it.
<P>
The analog waveform window looks like the picture below.
Note that there is a side bar with a cell explorer in the window, just like in all windows,
but the explorer has a "SIGNALS" section that lists the signals found in the simulation
(and optionally a "SWEEPS" section if swept data was found).
When reading HSpice data, the signals and sweeps sections may be further qualified by analysis,
for example "TRANS SIGNALS", "DC SWEEPS", etc.
<P>
<CENTER><IMG SRC="fig09-04.png" ALT="Figure 9.4"></CENTER>
<P>
<!-- NEED 4in -->
<H3>Wave Panels</H3>
<P>
The waveform window contains a set of <I>panels</I>, each with one or more signals and waveforms.
In a panel, signal names are shown on the left, and their waveform on the right.
Above the signal names in each panel are 5 names and controls:
<UL>
<LI><B>Panel number</B> each panel is numbered so that it can be hidden and retrieved.</LI>
<LI><B>Close</B> (an "X") to remove the panel from the waveform window.</LI>
<LI><B>Hide</B> to stop displaying the panel, but keep it available (it can be restored by selecting its name from the popup at the top
of the waveform window).</LI>
<LI><B>Remove Signal</B> remove the selected signal from the panel (the DELETE key works for this, too).</LI>
<LI><B>Remove All Signals</B> remove all signals from the panel.</LI>
</UL>
You can select a signal by selecting either its name or the actual waveform.
Note that when you click on a signal,
the equivalent network in the associated schematic or layout window is also highlighted.
If a Spice deck was generated from the schematic,
then crossprobing its simulation results to layout may not work properly.
This can be fixed with the <B>Run NCC for Schematic Cross-Probing</B> command (in menu <B>Tool / NCC</B>,
see <A HREF="chap09-07-02.html#chap09-07-02">Section 9-7-2</A>).
<P>
You can change the color of a signal by right-clicking on its name and choosing a different color.
<P>
You can rearrange the order of the waveform panels by clicking on their panel-number and dragging the panel to a new location.
You can move signals from one panel to another by dragging their names to their desired panel.
If you use the right-click to drag signals, they are copied to the new panel.
<P>
You can add a signal to the list by double-clicking on its name in the "SIGNALS" area
(or by dragging that name to the waveform part on the right).
The signal will be added to the highlighted panel (the one with the bold vertical axis).
You can create a new panel, with no signals in it, by clicking on the button in the upper-left of the waveform window
(<IMG SRC="fig09-29.png" ALT="Figure 9.29">).
<P>
If the layout or schematics cell that produced the simulation is being displayed in another window,
and the currently selected network in that window is found in the simulation output,
then that output can be added to the waveform window with
the <B>Add to Waveform in New Panel</B> command (in menu <B>Edit / Selection</B>).
The command <B>Add to Waveform in Current Panel</B> overlays the signal on top of others in the currently selected waveform panel.
<P>
The order of signals in the waveform window is saved in the original cell
so that subsequent simulations will show the same signals.
You can also save the configuration of the waveform window with the
<B>Save Waveform Window Configuration to Disk...</B> command
(in menu <B>Window / Waveform Window</B>)
and you can restore the configuration with the
<B>Restore Waveform Window Configuration from Disk...</B> command.
<P>
<H3>Sweeps</H3>
<P>
If the simulation had sweeps, those values are shown in the cell explorer in the "SWEEPS" area.
You can right-click on a sweep and choose to include or exclude it from the display
(double-clicking on the sweep toggles its inclusion).
Right-clicking on the "SWEEPS" icon lets you include or exclude all of them.
<P>
A single sweep can be highlighted to distinguish it on the display.
Right-click on that sweep and choose "Highlight".
To remove all highlighting, right-click on the "SWEEPS" icon and choose "Remove Highlighting".
<P>
<H3>Time Control</H3>
<P>
Two vertical cursors appear in the window, called "main" and "extension"
(the extension cursor is dotted).
Their time values and their difference are shown at the top of the window.
You can click over the cursors and drag them to different time locations.
You can also use the "Center" buttons to bring these cursors to the center of the display.
<P>
The time axis of the simulation window can be controlled with the appropriate <B>Window</B> menu commands.
Use <B>Zoom Out</B> and <B>Zoom In</B> to scale the time axis by a factor of two.
Use <B>Focus on Highlighted</B> (in menu <B>Window / Special Zoom</B>)
to display the range between the main and extension cursors.
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig04-09.png" ALT="Figure 4.9"></CENTER></TD><TD>
Besides controlling time with menu commands, you can also use the Pan and Zoom tools of the toolbar.
</TD><TD><CENTER><IMG SRC="fig04-08.png" ALT="Figure 4.8"></CENTER></TD></TR></TABLE>
<P>
The pan tool lets you smoothly shift time when you click and drag.
In the zoom tool, you zoom into an area by clicking and dragging out that area.
To zoom out, hold the shift key and click in the center of the desired area.
<P>
<TABLE><TR><TD>
You can control the horizontal and vertical range precisely by double-clicking in the vertical scale area.
The dialog lets you type exact values into the ranges.
</TD><TD><CENTER><IMG SRC="fig09-13.png" ALT="Figure 9.13"></CENTER></TD></TR></TABLE>
<P>
Both the horizontal and vertical axis are drawn linearly.
Either axis can be changed to a logarithmic scale by right-clicking on the ruler
and choosing "Logarithmic" (use "Linear" to restore the scale).
<P>
The different panels in the waveform window are locked in time: they all show the same range of time,
as shown at the top of the waveform window.
If you click on the "time lock" button at the top of the waveform window
(looks like a lock with the time on it:&nbsp;<IMG SRC="fig09-18.png" ALT="Figure 9.18">&nbsp;)
then time is unlocked, and each panel has its own time scale.
Now individual panels can show a different range of time than the rest.
<P>
A set of VCR buttons is available to animate the main time cursor.
The play rate can be controlled by the up-arrow and down-arrow buttons to the right of the VCR controls.
These buttons make the playback run faster or slower.
As the time cursor sweeps across the waveform window, the original circuit can be seen to change levels.
<P>
These window functions apply to the analog simulation windows:
<UL>
<LI><B>Window / Fill Window</B> make all data fit in window.</LI>
<LI><B>Window / Zoom Out</B> show twice as much time.</LI>
<LI><B>Window / Zoom In</B> show half as much time.</LI>
<LI><B>Window / Special Zoom / Focus on Highlighted</B> show from main to extension cursors.</LI>
<LI><B>Window / Pan Left</B> show earlier time.</LI>
<LI><B>Window / Pan Right</B> show later time.</LI>
<LI><B>"Pan" tool in tool bar</B> freehand drag of time.</LI>
<LI><B>"Zoom" tool in tool bar</B> drag area to zoom in, hold shift to zoom out.</LI>
<LI><B>"Measure" tool in tool bar</B> for measuring time.</LI>
</UL>
<BR>
<H3>Eye Plots</H3>
<P>
The horizontal axis does not have to represent time.
Any signal can be used in the horizontal axis, simply by dragging that signal onto the horizontal ruler.
To restore the horizontal axis to show time, right-click on it and choose "Make the X axis show Time".
<P>
<BR>
<H3>Other Controls</H3>
<P>
At the top of the waveform window, above the signal names, are many useful controls.
Those relating to time have already been discussed.
Here are the remaining buttons:
<UL>
<LI><B>"Refresh"</B>&nbsp;<IMG SRC="fig09-28.png" ALT="Figure 9.28">&nbsp;&nbsp;
Rereads the simultion output file and updates the display.
If the simulation has been re-run, and the output file is different, then this button shows the new data.
This function is also available with the <B>Refresh Simulation Data</B> command
(in menu <B>Window / Waveform Window</B>).
</LI>
<LI><B>"Show Vertices"</B>&nbsp;<IMG SRC="fig09-19.png" ALT="Figure 9.19">&nbsp;&nbsp;
Controls the display of dots on the vertices of the waveforms.
The button toggles between three states:
(1) showing lines only, (2) showing lines and dots, and (3) showing dots only.
</LI>
<LI><B>"Show Grid"</B>&nbsp;<IMG SRC="fig09-27.png" ALT="Figure 9.27">&nbsp;&nbsp;
Displays a grid in the waveform panels.
The button toggles between showing and not-showing the grid.
</LI>
<LI><B>The Panel popup</B> This is a list of all panels, including the hidden ones.
Selecting a panel from this list toggles its "hidden" state, making a visible one disappear,
and making a hidden one reappear.</LI>
<LI><B>"Grow" and "Shrink"</B>&nbsp;<IMG SRC="fig09-31.png" ALT="Figure 9.31">&nbsp;&nbsp;
These buttons, which show a waveform being stretched or squeezed,
cause the minimum panel size to change.
By shrinking the panel size, more of them can fit in the window without having to use a slider to access them.</LI>
</UL>
<HR>
<CENTER><H1><A NAME="chap05-01">Chapter 5: Arcs</A></H1></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap04-12-02.html#chap04-12-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>5-1: Introduction to Arcs</H2></CENTER></TD>
<TD><CENTER><A HREF="chap05-02-01.html#chap05-02-01.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<TABLE><TR><TD>
The arcs in a circuit are much more than simple connecting wires.
They can take many different forms according to the needs of the design environment.
In schematics, arcs can be negated, directional, zig-zag, and more.
In layout, they can be directional and extended by half of their width.
</TD><TD><CENTER><IMG SRC="fig05-05.png" ALT="Figure 5.5"></CENTER></TD></TR></TABLE>
<P>
The most important property of an arc is its ability to remain connected when physical changes are made to the circuit.
Constraining properties provide for intelligent circuit layout.
<P>
Electric allows you to control how layout changes when the circuit is modified.
This is done by placing <I>constraints</I> on the arcs that react to node changes.
Electric has a set of four constraints that, although not complete, have been
found to be useful in circuit design.
<!-- PAGE BREAK --><A NAME="chap05-02-01"></A>
<CENTER><FONT SIZE=6><B>Chapter 5: Arcs</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap05-01.html#chap05-01.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>5-2-1: Rigid and Fixed-Angle Arcs</H2></CENTER></TD>
<TD><CENTER><A HREF="chap05-02-02.html#chap05-02-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Edit/Cleanup Cell/Show Nonmanhattan -->
<TABLE><TR><TD VALIGN=TOP>
The first constraint in Electric is the <I>rigid</I> constraint.
When an arc is made rigid, it cannot change length.
If a node on either end is moved, the other node and the arc move by the same amount.
Besides keeping a constant length, rigid arcs attach in a fixed way to their nodes.
This means that if the node rotates or mirrors, the arc spins about
so that the overall configuration does not change.
Without this rigidity constraint, arcs simply stretch and rotate to keep their connectivity.
<P>
The second constraint, which is used only if an arc is not rigid,
is the <I>fixed-angle</I> constraint.
This constraint forces a wire to remain at a constant angle
(usually used to keep horizontal and vertical wires in their Manhattan orientations).
For example, if a vertical fixed-angle arc connects two nodes,
and the bottom node moves left, then the arc and the top node also move left by the same amount.
If that bottom node moves down, the arc simply stretches without affecting the other node.
If the bottom node moves down and to the left, the arc both moves and stretches.
Rotation of nodes causes no change to fixed-angle arcs unless the arc is connected to an off-center port,
in which case a slight translation and stretch may occur.
</TD><TD><CENTER><IMG SRC="fig05-01.png" ALT="Figure 5.1"></CENTER></TD></TR></TABLE>
<P>
Most IC layout is done with Manhattan geometry.
If you suspect that some of your wires have become skewed, use the <B>Show Nonmanhattan</B>
command (in menu <B>Edit / Cleanup Cell</B>).
<H3>5-2-2: Slidable Arcs</H3>
<!-- COMMAND Edit/Cleanup Cell/Shorten Selected Arcs -->
Another constraint, available only for nonrigid arcs, is <I>slidability</I>.
When an arc is slidable, it may move about within its port.
To understand this fully, you should know exactly where the arc <I>endpoint</I> is located.
Most arcs are defined to extend past the endpoint by one-half of their width.
This means that the arc endpoint is centered in the end of the arc rectangle.
If the arc is 2 wide, then the endpoint is indented 1 from the edge of its rectangle.
All arc endpoints must be inside of the port to which they connect.
If the port is a single point, then there is no question of where the arc may attach.
If, however, the port has a larger area, as in the case of contacts,
then the arc can actually connect in any number of locations.
<P>
<CENTER><IMG SRC="fig05-02.png" ALT="Figure 5.2"></CENTER>
<P>
Slidable arcs may adjust themselves within the port area rather than move.
For example, if a node's motion is such that the arc can slide without moving,
then no change occurs to the arc or to the other node.
Without the slidable constraint, the arc moves to stay connected at the same location within the port.
Slidability propagation works both ways,
because if an arc moves but can slide within the other node's port, then that node does not move.
Note that slidability occurs only for complete motions and not for parts of a motion.
If the node moves by 10 and can slide by 1,
then it pushes the arc by the full 10 and no sliding occurs.
In this case, only motions of 1 or less will slide.
<P>
Because ports have area, and because arcs end somewhere inside of that area,
the actual ending point can vary considerably.
If the arc is at the far side of the port,
it may protrude out of the far side of the node, causing unwanted extra geometry.
You can shorten an arc so that its endpoint is at the closest side of the port with the <B>Shorten Selected Arcs</B>
command (in menu <B>Edit / Cleanup Cell</B>).
<H3>5-2-3: Constraint Propagation</H3>
The last of Electric's constraints is the only one that is not actually programmable by the user.
<P>
<TABLE><TR><TD VALIGN=TOP>
This is the constraint that all arcs must stay in their ports, even across hierarchical levels of design.
When a node in a cell moves, and has an export on it, all the ports on instances of that cell also change.
The constraint system therefore adjusts all arcs connected to those instances,
and follows their constraints.
If those constraints change nodes with exports in the higher-level cell,
then the changes propagate up another level of hierarchy.
</TD><TD><CENTER><IMG SRC="fig05-06.png" ALT="Figure 5.6"></CENTER></TD></TR></TABLE>
<P>
This bottom-up propagation of changes guarantees a correctly connected hierarchy,
and allows top-down design.
Users can create skeleton cells that are mostly empty and contain only exports on unconnected nodes.
They can then do high-level design with these skeleton cell instances.
Later, when circuitry is placed in the cells, or when layout views are substituted for the skeletons,
the constraint system will maintain proper connectivity in all higher levels of hierarchy.
<P>
The hierarchical-propagation aspect of the constraint system leaves open the possibility of an overconstrained situation.
For example, if two different cell instances are connected to each other with two rigid wires,
and one connection point moves, then it is not possible to keep both wires rigid.
Electric jogs an arc, converting it into three arcs that zig-zag, to retain the connection.
Although connectivity is retained, the geometry may be in the wrong place,
causing unexpected changes to the circuit.
Users are encouraged to examine the hierarchy to make sure that arbitrary hierarchical changes
do not cause undetected damage to the layout.
Electric will warn you of any changes which affect undisplayed cells farther up the hierarchy.
<!-- PAGE BREAK --><A NAME="chap05-03"></A>
<CENTER><FONT SIZE=6><B>Chapter 5: Arcs</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap05-02-03.html#chap05-02-03.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>5-3: Setting Constraints</H2></CENTER></TD>
<TD><CENTER><A HREF="chap05-04-01.html#chap05-04-01.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Edit/Arc/Rigid -->
<!-- COMMAND Edit/Arc/Not Rigid -->
<!-- COMMAND Edit/Arc/Fixed Angle -->
<!-- COMMAND Edit/Arc/Not Fixed Angle -->
The two most common constraints, rigid and fixed-angle
(see <A HREF="chap05-02-01.html#chap05-02-01">Section 5-2-1</A>),
can be controlled from the <B>Edit / Arc</B> menu.
When the <B>Rigid</B>, <B>Non Rigid</B>,
<B>Fixed Angle</B>, and <B>Not Fixed Angle</B> commands are issued,
all of the currently highlighted arcs have those constraints set.
<P>
In order to set slidability (see <A HREF="chap05-02-02.html#chap05-02-02">Section 5-2-2</A>),
select a single arc and issue the <B>Object Properties...</B> command
(in menu <B>Edit / Properties</B>).
<P>
<TABLE><TR><TD>
At the bottom of the arc properties dialog, when the "More" button has been pressed,
are check boxes that control constraints.
This is the only way to affect the slidable constraint
 (which is not very commonly used).
</TD><TD><CENTER><IMG SRC="fig02-02.png" ALT="Figure 2.2"></CENTER></TD></TR></TABLE>
<!-- PAGE BREAK --><A NAME="chap05-04-01"></A>
<CENTER><FONT SIZE=6><B>Chapter 5: Arcs</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap05-03.html#chap05-03.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>5-4-1: Directionality</H2></CENTER></TD>
<TD><CENTER><A HREF="chap05-04-02.html#chap05-04-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Edit/Arc/Toggle Directionality -->
<TABLE><TR><TD><CENTER><IMG SRC="fig05-07.png" ALT="Figure 5.7"></CENTER></TD><TD>
For documentation purposes, it is possible to display a <I>directional</I> arrow on arcs to indicates flow.
This property can be changed with the <B>Toggle Directionality</B> command (in menu
 <B>Edit / Arc</B>).
It may also be controlled by the <B>Object Properties...</B> dialog (in menu <B>Edit / Properties</B>).
</TD></TR></TABLE>
<P>
The controls in the <B>Object Properties...</B> dialog offer the option of placing the arrow head
on either end, both ends, or neither end.
This allows arbitrary combinations of arrow heads and bodies to display arbitrarily intricate directionality
schemes.
<H3>5-4-2: Negation</H3>
<!-- COMMAND Edit/Technology Specific/Toggle Port Negation -->
<TABLE><TR><TD><CENTER><IMG SRC="fig05-09.png" ALT="Figure 5.9"></CENTER></TD><TD>
Arcs in the Schematic technology may be <I>negated</I>,
which causes them to have a bubble drawn where they attach to schematic elements.
This property can be changed with the <B>Toggle Port Negation</B> command
(in menu <B>Edit / Technology Specific</B>).
It may also be controlled by the <B>Object Properties...</B> dialog
(in menu <B>Edit / Properties</B>).
Note that you can toggle negation when an arc is selected
(which leaves the system to guess which end you want to negate)
or you can toggle negation when a node and port is selected
(in which case, the arc attached to that port is negated).
</TD></TR></TABLE>
<P>
Note that the <B>Object Properties...</B> dialog offers precise control of the negating bubbles,
allowing you to specify which ends have the bubbles on them.
Negated arcs make no sense in layout technologies and are ignored.
<!-- NEED 3in -->
<H3>5-4-3: End Extension</H3>
<!-- COMMAND Edit/Arc/Toggle End Extension of Head -->
<!-- COMMAND Edit/Arc/Toggle End Extension of Tail -->
<!-- COMMAND Edit/Arc/Toggle End Extension of Both Head/Tail -->
<P>
<TABLE><TR><TD>
All arcs are drawn so that their geometry extends beyond their endpoints by one-half of their width.
This property can be set or reset with the <B>Toggle End Extension of Head</B>,
<B>Toggle End Extension of Tail</B> and
<B>Toggle End Extension of Both Head/Tail</B> commands (in menu <B>Edit / Arc</B>).
It may also be controlled by the <B>Object Properties...</B> dialog (in menu <B>Edit / Properties</B>).
</TD><TD><CENTER><IMG SRC="fig05-10.png" ALT="Figure 5.10"></CENTER></TD></TR></TABLE>
<H3>5-4-4: Naming</H3>
Another property of an arc is its name.
This is a character string that is displayed on the arc and used to name the electrical network connected to that arc.
The "Name" field in the <B>Object Properties...</B> dialog allows you to specify this property,
which is then displayed on the arc.
See <A HREF="chap06-08-04.html#chap06-08-04">Section 6-8-4</A> for "smart" arc name control.
<P>
All arcs are named in Electric, so if you don't give it a name, one will be assigned.
These names, which typically take the form "object@number" are <I>temporary</I> names,
and are distinguished from the names given by the user.
Temporary names are not displayed on the arcs, but user-defined names are.
<P>
Note that creating exports is another way of naming a network.
See <A HREF="chap06-09-02.html#chap06-09-02">Section 6-9-2</A> for more on network naming.
<P>
Arc names can be quite complex when applied to busses.
The names can be indexed, aggregated, and otherwise be used to describe multiple signals.
See <A HREF="chap06-09-03.html#chap06-09-03">Section 6-9-3</A> for more on bus naming.
<H3>5-4-5: Curvature</H3>
<!-- COMMAND Edit/Arc/Curve through Cursor -->
<!-- COMMAND Edit/Arc/Curve about Cursor -->
<!-- COMMAND Edit/Arc/Remove Curvature -->
An unusual arc property, used only in circular geometry, is curvature.
Although most arcs cannot handle curvature, those in the Artwork and Round CMOS ("rcmos")
technologies can.
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig05-11.png" ALT="Figure 5.11"></CENTER></TD><TD>
The <B>Curve through Cursor</B> command (in menu <B>Edit / Arc</B>)
requests that the currently highlighted arc curve in such a way that it passes through the location of the cursor.
The <B>Curve about Cursor</B>
command requests that the currently highlighted arc curve between its endpoints
such that the center of curvature is at the location of the cursor.
After issuing these commands, click and drag to see how the arc will curve.
</TD></TR></TABLE>
<P>
The <B>Remove Curvature</B> command makes the arc straight.
<!-- PAGE BREAK --><A NAME="chap05-05"></A>
<CENTER><FONT SIZE=6><B>Chapter 5: Arcs</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap05-04-05.html#chap05-04-05.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>5-5: Default Arc Properties</H2></CENTER></TD>
<TD><CENTER><A HREF="chap06-01.html#chap06-01.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- PREFERENCE General/Arcs -->
The Arcs Preferences (in menu <B>File / Preferences...</B>, "General" section,
"Arcs" tab) lets you control the arc creation process.
It does not affect existing arcs, only those that are subsequently created.
<P>
The top part of the dialog allows you to set defaults for specific types of arcs
.
You select the "Technology" and "Arc Type", and then set defaults for it (such as the "Default width").
<P>
The "Placement angle" is the granularity for running this type of arc (in degrees).
A value of 90 lets arcs run at 0, 90, 180, or 270 degrees: manhattan geometry.
A value of 45 lets it run at any of 8 angles (useful for schematics).
A value of 0 lets it run at any angle (used in artwork).
<P>
The "Pin" is the node that gets used for connecting two of these arcs.
It is typically a "Pin" node (see <A HREF="chap07-01-01.html#chap07-01-01">Section 7-1-1</A>).
If changed to a node with geometry (such as a contact node) then these contacts will be placed
at the bends of this arc.
<P>
The checkboxes in the "Default State" section have these meanings:
<P>
<TABLE><TR><TD>
<UL>
<LI>Rigid - whether the arc is rigid in length and relationship to its nodes
(see <A HREF="chap05-02-01.html#chap05-02-01">Section 5-2-1</A>).</LI>
<LI>Fixed-angle - whether the arc stays at the same angle when one end moves
(see <A HREF="chap05-02-01.html#chap05-02-01">Section 5-2-1</A>).</LI>
<LI>Slidable - whether the arc slides around in its node's port
(see <A HREF="chap05-02-02.html#chap05-02-02">Section 5-2-2</A>).</LI>
<LI>Directional - whether the arc has an arrow drawn on it
(see <A HREF="chap05-04-01.html#chap05-04-01">Section 5-4-1</A>).</LI>
<LI>Ends extended - whether the arc extends past its endpoint by half its width
(see <A HREF="chap05-04-03.html#chap05-04-03">Section 5-4-3</A>).</LI>
</UL>
</TD><TD><CENTER><IMG SRC="fig05-04.png" ALT="Figure 5.4"></CENTER></TD></TR></TABLE>
<P>
The bottom portion of the dialog has controls for all arcs.
<UL>
<LI>"Play 'click' sounds when arcs are created" - plays a sound to confirm arc creation.
The sound is a single click for one arc, a double-click for two arcs,
and a triple-click for three or more arcs.</LI>
<LI>"Duplicate/Array/Paste increments arc names" -
sets whether the name on an arc should be kept unique by auto-incrementing
after this arc has been duplicated, arrayed, or pasted.</LI>
</UL>
<HR>
<CENTER><H1><A NAME="chap06-01">Chapter 6: Advanced Editing</A></H1></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap05-05.html#chap05-05.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>6-1: Making Copies</H2></CENTER></TD>
<TD><CENTER><A HREF="chap06-02.html#chap06-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Edit/Cut -->
<!-- COMMAND Edit/Copy -->
<!-- COMMAND Edit/Paste -->
<!-- COMMAND Edit/Duplicate -->
Once you have created a collection of objects,
it may be desirable to have other identical copies.
There are two ways to do this: by duplication, and by cut-and-paste.
<P>
<H3>Duplication</H3>
<P>
The <B>Duplicate</B> command (in menu <B>Edit</B>) makes a copy of the selected nodes and arcs.
After issuing this command, you can move the cursor to any location and click to place the copy.
While moving the cursor, an outline of the duplicated objects is shown (as well as the amount of motion).
<P>
If you have disabled "Move after Duplicate"
(in the Nodes Preferences, in menu <B>File / Preferences...</B>, "General" section, "Nodes" tab)
then the duplicated objects are placed immediately without dragging.
Initially, they are moved by a predefined amount.
However, Electric remembers motion that is made after a duplication and uses that offset in subsequent duplications.
<P>
If any of the nodes have exports on them, they are not duplicated
(unless "Duplicate/Array/Paste copies exports" is set in the Nodes Preferences).
<P>
The <B>Duplicate</B> command forces newly created nodes and arcs to have unique names.
This means that if any nodes or arcs are named
(using the <B>Object Properties...</B> command, in menu <B>Edit / Properties</B>) and then duplicated,
the new ones will have different names
(specifically, the old names with numbers appended or modified).
<P>
<H3>Cut-and-Paste</H3>
<P>
Another way to make copies of nodes and arcs is with the cut-and-paste commands.
The <B>Copy</B> and <B>Cut</B> commands (in menu <B>Edit</B>) copy the currently selected nodes and arcs to a special buffer.
<B>Cut</B> also removes the objects after copying them.
The <B>Paste</B> command then copies the objects from the special buffer to the display.
After issuing this command, an outline of the pasted objects attaches to the cursor.
When you click,	the objects are placed at that location.
You can right-click during the paste drag to affect the location, and to abort the paste.
<P>
Note that if you copy a node or arc and then select another before pasting,
then the copied object will replace the selected object
(changing its type and other properties,
similar to the <B>Change...</B> command, see <A HREF="chap06-06.html#chap06-06">Section 6-6</A>).
If you want the <B>Paste</B> command to make a second copy,
be sure that nothing is selected when you issue the command.
Thus, duplicating an object cannot be done by issuing a <B>Copy</B> and then a <B>Paste</B>.
You must do a <B>Copy</B>, then deselect the object, then do a <B>Paste</B>.
<!-- PAGE BREAK --><A NAME="chap06-02"></A>
<CENTER><FONT SIZE=6><B>Chapter 6: Advanced Editing</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap06-01.html#chap06-01.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>6-2: Creation Defaults</H2></CENTER></TD>
<TD><CENTER><A HREF="chap06-03.html#chap06-03.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- PREFERENCE General/Nodes -->
The <B>Duplicate</B> command is useful because a node may have been modified (rotated,
scaled, etc.) and duplication preserves all of those changes.
Using <B>Copy</B> and <B>Paste</B> does the same thing.
Another way to create nodes that are nonstandard is to set creation defaults.
<P>
<TABLE><TR><TD>
To do this, use the Nodes Preferences
(in menu <B>File / Preferences...</B>, "General" section, "Nodes" tab).
The top part of the dialog controls new primitive nodes.
You can change the default size of any primitive node by choosing the node and changing the values.
</TD><TD><CENTER><IMG SRC="fig06-01.png" ALT="Figure 6.1"></CENTER></TD></TR></TABLE>
<P>
The middle section of the dialog controls cells:
<UL>
<LI>"Check cell dates during editing"
requests that date information be used to ensure a proper circuit building sequence.
When this box is checked, warning messages will be issued when editing a cell that has more recent subcell instances.
Electric tracks cell creation and revision dates, and this information can be displayed with the
<B>Describe this Cell</B> command and others in menu <B>Cell / Cell Info</B>
(see <A HREF="chap03-07-01.html#chap03-07-01">Section 3-7-1</A>).</LI>
<LI>"Switch technology to match current cell"
requests that the current technology automatically change whenever the current cell changes,
so that the two match.</LI>
<LI>"Place Cell-Center in new cells" requests that all newly created cells have a Cell-Center node
placed at the origin (see <A HREF="chap03-03.html#chap03-03">Section 3-3</A> for more on Cell centers).</LI>
<LI>"Reconstruct arcs when deleting instances" requests that arcs connected to cell instances
be reconstructed when the cell instances are deleted.
These reconstructed arcs appear to be the same as before, but they now connect to pins that end where the
instance ports used to be.
When this box is not checked, arcs connected to deleted instances are also deleted.</LI>
<LI>"Always prompt for index when descending into array nodes"
controls whether nodes with array specifications should be precisely tracked when descending the hierarchy
(see <A HREF="chap03-05.html#chap03-05">Section 3-5</A> for more).</LI>
</UL>
<P>
The bottom part of the dialog applies to all nodes:
<UL>
<LI>"Disallow modification of complex nodes" requests that all cell instances, transistors, and
other complex nodes be anchored.
Pins and contacts are not considered to be complex.</LI>
<LI>"Disallow modification of locked primitives" requests that all lockable primitive node instances be anchored.
Once locked, these nodes cannot be created, deleted,
or modified in any way.
Typically, only primitives in "array" technologies are lockable
(such as the FPGA technology, see <A HREF="chap07-06-02.html#chap07-06-02">Section 7-6-2</A>),
presuming that these components will be used to define the fixed circuitry that is then customized.
Design of the fixed circuitry is done with this lock off,
and then the customization phase is done with this lock on.</LI>
<LI>"Move after Duplicate" allows duplicated objects to be positioned interactively.
This is the default condition.
However, if this is unchecked,
then the <B>Duplicate</B> command (in menu <B>Edit</B>) will place a copy automatically,
without allowing the new location to be specified by the cursor.</LI>
<LI>"Duplicate/Array/Paste copies exports" requests that these node-copying operations also copy their exports.
This includes the <B>Duplicate</B>, <B>Array</B>, and <B>Paste</B> commands (in menu <B>Edit</B>)
.
See <A HREF="chap06-04.html#chap06-04">Section 6-4</A> for more on arrays.</LI>
<LI>"Extract copies exports" requests that extraction of cell instances also copy the exports.
Extraction is done with the <B>Extract Cell Instance</B> command (in menu <B>Cell</B>).
See <A HREF="chap03-08.html#chap03-08">Section 3-8</A> for more on extraction.
</LI>
</UL>
<!-- PAGE BREAK --><A NAME="chap06-03"></A>
<CENTER><FONT SIZE=6><B>Chapter 6: Advanced Editing</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap06-02.html#chap06-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>6-3: Preferences and Project Settings</H2></CENTER></TD>
<TD><CENTER><A HREF="chap06-04.html#chap06-04.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND File/Preferences... -->
<!-- COMMAND File/Project Settings... -->
<!-- COMMAND File/Export/Preferences... -->
<!-- COMMAND File/Import/Preferences... -->
<TABLE><TR><TD><CENTER><IMG SRC="fig06-07.png" ALT="Figure 6.7"></CENTER></TD><TD>
There are two commands for controlling settings in Electric: <B>Preferences...</B> and <B>Project Settings...</B>
(both in menu <B>File</B>.  You can also get Preferences with this icon on the tool bar.
</TD></TR></TABLE>
These two dialogs contain many panels for controling different aspects of the system.
The differences between these two dialogs is:
<UL>
<LI><B>Preferences</B> affect the user's interaction with the system.
Examples are printer control, display colors, and keyboard bindings.
Each user may have different preferences, and it does not impact the design being done.</LI>
<LI><B>Project Settings</B> affect the actual circuitry being edited
(and so should be the same for every user who is editing that circuitry).
Examples are GDS layer mappings and technology scaling.
Project settings are saved with the libraries and checked when those libraries are read back in.</LI>
</UL>
<P>
<CENTER><IMG SRC="fig06-24.png" ALT="Figure 6.24"></CENTER>
<P>
The left side of the Preferences or Project Settings dialog is a tree-structured list of all of its
different panels.
The right side is the actual panel, which changes according to the panel requested.
Below the list of panels is a "Help" button which takes you to the proper manual page which explains that panel.
<P>
Preferences are stored permanently on your computer and are remembered each time you run Electric.
The actual location of this information varies with each operating system.
<UL>
<LI><B>Windows:</B>
In the registry.  Look in: HKEY_CURRENT_USER / Software / JavaSoft / Prefs / com / sun / electric.
</LI>
<LI><B>UNIX/Linux:</B>
In your home directory.  Look in: ~/.java/.userPrefs/com/sun/electric
</LI>
<LI><B>Macintosh:</B>
In your home directory, under Library/Preferences.  Look at: ~/Library/Preferences/com.sun.electric.plist
</LI>
</UL>
You can delete the appropriate data to reset Electric to its "factory" state.
<P>
You can also export your preferences with the "Export" button in the dialog,
or with the <B>Preferences...</B> command (in menu <B>File / Export</B>)
.
These will write an XML file with preference information.
This XML file can be read back into Electric's preferences with the
"Import" button, or with the <B>Preferences...</B> command (in menu <B>File / Import</B>).
<!-- NEED 2in -->
<P>
Electric stores Project Settings in every library file so that,
when read back in, these settings can be reconciled with current settings.
When a library is read that has different Project Settings, this dialog appears:
<P>
<CENTER><IMG SRC="fig07-19.png" ALT="Figure 19"></CENTER>
<P>
You must choose whether you want to use the setting value from the library (recommended)
or the current setting.
This can be done on an individual-setting basis, or for all settings that conflict.
<!-- PAGE BREAK --><A NAME="chap06-04"></A>
<CENTER><FONT SIZE=6><B>Chapter 6: Advanced Editing</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap06-03.html#chap06-03.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>6-4: Making Arrays</H2></CENTER></TD>
<TD><CENTER><A HREF="chap06-05.html#chap06-05.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Edit/Array... -->
If one copy is not enough, Electric has a command for building an array of circuitry.
<P>
The <B>Array...</B> command (in menu <B>Edit</B>) takes the currently highlighted objects and replicates them many times.
You specify the number of replications in the X and Y directions and the geometry is arrayed.
Arbitrary expressions can be used in this dialog, for example "3*4+1".
<P>
<TABLE><TR><TD>
Arrays are generated by X (row) with Y (column),
following a raster scan order.
If you request that alternate rows or columns be flipped,
then they are mirrored in the direction of repetition.
If you request that alternate rows or columns be staggered,
then each element is offset by an alternating amount.
If you request that the rows or columns be centered,
then the original circuitry will be placed in the middle of the array instead of the corner.
If the X or Y values are negative, then the array is laid out backwards (replications are placed in the reverse direction).
</TD><TD><CENTER><IMG SRC="fig06-02.png" ALT="Figure 6.2"></CENTER></TD></TR></TABLE>
<P>
There are four ways to specify spacing: <I>edge overlap</I>, <I>centerline distance</I>,
<I>characteristic spacing</I>, or <I>measured distance</I>.
The edge overlap amounts indicate the amount by which the rows and columns will be squeezed together
(zero overlap causes the each arrayed copy to touch the next one,
negative overlap can be specified to spread the objects apart).
Centerline distance is the distance between object centers,
and defaults to the size of the selected objects
(which causes the copies to touch).
Characteristic spacing is an amount that is set for specific cells
(see <A HREF="chap03-07-03.html#chap03-07-03">Section 3-7-3</A>).
If a cell with a characteristic spacing is arrayed, that value can be used.
Finally, the last measured distance can be used to determine the array spacing
(for more on measuring, see <A HREF="chap04-07-04.html#chap04-07-04">Section 4-7-4</A>).
<P>
Checkboxes at the bottom of the dialog are special cases:
<UL>
<LI>"Linear diagonal array" indicates that the array is linear
(one of the repeat factors must be 1) but that both spacing rules will be applied.
This therefore creates a single line that runs diagonally.
</LI>
<LI>"Generate array indices"
requests that the array entries be drawn with index information.
When this is checked, array entries are labeled with the index of each entry.
The original copy is labeled "0-0" and the copy to its right is labeled "1-0".
These names are simply visual tags that have no bearing on the contents
(use the <B>Object Properties...</B> command, in menu <B>Edit / Properties</B>, to set or remove these names).
</LI>
<LI>"Only place entries that are DRC correct" requests that array entries only be placed where they do not create design-rule violations.
This option is only available if a single node is being arrayed.
After the array is created, the design-rule checker is run on each entry, and if it causes an error,
it is removed.
</LI>
<LI>"Transpose placement ordering" requests that array placement go by column instead of by row.
This is useful if the arraying includes names which are being auto-incremented in the array.
By transposing the order of arraying, the names will run in the orthogonal direction.
</LI>
</UL>
<!-- PAGE BREAK --><A NAME="chap06-05"></A>
<CENTER><FONT SIZE=6><B>Chapter 6: Advanced Editing</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap06-04.html#chap06-04.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>6-5: Spreading Circuitry</H2></CENTER></TD>
<TD><CENTER><A HREF="chap06-06.html#chap06-06.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Edit/Move/Spread... -->
When a large amount of circuitry has been placed too close together or too far apart,
Electric's constraint system can help.
All that is necessary is to make all arcs in an area rigid and then move one node.
Of course,
you may have to move more than one node if the one you pick is not connected to everything else you want to move.
Also, you must make sure that arcs connecting across the area boundary are nonrigid.
Finally, setting arc rigidity should be done temporarily so that it does not spoil an existing constraint setup.
All these operations are handled for you by the <B>Spread...</B> command (in menu
<B>Edit / Move</B>).
<P>
<TABLE><TR><TD>
With the <B>Spread...</B> command, the highlighted node is a focal point about which objects move.
A dialog is presented in which an amount and a direction (up,
down, left, or right) are specified.
An infinite line is passed through the highlighted node's center and everything above,
below, to the left of, or to the right of the line is moved by the specified amount.
</TD><TD><CENTER><IMG SRC="fig06-03.png" ALT="Figure 6.3"></CENTER></TD></TR></TABLE>
<P>
Negative spread distances compact the circuit.
<!-- PAGE BREAK --><A NAME="chap06-06"></A>
<CENTER><FONT SIZE=6><B>Chapter 6: Advanced Editing</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap06-05.html#chap06-05.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>6-6: Replacing Circuitry</H2></CENTER></TD>
<TD><CENTER><A HREF="chap06-07.html#chap06-07.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Edit/Change... -->
<!-- COMMAND Cell/Merge Libraries/Replace Cells from Library... -->
The <B>Change...</B> command (in menu <B>Edit</B>)
removes the currently highlighted node or arc and replaces it with a new one of a different type.
<P>
<TABLE><TR><TD>
This same effect can be had by copying one object and then pasting it onto another
(see <A HREF="chap06-01.html#chap06-01">Section 6-1</A>).
A dialog is presented in which the possible replacements are shown.
For node changing, you can choose to show primitives from the current technology, cells from the current library, or both.
<P>
When replacing an arc, the existing nodes on either end must be able to reconnect to the new type of arc.
If "Change nodes with arcs" is checked, nodes will be changed to allow the new type of arc to remain connected.
</TD><TD><CENTER><IMG SRC="fig06-04.png" ALT="Figure 6.4"></CENTER></TD></TR></TABLE>
<P>
When replacing a node, the existing arcs on it must be able to reconnect properly to the new node.
However, the sizes of the replaced object can be different, and the layout will be adjusted.
Electric determines which ports on the replaced node to use by examining the port names and locations.
If the ports are aligned correctly but not named the same, this matching will fail.
Check "Ignore port names" to disable name matching and use only position information.
If the new node is missing essential ports, such that existing wires cannot be reconnected,
then the change will fail (unless "Allow missing ports" is checked).
<P>
Besides replacing the currently highlighted node or arc ("Change selected ones only"),
it is also possible to specify replacement of many other objects.
<UL>
<LI>"Change all connected to this" requests that other objects of the same type which are connected to the highlighted ones will be changed.
<LI>"Change all in this cell" requests that all other objects of the same type in this cell will be changed.
<LI>"Change all in this library" requests that all other objects of the same type in the current library will be changed.
<LI>"Change all in all libraries" requests that all other objects of the same type in every library will be changed.
</UL>
<P>
This is a modeless dialog: it can remain up while other editing is being done.
Click "Done" to dismiss it, and "Apply" to make a change.
<P>
Note that some Schematic nodes use parameters to further describe them.
For example, an electrolytic capacitor is really just a capacitor with the "electrolytic" parameter on it.
Therefore, you can change a node into a capacitor, but not an electrolytic capacitor,
because it is not in the list.
To change a capacitor into an electrolytic capacitor, paste an electrolytic capacitor onto it.
Besides capacitors, parameters can be found on diodes, transistors,
sources, and two-ports (the four-connection primitives such as VCCS).
<P>
Another command for changing circuitry is <B>Replace Cells from Library...</B>
(in menu <B>Cell / Merge Libraries</B>).
This command replaces instances in the current cell with like-names ones from another library.
It is useful when a new standard-cell library is replacing an old one,
and all instances must be switched.
<!-- PAGE BREAK --><A NAME="chap06-07"></A>
<CENTER><FONT SIZE=6><B>Chapter 6: Advanced Editing</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap06-06.html#chap06-06.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>6-7: Undo Control</H2></CENTER></TD>
<TD><CENTER><A HREF="chap06-08-01.html#chap06-08-01.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Edit/Repeat Last Action -->
<!-- COMMAND Edit/Undo -->
<!-- COMMAND Edit/Redo -->
<!-- COMMAND Edit/Show Undo List -->
Electric has an undo mechanism that tracks all changes made during a session.
When a command is issued, it and its side effects are stored.
<P>
The <B>Undo</B> command (in menu <B>Edit</B>) reverses the last change made
(this includes any changes that may have been made by other tools).
Multiple uses of the <B>Undo</B> command continue to undo further back.
The <B>Redo</B> command redoes changes, up to the most recent change made.
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig06-09.png" ALT="Figure 6.9"></CENTER></TD><TD>
You can also use the undo (counterclockwise) and redo (clockwise) icons from the tool bar.
</TD></TR></TABLE>
<P>
Electric stores only the last 40 changes, so anything older than that cannot be undone.
To increase the number of changes that are saved, use the
General Preferences (in menu <B>File / Preferences...</B>, "General" section, "General" tab),
and change the "Maximum undo history" field.
To see a history of changes that were made, use the
<B>Show Undo List</B> command (in menu <B>Edit</B>).
<P>
In Electric, almost every command is undoable, but there are some exceptions.
Commands that write disk files are not undoable,
because Electric would not be so presumptuous as to delete a disk file.
<P>
Another useful command in for controlling changes being made is
<B>Repeat Last Action</B> (in menu <B>Edit</B>).
This repeats the last command, but only works for commands that can sensibly be repeated.
<!-- PAGE BREAK --><A NAME="chap06-08-01"></A>
<CENTER><FONT SIZE=6><B>Chapter 6: Advanced Editing</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap06-07.html#chap06-07.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>6-8-1: Understanding Text</H2></CENTER></TD>
<TD><CENTER><A HREF="chap06-08-02.html#chap06-08-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
There are a number of ways to place text in a circuit.
<UL>
<LI>
Each unexpanded instance of a cell has text that describes it, and its ports.
</LI>
<LI>Each export has a text label.
</LI>
<LI>Nodes and arcs can be named (with <B>Object Properties...</B>) so that they have text on them.
They can also have additional attributes that appear as text.
</LI>
<LI>Certain primitive nodes (such as the Flip-Flop component of the Schematic technology)
have text as an integral part of their image.
</LI>
<LI>It is even possible to create a special node that is only text
(with some of the commands under the "Misc" entry of the component menu:
"Annotation Text", "Spice Code", "Spice Declaration", "Verilog Code", and "Verilog Declaration".
</LI>
</UL>
Essentially, then, every piece of text on the display is tied to some node or arc.
By understanding the relationships between text and the attached objects,
it becomes easy to manipulate that text.
<H3>6-8-2: Selecting Text</H3>
The only category of text that is not selectable is the text that is integral to a node's graphics
(i.e. the Flip-Flop).
For the rest, you can select and manipulate the text just as you would the object on which the text resides.
(Note that port names on cell instances are not selectable:
instead, select their export name inside of the cell definition.)
<P>
Certain types of text are not easily selectable.
This is a feature that prevents accidental selection of unwanted text.
For such hard-to-select text,
the only way to select them is to use
<I>special select</I> mode (see <A HREF="chap02-01-05.html#chap02-01-05">section 2-1-5</A>).
By default, the name of an unexpanded cell instance is hard-to-select.
However, you can also request that names on nodes and arcs
also be difficult to select by unchecking "Easy to Select" in their <B>Object Properties...</B>
dialogs.
<P>
<!-- NEED 2in -->
<TABLE><TR><TD>
All text is attached to its node or arc at an <I>anchor-point</I>.
This is the one point on the text that never moves,
regardless of the size of the text.
The highlighting of selected text varies according to the anchor-point.
Typically, the highlighting consists of an "X" through the text.
This indicates that the anchor-point is in the center.
If a "U" is drawn in any of four orientations,
it indicates that the anchor-point is on the side and that the text grows out of the opened end.
If an "L" is drawn in any of four orientations, it indicates that the anchor-point is in a corner.
</TD><TD><CENTER><IMG SRC="fig06-13.png" ALT="Figure 6.13"></CENTER></TD></TR></TABLE>
<P>
Finally, the text may be drawn with an "X" but also have four lines that indicate a box at the object edge.
This is centered text that clips to the size of its attached object
(it is <I>boxed</I>).
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig06-22.png" ALT="Figure 6.22"></CENTER></TD><TD>
Note that text can be moved away from its attached node or arc.
If this has been done, then selection of the text will also indicate the attached component
by drawing a dashed line to it.
</TD></TR></TABLE>
<H3>6-8-3: Modifying Text</H3>
<!-- COMMAND Edit/Text/Change Text Size... -->
Like nodes and arcs, text can be moved simply by clicking and dragging.
It can be erased with the <B>Selected</B> command of the <B>Edit / Erase</B> menu (the Delete key).
<P>
<TABLE><TR><TD>
To change text, double-click on it and type new values.
To change other aspects of selected text, and use the
<B>Object Properties...</B> command (in menu <B>Edit / Properties</B>).
This dialog allows modification of the text, size, font, style, anchor-point, rotation,
 color,
and even the offset of the anchor-point from the attached node or arc.
Note that the offset is always relative to the center of the attached object.
The size of text can be absolute (given in "points") or relative (given in units).
The font of the text can be the default font or any font installed on your system.
The style of text can be any combination of Italic, Bold, or Underline.
Text rotation can be in 90-degree increments only.
You can set the units to any electrical type (capacitance, resistance, etc.)
See <A HREF="chap07-02-02.html#chap07-02-02">Section 7-2-2</A> for more on these units.
</TD><TD><CENTER><IMG SRC="fig06-06.png" ALT="Figure 6.6"></CENTER></TD></TR></TABLE>
<P>
The "Code" option allows the text to be code in an interpretive language,
in which case, the evaluation of that code is displayed.
You can choose to show the text value, the name of the piece of text, or both.
<P>
If the text contains more than 1 line,
then you must check "Multi-Line Text" in order to edit it.
You may then have to stretch the dialog in order to have a larger field for editing the text.
The "Highlight Owner" button highlights the node or arc on which the text is attached
.
The checkbox "Invisible outside cell" requests that the text not be drawn when an instance of the cell is examined.
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig04-14.png" ALT="Figure 4-14"></CENTER></TD><TD>
The <B>Change Text Size...</B> command (in menu <B>Edit / Text</B>)
allows you to change the size, font, and style of any text object.
You can choose which of the 6 classes of text you wish to change,
and you can choose whether to make the changes only on selected objects, in the current cell,
in all cells of a particular view, or everywhere.
</TD></TR></TABLE>
<!-- NEED 7in -->
<H3>6-8-4: Text Defaults</H3>
<!-- COMMAND Edit/Text/Increase All Text Size -->
<!-- COMMAND Edit/Text/Decrease All Text Size -->
<!-- PREFERENCE Display/Text -->
<!-- PREFERENCE Display/Smart Text -->
To change the default size and anchor-point of all new text,
use the Text Preferences
(in menu <B>File / Preferences...</B>, "Display" section, "Text" tab).
The top part of the dialog controls how new text will appear.
Select the type of text, and then its appearance (size, anchor-point, font, style, etc.)
<P>
The middle section is "For Textual Cells" and controls the fonts used to display textual cells
(see <A HREF="chap04-10.html#chap04-10">Section 4-10</A>).
<P>
<TABLE><TR><TD>
The bottom part of the dialog controls text drawn in circuitry.
You can choose the font to use, as well as a global text scale.
Normally, all text is drawn at 100% of its stated size.
However, you can globally scale all text by typing a value other than 100 into
this field.
You can also use the <B>Increase All Text Size</B>
and <B>Decrease All Text Size</B> commands (in menu <B>Edit / Text</B>)
to change this value, and alter the size of all displayed text.
</TD><TD><CENTER><IMG SRC="fig06-08.png" ALT="Figure 6.8"></CENTER></TD></TR></TABLE>
<P>
The Smart Text Preferences
(in menu <B>File / Preferences...</B>, "Display" section, "Smart Text" tab)
controls where new text will appear on Exports and Arcs.
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig06-23.png" ALT="Figure 6.23"></CENTER></TD><TD>
For arcs, you can choose to place the name on the inside of the arc (the default),
or on one side of the arc, depending on whether it is vertical or horizontal.
<P>
For export names, you can control their offset relative to the arc attached to that export.
For example, if a node on the left end of a wire has an export,
and the "Horizontal" placement is set to "Inside",
then the export text will attach on the left side, causing the label to appear inside of the wire.
</TD></TR></TABLE>
<!-- NEED 6in -->
<H3>6-8-5: Text Attributes</H3>
<!-- COMMAND Edit/Properties/Attribute Properties... -->
You can place arbitrary text attributes on nearly any part of the circuit by using the <B>Attribute Properties...</B>
command (in menu <B>Edit / Properties</B>).
<P>
<CENTER><IMG SRC="fig06-18.png" ALT="Figure 6.18"></CENTER>
<P>
Attributes can be placed on these objects (selected at the top):
<UL>
<LI>The current cell.
<LI>The currently highlighted node.
<LI>The currently highlighted arc.
<LI>The currently highlighted export.
<LI>The currently highlighted port on the currently highlighted node.
</UL>
The list of attributes is shown below that.
You can create a new attribute by typing its name in the "Name:"
field, its value in the "Value:" field and then clicking the "Create New" button.
The "Edit" button next to the "Value:" field lets you change the value in a separate dialog (useful for major changes).
You can delete an attribute with the "Delete" button.
An attribute's name can be changed with the "Rename..." button.
<P>
Just below the name and value fields are a set of popups that control
the attribute.
The "Code" popup determines whether the attribute is code or pure data.
This can be changed to one of the interpretive languages in Electric.
When this happens, the attribute value is treated as code that is sent to that interpreter.
Then, the true value of the attribute is the evaluation of that code.
For example, if the value of an attribute is "3+5" and the attribute is set to be Java code,
then the Java interpreter will be invoked, and the attribute will actually be "8".
<P>
You can change the type of unit by using the "Units" popup
(choices are capacitance, resistance, inductance, current, voltage, or distance).
See <A HREF="chap07-02-02.html#chap07-02-02">Section 7-2-2</A> for more on these units.
<P>
You can control the way that an attribute is displayed in the circuit by selecting the appropriate entry in the "Show:" popup.
You can request that various combinations of the attribute's name and value be displayed.
<P>
The bottom part of the dialog affects the appearance of the attribute, and is only relevant if the attribute is being shown.
The size of the text can be specified in relative or absolute units.
The anchor-point of the text can be set.
The X and Y offset of the anchor-point from the attached object can be specified.
The font of the text can be chosen.
The style of the text can be any combination of Italic, Bold, or Underline.
You can specify the rotation of the text, in 90-degree increments.
You can even give the text a color.
The "Invisible outside cell" requests that the attribute not be drawn when viewed farther up the hierarchy.
<P>
The "Done" button terminates this dialog.
Note that there is no "Cancel" button: this dialog makes changes as they are entered.
<P>
<H3>Special Considerations</H3>
<P>
Attributes that are placed on cells or exports get <I>inherited</I> when the cell is instantiated.
This means that each cell or export attribute is copied to the cell instance or port instance.
Cell attributes are actually parameters, discussed further in the
<A HREF="chap06-08-06.html#chap06-08-06">next Section</A>
It is often desirable for each inherited attribute to have unique names.
If the value of a cell or export attribute has "++" in it,
then the number before it will be incremented after inheritance.
Similarly, a "--" indicates that the number be decremented after inheritance.
This allows an inherited attribute to be unique with each inheritance.
<P>
When there are too many visible attributes, the display can become cluttered.
Use the "Layers" tab of the sidebar to control the text
(see <A HREF="chap04-05.html#chap04-05">Section 4-5</A> for more).
Attributes on nodes are controlled by the "Node Text" checkbox; those on arcs with the "Arc Text" checkbox, etc.
<H3>6-8-6: Cell Parameters</H3>
<!-- COMMAND Edit/Properties/See All Attributes on Node -->
<!-- COMMAND Edit/Properties/Hide All Attributes on Node -->
<!-- COMMAND Edit/Properties/Default Attribute Visibility -->
<!-- COMMAND Edit/Properties/Update Attributes Inheritance on Node -->
<!-- COMMAND Edit/Properties/Update Attributes Inheritance all Libraries -->
When attributes are created on cells, they become parameters to that cell.
Each instance of the cell has a copy of the attribute placed on the node, and the node's attribute
can then be set independently of the cell's attribute.
In such a situation, the node attribute's value is the "actual" parameter to the cell,
and the cell attribute's value is the "formal", or default parameter value.
<P>
One example of the use of cell parameters is in the Spice primitives, where user-defined values (such as voltage)
are communicated into the icon for generation in the Spice deck
(see <A HREF="chap09-04-04.html#chap09-04-04">Section 9-4-4</A>).
<P>
Another use of cell parameters is to parameterize the size of a transistor in a schematic
(or to parameterize the scalable layout transistors in the MOSIS CMOS technology, see <A HREF="chap07-04-02.html#chap07-04-02">Section 7-4-2</A>)
The transistor width and length can be defined in terms of the parameter value,
allowing a single cell to take on many different forms.
By combining these parameters with the interpretive language facility,
an arbitrary mathematical expression can be placed on the transistor which combines parameter values to form the exact transistor size
.
<P>
Inside of the cell, the parameter is shown with its name and default value.
To see the actual value from up the hierarchy, create a Java expression with the value "@PNAME" where PNAME is the parameter name.
For example, if a cell has an attribute called "heat", you might place a piece of Annotation Text
(with the "Annotation Text" command under the "Misc" entry in the component menu)
and name it "@heat".
Make sure to set its Code to Java.
When first defined, the parameter has no actual value, and so appears as "heat not found"
.
If an instance is created and its "heat" attribute is set to 7, then descending into that cell will show "7".
<P>
If a parameter is added to a cell, existing instances of that cell may not get properly updated.
To do this, use the <B>Update Attributes Inheritance on Node</B> command (in menu <B>Edit / Properties</B>).
To do this everywhere, use the <B>Update Attributes Inheritance all Libraries</B> command.
<P>
<H3>Parameter Text</H3>
<P>
Parameters on cells are not tied to any node or arc.
Instead, they float freely inside of the cell.
You can select the text and drag it to any location in the cell.
<P>
Parameters on instances of cells are placed at the same location as they appear inside of the cell.
In schematics, the location of a parameter on an icon is determined by the location of that parameter on the sample icon,
inside of the schematic cell.
<P>
If you do not wish to see a parameter's text on any instance, select the parameter text inside of the cell,
use the <B>Object Properties...</B> command (in menu <B>Edit / Properties</B>), and check "Invisible outside cell".
<P>
You can disable the display of parameters on cell instances by selecting them and using the <B>Hide All Attributes on Node</B> command
(in menu <B>Edit / Properties</B>).
You can force all parameters to be displayed on a cell instance by using the <B>See All Attributes on Node</B> command.
To restore default parameter visibility on a cell instance, use the <B>Default Attribute Visibility</B> command.
<!-- PAGE BREAK --><A NAME="chap06-09-01"></A>
<CENTER><FONT SIZE=6><B>Chapter 6: Advanced Editing</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap06-08-06.html#chap06-08-06.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>6-9-1: Introduction to Networks</H2></CENTER></TD>
<TD><CENTER><A HREF="chap06-09-02.html#chap06-09-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Tool/Network/Show Network -->
<!-- COMMAND Tool/Network/List Networks -->
<!-- COMMAND Tool/Network/List Connections on Network -->
<!-- COMMAND Tool/Network/List Geometry on Network -->
<!-- COMMAND Tool/Network/Show All Networks -->
<!-- COMMAND Tool/Network/List Total Wire Lengths on All Networks -->
<!-- PREFERENCE Tools/Network -->
A collection of electrically connected components defines a <I>network</I>.
Networks may span many arcs,
or they may reside on only a single export on a single node.
Because networks are stored in the Electric database,
they can be immediately accessed when needed.
<P>
Whenever a port on a node is selected,
the highlighting indicates the entire network that is connected to that port.
Another way to see an entire network is to use the <B>Show Network</B>
command (in menu <B>Tool / Network</B>).
This will highlight all arcs on the currently selected networks.
Repeated use of this command causes the network to be highlighted at successively lower levels of the hierarchy.
<P>
If the design is very dense,
you can select one or more networks by name with the <B>Select Object...</B>
command (in menu <B>Edit / Selection</B>).
The <B>Show All Networks</B> command (in menu <B>Tool / Network</B>)
highlights every network in a different color (useful if there are not too many nets).
<P>
There are many commands in menu <B>Tool / Network</B> that can be used to get information about the networks in a cell:
<UL>
<LI><B>List Networks</B> shows a list of the networks in the current cell.
</LI>
<LI><B>List Exports on Network</B> lists all export names on the currently highlighted network.
This list contains the names of exports at all levels of the hierarchy,
above and below the current cell.
The facility is useful if, for example,
you have propagated clock lines throughout the circuit and wish to make sure that all of the export
names on this network have some variant of the name "phi".
By quickly examining this list,
you can see all of the names that have been used on the network, throughout the hierarchy.
</LI>
<LI><B>List Exports below Network</B> lists all export names on the currently highlighted network.
This list is similar to the one generated by <B>List Exports on Network</B>
except that it works only on cells below the current one.
</LI>
<LI><B>List Connections on Network</B> lists all nodes in the current cell that are connected to the current network.
This list includes only those nodes at the ends of the net,
not the pin or contact nodes used inside of the network.
The command is useful if you are at one end of a wire and want to check to see what is at the other end.
</LI>
<LI><B>List Geometry on Network</B> lists all geometry in the current cell that is connected to the current network.
This reports the area and perimeter of all attached layers.
</LI>
<LI><B>List Total Wire Lengths on All Networks</B> lists the lengths of all networks in the current cell.</LI>
</UL>
<!-- NEED 2in -->
<H3>6-9-2: Naming Networks</H3>
Network names are derived from export names and arcs that are named in a cell.
The name given to an export becomes the network name for all arcs connected to that export.
Similarly, the name given to an arc
(by setting the name field in the <B>Object Properties...</B> dialog)
becomes the name of the network for all connected arcs.
You can rename a network by changing the name of a connected export or arc.
<P>
Two phenomena can occur in network naming: a network can be <I>multiply named</I>,
and it can <I>span disjoint circuitry</I>.
A network has multiple names when two or more connected arcs or exports are named with different names.
For example, if you make an export on a contact node and call it "clock",
then you select an arc connected to that contact node and name it "sig",
the circuitry will be on the network "clock/sig."
Thus, both names now apply to the same network.
<P>
The other phenomenon of network naming is that a single network can include unconnected parts of the circuit.
This happens when arcs in unconnected parts of the circuit are given the same name.
This causes the two arcs to be implicitly joined into one network.
Because this network naming phenomena is most commonly used in schematics,
the unification of like-named networks only happens in cells with the "schematic" view.
<!-- NEED 3in -->
<H3>6-9-3: Bus Naming</H3>
<!-- COMMAND Edit/Arc/Rip Bus -->
<!-- COMMAND Edit/Properties/Parameterize Bus Name -->
<!-- COMMAND Edit/Properties/Edit Bus Parameters... -->
The Bus arc of the Schematics technology is a special arc that can carry multiple signals
(see <A HREF="chap07-05-01.html#chap07-05-01">Section 7-5-1</A>).
When giving a network name to Bus arcs, it is possible to specify complex bus names.
<UL>
<LI><B>Simple arrays</B> Bus names can be arrays (for example, "A[0:7]" which defines an 8-wide bus).
The indices can ascend or descend.</LI>
<LI><B>Lists</B> Bus names can be lists (for example,
"clock,in1,out" which aggregates 3 signals into a 3-wide bus).</LI>
<LI><B>Array index lists and ranges</B> Arrayed bus names can have lists of values (separated by commas)
or ranges of values (using the colon).
For example, the bus "b[0],c[3,5],d[1:2],e[8:6]" is an 8-wide bus with signals in this order:
b[0], c[3], c[5], d[1], d[2], e[8], e[7], e[6].
</LI>
<LI><B>Multidimensional array indices</B> Arrays can be multiply indexed
(for example "b[1:2][100,102]" defines a bus with 4 entries: b[1][100], b[1][102], b[2][100], and b[2][102]).
You can have any number of dimensions in an array.</LI>
<LI><B>Symbolic array indices</B> It is possible to use symbolic indices in bus naming
(for example, the bus "r[x,y]" defines a 2-wide bus with the signals r[x] and r[y]).
</LI>
</UL>
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig09-12.png" ALT="Figure 9.12"></CENTER></TD><TD>
When a bus is unnamed, the system determines its width from the ports that it connects.
Some tools (such as simulation netlisters) need to name everything,
and so use automatically-generated names.
When this happens, the system must choose whether to number the bus ascending or descending.
To resolve this issue,
use the Network Preferences (in menu <B>File / Preferences...</B>, "Tools" section, "Network" tab),
and choose "Ascending" or "Descending".
</TD></TR></TABLE>
<P>
Individual wires that connect to a bus must be named with names from that bus.
As an aid in obtaining individual signals from a bus,
the <B>Rip Bus</B> command (in menu <B>Edit / Arc</B>)
will automatically create such wires for the selected bus arc.
<P>
<H3>Arrayed Nodes</H3>
<P>
Besides using array names on busses, you can also give array names to schematic nodes.
Netlisters will create multiple copies of that node, named with the individual elements of the array.
<P>
<H3>Parameterized Bus Names</B>
<P>
<TABLE><TR><TD>
It is possible to have variable-width busses by parameterizing their names.
Electric maintains a list of global parameters, and these can be manipulated with the
<B>Edit Bus Parameters...</B> command (in menu <B>Edit / Properties</B>).
You can create and delete parameters, and can set values for each.
</TD><TD><CENTER><IMG SRC="fig06-25.png" ALT="Figure 6.25"></CENTER></TD></TR></TABLE>
<P>
To use these parameters, you must add a template to an arc name or export name.
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig06-26.png" ALT="Figure 6.26"></CENTER></TD><TD>
This figure shows an export called "in", and an arc called "internal".
Both the export name and the arc name were selected, and the command
<B>Parameterize Bus Name</B> issued (in menu <B>Edit / Properties</B>).
</TD></TR></TABLE>
<P>
The templates are then shown near the original names.
<P>
You may type any text into the template.
Wherever they string <CODE>$(par)</CODE> appears, it will be replaced
with the parameter <CODE>par</CODE>.
In this example, the parameter <CODE>x</CODE> has the value 7.
When parameter values change, click the "Update All Templates" button to
reevaluate all export and arc names.
<H3>6-9-4: Power and Ground</H3>
<!-- COMMAND Tool/Network/Validate Power and Ground -->
<!-- COMMAND Tool/Network/Repair Power and Ground -->
<!-- COMMAND Tool/Network/Show Power and Ground -->
Identification of a power network is done by finding:
<UL>
<LI>a Power node from the Schematic technology;
<LI>an export in the current cell that has the "power" characteristic;
<LI>an export in the current cell that begins with the letters "vdd", "vcc",
"pwr", or "power";
<LI>a port on a component in the current cell that has either of the above two properties.
</UL>
Ground networks use the same rules,
except that the acceptable port names begin with "vss", "gnd", or "ground".
<P>
All supply networks defined with the Power and Ground nodes of the Schematic technology are combined into one network.
This means, for example, that two arcs,
each connected to a separate Ground node,
appear on the same network regardless of their actual connectivity in the circuit.
<P>
As a debugging aid for power and ground networks, the command <B>Show Power and Ground</B>
(in menu <B>Tool / Network</B>) shows the entire power and ground network.
The <B>Validate Power and Ground</B> command checks all power and
 ground networks in the circuit.
Any power or ground networks that are named according to the prefixes listed above must have the proper characteristics.
If, for example, a power network is called "gnd007", then it will be flagged by this command.
The command <B>Repair Power and Ground</B> changes the characteristics where necessary.
<P>
Many designs require multiple power and ground rails.
Electric allows additional power and ground signals through the use of the Global node
(see <A HREF="chap06-09-05.html#chap06-09-05">next Section</A>).
<H3>6-9-5: Global Networks</H3>
When wiring an IC layout, the only way to get a signal from one point to another is to physically place the wires.
Signals that span a large circuit, such as power and ground, must be carefully wired together at each level of the hierarchy.
<P>
In schematics, however, it is often the case that a signal is used commonly without explicitly being wired or exported.
Examples of such signals are power, ground, clocks, etc.
The power and ground signals can be established in any schematic with the use of the Power and Ground nodes.
To create another such signal, use the Global node of the schematics technology
(see <A HREF="chap07-05-01.html#chap07-05-01">Section 7-5-1</A>).
<P>
The Global node is diamond-shaped, and it has a name and characteristic similar to exports (input, output, etc.)
All signals with the same global name are considered to be connected when netlisting occurs.
Thus, the Global symbol can be used to route clock signals, as well as to define multiple power and ground rails.
Note that with multiple power and ground rails, only one of them is the true "power and ground" as defined by the Power and Ground symbols.
All others, declared with Global nodes, are not true power and ground signals, but are simply globals.
<P>
<H3>Global Partitioning</H3>
<P>
It is sometimes the case that the designer wishes to isolate a global signal and wire it differently.
For example, a schematic cell may be defined with power and ground symbols, connecting it to the global power and ground.
But a particular instance of the schematic may need to be wired to alternate power and ground rails, for example "dirty power".
Another example of rewiring happens when you want to test a specific instance of a cell, and you need to connect its globals
differently for the purposes of simulation.
<P>
<TABLE><TR><TD>
The solution is to place a "Global Partition" node inside of the schematic
(see <A HREF="chap07-05-01.html#chap07-05-01">Section 7-5-1</A>).
This symbol acts like an "offpage" symbol: it is wired to something inside of the cell (a global signal)
and it is also exported to the outside world.
</TD><TD><CENTER><IMG SRC="fig06-20.png" ALT="Figure 6.20"></CENTER></TD></TR></TABLE>
<P>
In this example, the schematic has power and ground signals,
but the power signal is also connected to
a Global Partition node and exported (as "vddR").
The icon has an extra connection for this power tap.
In normal use, the extra connections created by the Global Partition nodes do not need to be wired up,
because they connect to globals, and their connectivity is understood.
If, however, the extra exports <I>are</I> wired, it means that the signal inside of the cell is disconnected from the global,
and connected instead to that wire.
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig06-21.png" ALT="Figure 6.21"></CENTER></TD><TD>
In the example here, two "invR" icons are placed, but one of them has its "vddR" connection wired (to a different power source).
The subcircuit for the rightmost icon will not use the global power signal, but will instead use the attached signal, "vddInv".
</TD></TR></TABLE>
<!-- PAGE BREAK --><A NAME="chap06-10-01"></A>
<CENTER><FONT SIZE=6><B>Chapter 6: Advanced Editing</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap06-09-05.html#chap06-09-05.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>6-10-1: Introduction to Outlines</H2></CENTER></TD>
<TD><CENTER><A HREF="chap06-10-02.html#chap06-10-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Edit/Cleanup Cell/Show Pure Layer Nodes -->
<TABLE><TR><TD>
For some primitive nodes, it is not enough to rotate, mirror, and scale.
These primitives can to be augmented with an <I>outline</I>,
which is a polygonal description.
<P>
There are quite a few primitive nodes that make use of outline information.
The MOS transistors use the outline to define the gate path in serpentine configurations
(see <A HREF="chap07-04-01.html#chap07-04-01">Section 7-4-1</A>).
The Artwork technology has nodes that use outline information:
Opened-Solid-Polygon, Opened-Dotted-Polygon, Opened-Dashed-Polygon,
Opened-Thicker-Polygon, Closed-Polygon, Filled-Polygon, and Spline
(see <A HREF="chap07-06-01.html#chap07-06-01">Section 7-6-1</A>).
<P>
For arbitrary shapes on arbitrary layers,
use the <I>pure-layer</I> nodes in the IC layout technologies.
The pure-layer nodes are found under the "Pure" entry in the component menu.
For example,
the node called "Metal-1-Node" in the CMOS technologies looks like a rectangle of the Metal-1,
until you add outline information.
With an outline, this node can take any shape.
</TD><TD><CENTER><IMG SRC="fig06-17.png" ALT="Figure 6.17"></CENTER></TD></TR></TABLE>
<P>
Because pure-layer nodes are unusual, it is useful to be able to identify them.
Use the <B>Show Pure Layer Nodes</B> command (in menu <B>Edit / Cleanup Cell</B>)
to highlight all of them in the current cell.
<H3>6-10-2: Manipulating Outlines</H3>
<!-- COMMAND Edit/Modes/Edit/Toggle Outline Edit -->
<TABLE><TR><TD><CENTER><IMG SRC="fig06-05.png" ALT="Figure 6.5"></CENTER></TD><TD>
To manipulate outline information on the currently highlighted node,
use "Outline Edit" mode (click on the icon in the tool bar or use
the <B>Toggle Outline Edit</B> command, in menu <B>Edit / Modes / Edit</B>).
</TD></TR></TABLE>
In this mode, there is always a "current point", identified with an "X" over it.
To further identify this point, the lines coming into and out of the point have
arrows on them indicating the direction of the outline.
<P>
In outline edit mode, the <I>left</I>
button is used to select and move a point on the outline, and the
<I>right</I>
button adds a new point after the selected one.
<P>
Besides selecting points with the mouse, you can also step through
the points of the outline with the "." key (next outline point) and "," key
(previous outline point).
These keys are under the "&gt;" and "&lt" keys, so you can think of them as the
"next point" (&gt;) and "previous point" (&lt;) commands.
<P>
The <B>Selected</B> command (in menu <B>Edit / Erase</B>) deletes the current outline point
(this is the Delete key).
<P>
When done editing the outline, switch to standard selection mode
(the <B>Click/Zoom/Wire</B> command, in menu <B>Edit / Modes / Edit</B>).
<H3>6-10-3: Special Outline Generation</H3>
<TABLE><TR><TD><CENTER><IMG SRC="fig06-12.png" ALT="Figure 6.12"></CENTER></TD><TD>
To generate a doughnut shaped outline, use the "Annular Ring..." command under the "Misc" entry
in the component menu.
This dialog prompts for a layer to use and an inner and outer radius for the annulus.
By default, it is made as a full circle (360 degrees), but this can also be changed.
Also, the number of line segments used in the construction can be set,
allowing for smoother or coarser shapes.
<P>
<CENTER><IMG SRC="fig06-16.png" ALT="Figure 6.16"></CENTER>
</TD></TR></TABLE>
<P>
<TABLE><TR><TD>
To generate text-shaped outlines,
use the "Layout Text..." command under the "Misc" entry in the component menu.
This dialog prompts for text and a layer to use as well as the size, scale, font, and style.
A nonzero dot separation causes each pixel of the text to be placed separately (some design rules need this).
<P>
<CENTER><IMG SRC="fig06-15.png" ALT="Figure 6.15"></CENTER>
</TD><TD><CENTER><IMG SRC="fig06-14.png" ALT="Figure 6.14"></CENTER></TD></TR></TABLE>
<!-- PAGE BREAK --><A NAME="chap06-11"></A>
<CENTER><FONT SIZE=6><B>Chapter 6: Advanced Editing</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap06-10-03.html#chap06-10-03.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>6-11: Interpretive Languages</H2></CENTER></TD>
<TD><CENTER><A HREF="chap06-12.html#chap06-12.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Tool/Languages/Run Java Bean Shell Script -->
Electric has the Bean Shell built into it.
This enables you to load Java scripts that access the Electric database.
<P>
The Bean Shell is not part of the default Electric distribution.
You must add it as a "plug in"
(see <A HREF="chap01-05.html#chap01-05">Section 1-5</A> for more on plug-ins).
<P>
To run a script, use the <B>Run Java Bean Shell Script</B> command
(in menu <B>Tool / Languages</B>).
Here is an example script that searches the current cell for exports starting with "a".
<CENTER><TABLE BORDER=1><TR><TD>
<CODE>
&nbsp;&nbsp;&nbsp;import com.sun.electric.database.hierarchy.Cell;
<BR>
&nbsp;&nbsp;&nbsp;import com.sun.electric.tool.user.ui.WindowFrame;
<BR>
&nbsp;&nbsp;&nbsp;import java.util.List;
<BR>
&nbsp;&nbsp;&nbsp;import java.util.ArrayList;
<BR>
&nbsp;&nbsp;&nbsp;import java.util.Iterator;
<BR>
<BR>
&nbsp;&nbsp;&nbsp;// read library with test setup
<BR>
&nbsp;&nbsp;&nbsp;Cell lay = WindowFrame.getCurrentCell();
<BR>
<BR>
&nbsp;&nbsp;&nbsp;// find all exports
<BR>
&nbsp;&nbsp;&nbsp;com.sun.electric.database.hierarchy.Export e;
<BR>
&nbsp;&nbsp;&nbsp;List aList = new ArrayList();
<BR>
&nbsp;&nbsp;&nbsp;for(Iterator it = lay.getPorts(); it.hasNext(); )
<BR>
&nbsp;&nbsp;&nbsp;{
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e = (com.sun.electric.database.hierarchy.Export)it.next();
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (e.getName().startsWith("a")) aList.add(e);
<BR>
&nbsp;&nbsp;&nbsp;}
<BR>
<BR>
&nbsp;&nbsp;&nbsp;String aOut = "Exports that start with 'a':";
<BR>
&nbsp;&nbsp;&nbsp;for(Iterator it = aList.iterator(); it.hasNext(); )
<BR>
&nbsp;&nbsp;&nbsp;{
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e = (com.sun.electric.database.hierarchy.Export)it.next();
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;aOut += " " + e.getName();
<BR>
&nbsp;&nbsp;&nbsp;}
<BR>
&nbsp;&nbsp;&nbsp;System.out.println(aOut);
</CODE>
</TD></TR></TABLE></CENTER>
<P>
Notice that Electric's "Export" object must be a fully-qualified name, because the
name "Export" is used for other reasons in the Bean Shell.
<P>
For more information about accessing the internals of Electric, read the Javadoc
in the source code.
<!-- PAGE BREAK --><A NAME="chap06-12"></A>
<CENTER><FONT SIZE=6><B>Chapter 6: Advanced Editing</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap06-11.html#chap06-11.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>6-12: Project Management</H2></CENTER></TD>
<TD><CENTER><A HREF="chap06-13.html#chap06-13.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND File/Project Management/Update -->
<!-- COMMAND File/Project Management/Check Out This Cell -->
<!-- COMMAND File/Project Management/Check In This Cell... -->
<!-- COMMAND File/Project Management/Rollback and Release Check-Out -->
<!-- COMMAND File/Project Management/Add This Cell -->
<!-- COMMAND File/Project Management/Remove This Cell -->
<!-- COMMAND File/Project Management/Show History of This Cell... -->
<!-- COMMAND File/Project Management/Get Library From Repository... -->
<!-- COMMAND File/Project Management/Add Current Library To Repository -->
<!-- COMMAND File/Project Management/Add All Libraries To Repository -->
<!-- PREFERENCE General/Project Management -->
The project management system in Electric allows multiple users to work together on
the design of a circuit.
This is accomplished by having a <I>repository</I> in a shared location,
and local libraries in each user's disk area.
Users work on cells by checking them out of the repository,
making changes, and then checking them back in.
The project management system ensures that only one user can access a cell at a time.
In addition, it also applies its understanding of the circuit hierarchy
to inform users of potential inconsistencies that may arise.
<P>
The project management system uses the full power of cell naming to accomplish its task.
It handles design history by creating a new version of
a cell each time it is checked out of the repository.
The user's library contains only the most recent version of each cell,
taken from the repository.
When a user updates their library from the repository,
newer versions are brought in and substituted for older versions.
Unless the user specifically asks for an older version,
it is removed from their library.
<P>
Because the project management system uses versions to manage design progress,
users are discouraged from managing versions explicitly.
Thus, the command <B>New Version of Current Cell</B> (in menu <B>Cell</B>) is not allowed.
Also, it is not appropriate for a user to use two different versions
of a cell explicitly, because they are considered to be part of a single cell's history.
<P>
All commands to the project management system can be found under the
<B>Project Management</B> command (in menu <B>File</B>).
Subcommands exist there for checking cells in and out,
updating local libraries from the repository, and more.
Many project management functions are also available in context menus in the cell explorer.
<P>
<!-- NEED 4in -->
<H3>Setting Up Project Management</H3>
<P>
<TABLE><TR><TD>
The first step needed to use the project management system is to choose a location
for the repository.
This must be a shared location that each user can access (read and write).
Use the Project Management Preferences, in menu <B>File / Preferences...</B>,
"General" section, "Project Management" tab.
Each user must do this and set the same location so that they can share the repository.
Also, be sure that your user name is correct, as this will be used
when tagging file changes.
</TD><TD><CENTER><IMG SRC="fig06-10.png" ALT="Figure 6.10"></CENTER></TD></TR></TABLE>
<P>
After the repository has been set, libraries can be entered into it.
Use the <B>Add Current Library To Repository</B> command to place your library in the repository.
Use <B>Add All Libraries To Repository</B> to add all libraries in the system.
Note that a library that has been entered into the repository is also tagged with information
about the repository location, as well as the state of the cells (checked-in or checked-out).
Therefore, you should save your library after entering it into the repository.
<P>
Other users can obtain a copy of your library directly from the repository by using
the <B>Get Library From Repository...</B> command.
<P>
<H3>Checking Cells In and Out</H3>
<P>
When a cell is not checked out, you cannot make changes to it.
Any change is immediately undone by the project management system.
This means that a change which affects unchecked-out cells, higher up the hierarchy, will also be disallowed.
<P>
To check-out the current cell, use the <B>Check Out This Cell</B> command.
If there are related cells (hierarchically above or below this)
that are already checked-out to other users, you will be given warnings about potential conflicts that may arise.
<P>
To check the current cell back in, use the <B>Check In This Cell...</B> command.
You will be prompted for a documentation message about the change.
No further changes will be allowed to the cell.
Note that when checking-in a cell, other cells above and below this in the hierarchy will
also be checked-in.
This is because changes affect other cells in the hierarchy, and so consistent pieces of
the hierarchy must be updated at the same time.
<P>
<TABLE><TR><TD>
The cell explorer shows the state of cells that are under project management control
(see <A HREF="chap04-08.html#chap04-08">Section 4-8</A>).
Locks are drawn over cells to indicate their state (checked-in, checked-out to you, or
checked-out to others).
You can also access many of the project management commands by selecting cells in the
explorer and using context menu commands.
</TD><TD><CENTER><IMG SRC="fig06-19.png" ALT="Figure 6.19"></CENTER></TD></TR></TABLE>
<P>
To update your library so that it contains the most recent version of every cell,
use the <B>Update</B> command.
This will retrieve the newest version of every cell in every library that is
being managed.
You will be given a list of cells that were replaced.
<P>
<H3>Advanced Commands</H3>
<P>
If, after a cell has been checked-out, you change your mind and do not wish to make changes,
use the <B>Rollback and Release Check-Out</B> command (or
use the "Rollback and Release Check-Out" context menu when clicking on a cell name in the cell explorer).
This will destroy any changes made to the cell since it was checked-out and revert the cell to its
state when it was checked-in.
<P>
If, in the course of design, a new cell is created, it must be added to the repository
so that others can share it.
Use the <B>Add This Cell</B> command to include the cell in the repository.
Similarly, if a cell is to be deleted, use the <B>Remove This Cell</B> command to delete it from the repository.
<P>
To examine the history of changes to a cell, use the <B>Show History of This Cell...</B>
command (or
use the "Show History of This Cell..." context menu when clicking on a cell name in the cell explorer).
Besides showing the history of changes, you can use this dialog to retrieve an earlier version of the cell.
<P>
<CENTER><IMG SRC="fig06-11.png" ALT="Figure 6.11"></CENTER>
<P>
<H3>Under the Hood</H3>
<P>
The project management system makes use of version information on all cells to control cell changes.
When a cell is checked-out, a new version is made in your local library, and the old version is deleted.
All instances of the old version are switched to the new version. The old version remains in the repository.
When the cell is checked-in, that new version also goes into the repository.
When updates are done, newer versions are obtained from the repository, and appropriate substitutions are performed.
<!-- PAGE BREAK --><A NAME="chap06-13"></A>
<CENTER><FONT SIZE=6><B>Chapter 6: Advanced Editing</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap06-12.html#chap06-12.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>6-13: CVS Project Management</H2></CENTER></TD>
<TD><CENTER><A HREF="chap06-14.html#chap06-14.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND File/CVS/Commit All Open Libraries -->
<!-- COMMAND File/CVS/Update Open Libraries -->
<!-- COMMAND File/CVS/Get Status Open Libraries -->
<!-- COMMAND File/CVS/List Editors Open Libraries -->
<!-- COMMAND File/CVS/Update Project Libraries -->
<!-- COMMAND File/CVS/Get Status Project Libraries -->
<!-- COMMAND File/CVS/List Editors Project Libraries -->
<!-- COMMAND File/CVS/Checkout From Repository -->
<!-- PREFERENCE General/CVS -->
Electric implements an interface to the Concurrent Versioning System (CVS) program,
a popular version control system.
This section assumes the user is familiar with how CVS works, and the
various CVS commands.  Such information is readily available on the web.
<P>
<TABLE><TR><TD>
To enable Electric to use CVS,
you must first configure the CVS Preferences (in
<B>File / Preferences...</B>, "General" section, "CVS" tab).  CVS must be enabled,
and the repository location must be specified.  Electric does not implement
the CVS protocol, it merely provides an interface to interact with an external
CVS program, so that program must be specified in the preferences.
</TD><TD><CENTER><IMG SRC="fig06-27.png" ALT="Figure 6.27"></CENTER></TD></TR></TABLE>
<P>
The Electric GUI allows the user to perform the common CVS commands via
the menu <B>File / CVS</B>, or via the popup-context menu on the libraries
and cells listed in the explorer tree.
The menu commands apply to all libraries; the explorer-tree context menus apply only to the selected library.
<P>
With CVS enabled in Electric, the explorer tree uses colors to show the
state of libraries or cells in CVS.  When using a JELIB or ELIB library
format, the library name and all cells are the same color, because
the entire library is a single file.  When using
a DELIB format, the cells are different color, because each cell
is its own file.  The colors and their associated state
are shown below.  Colors at the top of the table will be displayed before colors
at the bottom of the table, if two states are simultaneously valid.
<P>
<!-- NEED 2in -->
<CENTER><TABLE border="1">
<TR><TD ALIGN=CENTER><B>State</B></TD><TD ALIGN=CENTER><B>Color</B></TD></TR>
<TR><TD>Conflicts with CVS version</TD><TD><font color="#ff0000">Red</font></TD></TR>
<TR><TD>Locally Modified</TD><TD><font color="#0000ff">Blue</font></TD></TR>
<TR><TD>Needs Update</TD><TD><font color="#FF66FF">Magenta</font></TD></TR>
<TR><TD>Added/Removed</TD><TD><font color="#00ff00">Green</font></TD></TR>
<TR><TD>Unknown (not in CVS)</TD><TD><font color="#FFCC66">Orange</font></TD></TR>
<TR><TD>Up-to-date</TD><TD>Black</TD></TR>
</TABLE></CENTER>
<P>
These are the commands implemented by Electric:
<UL>
<LI><B>Update</B> Retrieves latest version from CVS repository.</LI>
<LI><B>Commit</B> Commit a locally modified version to CVS.</LI>
<LI><B>Get Status</B> Check the status with respect to the CVS version.</LI>
<LI><B>List Editors</B> List other users who have a locally modified version of the file.</LI>
<LI><B>Show Log</B> Display a dialog of all versions of the file in CVS (allows checkout of specific version).</LI>
<LI><B>Rollback</B> Revert to latest CVS version.</LI>
<LI><B>Add</B> Add the file to CVS (requires a commit to actually add it).</LI>
<LI><B>Remove</B> Remove the file from CVS (requires a commit to actually remove it).</LI>
</UL>
<!-- PAGE BREAK --><A NAME="chap06-14"></A>
<CENTER><FONT SIZE=6><B>Chapter 6: Advanced Editing</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap06-13.html#chap06-13.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>6-14: Emergencies</H2></CENTER></TD>
<TD><CENTER><A HREF="chap07-01-01.html#chap07-01-01.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND File/Check Libraries/Check -->
<!-- COMMAND File/Check Libraries/Repair -->
<!-- COMMAND File/Force Quit (and Save) -->
<!-- COMMAND Tool/Network/Redo Network Numbering -->
Electric uses separate Java threads for all activities.
Because of this, if the system encounters an error, it aborts the thread but
the main program continues to run.
<P>
If a thread crashes and leaves a Job running, then you will not be able to
issue other commands, because their Jobs will be queued behind the stuck one
(see <A HREF="chap04-08.html#chap04-08">Section 4-8</A> for more viewing Jobs).
Even the <B>Quit</B> command is a job, and so it cannot run.
To solve this problem, use the <B>Force Quit (and Save)</B> command
(in menu <B>File</B>).
<P>
If you suspect that the database is corrupt, use the
 subcommands of the
<B>Check Libraries</B> command (in menu <B>File</B>).
The <B>Check</B> command examines the database but does not fix errors.
The <B>Repair</B> command checks and repairs the database (if it can).
<P>
The networks may also need to be renumbered.
Do this with <B>Redo Network Numbering</B> command (in menu <B>Tool / Network</B>).
<HR>
<CENTER><H1><A NAME="chap07-01-01">Chapter 7: Technologies</A></H1></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap06-14.html#chap06-14.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>7-1-1: Technologies</H2></CENTER></TD>
<TD><CENTER><A HREF="chap07-01-02.html#chap07-01-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Help/Load Built-in Libraries/Sample Cells -->
A <I>technology</I> is an environment in which design is done.
Technologies can be layout specific, for example MOSIS CMOS,
or they can be abstract, for example Schematics and Artwork.
There are multiple CMOS variations to handle popular design rules such as MOSIS, submicron,
etc.
<P>
Each technology consists of a set of <I>primitive nodes</I> and <I>arcs</I>.
These, in turn, are constructed from one or more <I>layers</I>.
Each technology also includes information necessary to do design,
such as design rules, connectivity rules, simulation information, etc.
<P>
The primitive nodes in a technology come in three styles:
<UL>
<LI>PINS are used to join arcs, so there is one pin for every arc in the technology.
</LI>
<LI>COMPONENTS are the basic nodes used in design: contacts, transistors, etc.
</LI>
<LI>PURE-LAYER NODES are used for geometric manipulation
(see <A HREF="chap06-10-01.html#chap06-10-01">Section 6-10-1</A>).
There is one pure-layer node for every layer in the technology.
</LI>
</UL>
<P>
The component menu in the side bar (on the left side of the editing window)
shows arcs on the left (the menu entries with red border),
pin nodes in the center column (these appear as boxes with a cross inside),
and components on the right (the more complex layer combinations).
The pure-layer nodes are available under the entry labeled "Pure".
<P>
Electric has a "sample" library built into it that illustrates many features.
To access it, use the <B>Sample Cells</B> command (in menu <B>Help / Load Built-in Libraries</B>).
The table below lists the cells in that library which illustrate different technologies:
<P>
<CENTER><TABLE BORDER=1 WIDTH="95%">
<TR><TD><B>Technology</B></TD><TD ALIGN=CENTER><B>Description</B></TD><TD><B>Sample Cell</B></TD></TR>
<TR><TD>mocmos</TD><TD>MOSIS CMOS rules</TD><TD>tech-MOSISCMOS{lay}</TD></TR>
<TR><TD>bipolar</TD><TD>Simple bipolar technology</TD><TD>tech-Bipolar{lay}</TD></TR>
<TR><TD>schematics</TD><TD>Digital schematics layout</TD><TD>tech-SchematicsDigital{sch}</TD></TR>
<TR><TD>schematics</TD><TD>Analog schematics layout</TD><TD>tech-SchematicsAnalog{sch}</TD></TR>
<TR><TD>artwork</TD><TD>Graphical design</TD><TD>tech-Artwork</TD></TR>
<TR><TD>pcb</TD><TD>Printed Circuit Boards</TD><TD>tech-PCB{sch}</TD></TR>
<TR><TD>nmos</TD><TD>n-Channel MOS rules</TD><TD>tech-nMOS{lay}</TD></TR>
<TR><TD>rcmos</TD><TD>Round CMOS rules</TD><TD>tech-RoundCMOS{lay}</TD></TR>
<TR><TD>efido</TD><TD>Digital Filter technology</TD><TD>tech-DigitalFilter</TD></TR>
<TR><TD>gem</TD><TD>Temporal Logic specification</TD><TD>tech-Gem</TD></TR>
</TABLE></CENTER>
<H3>7-1-2: Controlling Technologies</H3>
<!-- COMMAND Edit/Technology Specific/Describe this Technology -->
<!-- COMMAND Edit/Technology Specific/Document Current Technology -->
<!-- PREFERENCE Technology/Technology -->
<!-- PROJECTSETTING Technology -->
Electric has the concept of a <I>current technology</I> which is shown in the
status bar.
This technology affects many things, including the selection of nodes and arcs in the component menu.
There are a number of ways to affect the current technology, both manual and automatic.
<P>
You can change the current technology by selecting it from the popup at the top of the
side bar (either the "Components" or "Layers" tab).
Electric automatically switches the current technology to match the cell being edited.
If there are multiple cells being edited from different technologies, this switching can become annoying.
To disable automatic technology switching,
use the Nodes Preferences (in menu <B>File / Preferences...</B>, "General" section, "Nodes" tab),
and uncheck "Switch technology to match current cell".
<P>
To see a list of primitive nodes and arcs in the current technology,
use the <B>Describe this Technology</B> command (in menu <B>Edit / Technology Specific</B>).
To see a detailled description of the current technology,
use the <B>Document Current Technology</B> command.
<P>
<TABLE><TR><TD>
Some technologies have settings that further customize them.
The Technology Project Settings command (in menu <B>File / Project Settings...</B>, "Technology" tab)
lets you control many general and specific technology settings.
More information about the MOSIS CMOS section can be found in
<A HREF="chap07-04-02.html#chap07-04-02">Section 7-4-2</A>.
</TD><TD><CENTER><IMG SRC="fig07-29.png" ALT="Figure 7.29"></CENTER></TD></TR></TABLE>
<P>
The Technology and Foundry section has these controls:
<UL>
<LI>"Startup technology" controls the technology that is used when Electric first begins.
It is also used when reading old libraries that are missing some technology information.
</LI>
<LI>"Layout technology to use for Schematics" sets the technology to use for real geometry
(an integrated circuit technology, not a schematics or artwork technology).
The default layout technology is used to give further information about schematics components
(see, for example, <A HREF="chap09-04-03.html#chap09-04-03">Section 9-4-3</A>).
</LI>
<LI>"Current foundry" sets specific rules that customize a technology for a given manufacturer.
This field is currently not used.</LI>
</UL>
<TABLE><TR><TD><CENTER><IMG SRC="fig07-14.png" ALT="Figure 7.14"></CENTER></TD><TD>
Other settings are found in the Technology Preferences dialog
(in menu <B>File / Preferences...</B>, "Technology" section, "Technology" tab)
For the difference between Preferences and Project Settings, see
<A HREF="chap06-03.html#chap06-03">Section 6-3</A>.
<P>
Layout Technology preferences are discussed in <A HREF="chap07-04-02.html#chap07-04-02">Section 7-4-2</A>.
Artwork controls are discussed in <A HREF="chap07-06-01.html#chap07-06-01">Section 7-6-1</A>).
Schematics controls are discussed in <A HREF="chap07-05-01.html#chap07-05-01">Section 7-5-1</A>
and <A HREF="chap03-11-02.html#chap03-11-02">Section 3-11-2</A>.
</TD></TR></TABLE>
<P>
<!-- PAGE BREAK --><A NAME="chap07-02-01"></A>
<CENTER><FONT SIZE=6><B>Chapter 7: Technologies</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap07-01-02.html#chap07-01-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>7-2-1: Scale</H2></CENTER></TD>
<TD><CENTER><A HREF="chap07-02-02.html#chap07-02-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- PROJECTSETTING Scale -->
Electric represents all distances in dimensionless units.
A transistor that is 2 x 3 in size is actually stored in memory as 2 x 3.
To convert these units to real distances, each technology has a <I>scale</I>,
measured in nanometers (billionths of a meter).
The scale of a technology is shown in the status area after the technology's name.
<P>
For example, if the scale for the MOSIS CMOS ("mocmos") technology is 200 nanometers,
then a 2 x 3 transistor is actually 400 x 600 nanometers (or 0.4 x 0.6 microns).
<P>
<TABLE><TR><TD>
To set the scale, use the
Scale Project Settings (in menu <B>File / Project Settings...</B>, "Scale" tab).
<P>
Scale only applies to integrated-circuit layout technologies.
There is no scale for Schematics, Artwork, and other nonlayout technologies.
</TD><TD><CENTER><IMG SRC="fig07-13.png" ALT="Figure 7.13"></CENTER></TD></TR></TABLE>
<!-- NEED 3in -->
<H3>7-2-2: Units</H3>
<!-- PREFERENCE Technology/Units -->
<TABLE><TR><TD><CENTER><IMG SRC="fig07-01.png" ALT="Figure 7.1"></CENTER></TD><TD>
Although distances are described in dimensionless units,
they must be expressed with real units when converted to the real world.
You can choose which unit should be used with the
Units Preferences (in menu <B>File / Preferences...</B>, "Technology" section, "Units" tab).
</TD></TR></TABLE>
<P>
Much of this dialog is currently unavailable, because the system does not use this information.
<!-- PAGE BREAK --><A NAME="chap07-03-01"></A>
<CENTER><FONT SIZE=6><B>Chapter 7: Technologies</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap07-02-02.html#chap07-02-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>7-3-1: I/O Specifications</H2></CENTER></TD>
<TD><CENTER><A HREF="chap07-03-02.html#chap07-03-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
Electric is able to read and write circuits in a number of different formats.
This is done with the <B>Import</B> and the <B>Export</B> commands (in menu <B>File</B>).
See <A HREF="chap03-09-02.html#chap03-09-02">Section 3-9-2</A> for more on Import;
see <A HREF="chap03-09-03.html#chap03-09-03">Section 3-9-3</A> for more on Export.
<P>
To properly control translation,
use the many settings dialogs for the different file types,
both Preferences (in menu <B>File / Preferences...</B>, "I/O" section) and
Project Settings (in menu <B>File / Project Settings...</B>).
<P>
Unfortunately, many of these formats are pure geometry with no information about the circuit connections.
When read, they appear as pure-layer nodes.
This means that transistors, contacts, and other multi-layer nodes are not constructed properly.
Although the cell appears visually correct, and can be used to export the same type of file, it cannot be analyzed at a circuit level.
The node extractor can be used to convert these pure-layer nodes to true Electric components
(see <A HREF="chap09-10-02.html#chap09-10-02">Section 9-10-2</A>).
<P>
The next few sections describe control of different I/O formats.
<H3>7-3-2: CIF Control</H3>
<!-- COMMAND File/Import/CIF (Caltech Intermediate Format)... -->
<!-- COMMAND File/Export/CIF (Caltech Intermediate Format)... -->
<!-- PREFERENCE I/O/CIF -->
<!-- PROJECTSETTING CIF -->
<P>
<TABLE><TR><TD>
CIF (Caltech Intermediate Format) is used as an interchange between
design systems and fabrication facilities.
Most CIF settings are found in the CIF Project Settings
(in menu <B>File / Project Settings...</B>, "CIF" tab).
Here you can assign CIF names to each layer in the technology.
You can also control how CIF output is produced.
</TD><TD><CENTER><IMG SRC="fig07-26.png" ALT="Figure 7.26"></CENTER></TD></TR></TABLE>
<P>
By default, CIF output writes the entire hierarchy below the current cell.
If you check "Output Mimics Display",
cell instances that are unexpanded will be represented as an outline in the CIF file.
This is useful when the CIF output is intended for hardcopy display,
and only the screen contents is desired.
<P>
Another option is whether or not to merge adjoining geometry.
This is an issue because of the duplication and overlap that occurs wherever arcs and nodes meet.
The default action is to write each node and arc individually.
This makes the file larger because of redundant box information,
however it is faster to generate and uses simpler constructs.
If you check "Output Merges Boxes",
all connecting regions on the same layer are merged into one complex polygon.
This requires more processing, produces a smaller file, and generates more complex constructs.
<P>
Another option is whether or not to instantiate the circuit in the CIF.
By default, the currently displayed cell becomes the top level of the CIF file,
and is instantiated at the end of the file.
This causes the CIF file to display the current cell.
If the CIF file is to be used as a library, with no current cell,
then uncheck "Output Instantiates Top Level", and there will be no invocation of the current cell.
<P>
Be advised that the CIF format has a minimum resolution of 10 nanometers.
Since nothing smaller can be accurately represented in the file, the CIF output of smaller geometries will
generate errors.
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig07-10.png" ALT="Figure 7.10"></CENTER></TD><TD>
Only one setting is unrelated to circuitry and found in the CIF Preferences
(in menu <B>File / Preferences...</B>, "I/O" section, "CIF" tab).
This controls how CIF is read.
<P>
When reading CIF files, the CIF "wire" statements are assumed to have rounded geometry at the ends and corners.
If you check "Input Squares Wires", CIF input assumes that wire ends are square and extend by half of their width.
<P>
For the difference between Preferences and Project Settings, see
<A HREF="chap06-03.html#chap06-03">Section 6-3</A>.
</TD></TR></TABLE>
<!-- NEED 5in -->
<H3>7-3-3: GDS Control</H3>
<!-- COMMAND File/Import/GDS II (Stream)... -->
<!-- COMMAND File/Import/GDS Map File... -->
<!-- COMMAND File/Export/GDS II (Stream)... -->
<!-- PREFERENCE I/O/GDS -->
<!-- PROJECTSETTING GDS -->
<TABLE><TR><TD>
GDS II (also called "Stream" format) is used as an interchange between design systems and fabrication facilities.
For information on reading and writing GDS, see
<A HREF="chap03-09-02.html#chap03-09-02">Section 3-9-2</A> and
<A HREF="chap03-09-03.html#chap03-09-03">Section 3-9-3</A>, respectively.
In GDS files, there are no names for each layer, just a pair of numbers (the layer number and type).
It is important that Electric know how these values correspond with layers so that it can properly
read and write GDS files.
You can set the correspondences by using the <B>GDS Map File...</B> command (in menu <B>File / Import</B>)
to read a GDS map file.
You can also use the GDS Project Settings
(in menu <B>File / Project Settings...</B>, "GDS" tab) to edit the GDS numbers and
control other aspects of GDS input and output.
</TD><TD><CENTER><IMG SRC="fig07-17.png" ALT="Figure 7.17"></CENTER></TD></TR></TABLE>
<P>
In the GDS Project Settings dialog, the list on the left shows all of the Electric layers in the current technology.
By clicking on a layer name, its GDS numbers are shown in the top-right and can be edited.
In addition to GDS numbers to use for layout, there are also two other types of GDS numbers:
<I>pin</I> (for exports) and <I>text</I> (for export names).
<P>
<CENTER><IMG SRC="fig07-27.png" ALT="Figure 7.27"></CENTER>
<P>
These dialog elements apply to writing GDS:
<UL>
<LI>
"Output merges Boxes".
This controls the merging of adjoining geometry.
It is an issue because of the duplication and overlap that occurs wherever arcs and nodes meet.
The default action is to write each node and arc individually.
This makes the file larger because of redundant box information,
however it is faster to generate and uses simpler constructs.
If you check this item,
all connecting regions on the same layer are merged into one complex polygon.
This requires more processing, produces a smaller file, and generates more complex constructs.
</LI>
<LI>
"Output writes export Pins".
This controls whether pins are written to the GDS file for each export.
If checked, and there is a valid pin layer, then it is written.
</LI>
<LI>
"Output all upper case".
This controls whether the GDS file uses all upper case.
The default is to mix upper and lower case, but some systems insist on upper-case GDS.
</LI>
<LI>
"Output converts brackets in exports".
This controls whether the square brackets used in array specifications should be converted (to underscores).
Some GDS readers cannot handle the square bracket characters.
</LI>
<LI>
"Max chars in output cell name".
This limits the number of characters in a cell name.
Names longer than this are truncated, and adjusted to ensure uniqueness.
</LI>
<LI>"Output default text layer".
This is the layer number to use when writing text.
When exports are being written, and there is a text layer number associated with the appropriate Electric layer,
then that layer number is used instead of this default number.</LI>
</UL>
<P>
<TABLE><TR><TD>
You can also use the GDS Preferences
(in menu <B>File / Preferences...</B>, "I/O" section, "GDS" tab) to control GDS input and output.
For the difference between Preferences and Project Settings, see
<A HREF="chap06-03.html#chap06-03">Section 6-3</A>.
</TD><TD><CENTER><IMG SRC="fig07-12.png" ALT="Figure 7.12"></CENTER></TD></TR></TABLE>
<P>
These dialog elements are available in the GDS Preferences:
<UL>
<LI>"Input merges boxes (slow)".
This requests GDS input to combine overlapping boxes into complex polygons.
It takes more time, but produces a more compact database.</LI>
<LI>"Input includes text".
Text annotations in the GDS file can often clutter the display, so they are ignored during input.
If you check this item, annotation text will be read and displayed.</LI>
<LI>"Input expands cells".
This controls whether cell instances are expanded or not in the Electric circuit.
By default, cell instances are not expanded (they appear as a simple box).
If you check this item, cells are expanded so that their contents are displayed.
Expansion of cells can always be changed after reading GDS by using the subcommands of the <B>Expand Cell Instances</B>
and <B>Unexpand Cell Instances</B> commands of the <B>Cells</B> menu.</LI>
<LI>"Input instantiates arrays".
This controls whether or not arrays in the GDS file are instantiated.
By default, arrays are instantiated fully, but this can consume excessive amounts of memory if there are large arrays.
If you uncheck this item, only the upper-left and lower-right instance are actually placed.</LI>
<LI>"Input ignores unknown layers".
This controls whether unknown layers in the GDS file will be ignored, or placed in the circuit.
By default, unknown layers appear as DRC-Nodes (special nodes used to indicate DRC errors, which appear as orange squares).
By checking this item, the unknown layers are simply ignored.</LI>
<LI>"Input simplifies contact vias".
This requests GDS input to find combinations of metal and via cuts and replace them with Electric contacts.
It takes time, and may simplify some GDS.</LI>
<LI>"Use NCC annotations for exports".
The network consistency checker (NCC)
allows special circuit annotations to join two networks
(see <A HREF="chap09-07-04.html#chap09-07-04">Section 9-7-4</A>).
For example, two separate power networks may be joined higher in the circuit hierarchy,
and the NCC needs to know this at the current level of design.
This checkbox requests that the NCC annotations be used when exporting GDS.
It enables external circuit analysis programs (such as Assura) to properly understand the circuit connectivity.</LI>
<LI>"Collapse VDD/GND pin names".
Requests that all names starting with "VDD" or "GND" be merged into a single power or ground signal.
</LI>
</UL>
<!-- NEED 6in -->
<H3>7-3-4: EDIF Control</H3>
<!-- COMMAND File/Import/EDIF (Electronic Design Interchange Format)... -->
<!-- COMMAND File/Export/EDIF (Electronic Design Interchange Format)... -->
<!-- PREFERENCE I/O/EDIF -->
EDIF (Electronic Design Interchange Format) is used to exchange design information between
different CAD systems.
Although EDIF is currently at version "4 0 0", Electric reads and writes version "2 0 0".
<P>
<TABLE><TR><TD>
For more information on reading and writing EDIF, see
<A HREF="chap03-09-02.html#chap03-09-02">Section 3-9-2</A> and
<A HREF="chap03-09-03.html#chap03-09-03">Section 3-9-3</A>, respectively.
EDIF options are controlled with the EDIF Preferences
(in menu <B>File / Preferences...</B>, "I/O" section, "EDIF" tab).
<P>
This dialog controls whether EDIF output writes schematic or netlist views (the default is netlist).
It also lets you set a scale factor for EDIF input.
The "Cadence compatibility" check requests that multidimensional and symbolic
busses be converted to simpler, all-numeric busses.
</TD><TD><CENTER><IMG SRC="fig07-04.png" ALT="Figure 7.4"></CENTER></TD></TR></TABLE>
<P>
The bottom section of the panel lets you specify a configuration file that will control EDIF I/O.
This file has conversions between coordinates and names inside of Electric and the EDIF file.
The file has these lines of text that control different aspects of conversion:
<UL>
<LI><B>Primitives</B>
A line starting with "P" controls how primitives are converted to EDIF.
The line has this format:
<BR>
<CODE>&nbsp;&nbsp;P ElecTech ElecPrim ElecFunc ElecRot ElecPortOff EDIFTech EDIRPrim EDIFFunc EDIFPortOff</CODE>
<BR>
Where:
<UL>
<LI><CODE>ElecTech</CODE> is the Electric technology name (e.g. "schematic").</LI>
<LI><CODE>ElecPrim</CODE> is the Electric primitive name (e.g. "Transistor").</LI>
<LI><CODE>ElecFunc</CODE> is the Electric function (e.g. "CONPOWER").</LI>
<LI><CODE>ElecRot</CODE> is the Electric rotation (e.g. "90").</LI>
<LI><CODE>ElecPortOff</CODE> is the Electric port offsets, enclosed in braces (e.g. "{ g(-1,0) }").
Each port on the primitive must be listed, and an offset given.
To ignore a port, use "NA" instead of "port(x,y)".
You can also specify an ignored port as "NA(x,y)" if you want to affect how an attached wire's endpoint 
is modified.
"NA" by itself is the same as "NA(0,0)".
If the port's name is "NA", use "\NA(x,y)" to specify the name as NA, and not be ignored.
</LI>
<LI><CODE>EDIFTech</CODE> is the EDIF technology name (e.g. "tsmc18").</LI>
<LI><CODE>EDIRPrim</CODE> is the EDIF primitive name (e.g. "pmos2v").</LI>
<LI><CODE>EDIFFunc</CODE> is the EDIF function (e.g. "symbol").</LI>
<LI><CODE>EDIFPortOff</CODE> is the EDIF port offsets, enclosed in braces (e.g. "{ G(0,0) }").
Each port on the primitive must be listed, and an offset given.</LI>
</UL>
For example:
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<CODE>P schematic Ground CONGROUND 0 { gnd(0,2) } basic gnd symbol { gnd!(0,0) }
</CODE>
<P>
</LI>
<LI><B>Exports</B>
A line starting with "E" controls how exports are converted to EDIF.
The line has this format:
<BR>
<CODE>&nbsp;&nbsp;E ElecTech ElecPrim ElecFunc ElecRot ElecPortOff EDIFTech EDIRPrim EDIFFunc EDIFPortOff</CODE>
<BR>
Where:
<UL>
<LI><CODE>ElecTech</CODE> is the Electric technology name (e.g. "schematic").</LI>
<LI><CODE>ElecPrim</CODE> is the Electric primitive name (e.g. "Transistor").</LI>
<LI><CODE>ElecFunc</CODE> is the Electric function (e.g. "CONNECT").</LI>
<LI><CODE>ElecRot</CODE> is the Electric rotation (e.g. "90").</LI>
<LI><CODE>ElecPortOff</CODE> is the Electric port offsets, enclosed in braces (e.g. "{ g(-1,0) }").
Each port on the primitive must be listed, and an offset given.</LI>
<LI><CODE>EDIFTech</CODE> is the EDIF technology name (e.g. "tsmc18").</LI>
<LI><CODE>EDIRPrim</CODE> is the EDIF primitive name (e.g. "pmos2v").</LI>
<LI><CODE>EDIFFunc</CODE> is the EDIF function (e.g. "symbol").</LI>
<LI><CODE>EDIFPortOff</CODE> is the EDIF port offsets, enclosed in braces (e.g. "{ G(0,0) }").
Each port on the primitive must be listed, and an offset given.</LI>
</UL>
For example:
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<CODE>E schematic Off-Page CONNECT 0 input { a(-2,0), y(2,0) } basic ipin symbol { NA, NA }
</CODE>
<P>
</LI>
<LI><B>Variables</B>
A line starting with "V" controls how variables are converted to EDIF.
The line has this format:
<BR>
<CODE>&nbsp;&nbsp;V ElecVarName EDIFVarName Scale [Append]
</CODE>
<BR>
Where:
<UL>
<LI><CODE>ElecVarName</CODE> is the Electric variable name (e.g. "ATTR_M").</LI>
<LI><CODE>EDIFVarName</CODE> is the EDIF primitive name (e.g. "m").</LI>
<LI><CODE>Scale</CODE> is a scale from Electric to EDIF (e.g. "1").</LI>
<LI><CODE>Append</CODE> is an optional string to append to EDIF (e.g. "u").</LI>
</UL>
For example:
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<CODE>V ATTR_length l 0.9 u
</CODE>
<P>
</LI>
<LI><B>FigureGroups</B>
A line starting with "F" controls how figure groups are converted to EDIF.
The line has this format:
<BR>
<CODE>&nbsp;&nbsp;F ElecName EDIFName</CODE>
<BR>
Where:
<UL>
<LI><CODE>ElecName</CODE> is the Electric technology name (e.g. "ARTWORK").</LI>
<LI><CODE>EDIFName</CODE> is the EDIF figure group name (e.g. "DEVICE").</LI>
</UL>
For example:
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<CODE>F ARTWORK DEVICE
</CODE>
<P>
</LI>
<LI><B>Globals</B>
A line starting with "G" controls how global names are converted to EDIF.
The line has this format:
<BR>
<CODE>&nbsp;&nbsp;G ElecName EDIFName</CODE>
<BR>
Where:
<UL>
<LI><CODE>ElecName</CODE> is the Electric global name (e.g. "GND").</LI>
<LI><CODE>EDIFName</CODE> is the EDIF global name (e.g. "gnd!").</LI>
</UL>
For example:
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<CODE>G GND gnd!
</CODE>
<P>
</LI>
</UL>
<!-- NEED 4in -->
<H3>7-3-5: DEF Control</H3>
<!-- COMMAND File/Import/DEF (Design Exchange Format)... -->
<!-- PREFERENCE I/O/DEF -->
<TABLE><TR><TD><CENTER><IMG SRC="fig07-07.png" ALT="Figure 7.7"></CENTER></TD><TD>
DEF (Design Exchange Format) is a recent interchange format for CAD systems.
It is often combined with LEF (Library Exchange Format) files.
For more information on reading and writing DEF or LEF, see
<A HREF="chap03-09-02.html#chap03-09-02">Section 3-9-2</A> and
<A HREF="chap03-09-03.html#chap03-09-03">Section 3-9-3</A>,
respectively.
DEF options are controlled with the DEF Preferences
(in menu <B>File / Preferences...</B>, "I/O" section, "DEF" tab).
<P>
This dialog controls whether DEF reads physical and/or logical information.
</TD></TR></TABLE>
<!-- NEED 5in -->
<H3>7-3-6: CDL Control</H3>
<!-- PREFERENCE I/O/CDL -->
<TABLE><TR><TD>
CDL (Circuit Description Language) is almost identical to Spice format,
and is used as a netlist interchange method.
CDL options are controlled with the CDL Preferences
(in menu <B>File / Preferences...</B>, "I/O" section, "CDL" tab).
<P>
This dialog controls the library name and path information that is written when generating a netlist.
You can specify an Include file which will be inserted at the top of the netlist.
Also, you can choose to convert square-bracket characters (if your CDL cannot handle indexed signal names).
</TD><TD><CENTER><IMG SRC="fig07-21.png" ALT="Figure 7.21"></CENTER></TD></TR></TABLE>
<!-- NEED 5in -->
<H3>7-3-7: DXF Control</H3>
<!-- COMMAND File/Import/DXF (AutoCAD)... -->
<!-- COMMAND File/Export/DXF (AutoCAD)... -->
<!-- PREFERENCE I/O/DXF -->
<!-- PROJECTSETTING DXF -->
DXF (Drawing eXchange Format) is a solid modeling format used by
<A HREF="http://www.autodesk.com">AutoCAD</A> systems.
For more information on reading and writing DXF, see
<A HREF="chap03-09-02.html#chap03-09-02">Section 3-9-2</A> and
<A HREF="chap03-09-03.html#chap03-09-03">Section 3-9-3</A>, respectively.
<TABLE><TR><TD>
DXF settings are controlled with the DXF Project Settings
(in menu <B>File / Project Settings...</B>, "DXF" tab).
<P>
This dialog controls the list of acceptable DXF layers.
These layers can be typed into the edit field, separated by commas.
If a layer name in the DXF file is not found in the list of acceptable layers, it will be ignored.
<P>
To control scaling, you can change the meaning of units in the DXF file.
The default unit is "Millimeters",
which means that a value of 5 in the DXF file becomes 5 millimeters in Electric.
</TD><TD><CENTER><IMG SRC="fig07-28.png" ALT="Figure 7.28"></CENTER></TD></TR></TABLE>
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig07-08.png" ALT="Figure 7.8"></CENTER></TD><TD>
Other DXF settings are controlled with the DXF Preferences
(in menu <B>File / Preferences...</B>, "I/O" section, "DXF" tab).
For the difference between Preferences and Project Settings, see
<A HREF="chap06-03.html#chap06-03">Section 6-3</A>.
<P>
By default, Electric flattens DXF input, removing levels of hierarchy and creating a single cell with the DXF artwork.
By unchecking the "Input flattens hierarchy", Electric will preserve the structure of the DXF file.
<P>
If you check "Input reads all layers", then all layers are read into Electric,
regardless of whether the layer names are known.
</TD></TR></TABLE>
<!-- NEED 4in -->
<H3>7-3-8: SUE Control</H3>
<!-- COMMAND File/Import/SUE (Schematic User Environment)... -->
<!-- PREFERENCE I/O/SUE -->
<TABLE><TR><TD>
SUE (Schematic User Environment) is the database format of the SUE schematic editor,
from <A HREF="http://www.micromagic.com">Micro Magic</A>.
SUE options are controlled with the SUE Preferences
(in menu <B>File / Preferences...</B>, "I/O" section, "SUE" tab).
<P>
This dialog controls whether transistors will appears in a standard 3-terminal
configuration or in a 4-port configuration with a substrate connection.
</TD><TD><CENTER><IMG SRC="fig07-09.png" ALT="Figure 7.9"></CENTER></TD></TR></TABLE>
<!-- PAGE BREAK --><A NAME="chap07-04-01"></A>
<CENTER><FONT SIZE=6><B>Chapter 7: Technologies</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap07-03-08.html#chap07-03-08.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>7-4-1: The MOS Technologies</H2></CENTER></TD>
<TD><CENTER><A HREF="chap07-04-02.html#chap07-04-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
There are both nMOS and CMOS technologies available in Electric,
with many different design rules.
Use the popup at the top of the component menu to select a different MOS technology.
<P>
There is one nMOS technology: "nmos"
(the specifications used in the Mead and Conway textbook).
<P>
There are a few CMOS technologies available.
The most basic is "cmos", which uses an idealized set of design-rules from a paper by Griswold.
The most popular CMOS technology is "mocmos" (MOSIS design rules)
which has two layers of polysilicon and up to 6 layers of metal with standard,
submicron, or deep rules (this is described more fully in the
<A HREF="chap07-04-02.html#chap07-04-02">next Section</A>).
There is even "rcmos", which uses round geometry!
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig07-16.png" ALT="Figure 7.16"></CENTER></TD><TD>
Each MOS technology has two transistors
(enhancement and depletion in nMOS technologies, <I>n</I> and <I>p</I> in CMOS).
These nodes can have serpentine paths by highlighting them and using "Outline Edit" mode
(see <A HREF="chap06-10-01.html#chap06-10-01">Section 6-10-1</A>).
</TD></TR></TABLE>
<P>
<TABLE><TR><TD>
The contact nodes in the MOS technologies automatically increase the number of cut layers when the contact grows in size.
For very large contacts, however, the display of these cuts can waste time.
Therefore, when very large contacts are displayed at small scale,
the interior cuts may not be drawn (as shown on the right).
Be assured, however, that the cuts are actually there, and will appear in all appropriate output.
</TD><TD><CENTER><IMG SRC="fig07-18.png" ALT="Figure 7.18"></CENTER></TD></TR></TABLE>
<P>
Although individual MOS nodes and arcs have the proper amount of implant around them,
a collection of such objects may result in an irregular implant boundary.
To clean this up, you can place pure-layer nodes of implant that neatly cover the implant area.
Also, you can do this automatically with the <B>Coverage Implants Generator</B>
command (in menu <B>Tool / Generation</B>, see <A HREF="chap09-08-02.html#chap09-08-02">Section 9-8-2</A>).
<H3>7-4-2: The MOSIS CMOS Technology</H3>
The MOSIS CMOS technology describes a scalable CMOS process that is fabricated by the
<A HREF="http://www.mosis.org">MOSIS project</A> of the University of Southern California.
To obtain this technology,
use the popup menu at the top of the component tab (in the side bar) and select "mocmos".
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig07-02.png" ALT="Figure 7.2"></CENTER></TD><TD>
This technology can have from 2 to 6 layers of metal (4 are shown here, 6 is the default).
It also has 1 polysilicon layer but can be changed to use 2.
The technology can also be set to use either standard rules (SCMOS),
submicron rules, or deep rules.
You can choose whether to allow stacked vias and whether or not to use alternate contact rules.
All of this is done with the
Technology Project Settings (in menu <B>File / Project Settings...</B>, "Technology" tab).
<P>
The default orientation of transistors (both in the menu, and when first placed) can be rotated
by checking "Rotate transistors in menu" in the Technology Preferences (in menu <B>File / Preferences...</B>,
"Technology" section, "Technology" tab).
<P>
Users of Electric version 6.02 or earlier will have a different MOSIS CMOS technology called "mocmossub".
This technology attempted to match the submicron rule set,
but did not do so as accurately as the current "mocmos" technology.
If you have designs in that technology,
they will be automatically converted to the new "mocmos" when read in.
</TD></TR></TABLE>
<P>
<H3>Scalable Transistors</H3>
<P>
The MOSIS CMOS technology also has two scalable transistor nodes that can be parameterized to have different widths.
The scalable transistors have contacts built into them.
When created and scaled, their maximum width is shown.
However, by adding a "width" attribute, they can shrink arbitrarily.
Note that the ports remain in the same location regardless of the width, thus allowing them to scale without
affecting constraints.
<P>
<CENTER><IMG SRC="fig07-22.png" ALT="Figure 7.22"></CENTER>
<P>
The scalable transistor on the left is 3 wide, and the other two are 10 wide.
However, the scalable transistor on the right has had the "width" attribute set to 8 and so it has shrunk.
Note that this attribute can be derived from cell parameters, causing different instances of the same
cell to have different size transistors in it
see <A HREF="chap06-08-06.html#chap06-08-06">Section 6-8-6</A>).
<P>
<TABLE><TR><TD>
If you get <B>Object Properties...</B> on a scalable transistor, there are extra controls
that let you choose to have fewer contacts (1 or even none), and you can tighten the contact spacing.
</TD><TD><CENTER><IMG SRC="fig07-24.png" ALT="Figure 7.24"></CENTER></TD></TR></TABLE>
<!-- PAGE BREAK --><A NAME="chap07-05-01"></A>
<CENTER><FONT SIZE=6><B>Chapter 7: Technologies</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap07-04-02.html#chap07-04-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>7-5-1: The Schematics Technology</H2></CENTER></TD>
<TD><CENTER><A HREF="chap07-05-02.html#chap07-05-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
The Schematic technology allows you to design using digital and analog schematic components.
To obtain this technology,
use the popup menu at the top of the component menu and select "schematics".
<P>
<TABLE><TR>
<TD><CENTER><IMG SRC="fig07-03.png" ALT="Figure 7.3"></CENTER></TD><TD>
There are two arcs in the Schematic technology: the wire (blue) and the bus (green).
These arcs can be drawn at 45 degree angles.
One typically names busses with array names (for example "insig[0:7]"),
and then names wires with scalar names (for example "insig[1]").
See <A HREF="chap06-09-03.html#chap06-09-03">Section 6-9-3</A> for more on bus naming.
<P>
To make a physical connection from a wire to a bus,
the bus pin can connect to either, so it acts as a tap.
In addition, the Wire Con node connects wires to busses,
or connects busses of different width, replicating the narrower side to make it as wide as the wider side.
Use the <B>Rip Bus</B> command (in menu <B>Edit / Arc</B>) to automatically add taps to a bus.
</TD></TR></TABLE>
<P>
There are four transistor entries in the menu.
The two on the right are the n and p transistors.
The two images on the left are actually popup menus that let you select any style of
transistor.
The difference between the two on the left is that the top one is for 3-port
transistors, and the bottom one is for 4-port transistors.
<P>
The "Spice" entry presents a popup menu of Spice parts
.
More information about the use of these parts can be found in the <A HREF="chap09-04-03.html#chap09-04-03">Section 9-4-3</A>.
<P>
The "Cell" entry presents a popup menu of all cell instances.
<P>
The "Global" entry provides two nodes: a "Global Signal"
node defines a signal name that spans levels of hierarchy, and a
"Global Partition" node allows globals to be treated locally.
See <A HREF="chap06-09-05.html#chap06-09-05">Section 6-9-5</A> for more on global networks.
<P>
Some commands that analyze a schematic circuit need to know which layout technology will be used to fabricate the design.
For example, when generating a Spice deck from a schematic,
it is necessary to know the sizes and parasitics that are associated with the actual circuit.
To set the layout technology to use for schematic circuits, use the
Technology Preferences (in menu <B>File / Preferences...</B>, "Technology" section, "Technology" tab),
and set the "Use scale values from this technology" popup.
<P>
<H3>Digital Schematics</H3>
<P>
Digital schematics are built with the And, Or, Xor, Buffer,
Multiplexor, and Flip-Flop nodes that appear in the component menu.
By attaching arcs to these components and negating them
(with the <B>Toggle Port Negation</B> command, in menu <B>Edit / Technology Specific</B>), these turn into NAND, NOR,
Inverter, and many other specialized components
(see <A HREF="chap05-04-02.html#chap05-04-02">Section 5-4-2</A>).
Note that the size of the negating bubble can be controlled by using the Technology
Preferences (in menu <B>File / Preferences...</B>, "Technology" section, "Technology" tab),
and setting the "Negating Bubble Size" value in the "Schematics" area.
<P>
The And, Or, Xor, and Multiplexor nodes can accept any number of input connections on the left,
so they require some care in wiring (see <A HREF="chap01-11-05.html#chap01-11-05">Section 1-11-5</A>).
The left side has one large input port that allows an arbitrary number of connections.
Initially, wires may attach at only three input locations, spaced evenly along the left side.
However, when all three locations are connected, the node automatically expands,
adding additional space along the side for new arcs.
<P>
To properly wire inputs to an And, Or, Xor, or Multiplexor node, cursor placement is very important,
for it determines which of the locations to use on the left side.
If an arc gets connected in the wrong location,
try connecting more arcs until one appears in the right place, and then delete the unwanted ones.
<P>
The Switch node can also take an arbitrary number of poles on its left side.
Simply stretch it along the line of the poles and their number will grow.
<P>
<H3>Analog Schematics</H3>
<P>
The analog nodes (Resistor, Inductor, Capacitor, and Diode) have values on them which can be selected and edited.
Double-clicking on them brings up a special dialog for editing their value.
<P>
The Resistor can be treated as a connecting or nonconnecting node.
By default, it does not connect the networks on its two ends,
and this is the correct way to treat it when doing low-level simulation such as Spice.
However, for higher-level simulations (such as Verilog)
the resistor should be ignored and treated as if it connects its two networks.
To make this happen, use the
Networks Project Settings (in menu <B>File / Project Settings...</B>, "Networks" tab),
and check "Ignore Resistors when building netlists".
Note that if resistors are being ignored, Spice deck generation will temporarily include them while the netlist is being created.
<!-- NEED 3in -->
<H3>7-5-2: Multipage Schematics and Frames</H3>
<!-- COMMAND Cell/Multi-Page Cells/Make Cell Multi-Page -->
<!-- COMMAND Cell/Multi-Page Cells/Create New Page -->
<!-- COMMAND Cell/Multi-Page Cells/Delete This Page -->
<!-- COMMAND Cell/Multi-Page Cells/Edit Next Page -->
<!-- COMMAND Cell/Multi-Page Cells/Convert old-style Multi-Page Schematics -->
<!-- PREFERENCE Display/Frame -->
Multipage schematics are implemented in Electric
by having each page map to a different area of a vast schemetic cell.
To create one of these multipage cells, use the <B>Make Cell Multi-Page</B> command
(in menu <B>Cell / Multi-Page Cells</B>).
You will then be editing page 1 of the multi-page schematic.
<P>
You can add pages to the current multipage schematic with the <B>Create New Page</B>
command (in menu <B>Cell / Multi-Page Cells</B>).
You can delete the current page with <B>Delete This Page</B>.
To advance to the next page, use <B>Edit Next Page</B>.
<P>
Older versions of Electric implemented multipage schematics with different view types ("p1", "p2", ...).
If these views appear instead of proper pages, use the <B>Convert old-style Multi-Page Schematics</B> command.
<P>
As a graphical aid to schematic design, frames can be displayed in a cell by using the <B>Cell Properties...</B>
command (in menu <B>Cell</B>).
Multi-page schematics require a cell frame on every page, but their presence is optional in other cells.
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig03-10.png" ALT="Figure 3.10"></CENTER></TD><TD>
The frame size can be "Half-A", "A", "B", "C", "D",
and "E".
The frame can be horizontal (landscape) or vertical (portrait).
You can choose to display a title box in the lower-right corner.
The designer name can also be set for each cell.
</TD></TR></TABLE>
<P>
Besides the designer name, cell frames have a company name and a project name.
These values are not set for each cell, but instead are preferences that
are set for each user.
Individual libraries can override these defaults as well.
<P>
<TABLE><TR><TD>
The Frame Preferences (in menu <B>File / Preferences...</B>, "Display" section, "Frame" tab)
lets you set all of these defaults.
Note that the designer name is taken first from the cell,
then from the library if the cell does not set a value, and finally from the general default
if the library and cell do not set a value.
</TD><TD><CENTER><IMG SRC="fig07-20.png" ALT="Figure 7.20"></CENTER></TD></TR></TABLE>
<!-- PAGE BREAK --><A NAME="chap07-06-01"></A>
<CENTER><FONT SIZE=6><B>Chapter 7: Technologies</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap07-05-02.html#chap07-05-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>7-6-1: The Artwork Technology</H2></CENTER></TD>
<TD><CENTER><A HREF="chap07-06-02.html#chap07-06-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Edit/Technology Specific/Artwork Color and Pattern... -->
The Artwork technology is an unusual technology that provides general-purpose sketching facilities.
To obtain this technology,
use the popup menu at the top of the component menu and select "artwork".
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig07-05.png" ALT="Figure 7.5"></CENTER></TD><TD>
This technology has nodes for many typical graphic objects such as rectangles,
triangles, circles, and arrowheads.
Polygonal and Spline nodes allow arbitrary shapes to be defined.
Of course, nodes from all other technologies can be used as special electronic symbols when artwork is generated.
Conversely, these artwork nodes can be used to embellish designs done in all other technologies. 
<P>
Circles can be outlines (normal or thick) or filled.
The default shape is round, but elongation of the node produces an ellipse.
In addition, by using the <B>Object Properties...</B> command (in menu
<B>Edit / Properties</B>),
the outline circles can be reduced to a portion of the circle
(from 1 to 360 degrees).
</TD></TR></TABLE>
<P>
Arrow heads can be drawn in two different styles: simple or filled.
The simple arrow head is the default and consists of two lines.
The filled arrow head looks better because it is made of polygons.
Use the Technology Preferences
(in menu <B>File / Preferences...</B>, "Technology" section, "Technology" tab),
and set the "Arrows filled" checkbox in the "Artwork" area.
<P>
The "Export" entry creates an export for use in icons.
After clicking on the entry, you have the choice of selecting "Wire", "Bus", or "Universal" exports
(see <A HREF="chap03-11-04.html#chap03-11-04">Section 3-11-4</A> for more on icon generation).
<P>
There are four different polygon styles: opened, closed, filled, and spline.
The opened polygon can be drawn with solid lines, dotted lines,
dashed lines, or thicker lines.
These nodes require that you use the "Outline Edit" mode
(see <A HREF="chap06-10-01.html#chap06-10-01">Section 6-10-1</A>).
<P>
The illustration below shows how outline information,
applied to Artwork nodes, results in different shapes.
In each of the shapes, the outline has the same 5 points, as illustrated in the upper-left.
The nodes interpret this outline information to produce their shape.
Note that the spline curve does not run through the outline points,
only near them.
<CENTER><IMG SRC="fig07-15.png" ALT="Figure 7.15"></CENTER>
<P>
The final feature of the Artwork technology is its ability to set the appearance of any of its nodes or arcs.
Use the <B>Artwork Color and Pattern...</B> command (in menu <B>Edit / Technology Specific</B>)
to set the color and pattern of any Artwork node or arc.
You can also invoke this dialog by clicking on the "Color and Pattern..."
button in the node or arc "Properties" dialogs.
You can set the color, pattern, and outline texture of any Artwork node and arc.
Predefined patterns are available below the pattern-editing area.
If transparent colors are selected, they are taken from the current color map,
which in turn is taken from the most recently selected technology
(other than the Artwork technology).
<P>
<CENTER><IMG SRC="fig07-06.png" ALT="Figure 7.6"></CENTER>
<!-- NEED 2in -->
<H3>7-6-2: The FPGA Technology</H3>
<!-- COMMAND Edit/Technology Specific/FPGA/Read Architecture And Primitives... -->
<!-- COMMAND Edit/Technology Specific/FPGA/Read Primitives... -->
<!-- COMMAND Edit/Technology Specific/FPGA/Edit Pips... -->
<!-- COMMAND Edit/Technology Specific/FPGA/Show No Wires -->
<!-- COMMAND Edit/Technology Specific/FPGA/Show Active Wires -->
<!-- COMMAND Edit/Technology Specific/FPGA/Show All Wires -->
<!-- COMMAND Edit/Technology Specific/FPGA/Show Text -->
<!-- COMMAND Edit/Technology Specific/FPGA/Hide Text -->
The FPGA technology is a "soft" technology that creates primitives according to an FPGA Architecture file.
Special commands in the <B>Edit / Technology Specific / FPGA</B> menu let you create the
FPGA primitives, build FPGA structures, and program them.
<P>
The FPGA Architecture file contains all of the information needed to define a specific FPGA chip.
It has three sections:
the <I>Primitive Definition</I> section,
the <I>Block Definition</I> section, and the <I>Arcitecture</I> section.
The Primitive Definition section describes the basic blocks for a family of FPGA chips
(these are primitives in the FPGA technology).
The Block Definition section builds upon the primitives to create higher-level blocks.
Finally, the Architecture section defines the top-level block that is the FPGA.
<P>
An FPGA Architecture file must have the Primitive Definition section,
but it need not have the Block Definition or Architecture Sections.
This is because the placement of the primitives can be saved in an Electric library,
rather than the architecture file.
Thus, after reading the Primitive Definition section (which creates the primitives),
and reading the Block Definition and Architecture Sections
(which places the primitives to create a chip library) the library can be saved to disk.
Subsequent design activity can proceed by reading only the Primitive Definition section and then
reading the library with the chip definition.
This avoids large FPGA Architecture files
(the Primitive Definition section will be smaller than the Block Definition and Architecture sections).
<P>
<H3>Primitive Definition Section</H3>
<P>
The Primitive Definition section defines the lowest-level blocks,
which become primitive nodes in the FPGA technology.
A primitive definition looks like this:
<P>
<CODE>
<FONT SIZE="-1">
(primdef<BR>
&nbsp;&nbsp;(attributes<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(name PRIMNAME)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(size X Y)<BR>
&nbsp;&nbsp;)<BR>
&nbsp;&nbsp;(ports<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(port<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(name PORTNAME)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(position X Y)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(direction input | output | bidir)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;)<BR>
&nbsp;&nbsp;)<BR>
&nbsp;&nbsp;(components<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(pip<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(name PIPNAME)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(position X Y)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(connectivity NET1 NET2)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;)<BR>
&nbsp;&nbsp;)<BR>
&nbsp;&nbsp;(nets<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(net<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(name INTNAME)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(segment FROMPART TOPART)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;)<BR>
&nbsp;&nbsp;)<BR>
)</FONT></CODE>
<P>
The <CODE>attributes</CODE> section defines general information about the block.
The <CODE>ports</CODE> section defines external connections.
The <CODE>components</CODE> section defines logic in the block (currently only PIPs).
The <CODE>nets</CODE> section defines internal networks.
There can be multiple <CODE>segment</CODE> entries in a net,
each defining a straight wire that runs from the <CODE>FROMPART</CODE> to the <CODE>TOPART</CODE>.
These parts can be either <CODE>port PORTNAME</CODE> or <CODE>coord X Y</CODE>,
depending on whether the net ends at a port or at an arbitrary position inside of the primitive.
<P>
For example, this block has two vertical nets and two horizontal nets.
Four pips are placed at the intersections.
Six ports are defined (two on the left, two on the top, and two on the bottom).
Here is the code:
<P>
<TABLE><TR><TD VALIGN=TOP WIDTH="65%">
<CODE><FONT SIZE="-1">
(primdef<BR>
&nbsp;&nbsp;(attributes<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(name sampleblock)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(size 40 60)<BR>
&nbsp;&nbsp;)<BR>
&nbsp;&nbsp;(ports<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(port (name inleft1) (position  0 40)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(direction input) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(port (name inleft2) (position  0 20)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(direction input) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(port (name outtop1) (position 10 60)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(direction output) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(port (name outtop2) (position 30 60)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(direction output) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(port (name outbot1) (position 10  0)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(direction output) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(port (name outbot2) (position 30  0)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(direction output) )<BR>
&nbsp;&nbsp;)</FONT></CODE>
</TD><TD WIDTH="35%"><CENTER><IMG SRC="fig07-11.png" ALT="Figure 7.11"></CENTER></TD></TR></TABLE>
<CODE><FONT SIZE="-1">
&nbsp;&nbsp;(components<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(pip (name pip1) (position 10 20) (connectivity intv1 inth1) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(pip (name pip2) (position 30 20) (connectivity intv2 inth1) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(pip (name pip3) (position 10 40) (connectivity intv1 inth2) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(pip (name pip4) (position 30 40) (connectivity intv2 inth2) )<BR>
&nbsp;&nbsp;)<BR>
<BR>
&nbsp;&nbsp;(nets<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(net (name intv1) (segment port outbot1 port outtop1 ) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(net (name intv2) (segment port outbot2 port outtop2 ) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(net (name inth1) (segment port inleft2 coord 30 20 ) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(net (name inth2) (segment port inleft1 coord 30 40 ) )<BR>
&nbsp;&nbsp;)<BR>
)</FONT></CODE>
<P>
<H3>Block Definition and Architecture Sections</H3>
<P>
The Block Definition and Architecture sections define higher-level blocks composed of primitives.
They looks like this:
<P>
<CODE>
<FONT SIZE="-1">
(blockdef
<BR>
&nbsp;&nbsp;(attributes
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(name CHIPNAME)
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(size X Y)
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(wirecolor COLOR)
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(repeatercolor COLOR)
<BR>
&nbsp;&nbsp;)
<BR>
<BR>
&nbsp;&nbsp;(ports
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(port
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(name PORTNAME)
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(position X Y)
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(direction input | output | bidir)
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;)
<BR>
&nbsp;&nbsp;)
<BR>
<BR>
&nbsp;&nbsp;(components
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(instance
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(attributes ATTPAIRS)
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(type BLOCKTYPE)
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(name BLOCKNAME)
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(position X Y)
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rotation ROT)
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;)
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(repeater
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(name BLOCKNAME)
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(porta X Y)
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(portb X Y)
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(direction vertical | horizontal)
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;)
<BR>
&nbsp;&nbsp;)
<BR>
<BR>
&nbsp;&nbsp;(nets
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(net
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(name INTNAME)
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(segment FROMPART TOPART)
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;)
<BR>
&nbsp;&nbsp;)
<BR>
)
<BR>
</FONT></CODE>
<P>
The only difference between the Architecture section and the Block Definition section is that the
Architecture section has the keyword <CODE>architecture</CODE> instead of <CODE>blockdef</CODE>.
There can be only one <CODE>architecture</CODE> section, but there can be many <CODE>blockdef</CODE>s,
defining a complete hierarchy.
<P>
The <CODE>attributes</CODE> section defines general information about the block.
<P>
The <CODE>ports</CODE> section defines external connections.
<P>
The <CODE>components</CODE> section defines logic in the block
(currently instances of other blocks or repeaters).
The <CODE>rotation</CODE> of an instance is the number of degrees counterclockwise, rotated about the center.
The <CODE>attributes</CODE> section of the instance assigns name/value pairs
(this can be used to program the FPGA).
<P>
The <CODE>nets</CODE> section defines internal networks.
There can be multiple <CODE>segment</CODE> entries in a net,
each defining a straight wire that runs from the <CODE>FROMPART</CODE> to the <CODE>TOPART</CODE>.
These parts can be either <CODE>component INSTNAME PORTNAME</CODE>, <CODE>port PORTNAME</CODE>,
or <CODE>coord X Y</CODE>, depending on whether the net ends at a component,
port or at an arbitrary position inside of the block.
<P>
<TABLE><TR><TD VALIGN=TOP WIDTH="65%">
Here is an example of block definition code and its layout.
<P>
<CODE><FONT SIZE="-1">
(blockdef<BR>
&nbsp;&nbsp;(attributes<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(name testblock)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(size 80 150)<BR>
&nbsp;&nbsp;)<BR>
&nbsp;&nbsp;(components<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(instance (type sampleblock) (name block0)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(position 30 80) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(instance (type sampleblock) (name block1)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(position 30 10) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(repeater (name r0) (porta 10 120)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(portb 20 120) (direction horizontal)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(repeater (name r1) (porta 10 100)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(portb 20 100) (direction horizontal)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(repeater (name r2) (porta 10 50)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(portb 20 50) (direction horizontal)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(repeater (name r3) (porta 10 30)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(portb 20 30) (direction horizontal)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;)<BR>
&nbsp;&nbsp;)</FONT>
</CODE>
</TD><TD WIDTH="35%"><CENTER><IMG SRC="fig07-25.png" ALT="Figure 7.25"></CENTER></TD></TR></TABLE>
<P>
<CODE><FONT SIZE="-1">
&nbsp;&nbsp;(ports<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(port (name top0)  (position 40 150) (direction bidir) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(port (name top1)  (position 60 150) (direction bidir) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(port (name left0) (position  0 120) (direction input) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(port (name left1) (position  0 100) (direction input) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(port (name left2) (position  0  50) (direction input) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(port (name left3) (position  0  30) (direction input) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(port (name bot0)  (position 40   0) (direction bidir) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(port (name bot1)  (position 60   0) (direction bidir) )<BR>
&nbsp;&nbsp;)<BR>
<BR>
&nbsp;&nbsp;(nets<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(net (name iv0)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(segment port top0 component block0 outtop1) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(net (name iv1)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(segment port top1 component block0 outtop2) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(net (name iv2)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(segment component block0 outbot1 component block1 outtop1))<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(net (name iv3)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(segment component block0 outbot2 component block1 outtop2))<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(net (name iv4)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(segment component block1 outbot1 port bot0) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(net (name iv5)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(segment component block1 outbot2 port bot1) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(net (name ih0)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(segment port left0 component r0 a) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(net (name ih1)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(segment component r0 b component block0 inleft1) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(net (name ih2)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(segment port left1 component r1 a) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(net (name ih3)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(segment component r1 b component block0 inleft2) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(net (name ih4)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(segment port left2 component r2 a) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(net (name ih5)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(segment component r2 b component block1 inleft1) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(net (name ih6)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(segment port left3 component r3 a) )<BR>
&nbsp;&nbsp;&nbsp;&nbsp;(net (name ih7)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(segment component r3 b component block1 inleft2) )<BR>
&nbsp;&nbsp;)<BR>
)
</FONT></CODE>
<P>
<!-- NEED 3in -->
<H3>Commands</H3>
To read an architecture file, use the <B>Read Architecture And Primitives...</B> command
(in menu <B>Edit / Technology Specific / FPGA</B>).
You will be prompted for an architecture file.
To read only the primitives from an architecture file, use the
<B>Read Primitives...</B> command.
<P>
Once an FPGA is on the screen, two aspects of its display can be controlled: the wires
and the text.
Three commands control the display of wires:
<B>Show All Wires</B> displays every wire,
<B>Show No Wires</B> hides every wire, and
<B>Show Active Wires</B> shows only the wires that have been
connected to PIPs that have been programmed.
Two commands control the display of text:
<B>Show Text</B> displays text and <B>Hide Text</B> turns text display off.
<P>
Once an FPGA has been created,
you can program the PIPs by selecting a component and using the
<B>Edit Pips...</B> command.
This will display a list of active PIPs on the component.
For example, after clicking on one of the "SampleBlock" instances,
you can type the string "pip1 pip4" to program two of the pips in that instance.
<!-- NEED 2in -->
<H3>7-6-3: The Generic Technology</H3>
One particularly interesting technology is the Generic technology,
which is a grab bag of miscellaneous facilities.
It is not necessary to actually switch into this technology,
for all of its nodes and arcs are available through other means.
<P>
<H3>Special Arcs</H3>
<P>
The <I>Universal arc</I> in the Generic technology is able to make a connection between any two components,
even if they are in different technologies.
This is useful when mixing technologies while still maintaining proper connectivity,
for example when simulating.
<P>
The <I>Invisible arc</I> attaches any two components, but makes no electrical connection.
It is useful for constraining otherwise unrelated components.
<P>
The <I>Unrouted arc</I> makes arbitrary electrical connections,
like the universal arc, but routers know to replace them with real geometry.
<P>
None of these arcs produce any actual geometry in IC descriptions,
but they make important conceptual connections.
Any existing arc in a normal technology can be converted to one of these three special arcs by using the <B>Change...</B>
command (in menu <B>Edit</B>).
<P>
<H3>Special Nodes</H3>
<P>
There are also special nodes in the Generic technology.
They are all available from the "Misc." entry of the component menu.
<P>
<TABLE><TR><TD>
<P>
A special primitive, called <I>Cell Center</I>, defines the origin of any cell.
Once the node is placed, its location is at (0,0) for the cell.
Since instances of the current cell use the origin as the <I>anchor point</I> for cursor-based references,
the location of this node defines the anchor.
For example, if you place this node in the upper-right corner of a cell,
then creation commands place instances such that their upper-right corner is at the cursor.
See <A HREF="chap03-03.html#chap03-03">Section 3-3</A> for more information on cell centers.
<P>
A special primitive, called <I>Essential Bounds</I>, defines an alternate boundary of any cell.
At least two of them must be placed in opposite corners, although 4 can be place to make it look better.
<P>
Note that the Cell Center and Essential Bounds nodes are made "hard-to-select" by default,
which means that they can be selected only by using "Special Select" mode
(see <A HREF="chap02-01-05.html#chap02-01-05">Section 2-1-5</A> for more).
</TD><TD><CENTER><IMG SRC="fig02-17.png" ALT="Figure 2.17"></CENTER></TD></TR></TABLE>
<P>
The <I>Spice Code</I> and <I>Spice Declaration</I> entries create text for Spice decks
(see <A HREF="chap09-04-03.html#chap09-04-03">Section 9-4-3</A>).
The <I>Verilog Code</I> and <I>Verilog Declaration</I> entries create text for Verilog decks
(see <A HREF="chap09-04-02.html#chap09-04-02">Section 9-4-2</A>).
These entries actually create Universal Pin nodes with appropriate text on them.
<P>
A special primitive, called <I>Simulation Probe</I> is recognized by simulators and visually modified to reflect
whatever it is connected to.
The simulators that reflect the state of the circuit by drawing lines along arcs also fill-in these probe nodes.
It provides a visual display of simulation activity, and works especially well with the
VCR controls in the waveform window.
See <A HREF="chap04-12-01.html#chap04-12-01">Section 4-12-1</A> for more.
<P>
The <I>DRC Exclusion</I> node is used by the design-rule checker
(see <A HREF="chap09-02-03.html#chap09-02-03">Section 9-2-3</A>).
The <I>AFG Exclusion</I> node is used by the auto-fill generator
(see <A HREF="chap09-08-02.html#chap09-08-02">Section 9-8-2</A>).
<P>
The <I>Invisible Pin</I> is used for holding text,
and it does not appear in hardcopy output
(this is what is created when you use place Annotation Text).
This pin can connect to any arc.
<P>
The <I>Universal Pin</I> is a node that can connect to any arc.
This is useful as an intermediate component when replacing
(first you replace the unwanted node with a Universal-Pin to allow it to fit with the existing arcs;
then you replace the arcs; finally you put the desired new node in place).
<P>
The <I>Unrouted Pin</I> is used when joining unrouted arcs.
It can also connect to anything.
<HR>
<CENTER><H1><A NAME="chap08-01">Chapter 8: Creating New Technologies</A></H1></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap07-06-03.html#chap07-06-03.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>8-1: Designing New Technologies</H2></CENTER></TD>
<TD><CENTER><A HREF="chap08-02.html#chap08-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
Although there are many technology descriptions in Electric,
there are many more in the world.
To accommodate this,
there is the <I>technology editor</I> which allows you to modify existing technologies and create new ones.
<P>
The editor works by converting a technology into a library of cells.
You then edit the cells, using familiar Electric commands, and make changes to the technology.
Finally, the technology editor translates the library back into a new technology.
<P>
<TABLE><TR><TD>
Libraries which describe a technology are called <I>technology libraries</I>.
They use elements from the Artwork technology to describe their information.
Special commands from the <B>Edit / Technology Specific</B> menu aid in the manipulation of these libraries.
<P>
There are four types of cells in a technology library which describe the <I>layers</I>,
<I>arcs</I>, <I>nodes</I>, and <I>support</I>.
They are separated into these groups in the cell explorer.
The layer cells all begin with the name "layer-" and each one defines a layer in the technology.
For example, the cell called "layer-Metal" defines the metal layer.
The node and arc cells correspond to the primitives in the technology.
Their names always begin with "node-" and "arc-".
The support cell is always called "factors".
Any other cell in the library is ignored.
</TD><TD><CENTER><IMG SRC="fig08-23.png" ALT="Figure 8.23"></CENTER></TD></TR></TABLE>
<!-- PAGE BREAK --><A NAME="chap08-02"></A>
<CENTER><FONT SIZE=6><B>Chapter 8: Creating New Technologies</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap08-01.html#chap08-01.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>8-2: Converting between Technologies and Libraries</H2></CENTER></TD>
<TD><CENTER><A HREF="chap08-03.html#chap08-03.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Edit/Technology Specific/Convert Technology to Library for Editing... -->
<!-- COMMAND Edit/Technology Specific/Convert Library to Technology... -->
<!-- COMMAND Edit/Technology Specific/Rename Current Technology... -->
<H3>Converting Technologies to Libraries</H3>
<P>
The best way to create a new technology is to change an existing one.
Use the <B>Convert Technology to Library for Editing...</B> command
(in menu <B>Edit / Technology Specific</B>) and select a similar technology.
Unfortunately, the Schematic and Artwork technologies are too complex to edit and cannot be converted.
<P>
Conversion of a technology to a library creates a library with the same name as the technology.
Note that technologies with settings (such as MOSIS CMOS)
will be converted with their current settings only, and the options will no longer be available.
<P>
<H3>Technology-Editing Mode</H3>
<P>
Once a technology-library has been created,
editing of its cells is done in a special <I>technology-editing mode</I>.
The system knows to use technology-editing mode because the cells are marked
as being "Part of a technology editor library"
(see the <B>Cell Properties...</B> command of the <B>Cells</B> menu,
see <A HREF="chap03-07-03.html#chap03-07-03">Section 3-7-3</A>).
<P>
<H3>Converting Libraries to Technologies</H3>
<P>
To convert a technology-library into a technology, use
the <B>Convert Library to Technology...</B> command.
<P>
<TABLE><TR><TD>
You are given the opportunity of naming the technology, and can also request that Java code be produced
(this code can be compiled with Electric to install the technology permanently).
If a technology already exists with the name you want, you can request that it be renamed,
or you can choose a different name for the new technology
(note that technologies can also be renamed with the <B>Rename Current Technology...</B> command).
</TD><TD><CENTER><IMG SRC="fig08-01.png" ALT="Figure 8.1"></CENTER></TD></TR></TABLE>
<P>
If there is an error in the library, conversion is aborted and you are given a chance to fix the library.
Generally, the offending part of the library is highlighted.
If no errors have occurred in the translation,
there will be a new technology in Electric and it will be the current one.
<P>
Before creating any circuitry with the new technology,
it is advisable to create a new library (use the <B>New Library...</B> command of menu <B>File</B>)
so that the test circuitry is not stored with the library that describes it.
<P>
<H3>Cleaning Up</H3>
<P>
After a few rounds of technology editing, there may be many libraries and technologies.
You can delete the current library with the <B>Close Library</B> command of the <B>File</B> menu
(to make another library current,
use the <B>Change Current Library...</B> command of the <B>File</B> menu).
<P>
<H3>Using Technology Libraries</H3>
<P>
Once a library has been successfully built that describes a technology,
it can be saved to disk with the <B>Save Library</B>
command of the <B>File</B> menu.
Then, in another session of Electric, it can be read from disk and converted to a technology.
<!-- PAGE BREAK --><A NAME="chap08-03"></A>
<CENTER><FONT SIZE=6><B>Chapter 8: Creating New Technologies</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap08-02.html#chap08-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>8-3: Hierarchies of Technology Libraries</H2></CENTER></TD>
<TD><CENTER><A HREF="chap08-04.html#chap08-04.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Edit/Technology Specific/Edit Library Dependencies... -->
Although a technology is normally described with a single library,
it is also possible to string together a sequence of libraries to describe a technology.
The sequence forms an <I>inheritance hierarchy</I>,
where later libraries in the sequence can override elements found in earlier libraries.
For example, one library could be a <I>base</I> description for a family of technologies,
and another library could be a <I>tailoring</I> description that describes a specific family member.
The tailoring library might be very small, consisting of a single node description.
That information would then override or augment the base library.
<P>
To connect a sequence of libraries,
a list is placed in the bottommost library pointing to the earlier, or <I>dependent</I> libraries.
In the example below, the current library is "smallPads" and it is tailored with two
other libraries: "pads" and "cmos" (the base library).
Note that the list implicitly begins with the current library,
and continues in reverse order.
In this example, the first library examined is "padsSmall",
followed by "pads" and finally the base library "cmos".
<P>
When a piece of technology information is found in more than one library,
the latest one is used (i.e. the current library's version is used before a dependent library's version,
and a dependent library's version is used before that of another dependent library higher up the list).
Note that the version which is used is expected to be the most recently created version,
and a warning message will be issued if this is not the case.
<P>
Control of the library list is done with the <B>Edit Library Dependencies...</B> command
(in menu <B>Edit / Technology Specific</B>).
<P>
<TABLE><TR><TD>
A dialog is presented with two lists of libraries.
The list on the left shows the dependent libraries and the list on the right shows all current libraries.
By selecting a library name from the list on the right and clicking on the "&lt;&lt; Add" button,
it is added to the list on the left.
To add a library not shown, type its name into the box on the right and click the "&lt;&lt; Add" button.
</TD><TD><CENTER><IMG SRC="fig08-02.png" ALT="Figure 8.2"></CENTER></TD></TR></TABLE>
<P>
To remove a library from the list on the left, select it and click the "Remove" button.
<!-- PAGE BREAK --><A NAME="chap08-04"></A>
<CENTER><FONT SIZE=6><B>Chapter 8: Creating New Technologies</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap08-03.html#chap08-03.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>8-4: The Layers Cells</H2></CENTER></TD>
<TD><CENTER><A HREF="chap08-05.html#chap08-05.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<H3>Creating and Deleting Layer Cells</H3>
<P>
Layers are used to construct primitive nodes and arcs in a technology.
Because of this, the layers must be edited before the nodes and arcs.
To edit an existing layer,
select it from the cell explorer or the <B>Edit Cell...</B> command (in menu <B>Edit</B>).
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig08-24.png" ALT="Figure 8.24"></CENTER></TD><TD>
To create a new layer, use the context menu on the "TECHNOLOGY LAYERS" entry of the cell explorer
and choose "Add New Layer".
A layer can be deleted simply by deleting its cell.
A layer can be renamed by renaming its cell,
but remember to use the name "layer-" in front
(i.e. the old name is "layer-metal" and the new name is "layer-metal-1").
Finally, you can rearrange the order in which the layers will be listed with the "Reorder Layers" command from the
context menu.
</TD></TR></TABLE>
<P>
<H3>Editing Special Layer Information</H3>
<P>
<TABLE><TR><TD>
There are many pieces of information in a layer,
most of which can be updated by double-clicking on them.
There is a 16x16 stipple pattern, a large square of color above that,
and a number of pieces of textual information along the right side.
</TD><TD><CENTER><IMG SRC="fig08-03.png" ALT="Figure 8.3"></CENTER></TD></TR></TABLE>
<P>
The stipple pattern can be changed by double-clicking on any grid squares.
You can also do operations on the entire stipple pattern ("Clear Pattern", "Invert Pattern", "Copy Pattern",
and "Paste Pattern") by double-clicking on their name below the pattern area.
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig08-04.png" ALT="Figure 8.4"></CENTER></TD><TD>
The color of the layer can be changed by double-clicking on the "Color" entry.
The dialog lets you choose a color, opacity, and foreground factor for the layer.
Opacity ranges from 1.0 (fully opaque) to 0 (transparent).
The foreground flag is "on" to indicate that the non-opaque colors can be combined with others.
</TD></TR></TABLE>
<P>
Transparency lets a layer have a unique appearance where it overlaps other layers.
The overlap is defined in the technology's color map.
You can double-click on the "Transparency" entry to assign this factor to a layer.
Non-transparent layers (with "Transparency: none") are opaque, so they obscure anything under them when drawn.
In general, the most commonly used layers should be transparent.
See <A HREF="chap04-06-01.html#chap04-06-01">Section 4-6-1</A> for more information on transparency.
<P>
The "Style" entry on the right can be "solid", "patterned",
or "patterned/outline" to indicate how that layer will be appear.
When using "solid" styles, the 16x16 stipple pattern is ignored (except for hardcopy).
The "patterned/outline" option draws a solid line around all patterned polygons.
Transparent layers should be solid because they distinguish themselves in the color map.
Layers with opaque colors should probably be patterned so that their combination is visible.
<P>
Many of the entries on the right side of the layer cell provide correspondences between a layer and various interchange standards.
The "CIF Layer" entry is the string to use for CIF I/O
(see <A HREF="chap07-03-02.html#chap07-03-02">Section 7-3-2</A>).
The "GDS-II layer" entry can be as simple as a single layer number, but it can also be two numbers separated by a "/"
(the layer number and its type).
You can also add a comma and then another layer/type pair with the letter "t" (for text) or "p" (for pin) at the end
(see <A HREF="chap07-03-03.html#chap07-03-03">Section 7-3-3</A>).
<P>
Another set of options on the right side of the layer cell is for Spice parasitics.
You may assign a resistance, capacitance,
and edge capacitance to the layer for use in creating Spice simulation decks
(see <A HREF="chap09-10-01.html#chap09-10-01">Section 9-10-1</A>).
<P>
The "3D Height" and "3D Thickness" are used when viewing a chip in 3-dimensions.
The height and thickness are arbitrary values which describe the location and thickness in the third axis (out of the screen).
For example, to show how poly and diffusion interact,
the poly layer can be at height 21 and the diffusion layer at height 20, both with 0 thickness.
This will appear as two ribbons, one over the other.
See <A HREF="chap04-11-02.html#chap04-11-02">Section 4-11-2</A> for more information on 3D display.
<P>
The last option on the right side of the layer cell specifies the minimum coverage percentage
(see <A HREF="chap09-02-04.html#chap09-02-04">Section 9-2-4</A> for more).
<P>
<H3>Layer Function</H3>
<P>
The "Function" entry allows a general-purpose description to be attached to the layer.
<P>
<TABLE><TR><TD>
A function consists of a single base description plus optional additional modifiers.
The additional modifiers are found in the last entries of the function list.
</TD><TD><CENTER><IMG SRC="fig08-05.png" ALT="Figure 8.5"></CENTER></TD></TR></TABLE>
<P>
These additional modifiers can be added to the base function:
<UL>
<LI>"p-type," "n-type," "depletion," "enhancement," "light," "heavy", and "thick"
describe layer types that are process-specific.
<LI>"pseudo" indicates that this layer is a pseudo-layer, used for pin construction.
<LI>"nonelectrical" indicates that this layer is decorative and not part of a real circuit.
<LI>"connects-metal," "connects-poly," and "connects-diff" indicate that this contact layer joins the specified real layers.
<LI>"inside-transistor" indicates that the polysilicon is not field-poly, but is part of a transistor.
</UL>
<P>
For example, you can double-click the function entry many times,
selecting "Diffusion",
"p-type", and "heavy" to indicate a Diffusion layer that is heavily-doped p-type.
To clear the layer function, set it to "unknown."
<P>
A number of rules apply to the selection of layer functions.
There must be a "pseudo" layer for every layer used to build arcs.
This is because every arc needs a pin, and pins are constructed from "pseudo" layers.
The "pseudo" layers are virtual geometry that do not appear in the fabrication output.
It is important that every "pseudo" layer have an associated real layer, with similar descriptive fields.
The technology editor will issue a warning if pins are not constructed from pseudo-layers.
<P>
Note that the layer functions must be treated carefully as they form the basis of subsequent arc and node definitions.
One consideration to note is the use of "Wells" and "Substrates".
If the technology requires a separate contact to the well,
then it will typically contain a metal layer,
and a piece of heavily doped material under the metal to make ohmic contact to the well; i.e. p++ in a P-well.
This will have the same doping as the well, unlike a device diffusion,
which is of opposite type to the well in which it is located.
<P>
Two rules apply here:
<OL>
<LI>There must be a separate diffusion layer for the p++ or n++ used as a contact in a P-well or N-well,
respectively; it cannot be the same layer that is used for diffusions in active devices.</LI>
<LI>A p++ or n++ layer that is used to make a contact in a well of the same semiconductor type
(for example p++ in a P-well)
must not be defined with the layer function Diffusion;
it must be declared as "Well".
In the well contact shown below,
both the p++ layer and the P-well layer will be defined with the layer function "Well, P-type".</LI>
</OL>
<P>
<CENTER><IMG SRC="fig08-06.png" ALT="Figure 8.6"></CENTER>
<!-- PAGE BREAK --><A NAME="chap08-05"></A>
<CENTER><FONT SIZE=6><B>Chapter 8: Creating New Technologies</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap08-04.html#chap08-04.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>8-5: The Arc Cells</H2></CENTER></TD>
<TD><CENTER><A HREF="chap08-06.html#chap08-06.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Edit/Technology Specific/Identify Primitive Layers -->
<H3>Creating and Deleting Arc Cells</H3>
<P>
Arcs are the wires in a technology, and they are constructed from pieces of geometry on the layers.
To edit an existing arc,
select it from the cell explorer or the <B>Edit Cell...</B> command (in menu <B>Edit</B>).
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig08-25.png" ALT="Figure 8.25"></CENTER></TD><TD>
To create a new arc, use the context menu on the "TECHNOLOGY ARCS" entry of the cell explorer
and choose "Add New Arc".
</TD></TR></TABLE>
<P>
An arc can be deleted simply by deleting its cell.
An arc can be renamed by renaming its cell,
but remember to use the name "arc-" in front
(i.e. the old name is "arc-metal" and the new name is "arc-metal-1").
Finally, you can rearrange the order in which the arcs will be listed with the "Reorder Arcs" command from the
context menu.
<P>
<H3>Editing Special Arc Information</H3>
<P>
Arc cells show a sample arc on the bottom and a few pieces of textual information above it.
The textual information can be updated by double-clicking on it.
<P>
<TABLE><TR><TD>
The "Fixed-angle" entry lets you choose whether or not default arcs of this type are drawn at fixed angles
(see <A HREF="chap05-02-01.html#chap05-02-01">Section 5-2-1</A>).
In many layout technologies, the correct state is "yes".
The particular fixed angle is specified by the "Angle increment" field below.
<P>
The "Wipes pins" entry lets you choose whether or not these arcs completely erase connecting pins
(the sensible state is "yes" because pins are drawn in the same layer and would not be visible anyway).
</TD><TD><CENTER><IMG SRC="fig08-07.png" ALT="Figure 8.7"></CENTER></TD></TR></TABLE>
<P>
The "Extend arcs" entry lets you choose whether or not these arcs extend beyond their endpoints by half of their width
(see <A HREF="chap05-04-03.html#chap05-04-03">Section 5-4-3</A>).
The typical state is "yes".
<P>
The "Angle increment" entry is the preferred angle granularity of this type of arc
(see <A HREF="chap05-05.html#chap05-05">Section 5-5</A>).
The typical state is "90" which requests Manhattan arcs.
<P>
The "Antenna Ratio" entry is used in antenna rules calculations
(see <A HREF="chap09-03-02.html#chap09-03-02">Section 9-3-2</A>).
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig08-08.png" ALT="Figure 8.8"></CENTER></TD><TD>
The "Function" entry describes the arc's function,
which is a different set than the layer functions.
As with layer functions, the arc functions should be carefully considered.
</TD></TR></TABLE>
<P>
A well arc that contains a well layer and does not contain device diffusion
(i.e. opposite doping to the well)
must not be defined as "diffusion"; it must be defined as "well-diffusion".
This prevents the Spice extractor from incorrectly adding any p or n doped area found
in the well arc to the source or drain area of a transistor on the same network.
This does not mean that a device arc cannot contain a well layer.
Device arcs will be declared as "p-diffusion" or "n-diffusion",
and their well layer will be handled correctly;
the arc connectivity is really defined by the device diffusion layer.
For example, a p-device arc will have an N-well,
or N substrate under it,
and a p-type diffusion will end up as part of the drain or source of the P transistor to which it is connected.
<P>
<H3>Editing Arc Geometry</H3>
<P>
In addition to the above information,
the arc must also be described with pieces of geometry on the various layers.
Thus, a prototypical arc must be drawn in this cell.
The length of the arc is not important,
but the smaller dimension is presumed to be the width and defines the default for this arc type.
<P>
Use the entries from the component menu of the side bar to create new layers.
The typical layer in an IC technology is a Filled box (third from the top).
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig08-10.png" ALT="Figure 8.10"></CENTER></TD><TD>
After the geometry is created, it can be moved and resized with standard Electric commands.
Remember to keep all arc geometry separate from the information messages in the cell
so that the technology editor can distinguish them.
Once a piece of geometry is created,
its layer can be set by double-clicking on it.
A menu is then presented with possible layers (ignore the last entries, "SET-MINIMUM-SIZE",
and "CLEAR-MINIMUM-SIZE" which are used only for nodes).
<P>
Besides geometric layers,
the graphical arc description must have a highlight layer to show where the arc will be outlined when used in a circuit.
Although the highlighting is typically drawn around the outside of all geometry,
implant layers may extend beyond the highlight (see the CMOS diffusion arcs for an example of this).
Select the "HIGH" entry in the component menu to create this special type of layer.
</TD><TD></TR></TABLE>
<P>
After geometry has been created, there may be some confusion as to what is there.
To find out,
use the <B>Identify Primitive Layers</B> command (in menu <B>Edit / Technology Specific</B>),
which temporarily labels each piece of geometry in the arc cell.
<!-- PAGE BREAK --><A NAME="chap08-06"></A>
<CENTER><FONT SIZE=6><B>Chapter 8: Creating New Technologies</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap08-05.html#chap08-05.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>8-6: The Node Cells</H2></CENTER></TD>
<TD><CENTER><A HREF="chap08-07.html#chap08-07.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Edit/Technology Specific/Identify Ports -->
<H3>Creating and Deleting Node Cells</H3>
<P>
Nodes are the components in a technology,
and they are constructed from pieces of geometry on the layers.
To edit an existing node,
select it from the cell explorer or the <B>Edit Cell...</B> command (in menu <B>Edit</B>).
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig08-26.png" ALT="Figure 8.26"></CENTER></TD><TD>
To create a new node, use the context menu on the "TECHNOLOGY NODES" entry of the cell explorer
and choose "Add New Node".
A node can be deleted simply by deleting its cell.
A node can be renamed by renaming its cell,
but remember to use the name "node-" in front
(i.e. the old name is "node-metal" and the new name is "node-metal-1").
Finally, you can rearrange the order in which the nodes will be listed with the "Reorder Nodes" command from the
context menu.
</TD></TR></TABLE>
<P>
<H3>Editing Special Node Information</H3>
<P>
<TABLE><TR><TD>
The node cell contains four pictures of the node on the bottom and textual information above that.
You can update the textual information entries by double-clicking on them.
<P>
The "Serpentine transistor"
entry indicates that this is a MOS transistor and it can take arbitrary outline information to describe its geometry
(see <A HREF="chap07-04-01.html#chap07-04-01">Section 7-4-1</A>).
<P>
The "Square" entry forces the node to always have the same X and Y dimension when scaled.
<P>
The "Invisible with 1 or 2 arcs"
entry indicates that the node will not be drawn if it is connected to exactly one or two arcs.
This is useful in schematic pins,
which are visible only when unconnected or forming a junction of 3 or more wires.
</TD><TD><CENTER><IMG SRC="fig08-11.png" ALT="Figure 8.11"></CENTER></TD></TR></TABLE>
<P>
The "Lockable" entry indicates that this node can be made unchangeable along with other lockable primitives,
when the lock is turned on during editing
(see <A HREF="chap06-02.html#chap06-02">Section 6-2</A> for more on locking these primitives).
This is typically used in array technologies such as FPGA
(see <A HREF="chap07-06-02.html#chap07-06-02">Section 7-6-2</A>).
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig08-12.png" ALT="Figure 8.12"></CENTER></TD><TD>
The "Function" entry describes the node's function,
which is a different set than the arc and layer functions.
A dialog offers a list of possible node functions.
</TD></TR></TABLE>
<P>
<H3>Editing Node Geometry</H3>
<P>
For nodes, it is common to sketch four different <I>examples</I> of the node in varying scales,
so that X and Y scaling rules can be derived (square nodes need only two examples).
If only one example is specified, linear scaling rules will be presumed.
<P>
The smallest example, called the <I>main example</I>,
is used as the default size and also contains all of the special port information.
Needless to say,
it is important to keep the geometry of each example well apart from the others so that the technology editor can distinguish them.
<P>
Each example must contain the same geometric layers (only stretched).
As in the Arc cells, pieces of geometry can be created by selecting from the component menu of the side bar,
creating the geometry, and then double-clicking to assign a layer.
If any polygonal geometry is used (for example,
the Filled polygon entry, sixth from the top),
they require outline information to be assigned
(see <A HREF="chap06-10-01.html#chap06-10-01">Section 6-10-1</A>).
If the Opened circle arc entry is selected
(second from the bottom),
you can specify the number of degrees of the circle with the <B>Object Properties...</B> command
(in menu <B>Edit / Properties</B>).
<P>
Each example must also contain a highlight layer to indicate the correct highlighting on the display.
Select the "HIGH" entry from the component menu to create this special type of layer.
<P>
<TABLE><TR><TD>
Each example must also contain port information.
Select the "PORT" entry in the component menu to create this special type of layer.
You will have to provide a name for each port,
and the name must be the same on each example.
<P>
Ports on the main example must also have connectivity information (which arcs can connect to them)
and range information (the permissible angle of connected arcs).
Double-click on the port to set this.
<P>
The range consists of two numbers: an angle (in degrees counterclockwise from 3 O'clock)
and an angle range.
For example,
a port angle of 90 with a port angle range of 45 describes a port that points upward
and can connect at angles up to 45 degrees off from this direction.
The range will be graphically depicted.
</TD><TD><CENTER><IMG SRC="fig08-13.png" ALT="Figure 8.13"></CENTER></TD></TR></TABLE>
<P>
The ports on the main example must also indicate any internal electrical connectivity by actually connecting them together.
For example, the two polysilicon ports on a MOS transistor should be connected in the main example.
Join the ports with a universal arc.
Do not put this internal connection on any example other than the main one.
To see the location of all ports on the main example,
use the <B>Identify Ports</B> command (in menu <B>Edit / Technology Specific</B>).
<P>
As with arcs, use the <B>Identify Primitive Layers</B> command to label each piece of geometry in the main example.
<P>
<H3>Special Node Considerations</H3>
<P>
There are some special cases available in node descriptions.
A piece of geometry in the main example may be changed
(by double-clicking on its function) to "SET-MINIMUM-SIZE".
This indicates that the current size is the smallest possible, and it cannot scale any smaller
(this is used by the "mocmos" technology for the metal layer in contacts).
The restriction can be removed with the "CLEAR-MINIMUM-SIZE" description.
This option cannot be used in serpentine transistors.
<P>
Another special case in node description is the ability to specify multiple cut layers.
If the larger examples have more cut layers,
rules are derived for cut spacing and indentation
so that an arbitrary numbers of cuts can be inserted as the contact scales.
<P>
Although serpentine MOS transistors are a special case,
they cannot be automatically identified, but must be explicitly indicated with a textual indicator.
Besides this explicit indication, the transistor node must contain four ports: two on the gate layer (polysilicon)
and two on the gated layer (active).
A standard geometry must be used that shows polysilicon and diffusion crossing in a central transistor area.
Any deviation from this format may cause the technology editor to be unable to derive serpentine rules for the node.
<P>
Besides the standard nodes for transistors,
contacts, and other circuit elements, it is necessary to build pin and pure-layer nodes.
There should be one pin for every arc, so that the arc can connect to others of its type.
The pin should be constructed of pseudo-layers (i.e. it has no real geometry), should have the "pin" function,
and should have one port in the center that connects to one arc.
The technology editor will issue a warning if there is no pin node associated with an arc.
<P>
The pure-layer nodes should also be built, one for each layer.
They should have only one piece of geometry and have the "pure-layer" function.
The technology editor will issue a warning if there is no pure-layer node associated with a layer.
<!-- PAGE BREAK --><A NAME="chap08-07"></A>
<CENTER><FONT SIZE=6><B>Chapter 8: Creating New Technologies</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap08-06.html#chap08-06.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>8-7: Miscellaneous Information</H2></CENTER></TD>
<TD><CENTER><A HREF="chap08-08.html#chap08-08.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<H3>The Support Cell</H3>
<P>
Each cell in a technology library describes a different aspect of the technology.
The <I>support</I> cell contains technology-wide information.
To see this, edit the cell "factors" under the "TECHNOLOGY SUPPORT" section
of the cell explorer.
<P>
<CENTER><IMG SRC="fig08-14.png" ALT="Figure 8.14"></CENTER>
<P>
The support cell contains many items, any of which can be changed by double-clicking on it.
<UL>
<LI>"Scale" is the scaling factor between grid units and nanometers.</LI>
<LI>"Description" is the full description of the technology.</LI>
<LI>"Minimum Resistance" is the minimum resistance for the technology
(see <A HREF="chap09-10-01.html#chap09-10-01">Section 9-10-1</A> for this and other parasitics).</LI>
<LI>"Minimum Capacitance" is the minimum capacitance for the technology.</LI>
<LI>"Gate Shrinkage" is the gate shrinkage for the technology.</LI>
<LI>"Gates Included in Resistance" tells whether to include a transistor's gate in resistance computations.</LI>
<LI>"Parasitics Includes Ground" tells whether to include ground networks in parasitics computations.</LI>
</UL>
<P>
<!-- NEED 4in -->
<H3>Transparent Colors</H3>
<P>
<TABLE><TR><TD>
Double-clicking on the "Transparent Colors" entry shows a dialog for selecting the transparent colors.
You must define as many colors as you have used in the layers.
</TD><TD><CENTER><IMG SRC="fig08-27.png" ALT="Figure 8.27"></CENTER></TD></TR></TABLE>
<P>
<H3>Design Rules</H3>
<P>
Unfortunately, it is not possible to edit design rules associated with the technology.
<!-- PAGE BREAK --><A NAME="chap08-08"></A>
<CENTER><FONT SIZE=6><B>Chapter 8: Creating New Technologies</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap08-07.html#chap08-07.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>8-8: How Technology Changes Affect Existing Libraries</H2></CENTER></TD>
<TD><CENTER><A HREF="chap08-09.html#chap08-09.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
Once a technology is created, the components are available for design.
Soon there will be many libraries of circuitry that makes use of this new technology.
What happens to these libraries when the technology description changes?
In most cases, the change correctly affects the existing libraries.
However, some changes are more difficult and might invalidate the existing libraries.
This section discusses the possible changes and shows workarounds for the difficult situations.
<P>
Technology information appears in four different places:
the layers, the arcs, the nodes, and miscellaneous information on the technology
(the support cell and color tables).
Information in these areas can be added, deleted, or modified.
The rest of this section outlines all of these situations.
<P>
<H3>Adding layers, adding arcs, adding nodes, adding miscellaneous information</H3>
<P>
Adding information has no effect on the existing circuitry.
All subsequent circuit design may make use of the new technology elements.
<P>
<H3>Deleting layers</H3>
<P>
All references to a deleted layer, in any nodes or arcs of the technology,
will become meaningless.
This does not invalidate libraries that use the layers,
but it does invalidate the node and arc descriptions in the technology.
The geometry in these nodes and arcs will have to be moved to another layer.
<P>
<H3>Deleting nodes, deleting arcs</H3>
<P>
This will cause error
messages when libraries are read that make use of the deleted elements.
When the library is read,
you can substitute another node or arc to use in place of the now-unknown component.
<P>
<H3>Deleting miscellaneous information</H3>
<P>
This depends entirely on where that information is used.
For example, an analysis tool may fail to find the information that it requires.
<P>
<H3>Modifying layers</H3>
<P>
This is a totally transparent operation.
Any change to the color, style, or stipple information (including changes to the color map)
will appear in all libraries that use the technology.
Changes to I/O equivalences or Spice parasitics will be available to all existing libraries.
A change of the layer function may affect the technology editor's ability to decode the nodes and arcs that use this layer
(for example,
if you change the function of the "polysilicon" or "diffusion" layers that form a transistor,
the editor will be unable to identify this transistor).
Renaming a layer has no effect.
<P>
<H3>Modifying arcs, modifying nodes</H3>
<P>
This is not as simple as layer modification because the arcs and nodes appear in the circuit libraries,
whereas the layers do not.
If you rename a node or arc,
it will cause errors when libraries are read that make use of nodes with the old name.
Therefore, you must create a new node or arc first, convert all existing ones to the new type,
and then delete the old node or arc.
<P>
Many of the pieces of special information on the top of the node and arc cells apply to newly created circuitry only,
and do NOT affect existing components already in libraries.
The arc factors "Fixed-angle", "Wipes pins", "Extend arcs",
and "Angle increment" have no effect on existing libraries.
The node factor "Square node" also has no effect on existing circuitry and gets applied only in subsequent designs.
<P>
Other factors do affect existing circuitry.
Changes to the "Function" field, in both arcs and nodes,
pass to all existing components, thus affecting how analysis tools treat the old circuits.
If the "Serpentine Transistor" field in nodes is turned off,
any existing transistors that have serpentine descriptions will turn into large rectangular nodes with incorrect connections (i.e. get trashed).
Unfortunately, it may become impossible to keep the "Serpentine Transistor"
field on if the geometry does not conform to standards set by the technology editor for recognizing the parts.
If a node is not serpentine, turning the factor on has no effect.
Finally, the node factors "Invisible with 1 or 2 arcs" and "Lockable" correctly affect all existing circuitry.
<P>
A more common modification of arcs and nodes is to change their graphical descriptions.
A simple rule applies to all such changes: if you change the size of the bounding box,
it causes possibly unwanted proportion changes in all existing circuitry.
This is because the bounding box information is all that is stored in the library,
and layer sizes are defined in terms of that box.
<P>
<TABLE><TR><TD>
For example, assume that there is an active arc defined with two layers:
diffusion (2 wide) and well (8 wide).
The arcs in the libraries are therefore recorded as being 8 wide (the largest size).
The system knows that the diffusion is narrower than the overall arc by 3 on each side.
</TD><TD><CENTER><IMG SRC="fig08-15.png" ALT="Figure 8.15"></CENTER></TD></TR></TABLE>
<P>
Now, if you change the well so that it is 10 wide,
the system will define the diffusion to be narrower than the overall arc by 4 on each side,
and for the existing 8-wide arcs,
the diffusion will shrink to zero and disappear.
These arcs must be resized individually, which can be tedious.
<P>
Here is an example of how node geometry changes can also make trouble.
Assume that there is a transistor that has an active piece (2 wide)
and a gate piece (2 wide).
Each piece extends beyond the transistor area by 2,
thus making the entire node 6x6 in size.
The size of each cross piece will be defined to be 2 narrower than the bounding box on each side.
If the pieces are changed so that they extend by only 1,
then the definition of each strip will change to being 1 less than the box size on each side.
All existing 6x6 transistors will suddenly have 4x4 gate areas where they used to be 2x2.
<P>
In both of these examples,
it may be preferable to keep the old technology and give the new technology a different name.
Then the old libraries can be read into the old technology,
and the <B>Make Alternate Layout View...</B> command (in menu <B>View</B>)
can be used to translate into the new technology.
This command uses node and arc functionality to associate components,
scaling them appropriately relative to their default sizes.
The change is completed by deleting the old technology,
renaming the new technology to the old name, and then saving the library.
<P>
<H3>Modifying miscellaneous information</H3>
<P>
This last situation is typically transparent:
changed information appears in all existing libraries,
and affects those subsystems that make use of the information.
For example, a change to the Spice resistance will be seen when a Spice deck is next generated.
<!-- PAGE BREAK --><A NAME="chap08-09"></A>
<CENTER><FONT SIZE=6><B>Chapter 8: Creating New Technologies</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap08-08.html#chap08-08.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>8-9: Examples of Use</H2></CENTER></TD>
<TD><CENTER><A HREF="chap09-01.html#chap09-01.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
To fully understand technology editing,
some examples are appropriate.
Two examples will be given: a simple one that modifies the appearance of a pattern,
and a more complex example in which a new primitive node is created.
Both examples are based on the MOSIS CMOS technology,
so they presume that the <B>Convert Technology to Library for Editing...</B> command
(in menu <B>Edit / Technology Specific</B>) has been issued and the "mocmos" entry was selected.
<P>
<H3>Example: Modifying a Layer's Appearance</H3>
<P>
In this first example,
the user simply wishes to change the Metal-2 layer from a solid fill to a stipple pattern.
<P>
This particular task is so basic that it can be done with the Layers Preferences,
but it illustrates the basic steps of making a change.
First, edit the layer cell for "metal-2".
The display will show the layer with all of its associated information.
<P>
<CENTER><IMG SRC="fig08-16.png" ALT="Figure 8.16"></CENTER>
<P>
Because every layer has a default stipple pattern used for printing,
all that is necessary is to change the "Style" field from solid to patterned.
To do this, double-click on the "Style" text and select "Patterned".
The technology is now modified and can be converted back with the <B>Convert Library to Technology...</B> command.
<P>
<H3>Example: Creating a New Node</H3>
<P>
The second example is more extensive: creation of a new primitive node.
In this case, the new node is a contact between metal-2 and polysilicon.
<TABLE><TR><TD>
To create the node,
use the context menu on the "TECHNOLOGY NODES" tab of the explorer window,
select "Create New Node", and name the node appropriately.
</TD><TD><CENTER><IMG SRC="fig08-17.png" ALT="Figure 8.17"></CENTER></TD></TR></TABLE>
<P>
At this point, the display will show only the textual information about the node
(because the graphical information is yet to be supplied).
The textual information consists of five factors that now fill the screen.
<P>
<TABLE><TR>
<TD><CENTER><IMG SRC="fig08-18.png" ALT="Figure 8.18"></CENTER></TD><TD>
You should begin by changing the "Function" factor to "contact"
(double-click it and select the appropriate function).
Then pan back so there is room to describe the node graphically.
The other factors are properly set for a contact.
</TD></TR></TABLE>
<P>
<!-- NEED 4in -->
<TABLE><TR><TD>
To place a piece of geometry (for example, some polysilicon),
click over the Filled Box entry in the component menu
(third from the top) and then click in the edit window.
This geometry now has shape, but no layer associated with it.
To assign a layer, double-click on the geometry.
Then choose "polysilicon-1".
The black box will change appearance to that of a polysilicon layer.
You can move and stretch this box appropriately.
</TD><TD><CENTER><IMG SRC="fig08-19.png" ALT="Figure 8.19"></CENTER></TD></TR></TABLE>
<P>
In this example, assume that a contact between polysilicon and metal-2 has three layers:
polysilicon-1, metal-2, and contact cut.
Therefore, the above operation must be done two more times to place the metal-2 and contact cut layers.
<P>
Besides this pure geometry, there must be two other items in the node:
a highlight layer and a port.
The highlight layer is obtained by selecting the "HIGH" entry from the component menu.
It is then placed and stretched so that it encloses the contact
(highlight layers define the size of the node,
and this means that they will typically surround the geometry).
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig08-20.png" ALT="Figure 8.20"></CENTER></TD><TD>
The other item that must be created is a port
(more than one can be created, but for contacts, one is sufficient).
Select the "PORT" entry from the menu on the left and place it in the display.
You will be prompted for a port name, after which you can further move or stretch the port.
Besides a location and a name, ports must specify which arcs may connect to them.
To do this, double-click on the port.
<P>
The resulting menu lists all of the arcs and indicates possible connectivity.
Note that the last two entries define the permissible range of angles to which arcs may connect.
For a contact such as this, arcs may connect at any angle,
so the default values are correct.
</TD></TR></TABLE>
<P>
When all of the geometry, highlighting, and ports have been placed,
you can double-check your work with the <B>Identify Primitive Layers</B> command
(in menu <B>Edit / Technology Specific</B>),
which will display this information
(note that the port name "Center" has been moved away for clarity):
<P>
<CENTER><IMG SRC="fig08-21.png" ALT="Figure 8.21"></CENTER>
<P>
The final step in the definition of this node is to create three more copies that illustrate scaling in both axes.
This is done simply by selecting all five objects and using the <B>Duplicate</B>
command (in menu <B>Edit</B>).
Once duplicated in a new location, each piece must be stretched appropriately.
In this example, the contact cut is designed so that the number of cut elements grows with the node.
Thus, when stretched horizontally or vertically, there are two cuts,
and when stretched in both directions there are four cuts.
The technology editor will determine precise multicut rules from the cut spacing and the amount of stretch,
so that even more cuts will appear as the node grows larger.
The finished node definition is shown below:
<P>
<CENTER><IMG SRC="fig08-22.png" ALT="Figure 8.22"></CENTER>
<P>
All that is necessary is to convert this library back to a technology, and the new technology will have this node.
<P>
Of course, the newly created technology is valid only during the current session.
Therefore, to preserve this technology, save the library to disk.
In subsequent sessions,
you must read the technology library and convert it to a technology before using it.
Alternatively, you can request the system to write Java code for the technology and compile it into Electric..
<HR>
<CENTER><H1><A NAME="chap09-01">Chapter 9: Tools</A></H1></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap08-09.html#chap08-09.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>9-1: Introduction to Tools</H2></CENTER></TD>
<TD><CENTER><A HREF="chap09-02-01.html#chap09-02-01.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Tool/List Tools -->
<!-- COMMAND Edit/Selection/Show Next Error -->
<!-- COMMAND Edit/Selection/Show Previous Error -->
<!-- PREFERENCE General/General -->
There are many different tools available in Electric for doing both synthesis and analysis of circuitry.
Synthesis tools include routers, compactors, circuit generators, and so on.
Analysis tools include design-rule checkers, network comparison, and many simulators.
To see a list of tools, including which ones are active,
use the <B>List Tools</B> command (in menu <B>Tool</B>).
This chapter covers many of the tools available in Electric.
<P>
When a tool is running, it may take a long time.
You can see it under the "JOBS" entry of the cell explorer
(see <A HREF="chap04-08.html#chap04-08">Section 4-8</A>).
After a tool has run, it may reports errors in the ERRORS section of the cell explorer.
To browse these errors, use the <B>Show Next Error</B> and <B>Show Previous Error</B> commands
(in menu <B>Edit / Selection</B>) or type the "&gt;" and "&lt;" keys.
<P>
A number of common tool controls are available from the
General Preferences (in menu <B>File / Preferences...</B>, "General" section, "General" tab),
especially in the "I/O" and "Jobs" section.
<P>
<TABLE><TR><TD>
<P>
Most of the commands to generate an input deck for a simulator (a netlist) prompt the user for the desired file.
If "Show file-selection dialog before writing netlists" is unchecked, however, the file is written (or overwritten)
without prompt.
This is useful in repetitive iterations of design/simulate, and saves the cumbersome file-selection dialog.
However, it can be dangerous because it overwrites files without asking.
<P>
When reading and writing files, Electric remembers the last directory and uses it in subsequent
file selection dialogs.
</TD><TD><CENTER><IMG SRC="fig09-21.png" ALT="Figure 9.21"></CENTER></TD></TR></TABLE>
<P>
Since different types of files are often stored in different locations,
the system remembers many different directories, organized by type.
Thus, there may be a current directory for "Database" work (library files),
for Spice simulation, etc.
Choose the type of file to examine and change the directory associated with it.
<P>
In the "Jobs" section,
"Beep after long jobs" requests that any job which runs longer than a minute make a beep sound when done.
The "Verbose mode" requests that all changes made by a job be described in the messages window.
<P>
You can set the maximum number of errors that will be reported at once.
By default, there is no limit to the number of errors.
<P>
For more information about "Maximum undo history", see <A HREF="chap06-07.html#chap06-07">Section 6-7</A>.
<P>
For more information about the "Memory" section, see <A HREF="chap01-03.html#chap01-03">Section 1-3</A>.
<P>
The "Database" section controls aspects of the Electric database that do not affect most users.
By default, Electric runs as two processes: a client that manages the display and a server that manages the database.
By unchecking "Use Client / Server interactions", Electric will do all of this in a single process.
Checking "Snapshot Logging" requests debugging information on the client/server interactions.
<!-- PAGE BREAK --><A NAME="chap09-02-01"></A>
<CENTER><FONT SIZE=6><B>Chapter 9: Tools</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap09-01.html#chap09-01.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>9-2-1: Introduction to DRC</H2></CENTER></TD>
<TD><CENTER><A HREF="chap09-02-02.html#chap09-02-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Tool/DRC/Check Hierarchically -->
<!-- COMMAND Tool/DRC/Check Selection Area Hierarchically -->
There are three built-in design-rule checkers: <I>incremental</I>, <I>hierarchical</I>,
and <I>schematic</I>.
<P>
The incremental design-rule checker is always running, examining your layout,
and issuing error messages when an error is detected.
It checks only the current cell, and does not consider the contents of cell instances,
lower in the hierarchy.
It therefore offers an instant analysis, but not a complete one.
<P>
The hierarchical design-rule checker uses the same rules and techniques as the incremental checker,
but it checks all levels of hierarchy below the current cell.
To run it, use the <B>Check Hierarchically</B> command (in menu <B>Tool / DRC</B>).
To check only a selected subset of the current cell, use <B>Check Selection Area Hierarchically</B>.
<P>
The schematic design-rule checker looks for issues that make drawing or editing of the cell difficult.
These are the errors that is finds:
<OL>
<LI>Nodes:
	<UL>
	<LI>Nodes whose parameters don't match the cell definition (check export names, units, and visibility).</LI>
	<LI>"Stranded" pins: with no connections, exports, or attached text.</LI>
	<LI>"Inline" pins: those that sit in a line between two arcs (both of which could be replaced by a single straight arc).</LI>
	<LI>Invisible pins with text that is offset from the node center (this is an internal consistency check).</LI>
	</UL></LI>
<LI>Arcs:
	<UL>
	<LI>Unnamed arcs that "dangle": one end is unconnected and unexported (does not apply to busses).</LI>
	<LI>Bus arcs whose width is inconsistent with its two nodes.</LI>
	<LI>Bus pins that "float": do not connect to bus arcs and are not exported.</LI>
	<LI>Bus pins that connect to more than 1 wire.</LI>
	</UL></LI>
</OL>
<P>
After analysis of the circuit,
you can review the errors by typing "&gt;" and "&lt;" to step to the next and previous error that was found.
You can also see a list of errors in the cell explorer (see <A HREF="chap04-08.html#chap04-08">Section 4-8</A>).
<!-- NEED 3in -->
<H3>9-2-2: DRC Preferences</H3>
<!-- PREFERENCE Tools/DRC -->
<TABLE><TR><TD>
To control the DRC,
use the DRC Preferences (in menu <B>File / Preferences...</B>, "Tools" section, "DRC" tab).
<P>
By default, the incremental design-rule checker is on.
To turn it off, uncheck the "On" checkbox in the "Incremental DRC" section.
<P>
There are three levels of checking that can be requested for the Hierarchical DRC.
Each level of checking consumes more time and finds more errors.
</TD><TD><CENTER><IMG SRC="fig09-20.png" ALT="Figure 9.20"></CENTER></TD></TR></TABLE>
<P>
<UL>
<LI>"Report just 1 error per cell" tells the system to stop checking a cell
after the first error has been found.
By using this option, you can more quickly determine <I>which</I> cells in the design are correct,
without knowing exactly where the errors lie.
Then, you can go to the cells with errors and do a more complete check.</LI>
<LI>"Report just 1 error per pair of geometries" is the default.
The algorithm works by checking design rules per each possible pair of geometries and it stops when the first
violation for a given pair is found in this mode.</LI>
<LI>"Report all errors" tells the system to continue checking all possible violations in a pair of geometries,
even if an error has already been found.
This is the exhaustive mode and therefore time consuming that will report all violations found.</LI>
</UL>
The design-rule checker remembers the date of the last clean check.
If a cell has not changed since then, it does not need to be rechecked.
This date information can be stored in the libraries (requiring them to be saved)
or can be held only in Electric's memory (requiring them to be rechecked if Electric is restarted).
You can also request that all date information be removed so that a full recheck is done.
To see which cells have passed DRC,
use the <B>General Cell Lists...</B> command (in menu <B>Cell / Cell Info</B>)
A "D" is shown in on the right for cells that are DRC current
(see <A HREF="chap03-07-01.html#chap03-07-01">Section 3-7-1</A>).
<P>
MOS contact nodes automatically increase the number of cuts when they grow larger
(see <A HREF="chap07-04-01.html#chap07-04-01">Section 7-4-1</A>).
Because of this,
very large contact nodes can create excessive work for the design-rule checker as it examines each of the cuts.
To save time, check the "Ignore center cuts in large contacts" check box,
which will examine only the cut layers around the edges of contact nodes.
<P>
DRC rules for new technologies might require special rules, which can be time consuming.
To ignore these errors, check "Ignore area checking" (for minimum area rules) and
"Ignore extension rules" (for special overlap rules).
<P>
After DRC is complete, errors are available in the the cell explorer.
If you wish to see errors while DRC is running, check "Interactive logging",
and the errors will appear incrementally.
<H3>9-2-3: Design Rules</H3>
<!-- COMMAND Tool/DRC/Export DRC Deck... -->
<!-- COMMAND Tool/DRC/Import DRC Deck... -->
<P>
Four types of errors are detected by the incremental and hierarchical design-rule checkers.
<I>Spacing</I> errors are caused by geometry that is too close, but not connected.
<I>Notch</I> errors are caused by geometry that is too close, but connected.
<I>Minimum size</I> errors are caused by geometry that is too small.
<I>Resolution</I> errors are caused by geometries that are smaller than a specified limit.
<P>
In addition to examining geometry,
the design-rule checkers use connectivity information to help find violations.
This use of network information helps the designer to debug circuit connectivity.
For example, if two overlapping nodes are not joined by an arc,
they may be considered to be in violation,
even if their geometry looks right.
This is because the checkers know what is connected and have a separate set of rules for such situations.
<P>
To help guide the design-rule checker,
an "exclusion" layer can be placed over areas that are not to be examined.
This exclusion layer is created by clicking the "Misc." entry of the component menu
and selecting "DRC Exclusion"
(see <A HREF="chap07-06-03.html#chap07-06-03">Section 7-6-3</A>).
Any errors that fall inside of this node's area are ignored. 
<P>
To edit the design rules, use the Design Rules Preferences
(in menu <B>File / Preferences...</B>, "Technology" section, ""Design Rules" tab). 
The dialog allows you to examine and modify the spacing limits for the current technology.
Each rule has a numeric value (size or distance) as well as a textual description of the rule.
The dialog is divided into two parts: "Node Rules" and "Layer Rules".
<P>
In the "Node Rules" section, you may set the minimum size of each node in the current technology.
<P>
<CENTER><IMG SRC="fig09-09.png" ALT="Figure 9.9"></CENTER>
<P>
In the "Layer Rules" section, you may set the minimum size, area, and enclosure area of each layer.
You may also set the inter-layer spacing (between the "From Layer" and the "To Layer").
Use the "Show only 'to' entries with rules" to restrict the displayed rules to those with valid values.
<P>
The layer-to-layer spacing rules appear in 3 forms:
<I>normal</I>, <I>wide</I>, and <I>multicut</I>.
Normal rules come in three flavors: connected, unconnected, and edge.
The connected rules apply to pieces of geometry that are electrically connected;
the unconnected rules apply to unconnected geometry;
edge rules apply to unconnected layers
 and ignore overlap when considering spacing distance.
<P>
The wide rules apply to large geometry.
Although some technologies may have many different rules for different definitions of "large",
the MOSIS CMOS technology has only one such rule.
Additional rules can be controlled with the "Add Wide Rule" and "Delete Wide Rule" buttons.
<P>
The bottom of the dialog has some special features of design rules:
<UL>
<LI>The "Factory Reset" button restores all rules to the original set built into Electric.</LI>
<LI>The "Min resolution" is the minimum resolution that can be manufactured.
If zero, no resolution check is done.
When checking resolution, all geometry of that size or less will be flagged as resolution errors.
For example, current MOSIS rules require that no boundaries be quarter-unit or less,
so a value of .25 in this field will detect such violations.</LI>
</UL>
<P>
When rules have been changed, they are saved with your Preferences.
To save them independently of the Preferences, use the
<B>Export DRC Deck...</B> command (in menu <B>Tool / DRC</B>) to write an XML file with the design rules.
Use the <B>Import DRC Deck...</B> command to restore these rules.
<P>
Note that the MOSIS CMOS design rule 6.7b is not checked by Electric
because it is difficult to detect properly.
This error is never fatal,
and the worst case of missing this error is that active and poly are closer by 1/2 lambda,
which merely results in an increase in capacitive coupling between them.
If this fringing capacitance is important,
you've probably got so much polysilicon in your circuit that it has bigger problems.
<!-- NEED 5in -->
<H3>9-2-4: Coverage Rules</H3>
<!-- COMMAND Tool/DRC/Check Area Coverage -->
<!-- COMMAND Tool/DRC/List Layer Coverage on Cell -->
<!-- PREFERENCE Tools/Coverage -->
Some foundries request that each layer occupy a minimum percentage of the chip.
To enforce such rules, additional pieces of geometry must be placed around the chip to fill that layer.
<P>
<TABLE><TR><TD>
To check for proper minimum layer coverage, use the <B>Check Area Coverage</B> command
(in menu <B>Tool / DRC</B>).
To control the coverage rules, use the Coverage Preferences
(in menu <B>File / Preferences...</B>, "Tools" section, "Coverage" tab).
Each layer in the technology has a minimum percentage of coverage that is needed.
<P>
The coverage check proceeds in a "tiled" manner, checking rectangular areas of the cell.
For example, to check each 100x100 unit area of the cell, set "Width" and "Height" to 100,
and set "DeltaX" and "DeltaY" to 100.
</TD><TD><CENTER><IMG SRC="fig09-01.png" ALT="Figure 9.1"></CENTER></TD></TR></TABLE>
<P>
The <B>List Layer Coverage on Cell</B> command is another way to compute the percentage of the cell that is covered by each layer.
This command examines the entire cell without breaking it into tiled rectangles.
<P>
Use the <B>Fill (MoCMOS)...</B> command (in menu <B>Tool / Generation</B>) to automatically generating fill
(see <A HREF="chap09-08-02.html#chap09-08-02">Section 9-8-2</A>).
<H3>9-2-5: Assura and Calibre DRC</H3>
<!-- COMMAND Tool/DRC/Import Assura DRC Errors for Current Cell... -->
<!-- COMMAND Tool/DRC/Import Calibre DRC Errors for Current Cell... -->
<P>
Electric is able to read the output of Cadence's Assura and Mentor's Calibre design-rule checkers.
<P>
Assura error files (with the extension ".err") can be read with the
<B>Import Assura DRC Errors for Current Cell...</B> command (in menu <B>Tool / DRC</B>).
<P>
Calibre error files (with the extension ".db") can be read with the
<B>Import Calibre DRC Errors for Current Cell...</B> command.
<P>
After reading the error file,
you can review the errors by typing "&gt;" and "&lt;" to step to the next and previous error that was found.
You can also see a list of errors in the cell explorer (see <A HREF="chap04-08.html#chap04-08">Section 4-8</A>).
<P>
<!-- PAGE BREAK --><A NAME="chap09-03-01"></A>
<CENTER><FONT SIZE=6><B>Chapter 9: Tools</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap09-02-05.html#chap09-02-05.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>9-3-1: Well and Substrate Checking</H2></CENTER></TD>
<TD><CENTER><A HREF="chap09-03-02.html#chap09-03-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Tool/ERC/Check Wells -->
<!-- PREFERENCE Tools/Well Check -->
To check the well and substrate layers, use the <B>Check Wells</B> command (in menu <B>Tool / ERC</B>
).
This does a more thorough job of checking the layers than the design-rule checker.
<P>
After analysis is done, you can review the errors by typing "&gt;" to see the next error and "&lt;" to see the previous error.
You can also see the list of errors in the cell explorer
(see <A HREF="chap04-08.html#chap04-08">Section 4-8</A>).
<P>
You can control the Well Checker with the Well Check Preferences
(in menu <B>File / Preferences...</B>, "Tools" section, "Well Check" tab).
<P>
<CENTER><IMG SRC="fig09-15.png" ALT="Figure 9.15"></CENTER>
<P>
The Well Checker makes sure that there are well contacts in every area of well.
The dialog allows you to relax that restriction and demand only 1 well contact in each cell,
or not to check for contacts at all.
<P>
The Well Checker also checks that there is a connection to power and ground in the appropriate places.
You can disable these checks in the "Well Check" dialog.
<P>
An additional well check is to find the farthest distance from a substrate contact to the edge of that area.
This check takes more time to do, and so it can be disabled.
<P>
The Well Checker can check spacing rules between well areas.
Although this is generally the domain of the Design Rule Checker (DRC), it can be requested here by checking
"Check DRC Spacing Rules for Wells".
Since the well checker has not been designed for DRC purposes,
the algorithm is not efficient and therefore the option is off by default.
<P>
Finally, the Well Checker reports the maximum distance from a well contact to any point on the well.
This is useful when making sure that there are sufficient contacts for each area.
<H3>9-3-2: Antenna Rule Checking</H3>
<!-- COMMAND Tool/ERC/Antenna Check -->
<!-- PREFERENCE Tools/Antenna Rules -->
Antenna rules are required by some IC manufacturers to ensure that the transistors of the chip are not destroyed during fabrication.
In such processes, the wafer is bombarded with ions in order to create the polysilicon and metal layers.
These ions must find a path through the wafer (to the substrate and active layers at the bottom).
If there is a large area of poly or metal, and if it connects ONLY to gates of transistors
(not to source or drain or any other active material) then these ions will travel through the transistors.
If the ratio of the poly or metal layers to the area of the transistors is too large, the transistors will be destroyed.
<P>
To check for antenna rule violations, use the <B>Antenna Check</B> command (in menu <B>Tool / ERC</B>
).
After analysis is done, you can review the errors by typing "&gt;" to see the next error and "&lt;" to see the previous error.
You can also see the list of errors in the cell explorer
(see <A HREF="chap04-08.html#chap04-08">Section 4-8</A>).
<P>
<TABLE><TR><TD VALIGN=TOP>
You can control the Antenna Checker with the Antenna Rules Preferences
(in menu <B>File / Preferences...</B>, "Tools" section, "Antenna Rules" tab).
The dialog lets you modify the required ratio of a layer (poly or metal) to the transistor area.
</TD><TD><CENTER><IMG SRC="fig09-24.png" ALT="Figure 9.24"></CENTER></TD></TR></TABLE>
<!-- PAGE BREAK --><A NAME="chap09-04-01"></A>
<CENTER><FONT SIZE=6><B>Chapter 9: Tools</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap09-03-02.html#chap09-03-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>9-4-1: Introduction to Simulation</H2></CENTER></TD>
<TD><CENTER><A HREF="chap09-04-02.html#chap09-04-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Tool/Simulation (Others)/Write ArchSim Deck... -->
<!-- COMMAND Tool/Simulation (Others)/Display ArchSim Journal... -->
<!-- COMMAND Tool/Simulation (Spice)/Write CDL Deck... -->
<!-- COMMAND Tool/Simulation (Others)/Write COSMOS Deck... -->
<!-- COMMAND Tool/Simulation (Others)/Write ESIM/RNL Deck... -->
<!-- COMMAND Tool/Simulation (Others)/Write Maxwell Deck... -->
<!-- COMMAND Tool/Simulation (Others)/Write MOSSIM Deck... -->
<!-- COMMAND Tool/Simulation (Others)/Write PAL Deck... -->
<!-- COMMAND Tool/Simulation (Others)/Write RSIM Deck... -->
<!-- COMMAND Tool/Simulation (Others)/Write SILOS Deck... -->
<!-- COMMAND Tool/Simulation (Others)/Write Tegas Deck... -->
Electric has two built-in simulators:
IRSIM (see <A HREF="chap09-05-01.html#chap09-05-01">Section 9-5-1</A>)
and ALS (see <A HREF="chap09-05-02.html#chap09-05-02">Section 9-5-2</A>).
It also can generate decks for many other simulators.
The ability to interface to external simulators is controlled with the
<B>Tool / Simulation (Spice)</B>, <B>Tool / Simulation (Verilog)</B>, and
<B>Tool / Simulation (Others)</B> menus.
<P>
Be aware that the Electric distribution does not come packaged with these external simulators.
You must get your own copy of Spice, Verilog, or any other simulator mentioned here.
<P>
Electric can write netlists for these simulators:
<P>
<CENTER><TABLE BORDER=1 WIDTH="100%">
<TR><TD WIDTH="20%"><B>Simulator</B></TD><TD WIDTH="20%"><B>Level</B></TD><TD WIDTH="60%"><B>Netlist Command</B></TD></TR>
<TR><TD>ArchSim</TD><TD>functional</TD><TD><B>Tool / Simulation (Others) / Write ArchSim Deck...</B></TD></TR>
<TR><TD>CDL</TD><TD>circuit</TD><TD><B>Tool / Simulation (Spice) / Write CDL Deck...</B></TD></TR>
<TR><TD>COSMOS</TD><TD>switch</TD><TD><B>Tool / Simulation (Others) / Write COSMOS Deck...</B></TD></TR>
<TR><TD>ESIM/RNL</TD><TD>switch</TD><TD><B>Tool / Simulation (Others) / Write ESIM/RNL Deck...</B></TD></TR>
<TR><TD>FastHenry</TD><TD>inductance</TD><TD><B>Tool / Simulation (Others) / Write FastHenry Deck...</B></TD></TR>
<TR><TD>IRSIM</TD><TD>switch</TD><TD><B>Tool / Simulation (Others) / Write IRSIM Deck...</B></TD></TR>
<TR><TD>Maxwell</TD><TD>circuit</TD><TD><B>Tool / Simulation (Others) / Write Maxwell Deck...</B></TD></TR>
<TR><TD>MOSSIM</TD><TD>switch</TD><TD><B>Tool / Simulation (Others) / Write MOSSIM Deck...</B></TD></TR>
<TR><TD>PAL</TD><TD>gate</TD><TD><B>Tool / Simulation (Others) / Write PAL Deck...</B></TD></TR>
<TR><TD>RSIM</TD><TD>switch</TD><TD><B>Tool / Simulation (Others) / Write RSIM Deck...</B></TD></TR>
<TR><TD>SILOS</TD><TD>functional</TD><TD><B>Tool / Simulation (Others) / Write SILOS Deck...</B></TD></TR>
<TR><TD>Spice</TD><TD>circuit</TD><TD><B>Tool / Simulation (Spice) / Write Spice Deck...</B></TD></TR>
<TR><TD>Tegas</TD><TD>functional</TD><TD><B>Tool / Simulation (Others) / Write Tegas Deck...</B></TD></TR>
<TR><TD>Verilog</TD><TD>functional</TD><TD><B>Tool / Simulation (Verilog) / Write Verilog Deck...</B></TD></TR>
</TABLE></CENTER>
<P>
For more control of netlist generation, see
<A HREF="chap03-09-03.html#chap03-09-03">Section 3-9-3</A>.
<P>
The ArchSim simulator is a special-purpose experimental simulator.
Output from it can be displayed in a waveform window by using <B>Display ArchSim Journal...</B>
(in menu <B>Tool / Simulation (Others)</B>).
<P>
For more information on Spice, see <A HREF="chap09-04-03.html#chap09-04-03">Section 9-4-3</A>;
for Verilog, see <A HREF="chap09-04-02.html#chap09-04-02">Section 9-4-2</A>;
and for FastHenry, see <A HREF="chap09-04-05.html#chap09-04-05">Section 9-4-5</A>.
<!-- NEED 3in -->
<H3>9-4-2: Verilog</H3>
<!-- COMMAND Tool/Simulation (Verilog)/Write Verilog Deck... -->
<!-- COMMAND Tool/Simulation (Verilog)/Plot Verilog VCD Dump... -->
<!-- COMMAND Tool/Simulation (Verilog)/Plot Verilog for This Cell -->
<!-- COMMAND Tool/Simulation (Verilog)/Set Verilog Wire/Wire -->
<!-- COMMAND Tool/Simulation (Verilog)/Set Verilog Wire/Trireg -->
<!-- COMMAND Tool/Simulation (Verilog)/Set Verilog Wire/Default -->
<!-- COMMAND Tool/Simulation (Verilog)/Transistor Strength/Weak -->
<!-- COMMAND Tool/Simulation (Verilog)/Transistor Strength/Normal -->
<!-- PREFERENCE Tools/Verilog Model Files -->
<!-- PROJECTSETTING Verilog -->
Electric can produce input decks for Verilog simulation with <B>Write Verilog Deck...</B> command
(in menu <B>Tool / Simulation (Verilog)</B>).
After this has been done, you must run Verilog externally to produce a ".dump" file.
Note that the Electric distribution does not come with a Verilog simulator: you must obtain it separately.
<P>
After running a Verilog simulation, you can read the ".dump" file into Electric and display it in a waveform window.
This is done with the <B>Plot Verilog VCD Dump...</B> command (in menu <B>Tool / Simulation (Verilog)</B>).
You can also use the <B>Plot Verilog for This Cell</B> command if the cell name and file name are the same.
The Verilog simulation information is then shown in a digital waveform window
(see <A HREF="chap04-12-01.html#chap04-12-01">Section 4-12-1</A> for more).
<P>
Before generating Verilog decks,
it is possible to annotate circuits with additional Verilog declarations and code that will be included in the deck.
To add Verilog code, select "Verilog Code" under the "Misc." entry in the component menu of the side bar.
To add a Verilog declaration, select "Verilog Declaration" under the "Misc." entry in the component menu.
These pieces of text can be manipulated like any other text object
(see <A HREF="chap06-08-01.html#chap06-08-01">Section 6-8-1</A> on text).
For an example of Verilog layout and code, look at the cell "tool-SimulateVERILOG" in the Samples library
(get this library with the <B>Sample Cells</B> command, in menu <B>Help / Load Built-in Libraries</B>).
<P>
<TABLE><TR><TD>
Additional control of Verilog deck generation is accomplished with the
Verilog Project Settings (in menu <B>File / Project Settings...</B>, "Verilog" tab).
A checkbox lets you choose whether or not to use the Verilog "assign" construct.
You can control the type of Verilog declaration that will be used for wires ("wire" by default, "trireg" if checked).
Note that this can be overridden with the <B>Set Verilog Wire</B> command (in menu <B>Tool / Simulation (Verilog)</B>).
<P>
Another properety that can be assigned to transistors is their strength.
The <B>Weak</B> command (in menu <B>Tool / Simulation (Verilog) / Transistor Strength</B>)
sets the transistor to be weak.
The <B>Normal</B> command restores the transistor to be normal strength.
</TD><TD><CENTER><IMG SRC="fig09-07.png" ALT="Figure 9.7"></CENTER></TD></TR></TABLE>
<P>
<TABLE><TR><TD>
Additional Verilog settings can be found in the Verilog Model Files Preferences
(in menu <B>File / Preferences...</B>, "Tools" section, "Verilog Model Files" tab).
<P>
For the difference between Preferences and Project Settings, see
<A HREF="chap06-03.html#chap06-03">Section 6-3</A>.
</TD><TD><CENTER><IMG SRC="fig09-39.png" ALT="Figure 9.39"></CENTER></TD></TR></TABLE>
<P>
The Verilog Model Files Preferences dialog lets you attach disk files with Verilog code to any cell in the library.
Once attached, the generated Verilog will use the contents of that file instead of examining the cell contents.
This allows you to create your own definitions in situations where the derived Verilog would be too complex or otherwise incorrect.
<H3>9-4-3: Spice</H3>
<!-- COMMAND Tool/Simulation (Spice)/Write Spice Deck... -->
<!-- COMMAND Tool/Simulation (Spice)/Plot Spice Listing... -->
<!-- COMMAND Tool/Simulation (Spice)/Plot Spice for This Cell -->
<!-- COMMAND Tool/Simulation (Spice)/Add Multiplier -->
<!-- COMMAND Tool/Simulation (Spice)/Set Spice Model... -->
<!-- PREFERENCE Tools/Spice -->
<!-- PREFERENCE Tools/Spice Model Files -->
Electric can produce input decks for Spice simulation with <B>Write Spice Deck...</B> command
(in menu <B>Tool / Simulation (Spice)</B>).
After this has been done, you must run Spice externally to produce a simulation output file.
Note that the Electric distribution does not come with a Spice simulator: you must obtain it separately.
<P>
Once Spice has been run,
you can see a plot of the simulation by reading the Spice output file back into Electric.
Since there are may formats of Spice output, you must first set the "Spice Engine" and the "Output format" fields of the
Spice Preferences (in menu <B>File / Preferences...</B>, "Tools" section, "Spice" tab).
The "Output format" field is "Standard" for the default output of the Spice engine; "Raw" for rawfile dumps;
and "Raw/Smart" for the rawfile dumps from SmartSpice.
<P>
When Electric knows what type of Spice output file to expect, use the <B>Plot Spice Listing...</B>
command (in menu <B>Tool / Simulation (Spice)</B>) to read the file.
If the file has the same name as the current cell, you can more simply use <B>Plot Spice for This Cell</B>,
which does not need to prompt for a file name.
The Spice simulation information is shown in an analog waveform window
(see <A HREF="chap04-12-02.html#chap04-12-02">Section 4-12-2</A> for more).
<P>
There are many powerful facilities for running Spice with Electric.
The example shown here illustrates some of these facilities.
This example is available in the Samples library as cell "tool-SimulateSpice"
(you can read the library with the <B>Sample Cells</B> command, in menu <B>Help / Load Built-in Libraries</B>).
<P>
<TABLE><TR><TD>
All input values to Spice are controlled with special nodes,
found in the "Spice" component menu entry.
Note that the first time any Spice node is placed, the library of Spice parts is loaded into Electric,
so there may be a delay.
</TD><TD><CENTER><IMG SRC="fig09-30.png" ALT="Figure 9.30"></CENTER></TD></TR></TABLE>
<P>
The Spice primitives described here are for Electric's default set.
However, additional sets can (and have) been written.
To choose another set, use the
Spice Preferences (in menu <B>File / Preferences...</B>, "Tools" section, "Spice" tab).
Under the setting "Spice primitive set", choose another set.
A second set, called "SpicePartsS3", is tailored towards special Spice3 primitives.
<P>
<TABLE><TR>
<TD><CENTER><IMG SRC="fig09-08.png" ALT="Figure 9.8"></CENTER></TD><TD>
In this example, there is a 5-volt supply on the left.
It was created by using the "DC Voltage" entry under "Spice" entry of the component menu.
Once placed, the text that reads "Voltage=0V" can be selected and modified
(either with <B>Object Properties...</B> or by double-clicking on it).
The Pulse input signal on the right is created with the "Pulse" entry under "Spice" (it has 7 parameters).
<P>
There are both voltage and current sources, in AC and DC form.
There is a piecewise-linear (PWL) source, and two pulses (voltage and current).
A set of "two-gate" devices are also available: "CCCS", "CCVS", "VCCS", "VCVS",
and "Transmission".
<P>
It is possible to specify Transient, DC, or AC analysis by using the "Transient Analysis",
"DC Analysis", and "AC Analysis" subcommands.
Only one such element may exist in a circuit.
</TD></TR></TABLE>
<P>
For advanced users, there are two special Spice nodes: "Node Set" and "Extension".
The Node Set may be parameterized with an arbitrary piece of Spice code.
Truly advanced users may create their own Spice nodes by modifying the cells in the Spice library
(see <A HREF="chap09-04-04.html#chap09-04-04">next Section</A>).
<P>
This example also shows the ability to add arbitrary text to the Spice deck, as shown in the lower-right.
To create this text, use the "Spice Code" or "Spice Declaration" entries under the "Misc." button in the component menu.
These command create text that can be modified arbitrarily.
Whatever the text says will be added to the Spice deck (declarations go near the top).
<P>
Another option that can be used when modeling transistors and other component is to set a specific Spice model to use for that component.
To set a node's model, select it and use the <B>Set Spice Model...</B> command (in menu <B>Tool / Simulation (Spice)</B>).
<P>
The <B>Add Multiplier</B> subcommand places a multiplier on the currently selected node.
Multipliers (also called "M" factors) scale the size of transistors inside of them.
<P>
<!-- NEED 7in -->
Some nongraphical information can also be given to the Spice simulator with the
Spice Preferences (in menu <B>File / Preferences...</B>, "Tools" section, "Spice" tab).
<P>
<CENTER><IMG SRC="fig09-03.png" ALT="Figure 9.3"></CENTER>
<P>
The top part of this dialog allows you to control many of the Spice deck parameters such as:
<UL>
<LI><B>Spice Engine</B> Can be Spice 2, Spice 3, HSpice, PSpice, Gnucap, or SmartSpice.</LI>
<LI><B>Spice Level</B> Can be 1, 2, or 3.</LI>
<LI><B>Output format</B> The format to expect when reading Spice output.</LI>
<LI><B>Use Parasitics</B> Whether to include simple parasitics in the deck.</LI>
<LI><B>Use Node Names</B> Whether to use actual node names in the deck (Spice 2 can only handle numbers).</LI>
<LI><B>Force Global VDD/GND</B> Whether to force power and ground to be global signal names.</LI>
<LI><B>Use Cell Parameters</B> When set, any parameters defined on the cell will appear in the Spice deck.
When not checked, each parameterized cell appears multiple times in the deck,
once for each different parameter combination.
See <A HREF="chap06-08-06.html#chap06-08-06">Section 6-8-6</A> for more on parameters.
<LI><B>Write Trans Sizes in Units</B> Requests that the Spice deck contain scalable size information
instead of absolute size information.</LI>
<LI><B>Write Subckt for Top Cell</B> Requests that a the top-level cell be written
as a subcircuit, and a call made to it.
The default is to write the top-level cell without a subcircuit wrapper.</LI>
<LI><B>Run Program</B> Lets Electric run Spice automatically after the deck has been written.</LI>
<LI><B>Spice Primitive Set</B> Switches between Spice primitive sets.
Currently there are only two: "spiceparts" and "spicepartsG3".</LI>
</UL>
<P>
<B>Running Spice:</B> Electric can create an external process as specified by the user to
run Spice on the generated netlist.  If the pull-down box is set to "Don't Run", nothing is done.
If the pull-down box is set to "Run, Ignore Output", the external process is run, and the user is
notified when it is finished.  If set to "Run, Report Output", a dialog box is opened to show
the user the output produced by the process.  Please note that this is a *process*, and not a
command line command.
<P>
There are several options for the process:
<UL>
<LI><B>Use Dir</B> if specified, this is the working directory of the process.</LI>
<LI><B>Overwrite existing file</B> this will overwrite the existing netlist without prompting the user.</LI>
<LI><B>Run probe</B> this will run the waveform viewer on the output of the Spice run.</LI>
<LI><B>Help</B> tells which environment variables are exported to be used by the process.</LI>
<LI><B>Run program</B> the name of the executable to run.</LI>
<LI><B>with arg</B> the arguments passed to the executable.</LI>
</UL>
<P>
The lower section controls header and trailer cards
(placed at the start and end of the Spice deck).
This dialog allows you to specify a disk file with cards to be used instead of the built-in set.
You can specify a particular file or request that the system search for files with the cell's name and a given extension.
<P>
Note that the header and trailer information is specific to a particular technology.
If you set this information for one technology, but then use another technology when generating the Spice deck,
the information that you set will not be used.
Note also that schematics, although a technology in Electric, are not considered to be Spice technology.
You can set the proper layout technology that you want to use when dealing with schematics by using the
"Layout technology to use for schematics" popup.
This popup can be found in the
Technology Project Settings (in menu <B>File / Project Settings...</B>, "Technology" tab,
see <A HREF="chap07-01-02.html#chap07-01-02">Section 7-1-2</A>).
<P>
<CENTER><IMG SRC="fig09-11.png" ALT="Figure 9.11"></CENTER>
<P>
Another set of controls can be found in the Spice Model Files Preferences
(in menu <B>File / Preferences...</B>, "Tools" section, "Spice Model Files" tab).
This dialog allows you to specify a disk file of Spice cards that will be used to describe any cell.
Instead of the cell subcircuit, the specified disk file is "included" in the deck.
<!-- need 5IN -->
<H3>9-4-4: Spice and Verilog Primitives</H3>
<!-- COMMAND Tool/Simulation (Spice)/Set Generic Spice Template -->
<!-- COMMAND Tool/Simulation (Spice)/Set Spice 2 Template -->
<!-- COMMAND Tool/Simulation (Spice)/Set Spice 3 Template -->
<!-- COMMAND Tool/Simulation (Spice)/Set HSpice Template -->
<!-- COMMAND Tool/Simulation (Spice)/Set PSpice Template -->
<!-- COMMAND Tool/Simulation (Spice)/Set GnuCap Template -->
<!-- COMMAND Tool/Simulation (Spice)/Set SmartSpice Template -->
<!-- COMMAND Tool/Simulation (Verilog)/Set Verilog Template -->
For both Spice and Verilog, you can create special nodes that augment the genetated deck.
Spice even has a predefined set of primitives, available from the "Spice" entry in the component menu.
<P>
Users can define their own Spice or Verilog elements by creating new icons in this or a new library.
The icon should have graphics, exports, optional parameters, and a template.
Parameters are created with the <B>Attribute Properties...</B> command (in menu <B>Edit / Attributes</B>
).
See <A HREF="chap06-08-06.html#chap06-08-06">Section 6-8-6</A> for more on parameters.
The Spice template is created with the <B>Set Generic Spice Template</B> command (in menu <B>Tool / Simulation (Spice)</B>).
If the template is specific to a particular version of Spice, use the appropriate template command
(<B>Set Spice 2 Template</B>, <B>Set Spice 3 Template</B>, <B>Set HSpice Template</B>, <B>Set PSpice Template</B>,
<B>Set GnuCap Template</B>, or <B>Set SmartSpice Template</B>).
<P>
You can also create Verilog elements by using the <B>Set Verilog Template</B> command (in menu <B>Tool / Simulation (Verilog)</B>).
Note that a single cell can contain both Verilog and multiple Spice templates.
<P>
<TABLE><TR><TD>
To explain the format of a template, a DC Voltage Source primitive is used as an example.
Graphics is placed to describe the look of the symbol (a "battery" look).
Exports are created at the top and bottom of the battery with the names "plus" and "minus".
A single parameter is defined called "Voltage" with a default value of "0V".
Finally, a Spice template is created that has the string
:
</TD><TD><CENTER><IMG SRC="fig09-23.png" ALT="Figure 9.23"></CENTER></TD></TR></TABLE>
<BR><CODE>V$(node_name) $(plus) $(minus) DC $(Voltage)</CODE>
<P>
This string contains substitution expressions of the form <CODE>$(SOMETHING)</CODE>
where <CODE>SOMETHING</CODE> can be an export name, a variable, or "node_name".
So, in this example, <CODE>$(node_name)</CODE> will be replaced with the name of the voltage node;
<CODE>$(plus)</CODE> will be replaced with the net name attached to the positive terminal;
<CODE>$(minus)</CODE> will be replaced with the net name attached to the negative terminal;
and <CODE>$(Voltage)</CODE> will be replaced with the voltage value specified by the user.
<P>
The set of Spice primitives in Electric is useful, but far from complete.
A second set, called "SpicePartsS3", is tailored towards special Spice3 primitives.
There are no Verilog primitives in the current release of Electric.
Users who define new primitives are encouraged to share these with the entire community by contacting
<A HREF="mailto:info@staticfreesoft.com">Static Free Software</A>.
<!-- NEED 5in -->
<H3>9-4-5: FastHenry</H3>
<!-- COMMAND Tool/Simulation (Others)/Write FastHenry Deck... -->
<!-- COMMAND Tool/Simulation (Others)/FastHenry Arc Properties... -->
<!-- PREFERENCE Tools/Fast Henry -->
FastHenry is an inductance analysis tool (see the papers of <A HREF="http://rleweb.mit.edu/rlestaff/p-whit.htm">Jacob White</A>).
When a FastHenry deck is generated, a subset of the arcs in the current cell are written.
To include an arc in the FastHenry deck,
select it and use the <B>FastHenry Arc Properties...</B> command (in menu <B>Tools / Simulation (Others)</B>).
<TABLE><TR><TD>
This command presents a dialog with FastHenry factors for the selected arc.
The most important factor is at the top: "Include this arc in FastHenry analysis".
By checking this, the arc is described in the FastHenry deck.
Once this is checked, other fields in the dialog become active.
You can set the thickness of this arc (the default value shown will be used if no override is specified).
You can set the number of subdivisions that will be used in height and width (again,
defaults are shown).
You can even set the height of the two ends of the arc.
</TD><TD><CENTER><IMG SRC="fig09-06.png" ALT="Figure 9.6"></CENTER></TD></TR></TABLE>
<P>
Arcs can be partitioned into different groups.
Click the "New Group" button to define a group.
After that, arcs can be assigned to one or more groups.
<P>
<!-- NEED 5in -->
After all arcs have been marked, generate a FastHenry deck with the <B>Write FastHenry Deck...</B>
command (in menu <B>Tools / Simulation (Others)</B>).
Before doing that, however, you can set other options for FastHenry deck generation.
To do this, use the
FastHenry Preferences (in menu <B>File / Preferences...</B>, "Tools" section, "FastHenry" tab).
<P>
<CENTER><IMG SRC="fig09-02.png" ALT="Figure 9.2"></CENTER>
<P>
This dialog allows you to set the type of frequency analysis
(single frequency or a sequence specified by a start, end, and number of runs per decade).
You can choose to use single or multiple-pole analysis
(and if multiple, you can specify the number of poles).
The FastHenry Preferences dialog also allows you to set defaults for the individual arcs that will be included in the deck.
You can specify the default thickness, and the default number of subdivisions (in height and width).
<!-- PAGE BREAK --><A NAME="chap09-05-01"></A>
<CENTER><FONT SIZE=6><B>Chapter 9: Tools</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap09-04-05.html#chap09-04-05.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>9-5-1: IRSIM</H2></CENTER></TD>
<TD><CENTER><A HREF="chap09-05-02.html#chap09-05-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Tool/Simulation (Built-in)/IRSIM: Simulate Current Cell -->
<!-- COMMAND Tool/Simulation (Built-in)/IRSIM: Write Deck... -->
<!-- COMMAND Tool/Simulation (Built-in)/IRSIM: Simulate Deck... -->
<!-- PREFERENCE Tools/Simulators -->
Electric has a built-in simulator, Stanford's IRSIM, which uses RC models
to accurately simulate transistors at a gate-level.
IRSIM is not packaged with the standard Electric distribution.
To obtain it, you must get the additional "plugin" JAR file from
<A HREF="http://www.staticfreesoft.com">Static Free Software</A>
(see <A HREF="chap01-05.html#chap01-05">Section 1-5</A> for instructions on installing plugins).
<P>
To simulate the current cell with IRSIM, use the <B>IRSIM: Simulate Current Cell</B>
command (in menu <B>Tool / Simulation (Built-in)</B>).
After issuing this command, a waveform window will appear to control the simulation
(see <A HREF="chap04-12-01.html#chap04-12-01">Section 4-12-1</A> for more).
To generate an input deck for IRSIM without running the simulator, use the
<B>IRSIM: Write Deck...</B> command.
To simulate an IRSIM deck (that is, simulate the file, not the circuit), use the
<B>IRSIM: Simulate Deck...</B> command.
Note: if these commands do not appear in the menu, then IRSIM has not been installed.
<P>
Since the IRSIM engine is running inside of Electric, you can place stimuli on the circuit
and see the results immediately
(also described in <A HREF="chap04-12-01.html#chap04-12-01">Section 4-12-1</A>).
Note that the command to save stimuli
(<B>Save Stimuli to Disk...</B> of menu <B>Tool / Simulation (Built-in)</B>)
writes an IRSIM "command file" which can be edited by hand.
<P>
<TABLE><TR><TD>
The Simulators Preferences (in menu <B>File / Preferences...</B>, "Tools" section, "Simulators" tab),
offers some controls for IRSIM.
The general controls at the top are discussed in <A HREF="chap04-12-01.html#chap04-12-01">Section 4-12-1</A>.
<P>
IRSIM uses a parameter file to describe timing and parasitic information.
Two of these files come packaged with Electric ("scmos0.3.prm" and "scmos1.0.prm"),
but you can create your own and tell IRSIM to use it.
In addition to the parameter file, you can select the simulation model that IRSIM uses.
The default is a RC model, but a Linear model is also available.
<P>
Advanced users who edit their own command files may enter specialized IRSIM debugging
commands.
These commands depend on a set of flags to determine the type of debugging to do.
Checkboxes in the "IRSIM Debugging" section control these debugging flags.
</TD><TD><CENTER><IMG SRC="fig09-38.png" ALT="Figure 9.38"></CENTER></TD></TR></TABLE>
<P>
The bottom section has two miscellaneous IRSIM controls.
<UL>
<LI>"Show IRSIM commands" requests that the system display the command file instructions as they
are applied during simulation.</LI>
<LI>"Use Delayed X propagation" does less conservative,
but potentially more accurate calculation of the time required to propagate an
undefined (X) value in the circuit.
This improved propagation delay calculation has been shown to be effective in asynchronous
circuits.</LI>
</UL>
<!-- NEED 4in -->
<H3>9-5-2: ALS</H3>
<!-- COMMAND Tool/Simulation (Built-in)/ALS: Simulate Current Cell -->
Electric has a built-in gate-level simulator called ALS that can simulate schematics,
IC layout, or VHDL descriptions.
The simulator already knows about MOS transistors and some digital logic gates.
It can be augmented with functional descriptions of any circuit
using the hardware description language described later in this section.
<P>
For an example of ALS simulation, load the "samples" library and simulate the cell "tool-SimulateALS{sch}".
You can load the samples library with the <B>Sample Cells</B> command (in menu <B>Help / Load Built-in Libraries</B>).
<P>
To begin simulation of the circuit in the current window,
use the <B>ALS: Simulate This Cell</B> command (from menu <B>Tools / Simulation (Built-in)</B>).
After issuing this command, a waveform window will appear to control the simulation
(see <A HREF="chap04-12-01.html#chap04-12-01">Section 4-12-1</A> for more).
Since the ALS engine is running inside of Electric,
you can place stimuli on the circuit and see the results immediately.
<P>
ALS is able to handle transistors with varying strength.
To set a transistor to be weak, use the <B>Weak</B> command
(in menu <B>Tool / Simulation (Verilog) / Transistor Strength</B>).
To restore the strength to normal, use the <B>Normal</B> command.
Note that this must be done before simulation begins.
<P>
<H3>Preferences</H3>
<P>
The Simulators Preferences (in menu <B>File / Preferences...</B>, "Tools" section, "Simulators" tab)
has some controls that affect ALS simulation.
The "Multistate display" check tells the simulator to show waveform signals
with different colors to indicate different strengths.
Without this, a single color is used everywhere.
The other general controls at the top are discussed in <A HREF="chap04-12-01.html#chap04-12-01">Section 4-12-1</A>.
<!-- NEED 4in -->
<H3>9-5-3: ALS Concepts</H3>
<TABLE><TR><TD>
The user should be aware that the ALS simulator translates the circuit into VHDL,
then compiles the VHDL into a netlist for simulation.
This means that when a layout or schematic is simulated, two new views of that cell are created:
{VHDL} and {net.als}.
Use the <B>Edit VHDL View</B> (in menu <B>View</B>) to see the VHDL code.
</TD><TD><CENTER><IMG SRC="fig09-32.png" ALT="Figure 9.32"></CENTER></TD></TR></TABLE>
<P>
When simulation is requested, the cell in the current window is simulated.
Date checking is performed to determine whether VHDL translation or netlist compilation is necessary.
If you are currently editing a VHDL cell, it will not be regenerated from layout,
even if the layout is more recent.
Similarly, if you are currently editing a netlist cell, it will not be regenerated from VHDL,
even if that VHDL is more recent.
Thus, simulation of the currently edited cell is guaranteed.
<P>
Note that the presence of VHDL in the path to simulation means that it can simulate VHDL that is entered manually.
You can type this VHDL directly into the cell
(see <A HREF="chap04-10.html#chap04-10">Section 4-10</A> for more on text editing).
Also, you can explicitly request that VHDL be produced from schematics or layout with the
<B>Make VHDL View</B> command (in menu <B>View</B>).
<P>
This complete VHDL capability, combined with the Silicon Compiler which places and routes from VHDL descriptions,
gives Electric a powerful facility for creating,
testing, and constructing complex circuits from high-level specifications.
See <A HREF="chap09-12.html#chap09-12">Section 9-12</A> for more on the Silicon Compiler.
<P>
<h3>Behavioral Models</H3>
<P>
When the VHDL for a circuit is compiled into a netlist, both connectivity and behavior are included.
This is because the netlist format is hierarchical,
and at the bottom of the hierarchy are behavioral primitives.
Electric knows the behavioral primitives for MOS transistors, AND, OR, NAND, NOR, Inverter, and XOR gates.
Other primitives can be defined by the user, and all of the existing primitives can be redefined.
<P>
To create (or redefine) a primitive's behavior, simply create the {net.als}
view of the cell with that primitive's name.
Use the <B>New Cell...</B> command (in menu <B>Cell</B>) and select the "netlist.als" view.
For example, to define the behavior of an ALU cell, edit "alu{net.als}",
and to redefine the behavior of a two-input And gate, edit "and2{net.als}".
The compiler copies these textual cells into the netlist description whenever that node is referenced in the VHDL.
<P>
The netlist format provides three different types of entities:
<I>model</I>, <I>gate</I>, and <I>function</I>.
The model entity describes interconnectivity between other entities.
It describes the hierarchy and the topology.
The gate and function entities are at the primitive level.
The gate uses a truth-table and the function makes reference to Java-coded behavior
(which must be compiled into Electric, see the module "com.sun.electric.tool.simulation.als.UserCom.java").
Both primitive entities also allow the specification of operational parameters such as switching speed,
capacitive loading and propagation delay.
(The simulator determines the capacitive load, and thus the event switching delay,
of each node of the system by considering the capacitive load of each primitive connected to a
node as well as taking into account feedback paths to the node.)
<P>
<!-- NEED 3in -->
A sample netlist describing an RS latch model is shown below.
Note that the "#" character starts a comment.
<P>
<CENTER><TABLE><TR><TD WIDTH="48%"><CENTER><IMG SRC="fig09-33.png" ALT="Figure 9.33"></CENTER></TD>
<TD WIDTH="2%">&nbsp;&nbsp;&nbsp;</TD>
<TD WIDTH="50%">
<CODE>
# model declaration for the figure
<BR>
model main(set, reset, q, q_bar)
<BR>
inst1: nor2(reset, q_bar, q)
<BR>
inst2: nor2(q, set, q_bar)
<BR>
<BR>
# gate description of nor2
<BR>
gate nor2(in1, in2, out)
<BR>
t: delta=4.5e-9 + linear=5.0e-10
<BR>
i: in1=L in2=L   o: out=H@2
<BR>
i: in1=H         o: out=L@2
<BR>
i: in2=H         o: out=L@2
<BR>
i:               o: out=X@2
<BR>
</CODE>
</TD></TR></TABLE></CENTER>
<P>
When combined, these entities represent a complete description of the circuit.
Note that when a gate, function, or other model is referenced within a model description,
there is a one-to-one correspondence between the signal names listed at the calling site
and the signal names contained in the header of the called entity.
<P>
<h3>Simulator Internals</H3>
<P>
The ALS simulator simulates a set of <I>simulation nodes</I>.
A simulation node is a connection point which may have one or more <I>signals</I> associated with it.
<P>
A simulation node can have 3 values (L, H, or X)
and can have 4 strengths (off, node, gate, and VDD, in order of increasing strength).
It is thus a 12-state simulator.
In deciding the state of a simulation node at a particular time of the simulation,
the simulator considers the states and strengths of all inputs driving the node.
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig09-34.png" ALT="Figure 9.34"></CENTER></TD><TD>
Driving inputs may be from other simulation nodes, in which case the driving strength is "gate"
(i.e. H(gate) indicates a logic HIGH state with gate driving strength),
from a power or ground supply ("VDD" strength) or from the user (any strength).
If no user vector has been input at the current simulation time, then the input defaults to the "off" strength.
</TD></TR></TABLE>
<P>
In the above example,
the combination of a high and a low driving input at the same strength from the signals "out" and "in2"
result in the simulation algorithm assigning the X (undefined) state to the output signal represented by "q".
This example also shows the behavior of part of the simulation engine's <I>arbitration algorithm</I>,
which dictates that an undefined state exists if a simulator node is being driven by signals with the same strength but different states,
providing that the strength of the driving signals in conflict is the highest state driving the node.
<P>
Another important concept for the user to remember is that the simulator is an <I>event-driven</I> simulator.
When a simulation node changes state,
the simulation engine looks through the netlist for other nodes that could potentially change state.
Obviously, only simulation nodes joined by model, gate or function entities can potentially change state.
If a state change, or event, is required
(based on the definition of the inter-nodal behavior as given by the model, gate or function definition),
the event is added to the list of events scheduled to occur later in the simulation.
When the event time is reached and the event is fired,
the simulator must again search the database for other simulation nodes which may potentially change state.
This process continues until it has propagated across all possible nodes and events.
<!-- NEED 4in -->
<H3>9-5-4: ALS Gates</H3>
The gate entity is the primary method of specifying behavior.
It uses a truth-table to define the operational characteristics of a logic gate.
Many behavioral descriptions need contain only a gate entity to be complete.
<P>
The gate entity is headed by the <B>gate</B> declaration statement and is followed by a body of information.
The gate declaration contains a name and a list of exported simulation nodes
(which are referenced in a higher level model description).
The format of this statement is shown below:
<P>
<CENTER><TABLE WIDTH="80%">
<TR><TD WIDTH="30%"><B>Format:</B></TD><TD WIDTH="70%">gate <I>name</I>(<I>signal1</I>, <I>signal2</I>,
<I>signal3</I>, ... <I>signalN</I>)</TD></TR>
<TR><TD><B>Example:</B></TD><TD>gate nor2(in1, in2, out) </TD></TR>
<TR><TD></TD><TD>gate and3(a, b, c, output) </TD></TR>
</TABLE></CENTER>
<P>
There is no limit on the number of signal names that can be placed in the list.
If there is not enough room on a single line to accommodate all the names,
simply continue the list on the next line.
<P>
<H3>The i: and o: Statements (Input and Output)</H3>
<P>
The <B>i:</B> and <B>o:</B> statements are used to construct a logical truth table for a gate primitive.
The signal names and logical assertions which follow the <B>i:</B>
statement represent one of many possible input conditions.
If the logic states of all the input signals match the conditions specified in the <B>i:</B> statement,
the simulator will schedule the outputs for updating (as specified in the corresponding <B>o:</B> statement).
The logical truth table for a two input AND gate is shown below:
<P><CODE>
&nbsp;&nbsp;&nbsp;gate and2(in1, in2, output)
<BR>
&nbsp;&nbsp;&nbsp;i: in1=H in2=H  o: output=H
<BR>
&nbsp;&nbsp;&nbsp;i: in1=L        o: output=L
<BR>
&nbsp;&nbsp;&nbsp;i: in2=L        o: output=L
<BR>
&nbsp;&nbsp;&nbsp;i:              o: output=X
</CODE>
<P>
The last line of the truth table represents a default condition in the event that none
of the previous conditions are valid
(e.g. in1=H and in2=X).
It should be noted that the simulator examines the input conditions in the order that they appear in the truth table.
If a valid input condition is found,
the simulator schedules the corresponding output assignments and terminates the truth table search immediately.
<P>
<H3>Signal References in the i: Statement</H3>
<P>
Besides testing the logical values of a signal, the <B>i:</B> statement can also compare them numerically.
The format of a signal references, which follow the <B>i:</B> statement, is show below:
<P>
<CENTER><TABLE WIDTH="80%">
<TR><TD WIDTH="30%"><B>Format:</B></TD><TD WIDTH="70%"><I>signal</I> &lt;operator&gt; <I>state_value</I></TD></TR>
<TR><TD><B>or:</B></TD><TD><I>signal</I> &lt;operator&gt; <I>other_signal</I></TD></TR>
<TR><TD><B>Operators:</B></TD><TD>=  Test if equal</TD></TR>
<TR><TD></TD><TD>!  Test if not equal</TD></TR>
<TR><TD></TD><TD>&lt;  Test if less than</TD></TR>
<TR><TD></TD><TD>&gt;  Test if greater than</TD></TR>
<TR><TD><B>Example:</B></TD><TD>node1 = H</TD></TR>
<TR><TD></TD><TD>input1 ! input2</TD></TR>
<TR><TD></TD><TD>node3 &lt; 16</TD></TR>
</TABLE></CENTER>
<P>
There is no limit on the number of signal tests that can follow an <B>i:</B> statement.
If there is not enough room on a single line to accommodate all the test conditions,
the user can continue the list on the next line of the netlist.
<P>
<H3>Signal References in the o: Statement</H3>
<P>
The signal references which follow the <B>o:</B> statement are used as registers for mathematical operations.
It is possible to set a signal to a logic state and it is possible to perform mathematical operations on its contents.
The format for signal references which follow the <B>o:</B> statement is shown below:
<P>
<CENTER><TABLE WIDTH="80%">
<TR><TD WIDTH="30%"><B>Format:</B></TD><TD WIDTH="70%"><I>signal</I> [ &lt;operator&gt; <I>operand</I> [ @ &lt;strength&gt; ] ]</TD></TR>
<TR><TD><B>Operators:</B></TD><TD>=  equate signal to value of operand</TD></TR>
<TR><TD></TD><TD>+  increment signal by value of operand</TD></TR>
<TR><TD></TD><TD>-  decrement signal by value of operand</TD></TR>
<TR><TD></TD><TD>*  multiply signal by value of operand</TD></TR>
<TR><TD></TD><TD>/  divide signal by value of operand</TD></TR>
<TR><TD></TD><TD>%  modulo signal by value of operand</TD></TR>
<TR><TD><B>Strengths:</B></TD><TD>0  off</TD></TR>
<TR><TD></TD><TD>1  node</TD></TR>
<TR><TD></TD><TD>2  gate</TD></TR>
<TR><TD></TD><TD>3  VDD</TD></TR>
<TR><TD><B>Example:</B></TD><TD>qbar = H@3</TD></TR>
<TR><TD></TD><TD>out1 + 3</TD></TR>
<TR><TD></TD><TD>out + out1@4</TD></TR>
<TR><TD></TD><TD>node1 % modulus_node</TD></TR>
</TABLE></CENTER>
<P>
It should be noted that the logic state of the operand can be directly specified
(such as H, 3) or it can be indirectly addressed through a signal name (such as out1, modulus_node).
In the indirect addressing case,
the value of the signal specified as the operand is used in the mathematical calculations.
The strength declaration is optional and if it is omitted,
a default strength of 2 (gate) is assigned to the output signal.
<P>
<H3>The t: Statement (Time Delay)</H3>
<P>
The propagation delay time (switching speed) of a gate can be set with the <B>t:</B> statement.
The format of this statement is shown below:
<P>
<CENTER><TABLE WIDTH="80%">
<TR><TD WIDTH="30%"><B>Format:</B></TD><TD WIDTH="70%">t: &lt;mode&gt; = <I>value</I> { + &lt;mode&gt; = <I>value</I> ... }</TD></TR>
<TR><TD><B>Mode:</B></TD><TD>delta: fixed time delay in seconds</TD></TR>
<TR><TD></TD><TD>linear: random time delay with uniform distribution</TD></TR>
<TR><TD></TD><TD>random: probability function with values between 0 and 1.0</TD></TR>
<TR><TD><B>Example:</B></TD><TD>t: delta=5.0e-9</TD></TR>
<TR><TD></TD><TD>t: delta=1.0e-9 + random=0.2</TD></TR>
</TABLE></CENTER>
<P>
It is possible to combine multiple timing distributions by using the + operator between timing mode declarations.
The timing values quoted in the statement should represent the situation where the gate is driving a single unit load
(e.g. a minimum size inverter input).
<P>
The <B>t:</B> statement sets the timing parameters for each row in the truth table
(<B>i:</B> and <B>o:</B> statement pair) that follows in the gate description.
It is possible to set different rise and fall times for a gate by using more than one <B>t:</B>
statement in the gate description.
Assuming that a 2 input NAND gate had timing characteristics of <I>t(lh)</I> = 1.0 nanoseconds and
<I>t(hl)</I> = 3.0 nanoseconds,
the gate description for the device would be as follows:
<P><CODE>
&nbsp;&nbsp;&nbsp;gate nand2(in1, in2, output)
<BR>
&nbsp;&nbsp;&nbsp;t: delta=3.0e-9
<BR>
&nbsp;&nbsp;&nbsp;i: in1=H in2=H   o: output=L
<BR>
&nbsp;&nbsp;&nbsp;t: delta=1.0e-9
<BR>
&nbsp;&nbsp;&nbsp;i: in1=L         o: output=H
<BR>
&nbsp;&nbsp;&nbsp;i: in2=L         o: output=H
</CODE><P>
This example shows that when both inputs are high,
the output will go low after a delay of 3.0 nanoseconds and that if either input is low,
the output will go high after a delay of 1.0 nanosecond.
<P>
<H3>The Delta Timing Distribution of the t: Statement</H3>
<P>
The Delta timing distribution is used to specify a fixed, non-random delay.
The format of a delta timing declaration is shown below:
<P>
<CENTER><TABLE WIDTH="80%">
<TR><TD WIDTH="30%"><B>Format:</B></TD><TD WIDTH="70%">delta = <I>value</I></TD></TR>
<TR><TD><B>Example:</B></TD><TD>delta = 1.0</TD></TR>
<TR><TD></TD><TD>delta = 2.5e-9</TD></TR>
</TABLE></CENTER>
<P>
The value associated with the delta declaration represents the fixed time delay in seconds
(1.0 = 1 second, 2.5e-9 = 2.5 nanoseconds, etc.)
<P>
<H3>The Linear Timing Distribution of the t: Statement</H3>
<P>
The Linear timing distribution is used to specify a random delay period that has a uniform probability distribution.
The format of a linear timing declaration is shown below:
<P>
<CENTER><TABLE WIDTH="80%">
<TR><TD WIDTH="30%"><B>Format:</B></TD><TD WIDTH="70%">linear = <I>value</I></TD></TR>
<TR><TD><B>Example:</B></TD><TD>linear = 1.0</TD></TR>
<TR><TD></TD><TD>linear = 2.0e-9</TD></TR>
</TABLE></CENTER>
<P>
The value associated with the linear declaration represents the average delay time
(in seconds) for the uniform distribution.
This means that there is an equally likely chance that the delay time will lie anywhere
between the bounds of 0 and 2 times the value specified.
<P>
<H3>The Random Probability Function of the t: Statement</H3>
<P>
The random probability function enables the user to model things which occur on a percentage basis
(e.g. bit error rate, packet routing).
The format for random probability declaration is shown below:
<P>
<CENTER><TABLE WIDTH="80%">
<TR><TD WIDTH="30%"><B>Format:</B></TD><TD WIDTH="70%">random = <I>value</I></TD></TR>
<TR><TD><B>Example:</B></TD><TD>random = 0.75</TD></TR>
<TR><TD></TD><TD>random = 0.25</TD></TR>
</TABLE></CENTER>
<P>
The value associated with random declaration must be in the range 0.0 &lt;= <I>value</I> &lt;= 1.0.
This value represents the percentage of the time that the event is intended to occur.
<P>
A gate which uses the random probability feature must be operated in parallel with
another gate which has a common event driving input.
Both these gates should have the same timing distributions associated with them.
When the common input changes state, a probability trial is performed.
If the probability value is less than or equal to the value specified in the random declaration,
the gate containing the random declaration will have its priority temporarily
upgraded and its outputs will change state before the outputs of the other gate.
This feature gives the user some level of control (on a percentage basis)
over which gate will process the input data first.
<P>
As an example, a system which models a communication channel that corrupts 1%
of the data bytes that pass through it is shown below:
<P>
<CENTER><TABLE><TR><TD WIDTH="40%"><CENTER><IMG SRC="fig09-35.png" ALT="Figure 9.35"></CENTER></TD><TD WIDTH="60%">
<P><CODE>
&nbsp;&nbsp;&nbsp;model main(in, out)
<BR>
&nbsp;&nbsp;&nbsp;trans1: good(in, out)
<BR>
&nbsp;&nbsp;&nbsp;trans2: bad(in, out)
<BR>
<BR>
&nbsp;&nbsp;&nbsp;gate good(in, out)
<BR>
&nbsp;&nbsp;&nbsp;t: delta=1.0e-6
<BR>
&nbsp;&nbsp;&nbsp;i: in>0x00    o: out=in  in=0x00
<BR>
<BR>
&nbsp;&nbsp;&nbsp;gate bad(in, out)
<BR>
&nbsp;&nbsp;&nbsp;t: delta=1.0e-6 + random=0.01
<BR>
&nbsp;&nbsp;&nbsp;i: in>0x00    o: out=0xFF in=0x00
</CODE><P>
</TD></TR></TABLE></CENTER>
<P>
The netlist describes a system where ASCII characters are represented by 0x01-0x7F.
The value 0x00 indicates there is no data in the channel and the value 0xFF indicates a corrupted character.
It is assumed that there is an external data source which supplies characters to the channel input.
It should be noted that the random declaration is placed on only one of the two gate
descriptions rather than both of them.
Unpredictable events occur if the random declaration is placed on both gate descriptions.
<P>
<H3>The Fanout Statement</H3>
<P>
The <B>fanout</B> statement is used to selectively enable/disable fanout calculations
for a gate when the database is being compiled.
The format for a <B>fanout</B> statement is shown below:
<P>
<CENTER><TABLE WIDTH="80%">
<TR><TD WIDTH="30%"><B>Format:</B></TD><TD WIDTH="70%">fanout = on</TD></TR>
<TR><TD><B>or:</B></TD><TD>fanout = off</TD></TR>
</TABLE></CENTER>
<P>
When fanout calculation is enabled (the default setting for all gates),
the simulator scans the database and determines the total load that the gate is driving.
It then multiplies the gate timing parameters by an amount proportional to the load.
If an inverter gate was found to have a propagation delay time of 1 nanosecond when driving a single inverter input,
an instance of that gate would have a propagation delay time of 3 nanoseconds
if it was driving a load equivalent to 3 inverter inputs.
<P>
If fanout calculation is turned off for a gate primitive,
fanout calculations for all instances of that gate will be ignored.
This feature allows the user to force switching times to a particular value
and not have them modified by the simulator at run time.
<P>
<H3>The Load Statement</H3>
<P>
The <B>load</B> statement is used to set the relative loading (capacitance) for an input or output signal.
The format of a <B>load</B> statement is shown below:
<P>
<CENTER><TABLE WIDTH="80%">
<TR><TD WIDTH="30%"><B>Format:</B></TD><TD WIDTH="70%">load <I>signal1</I> = <I>value</I> { <I>signal2</I> = <I>value</I> ... }</TD></TR>
<TR><TD><B>Example:</B></TD><TD>load in1=2.0  in2=1.5  in3=1.95</TD></TR>
<TR><TD></TD><TD>load sa=2.5</TD></TR>
</TABLE></CENTER>
<P>
The value associated with the signal represents the relative capacitance of the simulation node.
When the timing parameters are specified for a gate description,
it is assumed that they are chosen for the situation where the gate is driving a single (1.0)
unit load such as a minimum size inverter input.
The load command tells the simulator that some input structures are smaller or larger
(more capacitive) than the reference standard.
The simulator, by default, assumes that all signals associated with gate primitives have a load rating of 1.0
(unit load) unless they are overridden by a <B>load</B> statement.
<P>
<H3>The Priority Statement</H3>
<P>
The <B>priority</B> statement is used to establish the scheduling priority for a gate primitive.
The format for a <B>priority</B> statement is shown below:
<P>
<CENTER><TABLE WIDTH="80%">
<TR><TD WIDTH="30%"><B>Format:</B></TD><TD WIDTH="70%">priority = <I>level</I></TD></TR>
<TR><TD><B>Example:</B></TD><TD>priority = 1</TD></TR>
<TR><TD></TD><TD>priority = 7</TD></TR>
</TABLE></CENTER>
<P>
In the event that two gates are scheduled to update their outputs at exactly the same time,
the gate with lowest priority level will be processed first.
All gate primitives are assigned a default priority of 1 unless they contain random timing
declarations in the gate description.
In this case the primitive is assigned a default priority of 2.
This base priority can be temporarily upgraded to a value of -1 if a random trial is successful
during the course of a simulation run.
The user is advised to leave the priority settings at their default values unless there is a
specific requirement which demands priority readjustment.
<P>
<H3>The Set Statement</H3>
<P>
The <B>set</B> statement is used to initialize signals to specific logic states before the simulation run takes place.
The format for the <B>set</B> statement is shown below: 
<P>
<CENTER><TABLE WIDTH="80%">
<TR><TD WIDTH="30%"><B>Format:</B></TD><TD WIDTH="70%">set <I>signal1</I> = &lt;state&gt; @ { &lt;strength&gt; }</TD></TR>
<TR><TD></TD><TD><I>signal2</I> = &lt;state&gt; @ { &lt;strength&gt; }</TD></TR>
<TR><TD><B>Example:</B></TD><TD>set input1=H@2 input2=L input3=X@0</TD></TR>
<TR><TD></TD><TD>set count=4 multiplier=5 divisor=7@2</TD></TR>
</TABLE></CENTER>
<P>
If the user does not specify a strength value,
the signal will be assigned a default logic strength of 3 (VDD).
This default setting will override any gate output
(because the default strength of 2 is used for gate outputs).
<P>
The user will find this feature useful in situations where some of the inputs to a logic gate
need to be set to a fixed state for the entire duration of the simulation run.
For example, the set and reset inputs of a flip flop should be tied low if these inputs are
not being driven by any logic circuitry.
All instances of a gate entity which contains a <B>set</B>
statement will have their corresponding simulation nodes set to the desired state.
<!-- NEED 4in -->
<H3>9-5-5: ALS Functions</H3>
The function entity is an alternate method of specifying behavior.
It makes reference to a Java method that has been compiled into Electric.
Because there are only a limited number of these methods,
and because the source code isn't always easy to update,
the function entity is of limited use.
However, the facility is very powerful and can be used to efficiently model complex circuits.
It permits the designer to work at higher levels of abstraction so that the overall
system can be conceived before the low level circuitry is designed.
Examples of this include arithmetic logic units, RAM, ROM,
and other circuitry which is easier to describe in terms of a software algorithm
than a gate level hardware description.
To add a function to the simulator, edit the module "com.sun.electric.tool.simulation.als.UserCom.java".
<P>
The function entity is headed by a <B>function</B> declaration statement that
gives a name and a list of exports
(which are referenced in a higher level model description).
The format of this statement is shown below: 
<P>
<CENTER><TABLE WIDTH="80%">
<TR><TD WIDTH="30%"><B>Format:</B></TD><TD WIDTH="70%">function <I>name</I>(<I>signal1</I>, <I>signal2</I>,
<I>signal3</I>, ... <I>signalN</I>)</TD></TR>
<TR><TD><B>Example:</B></TD><TD>function JK_FF(ck, j, k, out)</TD></TR>
<TR><TD></TD><TD>function DFFLOP(data_in, clk, data_out)</TD></TR>
<TR><TD></TD><TD>function BUS_TO_STATE(b7,b6,b5,b4,b3,b2,b1,b0, output)</TD></TR>
<TR><TD></TD><TD>function STATE_TO_BUS(input, b7,b6,b5,b4,b3,b2,b1,b0)</TD></TR>
</TABLE></CENTER>
<P>
The name refers to a Java method,
which will find the signal parameters in the same order that they appear in the argument list.
The only four functions currently available are listed above.
There are two flip-flops (JK and D)
and two numeric converters that translate between a bus of 8 signals and a composite hexadecimal digit.
<P>
<H3>Declaring Input and Output Ports</H3>
<P>
The <B>i:</B> and <B>o:</B>
statements which follow the function declaration are used to tell the simulator which
signals are responsible for driving the function and which drive other events.
If any signal in the event driving list changes state, the function is called
and the output values are recalculated.
The format of an <B>i:</B> statement, which contains a list of event driving inputs, is shown below:
<P>
<CENTER><TABLE WIDTH="80%">
<TR><TD WIDTH="30%"><B>Format:</B></TD><TD WIDTH="70%">i: <I>signal1</I> <I>signal2</I> <I>signal3</I> ... <I>signalN</I></TD></TR>
<TR><TD><B>Example:</B></TD><TD>i: b7 b6 b5 b4 b3 b2 b1 b0</TD></TR> 
<TR><TD></TD><TD>i: input phi phi_bar set reset</TD></TR>
</TABLE></CENTER>
<P>
The format of an <B>o:</B> statement which contains a list of output ports is shown below:
<P>
<CENTER><TABLE WIDTH="80%">
<TR><TD WIDTH="30%"><B>Format:</B></TD><TD WIDTH="70%">o: <I>signal1</I> <I>signal2</I> <I>signal3</I> ... <I>signalN</I></TD></TR>
<TR><TD><B>Example:</B></TD><TD>o: out1 out2 out3</TD></TR>
<TR><TD></TD><TD>o: q q_bar</TD></TR>
</TABLE></CENTER>
<P>
<H3>Other Specifications</H3>
<P>
Just as there are special statements that affect the operating characteristics of a gate entity,
so are these statements available to direct the function entity.
The <B>t:</B> statement is used to set the time delay between input and output changes.
The <B>load</B> statement is used to set the relative loading (capacitance) for the input and output ports.
The <B>priority</B> statement is used to establish the scheduling priority.
The <B>set</B> statement is used to initialize signals to specific logic states before
the simulation run takes place.
The format of these statement is identical to that of the gate entity.
Note that the Java method does not have to use the values specified in these
statements and can schedule events with values that are specified directly inside the code.
<P>
<H3>Example of Function Use</H3>
<P>
The specification for a 3 bit shift register (edge triggered) is shown below.
This circuit uses a function primitive to model the operation of a D flip-flop:
<P><CODE>
&nbsp;&nbsp;&nbsp;model main(input, ck, q2, q1, q0)<BR>
&nbsp;&nbsp;&nbsp;stage0: DFFLOP(input, ck, q0)
<BR>
&nbsp;&nbsp;&nbsp;stage1: DFFLOP(q0, ck, q1)
<BR>
&nbsp;&nbsp;&nbsp;stage2: DFFLOP(q1, ck, q2)
<BR>
<BR>
&nbsp;&nbsp;&nbsp;function DFFLOP(data_in, clock, output)
<BR>
&nbsp;&nbsp;&nbsp;i: clock
<BR>
&nbsp;&nbsp;&nbsp;o: output
<BR>
&nbsp;&nbsp;&nbsp;t: delta=10e-9
<BR>
&nbsp;&nbsp;&nbsp;load clock=2.0
</CODE><P>
It should be noted that the clock is the only event driving input for the flip-flop function.
There is no need to call the function if the signal "data_in" will be sampled
only when the event driving signal
("clock") changes state.
The designer can write the function so that it samples the data only when the
function is called and the clock input is asserted high
(rising edge triggered).
If the clock signal is low when the function is called (falling clock edge)
the procedure can ignore the data and return control back to the simulation program.
<P>
The calling arguments to the Java method are set up as a linked list of signal pointers.
The simulator places the arguments into this list in the same order that they appear
in the declaration of the function entity.
The programmer requires some knowledge of the internals of the simulator to
extract the correct information from this list and to schedule new events.
A complete discussion of function entity programming is beyond the scope of this document.
<!-- NEED 4in -->
<H3>9-5-6: ALS Models</H3>
As previous examples have shown, the model entity provides connectivity between other entities,
including other model entities.
The model may be used in conjunction with gate and function entities
to describe the behavior of any circuit.
<P>
The model entity is headed by a <B>model</B>
declaration statement and followed by a body which references instances of other entities,
lower in the hierarchy.
The model name and a list of exports (which are referenced in a higher level model description)
are included in this statement.
The format of the <B>model</B> declaration statement is shown below:
<P>
<CENTER><TABLE WIDTH="80%">
<TR><TD WIDTH="30%"><B>Format:</B></TD><TD WIDTH="70%">model <I>name</I>(<I>signal1</I>, <I>signal2</I>,
<I>signal3</I>, ... <I>signalN</I>)</TD></TR>
<TR><TD><B>Example:</B></TD><TD>model dff(d, ck, set, reset, q, q_bar)</TD></TR>
<TR><TD></TD><TD>model shift_reg(input, ck, q3, q2, q1, q0)</TD></TR>
</TABLE></CENTER>
<P>
References to instances of primitive objects (gates and functions)
and lower level models are used to describe the topology of the new model to the simulator.
The format of an instance reference statement is shown below:
<P>
<CENTER><TABLE WIDTH="80%">
<TR><TD WIDTH="30%"><B>Format:</B></TD><TD WIDTH="70%"><I>instance</I> : <I>model</I> ( <I>signal1</I>,
<I>signal2</I>, <I>signal3</I>, ... <I>signalN</I> )</TD></TR>
<TR><TD><B>Example:</B></TD><TD>gate1: subgate(input, en, mix)</TD></TR>
<TR><TD></TD><TD>node5: inverter(mix, out_bar)</TD></TR>
</TABLE></CENTER>
<P>
It should be noted each instance reference in a model entity must have
a unique instance name.
The following is an example of the use of a model entity:
<P><CODE>
&nbsp;&nbsp;&nbsp;model latch(input, en, en_bar, out)
<BR>
&nbsp;&nbsp;&nbsp;gate1: xgate(input, en, mix)
<BR>
&nbsp;&nbsp;&nbsp;gate2: xgate(out, en_bar, mix)<BR>
&nbsp;&nbsp;&nbsp;gate3: inverter(mix, out_bar)
<BR>
&nbsp;&nbsp;&nbsp;gate4: inverter(out_bar, out)
<BR>
<BR>
&nbsp;&nbsp;&nbsp;gate xgate(in, ctl, out)
<BR>
&nbsp;&nbsp;&nbsp;t: delta=8.0e-9
<BR>
&nbsp;&nbsp;&nbsp;t: delta=8.0e-9
<BR>
&nbsp;&nbsp;&nbsp;i: ctl=L       o: out=X@0
<BR>
&nbsp;&nbsp;&nbsp;i: ctl=H in=L  o: out=L
<BR>
&nbsp;&nbsp;&nbsp;i: ctl=H in=H  o: out=H
<BR>
&nbsp;&nbsp;&nbsp;i:             o: out=X@2
<BR>
<BR>
&nbsp;&nbsp;&nbsp;gate inverter(in, out)
<BR>
&nbsp;&nbsp;&nbsp;t: delta=5.0e-9
<BR>
&nbsp;&nbsp;&nbsp;i: in=L        o: out=H
<BR>
&nbsp;&nbsp;&nbsp;i: in=H        o: out=L
<BR>
&nbsp;&nbsp;&nbsp;i:             o: out=X@2
</CODE><P>
This example contains the description of a simple latch.
When the enable signal is asserted high (en=H, en_bar=L)
the input data passes through the transmission gate (gate1)
and then through two inverters where it eventually reaches the output.
When enable is asserted low (en=L, en_bar=H)
the input connection is broken and the feedback transmission gate (gate2) is turned on.
The state of the latch is preserved by this feedback path.
<P>
<H3>The Set Statement</H3>
<P>
The <B>set</B>
statement is used to initialize signals within the model description
to specific logic states before the simulation run takes place.
This feature is useful for tying unused inputs to power(H) or ground(L).
<!-- PAGE BREAK --><A NAME="chap09-06-01"></A>
<CENTER><FONT SIZE=6><B>Chapter 9: Tools</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap09-05-06.html#chap09-05-06.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>9-6-1: Introduction to Routing</H2></CENTER></TD>
<TD><CENTER><A HREF="chap09-06-02.html#chap09-06-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Tool/Routing/Unroute -->
<!-- COMMAND Tool/Routing/Get Unrouted Wire -->
<!-- COMMAND Tool/Routing/Copy Routing Topology -->
<!-- COMMAND Tool/Routing/Paste Routing Topology -->
The routing tool contains a number of different subsystems for creating wires.
Two <I>stitching</I> routers can be used in array-based design to connect adjoining cells.
A maze-router runs individual wires.
A river-router is also available for running multiple parallel wires.
<P>
Some of these routers make use of the "Unrouted Arc",
a thin-line arc that can connect any two components.
Creating "rats nests" of these arcs forms a graphical specification that the router can use.
The unrouted arc is from the Generic Technology
(see <A HREF="chap07-06-03.html#chap07-06-03">Section 7-6-3</A>).
To create one, use the <B>Get Unrouted Wire</B> command (in menu <B>Tool / Routing</B>).
Then use standard wiring commands to run the unrouted arc.
Another way to get unrouted wires is to select all or part of an existing route
(made with any arc) and use the <B>Unroute</B> command.
<P>
Another way to get Unrouted arcs for router input is to use the
<B>Copy Routing Topology</B> and <B>Paste Routing Topology</B>
 commands.
These copy the network topology from one cell (the "copied" cell) to another cell (the "pasted" cell).
The copied cell should be properly routed.
The <B>Paste Routing Topology</B> command uses node and arc names to associate the two cells.
<H3>9-6-2: Auto Stitching</H3>
<!-- COMMAND Tool/Routing/Enable Auto-Stitching -->
<!-- COMMAND Tool/Routing/Auto-Stitch Now -->
<!-- COMMAND Tool/Routing/Auto-Stitch Highlighted Now -->
<!-- PREFERENCE Tools/Routing -->
The auto-stitching router looks for adjoining nodes that make implicit connections,
and places wires at those connections to make them explicit.
For example, if a cell has power and ground rails at the top and bottom,
and there are ports on the left and right of each rail,
then the auto-stitching router can be used to connect all of these rails in a horizontal string of these cell instances.
<P>
The auto-stitcher places a wire when all of these conditions are met:
<UL>
<LI>The design is layout (auto stitching does not work in schematics).
<LI>Ports exist on both nodes.
Because wires must run between two ports, you must make exports at every location where wiring may occur.
<LI>The nodes inside of the cells
(the ones with the exports)
must touch or overlap, thus creating an implicit connection.
When a pin node has an export, it should be the same size as any wires connected to it inside of the cell.
This is because a small pin which is deep inside of a wide arc will not make an implicit connection when the arc touches something.
<LI>The ports must not already be connected to each other.
</UL>
<P>
To run the auto-stitcher, use the <B>Enable Auto-Stitching</B> command (in menu <B>Tool / Routing</B>
).
The router will make all necessary connections, and incrementally add wires as further changes are made to the circuit.
To stop stitching, select the menu entry again to disable it.
To run the auto-stitcher only once for the current cell, use <B>Auto-Stitch Now</B>
To run it once, and in the highlighted area only,
use the <B>Auto-Stitch Highlighted Now</B> command.
Note that this auto-stitches all cell instances that intersect the highlighted area,
so even if only a portion of a cell falls into the highlighted area,
the entire cell is stitched.
<P>
The auto-stitcher allows you to specify a particular type of wire to use in routing.
By default, the router figures out which wire to use.
However, in the Routing Preferences (in menu <B>File / Preferences...</B>, "Tools" section, "Routing" tab)
a specified wire can be given (or automatic selection can be resumed by selecting the "DEFAULT ARC" entry).
First check "Use this arc in stitching routers" and then select the arc.
<!-- NEED 6in -->
<H3>9-6-3: Mimic Stitching</H3>
<!-- COMMAND Tool/Routing/Enable Mimic-Stitching -->
<!-- COMMAND Tool/Routing/Mimic-Stitch Now -->
<!-- COMMAND Tool/Routing/Mimic Selected -->
One problem with the auto-stitcher is that it may take a different view of the circuit than originally intended.
In an area where more than two cells meet,
the auto-stitcher may place many wires in an attempt to connect all touching ports.
Another problem with the auto-stitcher is that it makes explicit only what is already implicit,
and so does not always add all necessary wires.
<P>
To control the wiring of arrays of cells more directly,
there is the mimic-stitcher.
This tool lets the designer place a wire,
and then it adds other wires between all other similar situations in the circuit.
Thus, it mimics your actions.
The router also mimics your wire removals, removing arcs similar to the ones that you delete.
<P>
To turn on the mimic-stitcher, use the <B>Enable Mimic-Stitching</B> command
(in menu <B>Tool / Routing</B>).
To disable the stitcher, use the command to uncheck it.
You can also request that the mimic-stitcher run just once
(mimicing the very last wire that was created or deleted) by using the <B>Mimic-Stitch Now</B> command.
Finally, you can request that the mimic-stitcher run just once, mimicing the currently selected arc,
by using the <B>Mimic Selected</B> command.
<P>
A set of restrictions applies to the mimic stitcher.
These restrictions prevent mimicing from happening.
Use Routing Preferences (in menu <B>File / Preferences...</B>, "Tools" section, "Routing" tab)
to control these exact conditions in which arc creation and deletion will be mimiced.
<P>
<TABLE><TR>
<TD><CENTER><IMG SRC="fig09-05.png" ALT="Figure 9.5"></CENTER></TD><TD>
When "Interactive mimicing" is checked, the mimic stitcher will ignore the restrictions,
and present all possible mimic situations for your approval.
These situations will be organized by the restrictions that apply to them,
in order of increasingly relaxed acceptance criteria.
<P>
The bottommost checkbox is "Keep Pins", which requests that deleted arcs keep their pins
(typically, pins at the ends of deleted arcs are also deleted).
</TD></TR></TABLE>
<P>
When running noninteractively, these are the restrictions that may be applied:
<UL>
<LI>"Ports must match" indicates that the specific ports at the end of the arcs must be the same.</LI>
<LI>"Bus ports must have same width" applies to schematics: the ports must have the same bus-width.</LI>
<LI>"Number of existing arcs must match" counts the number of arcs already connected to the other ports
and ensures that they match.</LI>
<LI>"Node sizes must match" applies to primitives, and forces their sizes to be equal.</LI>
<LI>"Node types must match" demands that the mimiced connections be on the same type of node.</LI>
<LI>"Cannot have other arcs in the same direction" prevents arc creation when there are existing arcs
wired in the same location as the proposed new arcs.</LI>
</UL>
<!-- NEED 2in -->
<H3>9-6-4: Maze Routing</H3>
<!-- COMMAND Tool/Routing/Maze Route -->
The maze router replaces unrouted arcs with actual geometry.
To run it, use the <B>Maze Route</B> command (in menu <B>Tool / Routing</B>).
If networks are selected when the command is issued, those networks are routed.
If no networks are selected, the all unrouted arcs in the current cell are routed.
<P>
Note that maze routing is done one wire at a time, and may fail if no path can be found.
Therefore it may be preferable to route the unrouted wires one-at-a-time in order to better control the process.
<P>
Note also that maze routing constructs an array which is the size of the route,
and searches the array for a routing path.
Therefore, long wires will use large amounts of memory and time.
<P>
For an example of maze routing, open the Samples library and edit the cell "tool-RoutingMaze"
(you can read the library with the <B>Sample Cells</B> command, in menu <B>Help / Load Built-in Libraries</B>).
This cell has a number of unrouted wires that can be routed.
<!-- NEED 2in -->
<H3>9-6-5: River Routing</H3>
<!-- COMMAND Tool/Routing/River-Route -->
<TABLE><TR><TD>
River routing is the running of multiple parallel wires between two facing rows
(presumably two cell instances or two rows of instances).
The wires must remain in sequential order and cannot cross each other.
Thus, they appear as a flowing stream of lines, and have the appearance of a river.
</TD><TD><CENTER><IMG SRC="fig09-60.png" ALT="Figure 9.60"></CENTER></TD></TR></TABLE>
<P>
To specify an intended path for the river-router,
every connection must be made with an Unrouted arc.
Thus, before river-routing, there should be a series of direct (and presumably nonmanhattan) unrouted arcs.
These arcs are replaced with the appropriate geometry during river-routing.
<P>
To convert the unrouted wires into layout,
use the <B>River-Route</B> command (in menu <B>Tool / Routing</B>).
If there are unrouted arcs selected, these will be the only ones converted.
Otherwise, all unrouted arcs in the cell will be converted.
If it is necessary, nodes may be moved to make room for the river-routed wires.
<P>
The river router always routes to the left or bottom side of the routing channel.
Thus, if there is a vertical channel that is very wide,
the wires will run to the left side and then jog to their proper location there.
The only way to force routing to the right or top side is to rotate the entire circuit so that these sides are on the left and bottom.
<P>
For an example of river routing, open the Samples library and edit the cell "tool-RoutingRiver"
(you can read the library with the <B>Sample Cells</B> command, in menu <B>Help / Load Built-in Libraries</B>).
<!-- PAGE BREAK --><A NAME="chap09-07-01"></A>
<CENTER><FONT SIZE=6><B>Chapter 9: Tools</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap09-06-05.html#chap09-06-05.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>9-7-1: NCC Overview</H2></CENTER></TD>
<TD><CENTER><A HREF="chap09-07-02.html#chap09-07-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
Electric can compare two different cells and determine whether their
networks have the same topology.  This operation is sometimes called
Layout vs. Schematic (LVS), but because Electric can compare any two
circuits (including two layouts or two schematics) we use the term Network
Consistency Checking (NCC).
<p>
The Java Electric NCC differs from the C Electric NCC in two
signficant ways.
<UL>
<LI>
  The Java Electric NCC firsts attempts to discover circuit mismatches
  using a new algorithm called "Local Paritioning".  We do this
  because Local Partitioning provides much more precise and
  intelligible mismatch diagnostics.  We fall back upon the <A
  HREF="http://www.cs.washington.edu/research/projects/lis/www/gemini/gemini.html">
  Gemini algorithm</A> (Ebeling, Carl, "GeminiII: A Second Generation
  Layout Validation Program", <I>Proceedings of ICCAD</I> 1988,
  p322-325.) only as a last resort. In practice upwards of 95% of all
  errors are found by Local Partitioning.
</li>
<li>
  The Java Electric NCC has a "hierarchical" mode. When comparing a
  cell hierarchically, NCC first tries to compare the cell's
  descendents.  We <i>strongly</i> recommend this mode to the user
  because it allows the Local Partitioning algorithm to provide even
  more precise and intelligible mismatch diagnostics.
</li>
</ul>
The Java Electric NCC is also significantly faster than the C Electric
NCC.  For example, for one of our chips, C-NCC flat took 48 minutes,
Java-NCC flat took 3.5 minutes, and Java-NCC hierarchical took 9
seconds.
<p>
<h3> Limitations </h3>
NCC has a number of limitations
<ul>
<li>
  NCC does not check the substrate connection of transistors. This is
  because Electric does not keep track of the connectivity
  of the substrate connection of layout transistors. In fact, layout
  transistors don't have substrate ports. We plan to remedy this.
</li>
</ul>
<h3> Example </h3>
For an example of network consistency checking, open the Samples
library with the <B>Sample Cells</B> command (in menu <B>Help / Load Built-in Libraries</B>) and compare the
cells "tool-NCC{lay}" and "tool-NCC{sch}".  These two cells are
equivalent and the checker will find them to be so.
<H3>9-7-2: NCC Commands</H3>
<!-- COMMAND Tool/NCC/Schematic and Layout Views of Cell in Current Window -->
<!-- COMMAND Tool/NCC/Cells from Two Windows -->
<!-- COMMAND Tool/NCC/Copy Schematic User Names to Layout -->
<!-- COMMAND Tool/NCC/Copy All Schematic Names to Layout -->
<!-- COMMAND Tool/NCC/Highlight Equivalent -->
<!-- COMMAND Tool/NCC/Run NCC for Schematic Cross-Probing -->
<P>
To compare two cells, use these commands (in menu <B>Tool / NCC</B>):
<UL>
<LI>
   <B>Schematic and Layout Views of Cell in Current Window</B>
   Use a heuristic to figure out what to compare against the cell in
   the current window.  If the current cell is a schematic then
   compare it against some layout cell in the same cell group.  If the
   current cell is a layout then compare it against some schematic
   cell in the same cell group.  Since most cell groups have one
   layout cell and one schematic cell, this form of the NCC command is
   usually the most convenient.
</LI>
<LI>
   <B>Cells from Two Windows</B>
   Compare the two cells that are displayed in the two opened windows
   (there must be exactly two windows). This is useful when the
   schematic and layout are not in the same cell group. The command
   can also be used to compare schematics with schematics or layout
   with layout. However, the command refuses to compare icon cells
   since icons cells don't have defined connectivity.
</LI>
<li>
    <b>Copy Schematic User Names to Layout</b>
 and <b>Copy All Schematic Names to Layout</B>
    For each pair of matching schematic and layout cells, rename networks 
and nodes 
    in the layout cell to have the same name as the equivalent networks
    in the schematic cell. The first command copies only user-assigned names
    from the schematic to the layout; the second command copies all names.
    Furthermore, it only changes the names
 of layout
 networks and nodes 
    that have no user-assigned names. If a layout network 
or node has
    a user-assigned name that does not match the schematic then this 
    command prints a warning. This command also warns when non-equivalent
    networks or nodes have the same user-assigned name. 
    <p>
    Notes:
    <ul>
    <li>
    These commands use the result 
generated
    by the most recent run of NCC. That NCC run should be hierarchical 
    without
 size checking.
    </li><li>
    These commands clear the saved result from the last run of NCC. 
    If you need to run a command that needs the last result, for example
    "Highlight Equivalent", then you must rerun NCC.
    </li>
    </ul>
    </p>
</li>
<li>
	<b>Highlight Equivalent</b>
	Highlight the network or node that is equivalent to the currently 
selected
	network or node, using the result of the most recent NCC run.
	The user should be aware of a number of limitations:  
	<ol>
	<li>
		This command works best for networks in the top
		level cells compared by the most recent NCC run.
	</li>
	<li>
		This command also works for nodes in the top
		level cells compared by the most recent NCC run as long
		as those nodes are primitive transistors or were treated as
		primitives because NCC compared them hierarchically.
	</li>
	<li> 
		Because NCC combines MOS transistors that are in series 
		into a single NMOS_*STACK,
		NCC
		can't find equivalents for certain networks and nodes. 
		For example,
		when NCC merges two series MOS transistors into a single
		NMOS_2STACK it removes the network between them from NCC's
		database. Therefore if you click on that network and ask
		to highlight the equivalent, NCC won't be able to find 
		an equivalent. 
	</li>
	<li>
		Because NCC combines MOS 
		transistors that are in parallel, it can't find equivalents
		for certain networks and nodes. For example when NCC
		detects two parallel MOS
		transistors, it removes one from NCC's database but adds
		it's width to the other. Therefore if you click
		on the transistor that was discarded and ask to highlight the equivalent, NCC
		won't be able to find an equivalent.
	</li>
	</ol>
</li>
<li>
	<b>Run NCC for Schematic Cross-Probing</b>
	This command runs NCC and saves the net associations between schematic and layout.
	The user can generate a Spice netlist (for example) from an Electric layout cell.
	Simulating this netlist will result in a waveform file that uses layout hierarchy and net names.
	If this waveform file is loaded into Electric, it cannot be cross-probed from the schematic.
	It can be cross-probed from the layout, but that is often difficult to do.  
	In this case, the user can run this NCC command,
	which will save net associations between schematic and layout.
	Then, the user can cross-probe from the schematic,
	and Electric will automatically translate the schematic net to the appropriate layout net contained in the waveform file.
</li>
<li>
	<b>Add NCC Annotation to Cell</b>
	This is a submenu that allows user to select which NCC annotation
	to add to a cell. Note that the designer should replace text surrounded 
	by angle brackets: "&lt &gt". See <A HREF="chap09-07-04.html#chap09-07-04">Section 9-7-4</A>
	on "NCC Annotations" for a description of each NCC annotation.
</li>
</UL>
<H3>9-7-3: NCC Preferences</H3>
<!-- PREFERENCE Tools/NCC -->
NCC options are available in the NCC Preferences
(in menu <B>File / Preferences... </B>, "Tools" section, "NCC" tab).
<p>
<CENTER><IMG SRC="fig09-22.png" ALT="Figure 9.22"></CENTER>
<P>
<h3> Operation Section </h3>
The "Operation" section allows you to select what kind of NCC operation
to perform.  You can either compare hierarchically, compare flat, or
list all the NCC annotations in the design.  
<p>
We recommend hierarchical over flat comparison because hierarchical
comparisons are faster and the mismatch diagnostics are much more
precise and intelligible. However, transistor size checking 
limits what NCC can compare hierarchically because the size of a
schematic transistor may depend upon the instance path. 
</p>
<p>
The best way to use NCC is to initially perform all your comparisons
hierarchically. This will typically require many iterations.  Once you
have gotten your cell to pass a hierarchical comparison, turn on size
checking.  This will report transistor size mismatches.
<h3> Size Checking Section </h3>
The "Size Checking" section controls the checking of transistor widths
and lengths.
<p>
NCC does the following when size checking is enabled. After each
topological comparison, NCC checks if it found any topological
mismatches. If NCC found no mismatches then NCC checks, for each pair
of matching transistors, that the widths and lengths are approximately
equal.
</p>
<p>
The two tolerance values allow the user to specify how much more the
larger of the two matched transistors may be than the smaller before
NCC reports a size mismatch. The "Relative size tolerance"
is the difference in percentage. The "Absolute size tolerance"
is the difference in units.  NCC reports a size mismatch
when both tolerances are exceeded.
<p>
If you choose "Check transistor sizes" and "Hierarchical Comparison"
simultaneously then NCC restricts which cells it treats
hierarchically to ensure a correct answer in the presence of
automatically sized transistors. For this case it compares a pair of cells
hierarchically if and only if each cell is instantiated exactly once.
</p>
<h3> Checking All Cells Section </h3>
In hierarchical mode, NCC attempts to compare all cells in the design
starting with those at the leaves and working it's way toward the root.
For that mode it is often best if NCC stops as soon as it finds an
export or topology mismatch. To get this behavior the user should 
check "Halt after finding the first mismatched cell". Note that
size mismatches never cause NCC to stop.
<p>
It is occasionally useful to continue checking even after
 mismatches have been detected.
For example, the designer might find
 that although a cell mismatches,
it cannot be fixed because
 someone else designed it.
When asked to continue, NCC will do the
 following when comparing cells that use the mismatched one: 
<ul>
<li>
If NCC found no export mismatches when comparing the mismatched cell then NCC will use
the export names to identify corresponding ports in the layout and
 schematic. 
</li>
<li> If NCC found export mismatches when comparing the mismatched cell then NCC will
flatten that one level of hierarchy before performing the
 comparison.
</li>
</ul>
<p>
The check box "Don't recheck cells that have passed in this Electric
run" skips the checking of a pair of cells if they have ever passed in
this run of Electric.  Because this command <i>is not</i> smart enough
to recheck the cells after either have changed, this command is of
very limited utility.  At the moment NCC has run sufficiently fast
that it doesn't seem worth the effort to implement anything more
sophisticated.
<h3> Reporting Progress Section</h3>
This panel controls how verbose NCC is in reporting its progress.
Most
 users should leave this at 0.
<h3> Error Reporting Section</h3>
The error reporting section controls how many error messages are printed
when the Local Partitioning algorithm has failed to find a mismatch
but the Gemini algorithm has.  Most users will want to leave these at
the default setting of 10.
<H3>9-7-4: NCC Annotations</H3>
<!-- COMMAND Tool/NCC/Add NCC Annotation to Cell/Exports Connected by Parent vdd -->
<!-- COMMAND Tool/NCC/Add NCC Annotation to Cell/Exports Connected By Parent gnd -->
<!-- COMMAND Tool/NCC/Add NCC Annotation to Cell/Skip NCC -->
<!-- COMMAND Tool/NCC/Add NCC Annotation to Cell/Not a Subcircuit -->
<!-- COMMAND Tool/NCC/Add NCC Annotation to Cell/Flatten Instances -->
<!-- COMMAND Tool/NCC/Add NCC Annotation to Cell/Join Group -->
<!-- COMMAND Tool/NCC/Add NCC Annotation to Cell/Transistor Type -->
<!-- COMMAND Tool/NCC/Add NCC Annotation to Cell/Resistor Type -->
<!-- COMMAND Tool/NCC/Add NCC Annotation to Cell/Force Part Match -->
<!-- COMMAND Tool/NCC/Add NCC Annotation to Cell/Force Wire Match -->
<!-- COMMAND Tool/NCC/Add NCC Annotation to Cell/Black Box -->
For certain situations, NCC cannot figure out that two cells are
equivalent unless the designer supplies extra information. The
designer supplies this extra information by adding NCC annotations to
layout and/or schematic cells.
This is done with the subcommands of the <B>Tool / NCC / Add NCC Annotations to Cell</B> menu.
<P>
NCC annotations are represented by
attributes placed on cells
(see <A HREF="chap06-08-05.html#chap06-08-05">Section 6-8-5</A>).
The attribute's name is
<i>NCC</i>. The attribute's value is one or more lines.
Each line
 contains a separate NCC annotation.
Thus, although a cell can have at
 most one attribute named <i>NCC</i>,
that attribute can contain any
 number of NCC annotations.
<h3>exportsConnectedByParent <i>&lt;string or regular expression&gt;</i> </h3>
<P>
Layout cells sometimes contain multiple exports that are supposed to
be connected by the parent cell. For example, a layout cell, A{lay},
might export vdd, vdd_1, vdd_2, and vdd3. The designer expects the
cell that instantiates A{lay} will connect all the vdd exports to a
single net: vdd. However, because the corresponding schematic cell
usually only contains a single export, vdd, the NCC of the schematic
and layout cells fails. This situation is most common for the power
and ground networks, although it occasionally arises for signal
networks such as <i>clock</i> or <i>precharge</i>.
</p>
<p>
NCC allows the designer to add the annotation:
<i>exportsConnectedByParent</i> to the cell to inform NCC which exports will
be connected by the parent. The keyword is followed by a list of
strings and/or regular expressions. A string matches an export name
exactly, for example: vdd. Thus A{lay} can contain the NCC annotation:
</p>
<p style=padding-left:10px>
exportsConnectedByParent vdd vdd_1 vdd_2
</p>
<p>
Alternatively, the designer can use regular expressions. Regular
expressions begin and end with the character: '/'. Thus A{lay} can
contain the NCC annotation:
</p>
<p style=padding-left:10px>
exportsConnectedByParent vdd /vdd_[0-9]+/
</p>
<p>
When NCC compares a cell with an <i>exportsConnectedByParent</i>
annotation it performs the comparison as if those exports were
connected. It is safe for NCC to believe this annotation because NCC
also checks the assertion. When NCC encounters an instance of a cell
with an <i>exportsConnectedByParent</i> annotation NCC reports an
error whenever that assertion isn't satisfied.
</p>
<h3>skipNCC <i>&lt;comment&gt;</i> </h3>
<P>
The skipNCC annotation should be added to a cell, say B, when:
<ul>
<li>
B{sch} and B{lay} won't pass either flat or hierarchical NCC and
</li>
<li>
you want any hierarchical NCC of the parents of B to flatten the one
level of hierarchy: cell B.
</li>
</ul>
If cell B has a skipNCC annotation, then a hierarchical comparison
won't check B and will simply flatten through the one level of
hierarchy: B.  
<p>
All the characters following the keyword to the end of the
line serve as a comment. This is useful for documenting why this
annotation was necessary. When you ask NCC to compare every cell in
the design, NCC will tell you which cells it is skipping and why.  For
example, if cell B includes the NCC annotation: 
</p>
<p style=padding-left:10px>
skipNCC layout is missing ground connection
</p>
<p>
then NCC will print:
<p style=padding-left:10px>
 Skipping NCC of A because layout is missing ground connection. 
</p>
<p>
A common reason for needing this annotation is an unfortunate
situation: the
exports of B{sch} and B{lay} don't match. A skipNCC on B prevents NCC
from reporting export mismatches because 1) cell B is not checked by
itself and 2) when a parent of cell B is checked, B's exports are
discarded when NCC flattens through cell B. Although not always
possible, it's better to fix export mismatches, because fixing them
will yield clearer mismatch diagnostics when there is a problem.
</p>
<h3>flattenInstances <i>&lt;string or regular expression&gt;</i> ... </h3>
<P>
Hierarchical NCCs do not require a perfect match between the schematic
and layout hierarchies. Instead, hierarchical NCC uses heuristics to
determine which cell instances must be flattened and which can be
compared hierarchically. The heuristic sometimes make mistakes. When
that happens, the flattenInstances annotation can guide the heuristic.
</p>
<p>
The list of strings and/or regular expressions are used to match
instance names within the cell. Those cell instances that match are
always flattened.  
</p>
<h3>notSubcircuit <i>&lt;comment&gt;</i>  </h3>
<P>
The designer should add the <i>notSubcircuit</i> annotation to a cell, say B,
if:
<ul>
<li>
B{sch} and B{lay} will pass NCC when compared separately but
</li>
<li>
hierarchical NCC of a parent of B should not treat B as a hierarchical
element but should, instead, flatten through B.
</li>
</ul>
One reason for using this annotation is to correct errors made by the
heuristic that determines which cells to flatten and which to compare
hierarchically.  For example, suppose that the schematics instantiate
cell B{sch} 1000 times and the layout instantiates cell B{lay} 500
times.  In principle one could use the <i>flattenInstances</i>
annotation to inform NCC which instances to keep and which to
flatten. However sometimes that's more work than it's worth and it's
better to add a single <i>notSubcircuit</i> annotation to cell B{sch}
or B{lay} to tell NCC to never treat B as a hierarchical entity.
<p>
When hierarchical NCC encounters a notSubcircuit annotation it prints
a message that includes the comment in a manner similar to skipNCC.
</p>
<p>
The notSubcircuit annotation only affects hierarchical NCC; it is
ignored by flat NCC. 
</p>
<h3>joinGroup <i>&lt;cell name&gt;</i> </h3> 
<p>
The designer should add a joinGroup annotation to, say, cell B if NCC
should behave as if cell B belonged to a different cell group and that
cell group is in a different library. The cell group to move B to is
that cell group that contains <i>&lt;cell name&gt;</i>. That
specification should be fully qualified: library:cell{view}.
<p>
Memberships in cell groups is important when NCC performs
hierarchical comparisons because NCC assumes that cells in the same
cell group are supposed to be topologically identical. Membership of
two cells in the same cell group is one criteria NCC uses to decide
that it should treat them as hierarchical entities and it should
compare them separately.
</p>
<p>
Occasionally it is impractical to place the layout and schematic views
of a cell in the same cell group.  For example when layout is
automatically generated from hand drawn schematics it may be better to
place the layout in a different library than the schematics.
</p>
<h3>transistorType<i>&lt;type&gt;</i> </h3> 
<p>
All schematic transistors in this cell are of type: <i>type</i>. 
The <i>type</i> field may be one of the following: 
N-Transistor, VTH-N-Transistor,
VTL-N-Transistor, OD18-N-Transistor, OD25-N-Transistor,
OD33-N-Transistor, NT-N-Transistor, NT-OD18-N-Transistor, 
NT-OD25-N-Transistor, NT-OD33-N-Transistor, P-Transistor,
VTH-P-Transistor, VTL-P-Transistor, OD18-P-Transistor,
OD25-P-Transistor, or OD33-P-Transistor.
<p>
Warning: This annotation is used <i>very</i> infrequently. Typically
it is used only inside special libraries such as the "red" library
(see <A HREF="chap09-09.html#chap09-09">Section 9-9</A>).
Most
 designers simply instantiate transistors from those special libraries.
</p>
<h3>resistorType<i>&lt;type&gt;</i> </h3> 
<p>
All schematic polysilicon resistors in this cell are of type: <i>type</i>. 
The <i>type</i> field may be one of the following: 
N-Poly-RPO-Resistor, N-Poly-RPO-Resistor,
P-Poly-RPO-Resistor, or P-Poly-RPO-Resistor. Unlike all other
resistors, polysilicon resistors are <i>not</i> treated as short circuits
by NCC. Instead, NCC tries to match these schematic polysilicon resistors with 
layout polysilicon resistors.
<p>
Warning: This annotation is used <i>very</i> infrequently. Typically
it is used only inside special libraries such as the "red" library
(see <A HREF="chap09-09.html#chap09-09">Section 9-9</A>).
Most
 designers simply instantiate resistors from those special libraries.
</p>
<h3>forceWireMatch <i>&lt;wireName&gt;</i> </h3> 
<p>
Force the wire in the schematic named <i>wireName</i> to match the wire in
the layout named <i>wireName
</i>.
</p>
<p>
The <i>forceWireMatch</i> annotation is useful when local partitioning
fails to detect a mismatch but hash code partitioning does. In that case
<i>forceWireMatch</i> can be used to tell NCC that certain wires were
intended to match. With luck, a strategically placed <i>forceWireMatch</i>
can cause NCC to display fewer hash code mismatches and help the user
narrow in on the actual error.
</p>
<p>
After fixing the problem, you should try to 
remove all <i>forceWireMatch</i> annotations. 
</p>
<h3>forcePartMatch <i>&lt;partName&gt;</i> </h3> 
<p>
Same as <i>forceWireMatch</i> except that this command works on parts rather than
wires.
</p>
<h3>blackBox <i>&lt;comment&gt;</i> </h3> 
<p>
Don't compare the cells in this cell group; just
assume they are topologically equivalent.
</p>
<p>
The <i>blackBox</i> annotation is useful when a particular arrangement of layout 
geometry implemements a construct that Electric doesn't
understand. For example, to handle
resistors and parasitic bipolar transistors in the layout.
</p>
<p>
The <i>blackBox</i> annotation should be used with care because 
unlike the other annotations; NCC has no way of double checking
this assertion should the user make a mistake.
</p>
<!-- PAGE BREAK --><A NAME="chap09-07-05-01"></A>
<CENTER><FONT SIZE=6><B>Chapter 9: Tools</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap09-07-04.html#chap09-07-04.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>9-7-5-1: NCC GUI: Overview</H2></CENTER></TD>
<TD><CENTER><A HREF="chap09-07-05-02.html#chap09-07-05-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
When
 a designer runs NCC, and NCC finds mismatches, the NCC graphical
display window pops up displaying the mismatches. The display varies
from platform to platform. Below is a typical display with some
essential features.</P>
<P>
<CENTER><IMG SRC="fig09-42.png" ALT="Figure9.42" BORDER=1></CENTER>
<P>
The
 left side of the window is a tree providing an overview of the kinds
of mismatches that NCC found. The right side has information
corresponding to the currently selected tree node(s).</P>
<P>
Each
 top-level tree node corresponds to a comparison of two cells. In
the above example, the label on the top-level node indicates that the
comparison that failed was between the cells: 
"E_pads{sch}" and 
"E_pads{lay}" in the library:
 "heater".
If the two cells have
different names or are from different libraries, then their names are
shown individually. For example, "libraryA:gateA{sch}
&amp; libraryB:gateB{sch}".
The number in square
 brackets at the right end of the cell names,
in this example "[14]",
is the number of mismatches.</P>
<P>
In
 general, if you see a tree node with a number in square brackets,
then this number is the total number of mismatches grouped under this
node.</P>
<P>
Selecting
 a top-level tree node displays the number of parts, wires, and ports
in the compared cells in the right part of the window.
For
 all other nodes, the right side of the window displays a list of
component names arranged in different ways, as described in
subsequent sections. Some components are highlightable, in which case
their names are printed as blue, red, or green hyperlinks.</P>
<P>
A
 top-level node has one or more subnodes. Subnodes can have the
following types: Exports, Parts, Wires, Parts (hash code), Wires
(hash code), Sizes, Export Assertions, Export/Global Network
Conflicts, Export/Global Characteristics Conflicts, and Unrecognized
Parts. 
</P>
<P>
For more information on the NCC graphical user interface, see:
<BR>
&nbsp;&nbsp;&nbsp;Kao, Russell, Ivan Minevskiy, and Jon Lexau, "Design Notes for Electric's Network Consistency Check",
Sun Microsystems Laboratories Technical Report 2006-152, January 2006.
<H3>9-7-5-2: NCC GUI: Exports</H3>
<P>
The
 exports node is always a leaf node with the name "Exports
[X]", where "X" is
the number of export mismatches in this comparison.
Selecting an exports node displays a table on the right side of the
NCC graphical window (see below). The table has two columns -
one per compared cell. The header contains cell names. Each row
corresponds to a mismatch. A table cell has zero or more <I>export
lists</I>. An export list is a list of all the exports found on a
network and is displayed as a list of export names surrounded by
curly brackets "{ }". Each export
list is a single hyperlink which highlights all the exports in the
list.</P>
<P>
Multiple
 export lists in a table cell occur when a single network in one
design (e.g. the schematic) has one or more exports that match
multiple exports attached to more than one network in the other
design (e.g. the layout). For example, the mismatch on the third row
from the top in the figure below has layout exports (the second column)
attached to a single network matching schematic exports (the first
column) attached to two networks.</P>
<P>
<CENTER><IMG SRC="fig09-43.png" ALT="Figure 9.43" BORDER=1></CENTER>
<P>
An
 empty table cell means one design has exports that match no exports
with the same names in the other design. For example, the mismatch in
the top row above has the layout export "E_core_sclk"
matching no exports in the schematic.</P>
<P>
Some
 exports are <I>implied</I>. For example, if a schematic cell uses a
global ground, but does not contain an export for that ground, then
NCC will automatically insert an implied
export for ground. This
is done because most often the corresponding layout cell has a ground
export, and we want the schematic and layout cells to match. Implied
exports are not hyperlinked and have ":
implied" added to their names (see below).</P>
<P>
When
 NCC does not find any topological mismatches, it attempts to suggest
possible matches for exports that failed to match by name. Such
<I>suggestions</I> are printed in green. The first row of the table
below indicates that the "outO[1][T]"
export in the layout topologically matches the "outO[T]"
export in the schematic, even though they have different names. The
second row indicates that the "outE[1][F]"
export in the layout topologically matches the "net@4[1]"
wire in the schematic, even though the "net@4[1]"
wire has no exports. Note that a wire name is not an export list and
is not surrounded by curly brackets.</P>
<P>
<CENTER><IMG SRC="fig09-44.png" ALT="Figure 9.44" BORDER=1><BR>
<FONT SIZE="-1">Implied exports are marked by &quot;implied&quot;. Suggestions
are printed in green.</FONT></CENTER>
<P>
Exports
 that match by name, but are not on equivalent networks, have red
hyperlinks. Such exports might have suggested matches as well, 
which are printed in green. In the first row of the table below,
the "jtag[1]" export in the
schematic does not topologically match the "jtag[1]"
export in the layout, but does match the "jtag[8]"
export in the layout.</P>
<P>
<CENTER><IMG SRC="fig09-45.png" ALT="Figure 9.45" BORDER=1><BR>
<FONT SIZE="-1">Exports that match by name, but are not on equivalent networks
have red hyperlinks</FONT></CENTER>
<H3>9-7-5-3: NCC GUI: Parts and Wires</H3>
<P>
NCC
 finds mismatches by applying two partitioning techniques in sequence.
First it uses <I>local partitioning</I> and
then it uses <I>hash code partitioning</I>. If local partitioning
finds mismatches, then NCC reports only those. The mismatches in
local partitioning of parts and wires are grouped under nodes with
names "Parts [X]"
 and "Wires [X]",
where "X" is the number of mismatched local partitioning classes (see figure below).
Each class node represents a class of parts or wires sharing the same
local characteristics.</P>
<P>
<H3>Parts</H3>
<P>
Parts are partitioned into equivalence
classes based upon their type and the number of wires attached to
them. The figure below shows a list of two part classes.</P>
<P>
<CENTER>
<IMG SRC="fig09-46.png" ALT="Figure 9.46" BORDER=1></CENTER>
<P>
The tree node corresponding to the
first class is selected and has the name
<BR>
<CODE>&nbsp;&nbsp;&nbsp;#1
 [36]: pads180nm_100um:PAD_dgnd</CODE>
<BR>
which has the
 following meaning:</P>
<UL>
<LI>
<CODE><U>#1</U></CODE> The
 sequence number of this class</LI>
<LI><CODE><U>[36]</U></CODE> The
 number of mismatched parts in one of the two cells, whichever is
bigger. In our example, the schematic cell has 1 mismatched part
in this class and the layout has 36 mismatched parts in this
class. The maximum of 1 and 36 is 36 and, therefore, the tree node
has "[36]" in its name.</LI>
<LI><CODE><U>pads180nm_100um</U></CODE> Part library</LI>
<LI><CODE><U>PAD_dgnd</U></CODE> Part
 type</LI>
</UL>
<P>
In the example above, part types were
enough to partition parts into classes. In many other cases, like the
one in the figure below, types are not enough and the number of different
wires attached to a part is employed as an additional partitioning
criterion.</P>
<P>
When a part class node is
selected, the right half of the window displays a two-column table.
Each column corresponds to one of the compared cells and has a list
of that cell's parts which belong to the selected part class.
Matched parts are printed in green.</P>
<P>
<CENTER>
<IMG SRC="fig09-47.png" ALT="Figure 9.47" BORDER=1><BR>
<FONT SIZE="-1">The number of
 attached Wires as a Part class characteristic</FONT></CENTER>
<P>
Parts on the same line
 match each other. Mismatched parts are printed in red in no
particular order.</P>
<P>
<H3>
Wires</H3>
<P>
NCC partitions wires into equivalence
classes based upon the number of different port types attached to
them. Examples of port types include an NMOS "gate"
port, a PMOS "diffusion" port,
and a NAND "output" port.
Port
 type counts are represented as a list of leaf nodes under the wire
class node. Since zero-value counts at the beginning of the list tend
to be numerous and are rarely used by designers, they are further
grouped under a "0's";
 node.</P>
<P>
For
 example, in the figure below, the second wire class is expanded and we can
see its four characteristics, the first three of which are &quot;zero&quot;.
The first characteristic has a leaf node called
"pads180nm_150um:PAD_raw
 welltapL ports", which means that wires in this class
are <I>not</I> attached to
the port "welltapL" of the part
"PAD_raw" from the library
"pads180nm_150um".</P>
<P>
The fourth characteristic is "1
 = number of pads180nm_150um:PAD_raw padRaw ports".
The
 name suggests that all wires in this class are connected to the
"padRaw" ports of 3 instances of
parts with type "PAD_raw" from
library "pads180nm_150um".</P>
<P>
<CENTER>
<IMG SRC="fig09-41.png" ALT="Figure 9.41" BORDER=1></CENTER>
<P>
When a wire class node is selected, the
right half of the window displays a two-column table (see figure below). Each
column corresponds to one of the compared cells and has a list of
that cell's wires which belong to the selected wire class. Matched
wires are printed in green, the two wires on the same line match each
other. Mismatched wires are printed in red in no particular order.</P>
<P>
<CENTER><IMG SRC="fig09-48.png" ALT="Figure 9.48" BORDER=1></CENTER>
<P>
The
 tree node names contain the first mismatched wires from both lists.
For example, in the above figure, the second wire class has the node name
<BR>
&nbsp;&nbsp;&nbsp;<CODE>#2
 : { E_eq_Vo,...}
 { W_core_eqVo,... }  [10]</CODE>
<BR>
which has the following meaning:</P>
<UL>
<LI><CODE><U>#2</U></CODE> The
 sequence number of this class.</LI>
<LI><CODE><U>{
E_eq_Vo,...}</U></CODE> The
 first mismatched wire in the first cell's list is called "E_eq_Vo."
The ellipsis after the name suggest
 that there is more than one wire in the list.</LI>
<LI><CODE><U>{ W_core_eqVo,... }</U></CODE> The
 first mismatched wire in the second cell's list is called
"W_core_eqVo."</LI>
<LI><CODE><U>[10]</U></CODE> The
 number of mismatched wires in one of the two cells, whichever is
bigger. In our example, the schematic cell has 10 mismatched wires
in this class, and the layout has 2 mismatched wires in this
class. The maximum of 10 and 2 is 10, and therefore, the tree node
has "[10]" in its name.</LI>
</UL>
<P>
<H3>
Hash Code Partitioning</H3>
<P>
If
 local partitioning fails to find a mismatch, then NCC reports
mismatches found by <I>hash code partitioning</I>
under the nodes labeled "Parts
 (hash code)" and "Wires
 (hash code)".
Unlike their local partitioning
counterparts, hash code partitioning classes do not have any
characteristics.</P>
<P>
<H3>
Selecting Multiple Classes</H3>
<P>
It is possible to select more than one
class by holding the <I>Control</I> (<I>Command</I> on Macintosh) or
the <I>Shift</I> key during selection. In this case, the right side
will have multiple rows, one row per class. The figure below shows what is
displayed when the three wire classes in the figure above are selected. Up to
five classes can be displayed at once. Rows are arranged in the order
in which the classes are selected.</P>
<P>
<CENTER><IMG SRC="fig09-49.png" ALT="Figure 9.49" BORDER=1><BR>
<FONT SIZE="-1">Up to five equivalence classes can be selected simultaneously</FONT></CENTER>
<P>
Selecting one or more subnodes of a
class node is equivalent to selecting the class node itself. This
means that no class appears twice in the table on the right. If some
node of a type different from Parts, Wires, Parts (hash code), or
Wires (hash code) is selected as well, then it has a higher display
priority and its contents are displayed instead. For example, if an
exports node was selected with the three wire class nodes, then the
export table would be displayed on the right.</P>
<H3>9-7-5-4: NCC GUI: Sizes</H3>
<P>
Both length and width mismatches in
transistor and resistor sizes are collected under "Sizes
 [X]" node, where
"X" is the total number of size
mismatches. Resistor size mismatches are reported here, because
polysilicon resistors in both schematics and layout have lengths and
widths.</P>
<P>
<CENTER>
<IMG SRC="fig09-50.png" ALT="Figure 9.50" BORDER=1><BR>
<FONT SIZE="-1">The size
mismatches table is sorted in the descending order of the relative
error</FONT></CENTER>
<P>
On the right side of the window,
mismatches are arranged into a table sorted in the descending order
of the relative error (see example above). Each mismatch occupies one row and
has four columns. The first column contains the relative error of the
mismatch. The second and third columns have widths and lengths of the
corresponding parts in two cells. The mismatched value is printed in
red. The last column has hyperlinked part names.</P>
<P>
If a transistor has both a length and a
width mismatch, then these mismatches are displayed in separate rows
(e.g. the first and the second rows above).</P>
<H3>9-7-5-5: NCC GUI: Export Assertions</H3>
<P>
It is very common for a layout cell, <CODE>A</CODE>,
to have multiple ground wires that are connected by it's
parent cell, <CODE>B</CODE>. For example,
cell <CODE>A</CODE> may have a wire with the
export "gnd" and a different wire
with the export "gnd_1". When
cell <CODE>B</CODE> instantiates <CODE>A</CODE>,
cell <CODE>B</CODE> connects <CODE>A</CODE>'s
exports "gnd" and "gnd_1".
However, <CODE>A</CODE>'s schematic
typically has only one combined "gnd"
wire. When NCC compares <CODE>A</CODE>'s
schematic and layout, it finds that the ground wires mismatch. As a
solution, the designer adds the following NCC annotation into <CODE>A</CODE>'s
layout cell:</P>
<P ALIGN=CENTER>
exportsConnectedByParent gnd gnd_1</P>
<P>
This annotation constitutes a promise
that whenever <CODE>A</CODE> is
instantiated, its exports "gnd"
and "gnd_1" will be connected.
Then, when NCC compares A's schematic and layout, it assumes that the
promise has been kept and the comparison passes. However, when NCC
compares <CODE>B</CODE>'s schematic and
layout, it checks to see if the designer is keeping the promise. If
the promise is not kept, and no new promise to connect exports in the
next parent is given, then NCC reports an export assertion error in
the "Export Assertions" leaf node.</P>
<P>
When an "Export
 Assertions" node is selected, it displays a table with
two columns and one or more rows (see below). Each row corresponds to
a broken promise. The first column has cell names. The second column
lists exports that the designer promised would be connected, but
which remained disconnected. The exports are organized into two or
more export lists. Each export list is a comma-separated list of
exports enclosed in curly brackets "{
 }".
Exports in the same list are connected. Exports in
different lists are disconnected. The designer promised that all
exports in all lists would be connected.</P>
<P>
<CENTER>
<IMG SRC="fig09-51.png" ALT="Figure 9.51" BORDER=1></CENTER>
<p>
All exports are individually highlightable. For example, if the designer clicks on the "vdd" 
export then NCC will open up a window for cell "rectifier{lay}" and highlight the net connected
to the export "vdd".</p>
<p>
Tip: If it the design includes multiple instances of cell "rectifier{lay}" then
the designer can find out which particular instance failed to keep the promise by typing control-U
which will pop up a level in the hierarchy.
</p>
<H3>9-7-5-6: NCC GUI: Export/Global Network and Characteristics Conflicts</H3>
<P>
In an export/global network conflict, a
cell has both an export and a global signal with the same name, but
their networks are topologically different (see below). Both the
global network export and the cell export are highlightable.</P>
<P>
<CENTER>
<IMG SRC="fig09-52.png" ALT="Figure 9.52" BORDER=1></CENTER>
<P>
In an export/global characteristics
conflict, one cell also has both an export and a global signal with
the same name, but their characteristics differ (see below). The cell
export can be highlighted by clicking on its characteristics.</P>
<P>
<CENTER>
<IMG SRC="fig09-53.png" ALT="Figure 9.53" BORDER=1></CENTER>
<H3>9-7-5-7: NCC GUI: Unrecognized Parts</H3>
<P>
This node has a list of parts
(transistors and resistors) with unrecognized types (see below).
Each part can be highlighted by clicking on its type.</P>
<P>
<CENTER>
<IMG SRC="fig09-54.png" ALT="Figure 9.54" BORDER=1></CENTER>
<H3>9-7-5-8: NCC GUI: Advanced Features</H3>
<P>
The total number of mismatched cell
comparisons is displayed in square brackets on the top of the tree.
Only comparisons that did not pass NCC tests are counted and
displayed. Each failed comparison corresponds to one top-level tree
node. By default, NCC halts after the first failed comparison and,
therefore, the tree contains just one failed comparison.
If the user configures the NCC Preferences to continue
even after finding mismatched cells, then NCC compares all cells and
displays all that mismatch. When multiple cells have mismatches, the
left pane will display more than one top-level node as shown below.</P>
<P>
<CENTER><IMG SRC="fig09-55.png" ALT="Figure 9.55" BORDER=1></CENTER>
<P>
Right-clicking on a tree
node or a table cell pops up a menu with an option to copy the node
name or the cell text to the system clipboard (see below).</P>
<P>
<CENTER><IMG SRC="fig09-56.png" ALT="Figure 9.56" BORDER=1>
&nbsp;
<IMG SRC="fig09-57.png" NAME="Graphic17" BORDER=1></CENTER>
<!-- PAGE BREAK --><A NAME="chap09-08-01"></A>
<CENTER><FONT SIZE=6><B>Chapter 9: Tools</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap09-07-05-08.html#chap09-07-05-08.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>9-8-1: Pad Frame Generation</H2></CENTER></TD>
<TD><CENTER><A HREF="chap09-08-02.html#chap09-08-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Tool/Generation/Pad Frame Generator... -->
The Pad Frame generator reads a disk file and places a ring of pads around your chip.
The pads are contained in a separate library, and are copied into the current library to construct the pad frame.
<P>
The format of the pad frame disk file is as follows:
<CENTER><TABLE>
<TR><TD><CODE>celllibrary LIBRARYFILE [copy]</CODE></TD><TD>; Identifies the file with the pads</TD></TR>
<TR><TD><CODE>cell PADFRAMECELL</CODE></TD><TD>; Creates a cell to hold the pad frame</TD></TR>
<TR><TD><CODE>views VIEWS</CODE></TD><TD>; A list of views to generate</TD></TR>
<TR><TD><CODE>core CORECELL</CODE></TD><TD>; Places cell in center of pad frame</TD></TR>
<TR><TD><CODE>align PADCELL INPUTPORT OUTPUTPORT</CODE></TD><TD>; Defines input and output ports on pads</TD></TR>
<TR><TD><CODE>export PADCELL IOPORT [COREPORT]</CODE></TD><TD>; Defines exports on the pads</TD></TR>
<TR><TD><CODE>place PADCELL [GAP] [PORTASSOCIATION]</CODE></TD><TD>; Places a pad into the pad frame</TD></TR>
<TR><TD><CODE>rotate DIRECTION</CODE></TD><TD>; Turns the corner in pad placement</TD></TR>
</TABLE></CENTER>
<P>
The file must have exactly one <U><CODE>celllibrary</CODE></U> and <U><CODE>cell</CODE></U> statement,
as they identify the pad library and the pad frame cell.
If the <U><CODE>celllibrary</CODE></U> line ends with the keyword <U><CODE>copy</CODE></U>,
then cells from that library are copied into the library with the pad ring (by default, they are merely instantiated,
creating a cross-library reference to the pads library).
If there is a <U><CODE>views</CODE></U> statement, it identifies a list of views to generate
(such as <U><CODE>sch</CODE></U> or <U><CODE>lay</CODE></U>).
Requesting multiple views will produce multiple pad frame cells.
<P>
The file may have only one <U><CODE>core</CODE></U> statement to place your top-level circuit inside of the pad frame.
If there is no <U><CODE>core</CODE></U> statement,
then pads are placed without any circuit in the middle.
<P>
The <U><CODE>align</CODE></U> statement is used to identify connection points on the pads that will be used for placement.
Each pad should have an input and an output port that define the edges of the pad.
These ports are typically the on the power or ground rails that run through the pad.
When placing pads, the output port of one pad is aligned with the input port of the next pad.
<P>
Each pad that is placed with a <U><CODE>place</CODE></U>
statement is aligned with the previous pad according to the alignment factor.
A <U><CODE>gap</CODE></U> can be given in the placement that spreads the two pads by the specified distance.
For example, the statement:
<CENTER><CODE>place padIn gap=100</CODE></CENTER>
requests that the "padIn" pad be placed so that its input port is 100 units away from the previous pad's output port.
<P>
If a core cell has been given, you can also indicate wiring between the pads and the core ports.
This is done by having one or more <I>port associations</I> in the <U><CODE>place</CODE></U> statements.
The format of a port association is simply <U><CODE>PADPORT = COREPORT</CODE></U>.
For example, the statement:
<CENTER><CODE>place padOut tap=y</CODE></CENTER>
indicates that the "tap" port on the placed pad will connect to the "y" port on the core cell.
<P>
The port association can also create an export on the pad.
The statement:
<CENTER><CODE>place padOut export io=o7 export tap=core_o7</CODE></CENTER>
creates two exports on the pad, "o7" on its "io" port, and "core_o7" on its "tap" port.
For many instances of this pad type, this notation can be condensed
with the use of the <U><CODE>name</CODE></U> keyword in conjunction
with exports defined for the pad at the start of the file.  For example, defining the IO ports as
<CENTER><CODE>export padOut io tap</CODE></CENTER>
and then changing the place statement to
<CENTER><CODE>place padOut name=o7</CODE></CENTER>
results in the same ports being exported with the same names.  This shorted notation always
prepends name with "core_" on the core port export.
<P>
The <U><CODE>rotate</CODE></U> statement rotates subsequent pads by the specified amount.
The statement has only two forms: <U><CODE>rotate c</CODE></U> to rotate clockwise,
and <U><CODE>rotate cc</CODE></U> to rotate counterclockwise.
<P>
Here is an example of a pad frame disk file, with the finished layout.
There is a cell in the Samples library called "tool-PadFrame"
(get it with the <B>Sample Cells</B> command, in menu <B>Help / Load Built-in Libraries</B>).
The text below makes use of that cell, so save it to disk
and read it with the <B>Pad Frame Generator...</B> command (in menu <B>Tool / Generation</B>).
<P>
<CENTER><TABLE>
<TR><TD><CODE><FONT SIZE="-1">; specify library with pads</FONT></CODE></TD>              <TD><CODE><FONT SIZE="-1">; place the top edge of pads</FONT></CODE></TD></TR>
<TR><TD><CODE><FONT SIZE="-1">celllibrary pads4u.txt</FONT></CODE></TD>                   <TD><CODE><FONT SIZE="-1">place PAD_corner{lay}</FONT></CODE></TD></TR>
<TR><TD></TD>                                                      <TD><CODE><FONT SIZE="-1">place PAD_gnd{lay} gnd_in=gnd</FONT></CODE></TD></TR>
<TR><TD><CODE><FONT SIZE="-1">; create cell "padframe"</FONT>&nbsp;&nbsp;&nbsp;&nbsp;</CODE></TD><TD><CODE><FONT SIZE="-1">place PAD_vdd{lay} m1m2=vdd</FONT></CODE></TD></TR>
<TR><TD><CODE><FONT SIZE="-1">cell padframe</FONT></CODE></TD>                            <TD></TD></TR>
<TR><TD></TD>                                                      <TD><CODE><FONT SIZE="-1">; place the right edge of pads</FONT></CODE></TD></TR>
<TR><TD><CODE><FONT SIZE="-1">; place this cell as the "core"</FONT></CODE></TD>	       <TD><CODE><FONT SIZE="-1">rotate c</FONT></CODE></TD></TR>
<TR><TD><CODE><FONT SIZE="-1">core tool-PadFrame</FONT></CODE></TD>                       <TD><CODE><FONT SIZE="-1">place PAD_corner{lay}</FONT></CODE></TD></TR>
<TR><TD></TD>                                                      <TD><CODE><FONT SIZE="-1">place PAD_in{lay} out=pulse</FONT></CODE></TD></TR>
<TR><TD><CODE><FONT SIZE="-1">; set the alignment of the pads</FONT></CODE></TD>          <TD><CODE><FONT SIZE="-1">place PAD_spacer{lay}</FONT></CODE></TD></TR>
<TR><TD><CODE><FONT SIZE="-1">;  (with input and output export)</FONT></CODE></TD>        <TD></TD></TR>
<TR><TD><CODE><FONT SIZE="-1">align PAD_in{lay}     dvddL dvddR</FONT></CODE></TD>        <TD><CODE><FONT SIZE="-1">; place the bottom edge of pads</FONT></CODE></TD></TR>
<TR><TD><CODE><FONT SIZE="-1">align PAD_out{lay}    dvddL dvddR</FONT></CODE></TD>        <TD><CODE><FONT SIZE="-1">rotate c</FONT></CODE></TD></TR>
<TR><TD><CODE><FONT SIZE="-1">align PAD_vdd{lay}    dvddL dvddR</FONT></CODE></TD>        <TD><CODE><FONT SIZE="-1">place PAD_corner{lay}</FONT></CODE></TD></TR>
<TR><TD><CODE><FONT SIZE="-1">align PAD_gnd{lay}    dvddL dvddR</FONT></CODE></TD>        <TD><CODE><FONT SIZE="-1">place PAD_out{lay} in=out1</FONT></CODE></TD></TR>
<TR><TD><CODE><FONT SIZE="-1">align PAD_corner{lay} dvddL dvddR</FONT></CODE></TD>        <TD><CODE><FONT SIZE="-1">place PAD_out{lay} in=out2</FONT></CODE></TD></TR>
<TR><TD><CODE><FONT SIZE="-1">align PAD_spacer{lay} dvddL dvddR</FONT></CODE></TD>        <TD></TD></TR>
<TR><TD></TD>                                                      <TD><CODE><FONT SIZE="-1">; place the left edge of pads</FONT></CODE></TD></TR>
<TR><TD></TD>                                                      <TD><CODE><FONT SIZE="-1">rotate c</FONT></CODE></TD></TR>
<TR><TD></TD>                                                      <TD><CODE><FONT SIZE="-1">place PAD_corner{lay}</FONT></CODE></TD></TR>
<TR><TD></TD>                                                      <TD><CODE><FONT SIZE="-1">place PAD_in{lay} out=in1</FONT></CODE></TD></TR>
<TR><TD></TD>                                                      <TD><CODE><FONT SIZE="-1">place PAD_in{lay} out=in2</FONT></CODE></TD></TR>
</TABLE></CENTER>
<P>
<TABLE><TR><TD><IMG SRC="fig09-16.png" ALT="Figure 9.16" BORDER=0></TD><TD>
This file places 8 pads in a ring (2 on each side) and also places corner "pads" for making bends.
The input pads connect to the 2 input ports "a1" and "a2".
The output pads connect to the 3 output ports "out1", "out2", and "out3"
The power and ground pads connect to the "vdd" and "gnd" ports.
</TD></TR></TABLE>
<P>
<TABLE><TR><TD>
Connections between pads and ports of the core cell use Unrouted arcs
(from the Generic technology, see <A HREF="chap07-06-03.html#chap07-06-03">Section 7-6-3</A>).
After these connections are routed with real geometry, the finished layout is shown here, fully instantiated.
</TD><TD><IMG SRC="fig09-17.png" ALT="Figure 9.17" BORDER=0></TD></TR></TABLE>
<!-- NEED 3in -->
<H3>9-8-2: Other Generators</H3>
<!-- COMMAND Tool/Generation/Coverage Implants Generator -->
<!-- COMMAND Tool/Generation/ROM Generator... -->
<!-- COMMAND Tool/Generation/MOSIS CMOS PLA Generator... -->
<!-- COMMAND Tool/Generation/Generate gate layouts (MoCMOS) -->
<!-- COMMAND Tool/Generation/Fill (MoCMOS)... -->
There are other generators built into Electric.
These commands (in menu <B>Tool / Generation</B>) may be used:
<UL>
<LI><B>Coverage Implants Generator</B>
Although individual MOS nodes and arcs have the proper amount of implant around them,
a collection of such objects may result in an irregular implant boundary.
To clean this up, you can place pure-layer nodes of implant that neatly cover the implant area
(see <A HREF="chap07-01-01.html#chap07-01-01">Section 7-1-1</A>).
This command does it automatically.
It removes previous pieces of coverage implant before running, so that the result is a clean cover.
</LI>
<LI><B>ROM Generator...</B>
The ROM generator constructs many cells to describe a ROM from a personality file.
You will be prompted for the personality file.
The first line of the ROM personality file lists the degree of folding.
For example, a 256-word x 10-bit ROM with a folding degree of 4 will be implemented as a 64 x 40 array
with 4:1 column multiplexers to return 10 bits of data while occupying more of a square form factor.
The number of words and degree of folding should be a power of 2.
The remaining lines of the file list the contents of each word.
The parser is pretty picky.
There should be a carriage return after the list word, but no other blank lines in the file.
Here is a sample ROM file:
<BR>
<CODE>
&nbsp;&nbsp;&nbsp;1
<BR>
&nbsp;&nbsp;&nbsp;010101
<BR>
&nbsp;&nbsp;&nbsp;011001
<BR>
&nbsp;&nbsp;&nbsp;100101
<BR>
&nbsp;&nbsp;&nbsp;101010
<BR>
&nbsp;&nbsp;&nbsp;4
<BR>
&nbsp;&nbsp;&nbsp;00000000
<BR>
&nbsp;&nbsp;&nbsp;10000000
<BR>
&nbsp;&nbsp;&nbsp;01000000
<BR>
&nbsp;&nbsp;&nbsp;11000000
</CODE>
</LI>
<LI><B>MOSIS CMOS PLA Generator...</B>
The MOSIS CMOS PLA generator reads two personality files (AND and OR) and
generates a PLA array.
Each file has only two numbers on the first line to define the size of the array,
and the values of the array on subsequent lines.
Both the AND file and the OR file are similar.
Here is some sample PLA logic:
<CENTER><TABLE><TR><TD>
<I>f</I> = (<I>a</I> <B>and</B> <I>b</I> <B>and</B> (<B>not</B> <I>c</I>)) <B>or</B> ((<B>not</B> <I>b</I>) <B>and</B> (<B>not</B> <I>a</I>))
</TD></TR>
<TR><TD>
<I>g</I> = (<I>a</I> <B>and</B> <I>c</I>) <B>or</B> ((<B>not</B> <I>a</I>) <B>and</B> (<B>not</B> <I>c</I>))
</TD></TR></TABLE></CENTER>
Here is the AND file for the above logic:
<BR>
<CODE>
&nbsp;&nbsp;&nbsp;4&nbsp;&nbsp;3
<BR>
&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;1&nbsp;&nbsp;0
<BR>
&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;0&nbsp;&nbsp;X
<BR>
&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;X&nbsp;&nbsp;1
<BR>
&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;X&nbsp;&nbsp;0
</CODE>
</LI>
<LI><B>Fill (MoCMOS)...</B>
<TABLE><TR><TD>
Needs further explanation and dialog.
</TD><TD><IMG SRC="fig09-59.png" ALT="Figure 9.59" BORDER=0></TD></TR></TABLE>
</LI>
<LI><B>Generate gate layouts (MoCMOS)</B>
Generates a set of gates in the MOSIS CMOS technology.
</LI>
</UL>
<!-- PAGE BREAK --><A NAME="chap09-09"></A>
<CENTER><FONT SIZE=6><B>Chapter 9: Tools</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap09-08-02.html#chap09-08-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>9-9: Logical Effort</H2></CENTER></TD>
<TD><CENTER><A HREF="chap09-10-01.html#chap09-10-01.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Tool/Logical Effort/Optimize for Equal Gate Delays -->
<!-- COMMAND Tool/Logical Effort/Optimize for Equal Gate Delays (no caching) -->
<!-- COMMAND Tool/Logical Effort/Print Info for Selected Node -->
<!-- COMMAND Tool/Logical Effort/Back Annotate Wire Lengths for Current Cell -->
<!-- COMMAND Tool/Logical Effort/Clear Sizes on Selected Node(s) -->
<!-- COMMAND Tool/Logical Effort/Clear Sizes in all Libraries -->
<!-- COMMAND Tool/Logical Effort/Load Logical Effort Libraries (Purple, Red, and Orange) -->
<!-- PROJECTSETTING Logical Effort -->
The Logical Effort tool examines a digital schematic and determines the optimal transistor size to use in order to get maximum speed.
The tool is based on the book <A HREF="http://www.mkp.com/books_catalog/catalog.asp?ISBN=1-55860-557-6"><I>Logical Effort</I></A>,
by Ivan Sutherland, Bob Sproull, and David Harris (Morgan Kaufmann, San Francisco, 1999).
It is highly recommended that the user be familiar with the concepts of this book before using the Logical Effort Tool.
<P>
To control Logical Effort, use the
Logical Effort Project Settings (in menu <B>File / Project Settings...</B>, "Logical Effort" tab).
This lets you control a number of settings for Logical Effort analysis.
<P>
<CENTER><IMG SRC="fig09-14.png" ALT="Figure 9.14"></CENTER>
<P>
<H3>Logical Effort Gates</H3>
<P>
A design that is intended to be analyzed with Logical Effort must be composed of special
Logical Effort gates.
A Logical Effort gate is simply a schematic or layout cell
that conforms to the following specifications:
<UL>
<LI>The cell has an attribute "LEGATE" which is set to "1".
<LI>The cell has only one output, which may have a logical effort attribute (explained below).
<LI>The cell has zero or more inputs/bidirectional ports.  Each of these must have a
logical effort attribute (explained below).
<LI>The cell has an attribute whose name does not matter, but whose value is "LE.getdrive()",
and whose code is set to "Java".
</UL>
<CENTER><IMG SRC="fig09-25.png" ALT="Figure 9.25"></CENTER>
<P>
On the input and output exports of the cell, we can define an attribute named "le"
(double-click on the export text to get the Export Properties dialog, then click the
Attributes button to define the attribute).  The value
of this attribute is the logical effort of that port.  For example, a NAND gate typically
has a logical effort on each input of 4/3, and an output logical effort of 2.  An inverter is
defined to have an input logical effort of 1, and an output logical effort of 1.
<P>
The size assigned to the logical effort gate is retrieved via the "LE.getdrive()" call. This value
can then be used to size transistors within the gate.  The size retrieved is scaled with respect
to a minimum sized inverter (as are all other logical effort parameters).  So a size of "1"
denotes a minimum sized inverter.
<P>
While these attributes are defined on the layout or schematic cell <I>definition</I>, they must also
be present on the instantiated icon or instance of that definition.  By default this will be so.
<P>
Finally, there must be at least one load that is driven by the gates in order for them to be sized.  A load
is either a transistor or a capacitor.  Gates that do not drive loads, or that do not drive
gates that drive loads, will not be assigned sizes.
<P>
<H3>Logical Effort Libraries</H3>
<P>
Electric comes with a set of libraries that are specially designed for Logical Effort.
Use the <B>Load Logical Effort Libraries (Purple, Red, and Orange)</B> command
(in menu <B>Tool / Logical Effort</B>) to read these libraries.
<UL>
<LI>The <B>Purple</B> library is a set of logic gates that have been tailored for Logical Effort, as described above.</LI>
<LI>The <B>Red</B> library is a similar set of gates, but they are not setup for Logical Effort.
The Red gates can be used in places where Logical Effort is <I>not</I> to be done.</LI>
<LI>The <B>Orange</B> library is a low-level set of gates that is parameterized for a specific fabrication process.
Orange gates are used in the Purple and Red libraries, but should not be used elsewhere.
The Orange library that comes with Electric is tailored for a generic 180 nanometer process.</LI>
</UL>
<P>
<H3>Advanced Features</H3>
<P>
There are several advanced features that may be added to the cell definition:
<UL>
<LI>Attribute "LEKEEPER=1". This cell is defined as a keeper, whose size will be the size of the
smallest Logical Effort gate driving against it, multiplied by the Keeper Ratio.
<LI>Attribute "LEPARALLGRP=0". If set to 0, this gate drives by itself. If an integer greater
than zero, all gates with that value whose outputs drive the same network are assumed to
drive in parallel. The size needed to drive the load on the network will be equally divided
among those gates.
<LI>Attribute "su=-1". This specifies the step-up (fanout) of the gate, and overrides the global
fanout specified in the project settings.
If set to -1, this attribute is ignored, and the global value is used.
</UL>
<P>
<H3>Commands</H3>
<P>
These commands may be given to the Logical Effort tool (in menu <B>Tool / Logical Effort</B>):
<UL>
<LI><B>Optimize for Equal Gate Delays</B>
Optimizes all logical effort gates (cells) to have the same delay.  The delay is specified by the
Global fan-out (step-up) project setting.
This is <I>NOT</I> a path optimization algorithm.</LI>
<LI><B>Optimize for Equal Gate Delays (no caching)</B>
It is intended that both the caching and non-caching algorithms obtain exactly the same result,
however due to the difficulty in obtaining and maintaining correctness when it comes to caching,
the non-caching algorithm is also available.</LI>
<LI><B>Print Info for Selected Node</B>
After running sizing, information about a specific logical effort gate can be found by
selecting the gate instance and running this command.</LI>
<LI><B>Back Annotate Wire Lengths for Current Cell</B>
Runs NCC on the current cell against it's matching layout or schematic cell.  Assuming they match, for each LEWIRE
in the schematic cell, it finds the half-perimeter of the matching wire in the layout cell (as if the layout was flattened),
and then changes the "L" parameter on the LEWIRE to the value.  Note, back-annotation is only performed on
top level LEWIREs, and it takes into account the wire's length throughout the layout hierarhcy.</LI>
<LI><B>Clear Sizes on Selected Node(s)</B>
Logical effort sizes are stored as parameters on the LEGATE.  Sometimes the sheer number of sizes can
overwhelm the allocated process memory, and can also bloat file sizes when they are no longer needed.
This command deletes saved sizes on a per-node basis.</LI>
<LI><B>Clear Sizes in all Libraries</B>
This command deletes saved sizes everywhere.</LI>
</UL>
<!-- PAGE BREAK --><A NAME="chap09-10-01"></A>
<CENTER><FONT SIZE=6><B>Chapter 9: Tools</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap09-09.html#chap09-09.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>9-10-1: Parasitic Extraction</H2></CENTER></TD>
<TD><CENTER><A HREF="chap09-10-02.html#chap09-10-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- PREFERENCE Tools/Parasitic -->
<!-- PROJECTSETTING Parasitic -->
<P>
Parasitic Extraction is used by netlisters and other parts of the system that need to know
about geometric factors.
Control of parasitic extraction is done with the Parasitic Preferences
(in menu <B>File / Preferences...</B>, "Tools" section, "Parasitic" tab) and the Parasitic Project Settings
(in menu <B>File / Project Settings...</B>, "Parasitic" tab).
For the difference between Preferences and Project Settings, see
<A HREF="chap06-03.html#chap06-03">Section 6-3</A>.
<P>
<H3>Project Settings</H3>
<P>
<CENTER><IMG SRC="fig09-58.png" ALT="Figure 9.58"></CENTER>
<P>
Each layer of every technology is listed, and you can set its unit resistance,
area capacitance, and edge capacitance.
The "Factory Reset" buttons reverts values to the default shipped with Electric.
<P>
The bottom section controls values for every layer in a technology.
You can set the minimum resistance and capacitance, as well as the maximum series resistance.
The maximum series resistance breaks long single PI models into series of distributed PI models.
"Include Gate In Resistance" requests that a transistor's gate area be included in overall
area calculations for resistance determination.
"Include Ground Network" requests that ground networks be analyzed.
The "Gate Length Shrink" is a compensation factor for gate lengths.
Some process technologies shrink the gate length by a fixed amount.
<P>
<H3>Preferences</H3>
<CENTER><IMG SRC="fig09-26.png" ALT="Figure 9.26"></CENTER>
<P>
This dialog offers more controls:
<UL>
<LI>"Use Verbose Naming"
The parasitic extractor inserts resistors,
and thus makes multiple networks out of a single network.
The new networks are automatically named by the netlister.
Normally, the names are simple, such as "oldnetworkname#1".
When verbose naming is requested, the network names include the nodes to which they connect,
for example "oldnetworkname#m1m2conn-conn@0".
This makes it possible for the user to cross-probe back to the layout from
the expanded Spice file, but it makes the file larger.</LI>
<LI>"Back Annotate Layout"
transfers schematic net names to layout net names after NCC completes and matches.
This allows one to probe networks in layout with the same name as in the schematics,
making it easier to compare schematic simulations against layout simulations.</LI>
<LI>"Use exemptedNets.txt file"
looks for the file 'exemptedNets.txt' in your library directory. This file specifies
nets that are exempted from simple parasitic extraction.  There are two ways these
nets are treated, depending on subsequent setting: if "Extract everything except
exempted nets" is selected, all networks are extracted except the ones in the
exempted nets file. If "Extract only exempted nets", only the nets in the exempted
nets file are extracted.  All nets connected to this net in subcircuits are also
treated the same way.</LI>
</UL>
<P>
<!-- NEED 3in -->
Exempted Nets file format. One line per network. A network is specified by
a library name, cell name, and net name.  When nets are not extracted, a
lumped capacitance value may be specified to use on the network.  This last
argument is optional (0 if not specified) and ignored when the exempted nets
are the only nets extracted.
<P><code>
libraryName cellName netName [replacementCapValue]</code>
<P>
Example:
<P><code>
myLib myCell{lay} net@0<BR>
myLib myCell{lay} in_a
</code>
<H3>9-10-2: Node Extraction</H3>
<!-- COMMAND Tool/Network/Extract Current Cell -->
<!-- COMMAND Tool/Network/Extract Current Hierarchy -->
<P>
Because Electric captures connectivity information during design,
there is no need for "node extraction", the process of extracting connectivity from layout.
However, there are situations where a circuit has only layout and no connectivity,
specifically when a circuit has been read into Electric from CIF, GDS, or other formats
that have no connectivity information in them
(see <A HREF="chap03-09-02.html#chap03-09-02">Section 3-9-2</A>).
<P>
When CIF, GDS, and other foreign file formats are read into Electric, the cells they create
are composed entirely of pure-layer nodes
(see <A HREF="chap07-01-01.html#chap07-01-01">Section 7-1-1</A>).
These nodes appear to represent the circuit correctly, and can even be written back out
to CIF or GDS correctly.
But the missing connectivity information means that Electric cannot properly analyze these
circuits (cannot do DRC, simulation, etc.)
<P>
The solution is to convert this geometry into properly connected components.
To convert the current cell into connected geometry, use the <B>Extract Current Cell</B>
command (from menu <B>Tool / Network</B>).
To convert the current cell and all subcells, use the <B>Extract Current Hierarchy</B> command.
Electric creates new versions of the layout cells that have higher-level nodes and arcs in them.
<P>
Although the process of converting layout into connectivity information is difficult,
it can usually be done correctly.
In Electric, this process is complicated by the fact that the resulting connectivity information must
be expressed as a set of "high-level" primitives (transistors and contacts) which have their own
ways of appearing in the layout.
Therefore, it is not always possible to extract layout precisely.
For example, the design rules for a transistor typically require that polysilicon extend beyond
the gate area by 2 units, so transistor primitives typically have this
 extra geometry built into them.
But what would happen if the geometry to be extracted extends by 3 units?
Electric adds an extra 1-unit arc to fill-out the geometry that it finds.
Worse yet, what would happen if the geometry extends by only 1 unit?
Electric simply cannot represent this with its primitives.
It will create the transistor, but it will no longer match the original geometry.
In general, the system attempts to create high-level primitives that mimic the original geometry.
It often leaves small pure-layer nodes behind to complete the extraction.
As an aid in debugging the extraction process, these extra pure-layer nodes are highlighted
in the resulting cell.
<P>
<TABLE><TR><TD><CENTER><IMG SRC="fig09-12.png" ALT="Figure 9.12"></CENTER></TD><TD>
Two Network Preferences are available to control the extraction process
(in menu <B>File / Preferences...</B>, "Tools" section, "Network" tab).
<P>
The first is "Force exact cut placement", which requires that the cut (or via) locations
appear exactly in the same place once extracted.
Without this preference, Electric will find contact areas and replace them with contact nodes
regardless of where those nodes place the cuts.
With this preference selected, Electric will place contact nodes in such a way that the cut
layers land in the correct original locations.
</TD></TR></TABLE>
<P>
The disadvantage of forcing exact cut placement is that Electric will create many contact
nodes, one for each cut layer.
In multi-cut situations, this may be many more nodes than are necessary.
<P>
The other preference is "Grid-align geometry before extraction".
Doing this makes the extraction process run more smoothly, but may cost slightly in accuracy.
<!-- PAGE BREAK --><A NAME="chap09-11"></A>
<CENTER><FONT SIZE=6><B>Chapter 9: Tools</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap09-10-02.html#chap09-10-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>9-11: Compaction</H2></CENTER></TD>
<TD><CENTER><A HREF="chap09-12.html#chap09-12.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Tool/Compaction/Do Compaction -->
<!-- PREFERENCE Tools/Compaction -->
The compaction tool squeezes layout down to minimal design-rule spacing.
It does this by doing single-axis compaction,
alternating horizontal and vertical directions until no further space can be found.
Each pass of compaction squeezes either to the left or to the bottom of the circuit.
<P>
To compact, use the <B>Do Compaction</B> command (in menu <B>Tool / Compaction</B>).
<P>
<TABLE><TR><TD>
The Compaction Preferences (in menu <B>File / Preferences...</B>, "Tools" section, "Compaction" tab)
can tell the compactor to expand the circuit if it is too close for the design rules.
<P>
For an example of compaction, open the Samples library and edit the cell "tool-Compaction"
(you can read the library with the <B>Sample Cells</B> command, in menu <B>Help / Load Built-in Libraries</B>).
<P>
Be warned that the compaction tool is experimental and doesn't always achieve optimal results.
</TD><TD><CENTER><IMG SRC="fig09-10.png" ALT="Figure 9.10"></CENTER></TD></TR></TABLE>
<!-- PAGE BREAK --><A NAME="chap09-12"></A>
<CENTER><FONT SIZE=6><B>Chapter 9: Tools</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap09-11.html#chap09-11.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>9-12: Silicon Compiler</H2></CENTER></TD>
<TD><CENTER><A HREF="chap10-01.html#chap10-01.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<!-- COMMAND Tool/Silicon Compiler/Convert Current Cell to Layout -->
<!-- COMMAND Tool/Silicon Compiler/Compile VHDL to Netlist View -->
<!-- PREFERENCE Tools/Silicon Compiler -->
Electric has a silicon compiler called QUISC
(the Queen's University Interactive Silicon Compiler).
It is a powerful tool that can do placement and routing of standard cells from a schematic or a structural VHDL description.
The VHDL is compiled into a netlist which is then used to drive placement and routing.
Schematics are first converted into VHDL, then compiled to a netlist and laid-out.
Thus, a byproduct of silicon compilation will be a {net.quisc} view of a cell, and potentially a {vhdl} view.
<P>
Be warned that the silicon compiler is rather old,
and so it produces layout that alternates standard cell rows and routing rows.
Modern silicon compilers use multiple metal processes to route over the standard cells,
but this system does not.
This system uses two layers: a <I>vertical</I> routing arc to run in and out of cells,
and a <I>horizontal</I> routing arc to run between the cells in the routing channel.
It also uses <I>power</I> arcs to bring power and ground to the cell rows,
and <I>main power</I> arcs to connect the rails on the left and right.
<P>
The VHDL description is normally placed in the "vhdl" view of a cell
(see <A HREF="chap04-10.html#chap04-10">Section 4-10</A> for more on text editing).
There is a VHDL example in cell "tool-SiliconCompiler{vhdl}" of the "samples" library.
To access it, use the <B>Sample Cells</B> command (in menu <B>Help / Load Built-in Libraries</B>).
<P>
To convert a schematic or VHDL cell into layout, use the <B>Convert Current Cell to Layout</B> command
(in menu <B>Tools / Silicon Compiler</B>).
To compile VHDL to the {net.quisc} view, use the <B>Compile VHDL to Netlist View</B> command
(this is typically not needed, since the previous command does it automatically).
<P>
When creating a schematic or VHDL cell to be compiled,
it is important to know what primitives are available in the standard cell library.
Electric comes with a CMOS cell library in the MOSIS CMOS ("mocmos") technology.
This library is not correct, and exists only to illustrate the Silicon Compiler.
These component declarations are available:
<P>
component and2 port(a1, a2 : in bit; y : out bit);  end component;<BR>
component and3 port(a1, a2, a3 : in bit; y : out bit);  end component;<BR>
component and4 port(a1, a2, a3, a4 : in bit; y : out bit);  end component;<BR>
component inverter port(a : in bit; y : out bit);  end component;<BR>
component nand2 port(a1, a2 : in bit;  y : out bit);  end component;<BR>
component nand3 port(a1, a2, a3 : in bit;  y : out bit);  end component;<BR>
component nand4 port(a1, a2, a3, a4 : in bit; y : out bit);  end component;<BR>
component nor2 port(a1, a2 : in bit; y : out bit);  end component;<BR>
component nor3 port(a1, a2, a3 : in bit;  y : out bit);  end component;<BR>
component nor4 port(a1, a2, a3, a4 : in bit;  y : out bit);  end component;<BR>
component or2 port(a1, a2 : in bit; y : out bit);  end component;<BR>
component or3 port(a1, a2, a3 : in bit;  y : out bit);  end component;<BR>
component or4 port(a1, a2, a3, a4 : in bit;  y : out bit);  end component;<BR>
component rdff port(d, ck, cb, reset : in bit; q, qb : out bit);  end component;<BR>
component xor2 port(a1, a2 : in bit;  y : out bit);  end component;
<P>
The Silicon Compiler Preferences (in menu <B>File / Preferences...</B>, "Tools" section, "Silicon Compiler" tab)
let you control many aspects of placement and routing.
<P>
<CENTER><IMG SRC="fig09-36.png" ALT="Figure 9.36"></CENTER>
<P>
<UL>
<LI>The "Layout" section controls the number of rows of cells that will be created.
A one-row circuit may be exceedingly wide and short, so you may wish to experiment with this value.
For a square circuit, the number of rows should be the square root of the number of instances in the circuit
(the number of instances appears as the sum of the unresolved references,
listed by the VHDL Compiler).</LI>
<LI>The "Arcs" section lets you set the horizontal and vertical routing arcs, as well as the power rails.</LI>
<LI>The "Well" section gives you the option of placing blocks of P-well and N-well over the cell rows.</LI>
<LI>The "Design Rules" section lets you control Via size, metal spacing, feed-through size,
port distance, and active distance.</LI>
</UL>
<HR>
<CENTER><H1><A NAME="chap10-01">Chapter 10: The JELIB File Format</A></H1></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap09-12.html#chap09-12.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>10-1: JELIB and DELIB File Format</H2></CENTER></TD>
<TD><CENTER><A HREF="chap10-02-01.html#chap10-02-01.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
This chapter describes Electric's native file format, which ends in "jelib".
These files contain an entire library of cells.
The "delib" variation is used when each cell is stored in its own file
(useful when using CVS version control on a project,
see <A HREF="chap06-13.html#chap06-13">Section 6-13</A>).
The earlier file format, which ends in "elib", remains undocumented and is no longer recommended.
<P>
JELIB files are text-readable files.
Each line of a JELIB file starts with an identifying character that distinguishes the line.
Blank lines, and those that start with the comment identifying character (#) are ignored.
There is no limit to the length of a line of text.
<P>
After the identifying character at the start of a line, there are a set of fields.
All of the fields are separated by the separator character (|) except for the first field,
which begins immediately after the identifying character.
No blank spaces are allowed on a line (that is, any blank spaces are treated as valid characters).
Control characters (such as the identifying characters) must be upper case.
In order to insert a '|' or '\n' or '\r' into a field, it must be enclosed in the quotation mark characters (").
Backslash character can be used inside enclosed strings to denote special characters: 
<P>
<CENTER><TABLE BORDER=1 WIDTH="80%">
<TR><TH WIDTH="20%">Characters</TH><TH WIDTH="80%">Meaning</TH></TR>
<TR><TD ALIGN=CENTER>\n</TD><TD>line feed character (\n)</TD></TR>
<TR><TD ALIGN=CENTER>\r</TD><TD>carriage return character (\r)</TD></TR>
<TR><TD ALIGN=CENTER>\"</TD><TD>quotation mark character (")</TD></TR>
<TR><TD ALIGN=CENTER>\\</TD><TD>backslash character (\)</TD></TR>
</TABLE></CENTER>
<P>
Each of the different types of lines in the file has a fixed set of fields that must appear.
Some line types also allow additional fields at the end to add variables
(attribute/value pairs, see <A HREF="chap10-04-01.html#chap10-04-01">Section 10-4-1</A>). 
<P>
The JELIB file has 3 parts: the <I>header</I>, <I>cells</I>, and <I>trailer</I>.
<P>
The header has these elements:
<P>
<CENTER><TABLE BORDER=1 WIDTH="80%">
<TR><TD ALIGN=CENTER WIDTH="10%">H</TD><TD WIDTH="90%">Header information; variable fields are allowed</TD></TR>
<TR><TD ALIGN=CENTER>V</TD><TD>View information</TD></TR>
<TR><TD ALIGN=CENTER>L</TD><TD>External library information</TD></TR>
<TR><TD ALIGN=CENTER>R</TD><TD>External cell in the above external library</TD></TR>
<TR><TD ALIGN=CENTER>F</TD><TD>External export in the above external cell</TD></TR>
<TR><TD ALIGN=CENTER>T</TD><TD>Technology information; variable fields are allowed</TD></TR>
<TR><TD ALIGN=CENTER>O</TD><TD>Tool information; variable fields are allowed</TD></TR>
</TABLE></CENTER>
<P>
The cells have these elements:
<P>
<CENTER><TABLE BORDER=1 WIDTH="80%">
<TR><TD ALIGN=CENTER WIDTH="10%">C</TD><TD WIDTH="90%">Cell header; variable fields are allowed</TD></TR>
<TR><TD ALIGN=CENTER>N</TD><TD>Primitive node information in the current cell; variable fields are allowed</TD></TR>
<TR><TD ALIGN=CENTER>I</TD><TD>Cell instance information in the current cell; variable fields are allowed</TD></TR>
<TR><TD ALIGN=CENTER>A</TD><TD>Arc information in the current cell; variable fields are allowed</TD></TR>
<TR><TD ALIGN=CENTER>E</TD><TD>Export information in the current cell; variable fields are allowed</TD></TR>
<TR><TD ALIGN=CENTER>X</TD><TD>Cell termination</TD></TR>
</TABLE></CENTER>
<P>
The trailer has this element:
<P>
<CENTER><TABLE BORDER=1 WIDTH="80%">
<TR><TD ALIGN=CENTER WIDTH="10%">G</TD><TD WIDTH="90%">Group information</TD></TR>
</TABLE></CENTER>
<P>
Everything in the file is completely ordered.
There is an ordering to the external libraries, cells in those libraries, technologies, tools, cells,
nodes/arcs/exports in a cell, etc.
Even the extra variables on a line are ordered.
The ordering is usually a name sort.
By ordering everything in the file, the exact same file is generated every time,
and text comparison operations will accurately find differences between two files.
Note, however, that the JELIB reader does not require any sorting, and can handle the data in any order. 
<!-- PAGE BREAK --><A NAME="chap10-02-01"></A>
<CENTER><FONT SIZE=6><B>Chapter 10: The JELIB File Format</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap10-01.html#chap10-01.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>10-2-1: Header, View, and Tool</H2></CENTER></TD>
<TD><CENTER><A HREF="chap10-02-02.html#chap10-02-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
<H3>Headers</H3>
<P>
The first line in the JELIB file should be the "H" header line.  The syntax is:
<P>
<CENTER><TABLE BORDER=1 WIDTH="90%">
<TR><TD COLSPAN=2><B>H&lt;name&gt; | &lt;version&gt; [ | &lt;variable&gt; ]*</B></TD></TR>
<TR><TD WIDTH="20%">&lt;name&gt;</TD><TD WIDTH="80%">the name of the library.</TD></TR>
<TR><TD>&lt;version&gt;</TD><TD>the version of Electric that wrote the library.</TD></TR>
<TR><TD>&lt;variable&gt;</TD><TD>a list of variables on the library
(see <A HREF="chap10-04-01.html#chap10-04-01">Section 10-4-1</A>).</TD></TR>
</TABLE>
</CENTER>
<P>
The name of the library is used in the JELIB file to identify references to this library.
The actual name of this library is obtained from the file path of this JELIB file.
<P>
Example:
<P>
&nbsp;&nbsp;&nbsp;&nbsp;<CODE>Hlatches|8.01</CODE>
<P>
Declares that library "latches" was written from Electric version 8.01. 
<P>
<H3>Views</H3>
<P>
All views used in the library must be declared.
<P>
<CENTER><TABLE BORDER=1 WIDTH="90%">
<TR><TD COLSPAN=2><B>V&lt;full name&gt; | &lt;name&gt;</B></TD></TR>
<TR><TD WIDTH="20%">&lt;full name&gt;</TD><TD WIDTH="80%">the full name of the view.</TD></TR>
<TR><TD>&lt;name&gt;</TD><TD>the abbreviation name of the view.</TD></TR>
</TABLE>
</CENTER>
<P>
Example:
<P>
&nbsp;&nbsp;&nbsp;&nbsp;<CODE>Vlayout|lay</CODE>
<P>
Declares view with abbreviation name "lay" and full name "layout".
<P>
<H3>Tools</H3>
<P>
There is no need to declare all tools in the header.
The only reason for a tool declaration to exist is if the tool has project setting variables stored on it.
If there are multiple tool lines, they are sorted by the tool name. The syntax is:
<P>
<CENTER><TABLE BORDER=1 WIDTH="90%">
<TR><TD COLSPAN=2><B>O&lt;name&gt; [ | &lt;variable&gt; ]*</B></TD></TR>
<TR><TD WIDTH="20%">&lt;name&gt;</TD><TD WIDTH="80%">the name of the tool.</TD></TR>
<TR><TD>&lt;variable&gt;</TD><TD>a list of project settings on the tool
(stored as variables, see <A HREF="chap10-04-01.html#chap10-04-01">Section 10-4-1</A>).</TD></TR>
</TABLE>
</CENTER>
<P>
Example:
<P>
&nbsp;&nbsp;&nbsp;&nbsp;<CODE>Osimulation|SpiceEngine()I2|SpiceLevel()I1</CODE>
<P>
Declares two preferences on the "simulation" tool object.
The first is called "SpiceEngine" and is set to the integer value 2.
The second is called "SpiceLevel" and is set to the integer value 1.
<H3>10-2-2: External References</H3>
After the header line, all external libraries cells and exports must be declared.
This allows the file reader to quickly find all libraries that will be needed for the design,
and to reconstruct any missing cells and exports.
The cells are listed under their libraries.
The exports are listed under their cells.
If there are multiple external library lines, they are sorted by library name;
where there are multiple external cells in a library, they are sorted by their name;
and where there are multiple external exports in a cell, they are sorted by their name.
<P>
The syntax of an external library reference is:
<P>
<CENTER><TABLE BORDER=1 WIDTH="90%">
<TR><TD COLSPAN=2><B>L&lt;name&gt; | &lt;path&gt;</B></TD></TR>
<TR><TD WIDTH="20%">&lt;name&gt;</TD><TD WIDTH="80%">the name of the external library.</TD></TR>
<TR><TD>&lt;path&gt;</TD><TD>the full path to the disk file with the library.</TD></TR>
</TABLE>
</CENTER>
<P>
The name of the library is used in JELIB file to references to this library.
The actual name of this library is obtained from the path.
<P>
The syntax of an external cell reference is:
<P>
<CENTER><TABLE BORDER=1 WIDTH="90%">
<TR><TD COLSPAN=2><B>R&lt;name&gt; | &lt;lowX&gt; | &lt;highX&gt; | &lt;lowY&gt; | &lt;highY&gt;</B></TD></TR>
<TR><TD WIDTH="20%">&lt;name&gt;</TD><TD WIDTH="80%">the name of the external cell.</TD></TR>
<TR><TD>&lt;lowX&gt;</TD><TD>reserved for the low X bounds of the cell contents.</TD></TR>
<TR><TD>&lt;highX&gt;</TD><TD>reserved for the high X bounds of the cell contents.</TD></TR>
<TR><TD>&lt;lowY&gt;</TD><TD>reserved for the low Y bounds of the cell contents.</TD></TR>
<TR><TD>&lt;highY&gt;</TD><TD>reserved for the high Y bounds of the cell contents.</TD></TR>
</TABLE>
</CENTER>
<P>
The syntax of an external export reference is:
<P>
<CENTER><TABLE BORDER=1 WIDTH="90%">
<TR><TD COLSPAN=2><B>F&lt;name&gt; | &lt;centerX&gt; | &lt;centerY&gt;</B></TD></TR>
<TR><TD WIDTH="20%">&lt;name&gt;</TD><TD WIDTH="80%">the name of the external export.</TD></TR>
<TR><TD>&lt;centerX&gt;</TD><TD>reserved for the X coordinate of the center of export polygon.</TD></TR>
<TR><TD>&lt;centerY&gt;</TD><TD>reserved for the Y coordinate of the center of export polygon.</TD></TR>
</TABLE>
</CENTER>
<P>
Examples:
<P>
&nbsp;&nbsp;&nbsp;&nbsp;<CODE>Lspiceparts|/home/strubin/electric/spiceparts.jelib</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<CODE>Rgate;1{sch}|-4|4|0|2</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<CODE>Fout|0|2</CODE>
<P>
Declares that an external library called "spiceparts" will be used by the current library, and that it can be found at
"/home/strubin/electric/spiceparts.jelib".
In that library is a cell called "gate;1{sch}" whose contents run from -4 to 4 in X and 0 to 2 in Y.
In that cell is an export called "out" with center at (0,2).
<H3>10-2-3: Technologies</H3>
<h3>Technologies</h3>
<P>
All technologies used in the library must be in the header.
The other reason for a technology declaration to exist is if the technology has project settings stored on it.
If there are multiple technology lines, they are sorted by technology name.
The syntax is:
<P>
<CENTER><TABLE BORDER=1 WIDTH="90%">
<TR><TD COLSPAN=2><B>T&lt;name&gt; [ | &lt;variable&gt; ]*</B></TD></TR>
<TR><TD WIDTH="20%">&lt;name&gt;</TD><TD WIDTH="80%">the name of the technology.</TD></TR>
<TR><TD>&lt;variable&gt;</TD><TD>a list of project settings on the technology
(stored as variables, see <A HREF="chap10-04-01.html#chap10-04-01">Section 10-4-1</A>).</TD></TR>
</TABLE>
</CENTER>
<P>
Examples:
<P>
&nbsp;&nbsp;&nbsp;&nbsp;<CODE>Tmocmos</CODE>
<P>
Declares that there should be a technology called "mocmos".
<P>
&nbsp;&nbsp;&nbsp;&nbsp;<CODE>Tmocmos|ScaleFORmocmos()D200</CODE>
<P>
Declares the technology "mocmos" and also creates a project setting on that technology object called
"ScaleFORmocmos" which is a double-precision value equal to 200.
<!-- PAGE BREAK --><A NAME="chap10-03-01"></A>
<CENTER><FONT SIZE=6><B>Chapter 10: The JELIB File Format</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap10-02-03.html#chap10-02-03.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>10-3-1: Cells</H2></CENTER></TD>
<TD><CENTER><A HREF="chap10-03-02.html#chap10-03-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
After the header information, each cell is described.
A cell consists of a cell declaration ("C") followed by a number of node ("N"), instance ("I"),
arc ("A"), and export ("E") lines.
The cell is terminated with a cell-end line ("X").
Inside of a cell, all nodes come first and are sorted by the node name; arcs come next and are sorted by the arc name;
finally come exports, sorted by the export name.
Also, when there are multiple cells, their appearance in the file is sorted by the cell name.
The syntax is:
<P>
<CENTER><TABLE BORDER=1 WIDTH="90%">
<TR><TD COLSPAN=2><B>C&lt;name&gt; | &lt;group&gt; | &lt;tech&gt; | &lt;creation&gt; | &lt;revision&gt; |
&lt;flags&gt; [ | &lt;variable&gt; ]*</B></TD></TR>
<TR><TD WIDTH="20%">&lt;name&gt;</TD><TD WIDTH="80%">the name of the cell in the form "NAME;VERSION{VIEW}".</TD></TR>
<TR><TD>&lt;group&gt;</TD><TD>the name of this cell's group (if different than expected).
This field may be omitted in earlier-format libraries.</TD></TR>
<TR><TD>&lt;tech&gt;</TD><TD>the technology of the cell.</TD></TR>
<TR><TD>&lt;creation&gt;</TD><TD>the creation date of the cell (Java format).</TD></TR>
<TR><TD>&lt;revision&gt;</TD><TD>the revision date of the cell (Java format).</TD></TR>
<TR><TD>&lt;flags&gt;</TD><TD>flags for the cell.</TD></TR>
<TR><TD>&lt;variable&gt;</TD><TD>a list of variables on the cell
(see <A HREF="chap10-04-01.html#chap10-04-01">Section 10-4-1</A>).</TD></TR>
</TABLE>
</CENTER>
<P>
The Java format for dates (the creation and revision dates) is in milliseconds
since the "epoch" (Midnight on January 1, 1970, GMT).
<P>
The &lt;flags&gt; field consists of any of the following letters, (sorted alphabetically):
<P>
"C"	if this cell is part of a cell-library.<BR>
"E"	if the cell should be created "expanded".<BR>
"I"	if instances in the cell are locked.<BR>
"L"	if everything in the cell is locked.<BR>
"T"	if this cell is part of a technology-library.
<P>
Example:
<P>
&nbsp;&nbsp;&nbsp;&nbsp;<CODE>CrxArray;1{lay}||mocmos|1092185029000|1092185060000|I</CODE>
<P>
Declares cell "rxArray{lay}", version 1, associated with the "mocmos" technology.
The cell was created at date 1092185029000 and last modified at date 1092185060000.
All instances in the cell are locked.
<!-- NEED 3in -->
<H3>10-3-2: Node Instances</H3>
Inside of a cell definition, node instances are declared with the "N" and "I" lines.
"N" is for primitive nodes and "I" is for cell instances.
All nodes are sorted by the node name.
The syntax is:
<P>
<CENTER><TABLE BORDER=1 WIDTH="90%">
<TR><TD COLSPAN=2><B>N&lt;type&gt; | &lt;name&gt; | &lt;nameTD&gt; | &lt;x&gt; | &lt;y&gt; | &lt;width&gt; |
&lt;height&gt; | &lt;orientation&gt; | &lt;flags&gt; [ | &lt;variable&gt; ]*</B></TD></TR>
<TR><TD COLSPAN=2><B>I&lt;type&gt; | &lt;name&gt; | &lt;nameTD&gt; | &lt;x&gt; | &lt;y&gt; | &lt;orientation&gt; |
&lt;flags&gt; | &lt;TD&gt; [ | &lt;variable&gt; ]*</B></TD></TR>
<TR><TD WIDTH="20%">&lt;type&gt;</TD><TD WIDTH="80%">the type of the node instance.
For primitive node instances, this has the form: [&lt;technology&gt;:]&lt;primitive-node&gt;.
If &lt;technology&gt; is omitted, the technology of the cell is assumed.
For cell instances, it has the form: [&lt;library&gt;:]&lt;cell&gt;;&lt;version&gt;{&lt;view&gt;}.
If &lt;library&gt; is omitted, the library defined by this JELIB file is assumed.</TD></TR>
<TR><TD>&lt;name&gt;</TD><TD>the name of the node instance.
<TR><TD>&lt;nameTD&gt;</TD><TD>a text descriptor for the name (when displayed).</TD></TR>
<TR><TD>&lt;x&gt;</TD><TD>the X coordinate of the anchor point of the node instance.</TD></TR>
<TR><TD>&lt;y&gt;</TD><TD>the Y coordinate of the anchor point of the node instance.</TD></TR>
<TR><TD>&lt;width&gt;</TD><TD>the width of the primitive node (must be non-negative).</TD></TR>
<TR><TD>&lt;height&gt;</TD><TD>the height of the primitive node (must be non-negative).</TD></TR>
<TR><TD>&lt;orientation&gt;</TD><TD>the orientation of the node (see below).</TD></TR>
<TR><TD>&lt;flags&gt;</TD><TD>flags for the node instance (see below).</TD></TR>
<TR><TD>&lt;TD&gt;</TD><TD>a text descriptor for the cell instance name (does not apply to primitives).</TD></TR>
<TR><TD>&lt;variable&gt;</TD><TD>a list of variables on the node instance
(see <A HREF="chap10-04-01.html#chap10-04-01">Section 10-4-1</A>).</TD></TR>
</TABLE>
</CENTER>
<P>
The &lt;orientation&gt; field consists of any of the following letters, with an optional numeric part at the end:
<P>
"X"	if the node instance is X-mirrored (mirrored about Y axis).<BR>
"Y"	if the node instance is Y-mirrored (mirrored about X axis).<BR>
"R"	each letter rotates the node instance at 90 degrees counter-clockwise.<BR>
Num	Any digits at the end are additional rotation in tenths of a degree.	
<P>
The &lt;flags&gt; field consists of any of the following letters, sorted alphabetically, with the numeric part at the end:
<P>
"A"	if the node instance is hard-to-select.<BR>
"L"	if the node instance is locked.<BR>
"V"	if the node instance is visible only inside the cell.<BR>
Num	Any digits at the end are the technology-specific bits.
<P>
Examples:
<P>
&nbsp;&nbsp;&nbsp;&nbsp;<CODE>Nschematic:Transistor|mos@0||2|0|4|4|R|2|ATTR_length(D5G0.5;X-0.5;Y-1;)S2</CODE>
<P>
Places a schematic Transistor called "mos@0" at (2,0), size 4x4, rotated 90 degrees.
The flag field "2" is numeric, and therefore is technology-specific information
(in this case, it makes the transistor be pMOS).
There is one attribute on the node, called "length", with the value "2" (a string).
This attribute is displayed, anchored at its center ("D5"),
is 1 half grid unit in size ("G0.5;"), and is offset (-0.5, -1) from the node center ("X-0.5;Y-1;").
<P>
&nbsp;&nbsp;&nbsp;&nbsp;<CODE>Ilow;1{lay}|HAPPY||14|12|Y|A|D5G4;</CODE>
<P>
Places an instance of cell "low{lay}" from the library defined in this JELIB file.
The instance is named "HAPPY".
It is at (14,12),mirrored in Y, and is rotated 0.
The "A" means that the node is hard-to-select.
Its name is described by D5G4;
 (D5 means a centered anchor point, G4; means size 4 units).
<H3>10-3-3: Arc Instances</H3>
Inside of a cell definition, arc instances are declared with the "A" line.
All arcs are sorted by the arc name.
The syntax is:
<P>
<CENTER><TABLE BORDER=1 WIDTH="90%">
<TR><TD COLSPAN=2><B>A&lt;type&gt; | &lt;name&gt; | &lt;nameTD&gt; | &lt;width&gt; | &lt;flags&gt; |
&lt;headNode&gt; | &lt;headPortID&gt; | &lt;headX&gt; | &lt;headY&gt; | 
&lt;tailNode&gt; | &lt;tailPortID&gt; | &lt;tailX&gt; | &lt;tailY&gt; [ | &lt;variable&gt; ]*</B></TD></TR>
<TR><TD WIDTH="20%">&lt;type&gt;</TD><TD WIDTH="80%">the type of the arc instance.  It has the form: [&lt;technology&gt;:]&lt;arc&gt;.
If technology is omitted, the technology of the cell is assumed.</TD></TR>
<TR><TD>&lt;name&gt;</TD><TD>the name of the arc instance.</TD></TR>
<TR><TD>&lt;nameTD&gt;</TD><TD>a text descriptor for the name (when displayed).</TD></TR>
<TR><TD>&lt;width&gt;</TD><TD>the width of the arc instance.</TD></TR>
<TR><TD>&lt;flags&gt;</TD><TD>flags for the arc instance (see below).</TD></TR>
<TR><TD>&lt;headNode&gt;</TD><TD>the name of the node at the head of the arc instance.</TD></TR>
<TR><TD>&lt;headPortID&gt;</TD><TD>the ID of the port on the head node (may be blank if there are no choices).</TD></TR>
<TR><TD>&lt;headX&gt;</TD><TD>the X coordinate of the head of the arc instance.</TD></TR>
<TR><TD>&lt;headY&gt;</TD><TD>the Y coordinate of the head of the arc instance.</TD></TR>
<TR><TD>&lt;tailNode&gt;</TD><TD>the name of the node at the tail of the arc instance.</TD></TR>
<TR><TD>&lt;tailPortID&gt;</TD><TD>the ID of the port on the tail node (may be blank if there are no choices).</TD></TR>
<TR><TD>&lt;tailX&gt;</TD><TD>the X coordinate of the tail of the arc instance.</TD></TR>
<TR><TD>&lt;tailY&gt;</TD><TD>the Y coordinate of the tail of the arc instance.</TD></TR>
<TR><TD>&lt;variable&gt;</TD><TD>a list of variables on the arc instance
(see <A HREF="chap10-04-01.html#chap10-04-01">Section 10-4-1</A>).</TD></TR>
</TABLE>
</CENTER>
<P>
The &lt;flags&gt; field consists of any of the following letters, sorted alphabetically, with the numeric part at the end:
<P>
"A"	if the arc instance is hard-to-select.<BR>
"B"	if the arc instance has an arrow line on the body (use "X" and "Y" for arrow heads).<BR>
"F"	if the arc instance is NOT fixed-angle (fixed-angle is more common).<BR>
"G"	if the arc instance has its head connection negated.<BR>
"I"	if the arc instance has its head NOT extended.<BR>
"J"	if the arc instance has its tail NOT extended.<BR>
"N"	if the arc instance has its tail connection negated.<BR>
"R"	if the arc instance is rigid.<BR>
"S"	if the arc instance is slidable.<BR>
"X"	if the arc instance has an arrow on the head (use "B" for an arrow body).<BR>
"Y"	if the arc instance has an arrow on the tail (use "B" for an arrow body).<BR>
Num	Any digits at the end are the angle of the arc (in tenths of a degree).
<P>
Examples:
<P>
&nbsp;&nbsp;&nbsp;&nbsp;<CODE>AMetal-1|net@0||3|S1800|contact@0||10|10|pin@0||20|10</CODE>
<P>
Places a metal-1 arc (from the technology of the cell).
The arc is named "net@0", is 3 wide, slidable, and at a 180 degree angle.
The arc runs from (10,10) on node "contact@0", to (20,10) on node "pin@0".
<P>
&nbsp;&nbsp;&nbsp;&nbsp;<CODE>Aschematic:bus|net@161||1|IJ2700|busHat@4|s[1:8]|42|14|conn@15|y|42|25</CODE>
<P>
Places a bus arc (from schematic) named "net@161", width 1, not end-extended on either end, at 270 degrees angle.
The bus runs from (42,14) on node busHat@4 (port "s[1:8]") to (42,25) on node "conn@15" (port "y").
<H3>10-3-4: Exports</H3>
Inside of a cell definition, exports are declared with the "E" line.
All exports are sorted by their name.
The syntax is:
<P>
<CENTER><TABLE BORDER=1 WIDTH="90%">
<TR><TD COLSPAN=2><B>E&lt;portID&gt; | &lt;name&gt; | &lt;TD&gt; | &lt;originalNode&gt; | &lt;originalPort&gt; |
&lt;flags&gt; [ | &lt;variable&gt; ]*</B></TD></TR>
<TR><TD WIDTH="20%">&lt;portID&gt;</TD><TD WIDTH="80%">the export ID of the export.</TD></TR>
<TR><TD>&lt;name&gt;</TD><TD>the name of the export.  If empty, the &lt;portID&gt; field is used.</TD></TR>
<TR><TD>&lt;TD&gt;</TD><TD>the text descriptor for writing the port (described later).</TD></TR>
<TR><TD>&lt;originalNode&gt;</TD><TD>the name of the node instance in this cell that the export resides on.</TD></TR>
<TR><TD>&lt;originalPortID&gt;</TD><TD>the ID of the port on the exported node instance (may be blank if there are no choices).</TD></TR>
<TR><TD>&lt;flags&gt;</TD><TD>flags for the export (see below).</TD></TR>
<TR><TD>&lt;variable&gt;</TD><TD>a list of variables on the export
(see <A HREF="chap10-04-01.html#chap10-04-01">Section 10-4-1</A>).</TD></TR>
</TABLE>
</CENTER>
<P>
The &lt;flags&gt; field has the format:
<P>
&lt;characteristics&gt; [ /A ] [ /B ]
<P>
&lt;characteristics&gt; the nature of the export.  Choose from the following:
<P>
"U" unknown.<BR>
"I" input.<BR>
"O" output.<BR>
"B" bi-directional.<BR>
"P" power.<BR>
"G" ground. <BR>
"C" clock.<BR>
"C1" clock phase 1.<BR>
"C2" clock phase 2.<BR>
"C3" clock phase 3.<BR>
"C4" clock phase 4.<BR>
"C5" clock phase 5.<BR>
"C6" clock phase 6.<BR>
"RO" reference output.<BR>
"RI" reference input.<BR>
"RB" reference base.<BR>
/A indicates that the export is always drawn<BR>
/B indicates that the export is body-only (no equivalent on the icon)
<P>
Example:
<P>
&nbsp;&nbsp;&nbsp;&nbsp;<CODE>Es[18]||conn@14|a|D5G2;|I/B</CODE>
<P>
Exports port "a" of node instance "conn@14" and calls it "s[18]".
The text of the export is attached at the center of the port ("D5") and is 2 units high ("G2;").
It is of type input, and only appears in the contents (not the icon).
<!-- PAGE BREAK --><A NAME="chap10-04-01"></A>
<CENTER><FONT SIZE=6><B>Chapter 10: The JELIB File Format</B></FONT></CENTER>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap10-03-04.html#chap10-03-04.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>10-4-1: Variables</H2></CENTER></TD>
<TD><CENTER><A HREF="chap10-04-02.html#chap10-04-02.html"><IMG SRC="iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
Variables may be attached to any object in the Electric database.
They appear at the end of many of the lines in the file.
When more than 1 variable is listed on an object, they are sorted by the variable name.
The syntax is:
<P>
<CENTER><TABLE BORDER=1 WIDTH="90%">
<TR><TD COLSPAN=2><B>&lt;name&gt; ( &lt;TD&gt; ) &lt;type&gt; &lt;value&gt;</B></TD></TR>
<TR><TD WIDTH="20%">&lt;name&gt;</TD><TD WIDTH="80%">the name of the variable.</TD></TR>
<TR><TD>&lt;TD&gt;</TD><TD>the text descriptor (when the variable is visible).</TD></TR>
<TR><TD>&lt;type&gt;</TD><TD>the type of data attached.</TD></TR>
<TR><TD>&lt;value&gt;</TD><TD>the data.  If it starts with "[", it is an array of the form [ <value1> , <value2> , ... ]</TD></TR>
</TABLE>
</CENTER>
<P>
&lt;name&gt; and &lt;value&gt; fields may be enclosed in quotation marks.
Backslash character can be used inside enclosed strings to denote special characters.
<P>
The &lt;type&gt; field can be one of these:
<BR>
"B" Boolean ("T" or "F")<BR>
"C" Cell (of the form &lt;library&gt; : &lt;cell&gt;)<BR>
"D" Double<BR>
"E" Export (of the form &lt;library&gt; : &lt;cell&gt; : &lt;exportID&gt;)<BR>
"F" Float<BR>
"G" Long<BR>
"H" Short<BR>
"I" Integer<BR>
"L" Library name<BR>
"O" Tool name<BR>
"P" Primitive Node prototype (of the form &lt;technology&gt; : &lt;node name&gt;)<BR>
"R" Arc prototype (of the form &lt;technology&gt; : &lt;arc name&gt;)<BR>
"S" String<BR>
"T" Technology name<BR>
"V" Point2D (of the form &lt;x&gt; / &lt;y&gt;)<BR>
"Y" Byte (0-255)
<P>
Examples:
<P>
&nbsp;&nbsp;&nbsp;&nbsp;<CODE>ART_message(D5G8;)StxArray4x4B</CODE>
<P>
Adds a variable called "ART_message" with the string "txArray4x4B".
The text descriptor indicates centered text ("D5") that is 8 units tall ("G8;").
<P>
&nbsp;&nbsp;&nbsp;&nbsp;<CODE>ART_degrees()F[0.0,3.1415927]</CODE>
<P>
Adds a variable called "ART_degrees" with an array of 2 floating point values: 0.0 and 3.1415927.
<P>
&nbsp;&nbsp;&nbsp;&nbsp;<CODE>EXPORTS()E[ccc:gate;1{sch}:a,"ccc:hate;1{sch}:b[0:4]"]</CODE>
<P>
Adds a variable called "EXPORTS" with an array of 2 exports: export "a" of cell "ccc:gate{sch}"
and export "b[0:4]" from the cell "ccc:hate{sch}".
<P>
&nbsp;&nbsp;&nbsp;&nbsp;<CODE>ATTR_z0(D5G0.5;NPY1;)I50</CODE>
<P>
Adds an attribute called "z0" with the integer value 50.
It is displayed anchored at the center ("D5"), 0.5 unit tall ("G0.5;"),
written as "name=value" ("N"), is a parameter ("P"), and is offset by 1 in Y ("Y1;").
<H3>10-4-2: Text Descriptors</H3>
Text descriptors appear in every Variable, and also in other places (cell instances and exports).
It consists of these fields:
<P>
<CENTER><TABLE WIDTH="90%">
<TR><TD WIDTH="15%">A &lt;size&gt; ;</TD><TD WIDTH="85%">Text is absolute size (in points).</TD></TR>
<TR><TD>B</TD><TD>Text is bold.</TD></TR>
<TR><TD>C &lt;color&gt; ;</TD><TD>Text is drawn in the color index given.</TD></TR>
<TR><TD>D0</TD><TD>Text is anchored at its center, limited to the size of its owner.</TD></TR>
<TR><TD>D1</TD><TD>Text is anchored at its lower-left.</TD></TR>
<TR><TD>D2</TD><TD>Text is anchored at its bottom.</TD></TR>
<TR><TD>D3</TD><TD>Text is anchored at its lower-right.</TD></TR>
<TR><TD>D4</TD><TD>Text is anchored at its left.</TD></TR>
<TR><TD>D5</TD><TD>Text is anchored at its center.</TD></TR>
<TR><TD>D6</TD><TD>Text is anchored at its right.</TD></TR>
<TR><TD>D7</TD><TD>Text is anchored at its upper-left.</TD></TR>
<TR><TD>D8</TD><TD>Text is anchored at its top.</TD></TR>
<TR><TD>D9</TD><TD>Text is anchored at its upper-right.</TD></TR>
<TR><TD>F &lt;font&gt; ;</TD><TD>Text is shown in the named font.</TD></TR>
<TR><TD>G &lt;size&gt; ;</TD><TD>Text has relative size (in grid units).</TD></TR>
<TR><TD>H</TD><TD>Variable is inheritable (only for variables on Cells or Exports).</TD></TR>
<TR><TD>I</TD><TD>Text is italic.</TD></TR>
<TR><TD>L</TD><TD>Text is underlined.</TD></TR>
<TR><TD>N</TD><TD>Variable is written in the form "NAME=VALUE".</TD></TR>
<TR><TD>OJ</TD><TD>Text is Java code.</TD></TR>
<TR><TD>OL</TD><TD>Text is Spice code.</TD></TR>
<TR><TD>OT</TD><TD>Text is TCL code.</TD></TR>
<TR><TD>P</TD><TD>Variable is a parameter.</TD></TR>
<TR><TD>R</TD><TD>Text is rotated 90 degrees.</TD></TR>
<TR><TD>RR</TD><TD>Text is rotated 180 degrees.</TD></TR>
<TR><TD>RRR</TD><TD>Text is rotated 270 degrees.</TD></TR>
<TR><TD>T</TD><TD>Text is interior (seen only when inside the cell).</TD></TR>
<TR><TD>UR</TD><TD>Value is in Resistance units.</TD></TR>
<TR><TD>UC</TD><TD>Value is in Capacitance units.</TD></TR>
<TR><TD>UI</TD><TD>Value is in Inductance units.</TD></TRBR>
<TR><TD>UA</TD><TD>Value is in Current units.</TD></TR>
<TR><TD>UV</TD><TD>Value is in Voltage units.</TD></TR>
<TR><TD>UD</TD><TD>Value is in Distance units.</TD></TR>
<TR><TD>UT</TD><TD> Value is in Time units.</TD></TR>
<TR><TD>X &lt;xoff&gt; ;</TD><TD>Text is offset in X from object center.</TD></TR>
<TR><TD>Y &lt;yoff&gt; ;</TD><TD>Text is offset in Y from object center.</TD></TR>
</TABLE>
</CENTER>
<P>
Example:
<P>
&nbsp;&nbsp;&nbsp;&nbsp;<CODE>D4G8;</CODE>
<P>
The text is anchored on the left ("D4") and is 8 units tall ("G8;").
<H3>10-4-3: Groups</H3>
After all of the cells are listed, they are organized into groups.
Each group line consists simply of a list of cells in that group.
The first cell listed is the "main schematics" of the group.
If there is no such cell, the first field is empty.
After that, the cells appear in alphabetical order.
<P>
Group lines are optional, because much of the group information can be derived from the cell names
and cell group fields.
<P>
When multiple groups are declared, they appear sorted by the group name (which is derived from the cell names in it).
The syntax is:
<P>
<CENTER><TABLE BORDER=1 WIDTH="90%">
<TR><TD COLSPAN=2><B>G&lt;cell&gt; | &lt;cell&gt; | ... | &lt;cell&gt;</B></TD></TR>
<TR><TD WIDTH="20%">&lt;cell&gt;</TD><TD WIDTH="80%">the name of the cells in the group.
&lt;cell&gt; may consists only of proto name,
because all cells with the same base name are put into the same group.</TD></TR>
</TABLE>
</CENTER>
<P>
Examples:
<P>
&nbsp;&nbsp;&nbsp;&nbsp;<CODE>Gsam;2{sch}</CODE>
<P>
"sam;2{sch}" is the main schematic of the cell group consisting of all views and versions of cells with proto name "sam".
<P>
&nbsp;&nbsp;&nbsp;&nbsp;<CODE>G|high|higha</CODE>
<P>
Places all views and versions of cells with proto names "high" and "higha" in the same group (there is no main schematic).
<!-- NEED 3in -->
<H3>10-4-4: Example</H3>
As an example of the JELIB format, let us assume a design with two levels of hierarchy.
The bottom level of hierarchy (cell "low") has 3 nodes, two arcs, and an export:
<P>
<CENTER><IMG SRC="fig10-01.png"></CENTER>
<P>
The top level of hierarchy (cell "high") has two instances of the cell
(the right instance is rotated 90 degrees) and an arc connecting them:
<P>
<CENTER><IMG SRC="fig10-02.png"></CENTER>
<P>
<!-- NEED 5in -->
Here is the JELIB file for the above layout.
<CENTER><TABLE BORDER=1>
<TR><TD>
<CODE>
# header information:<BR>
Hccc|8.04<BR>
<BR>
# Views:<BR>
Vlayout|lay<BR>
<BR>
# Technology mocmos<BR>
Tmocmos|MoCMOSNumberOfMetalLayers()I6<BR>
<BR>
# Cell high{lay}<BR>
Chigh;1{lay}||mocmos|1093555876000|1094258888640|<BR>
Ngeneric:Facet-Center|art@0||0|0|0|0||AV<BR>
Ilow;1{lay}|low@0||-14|12|||D5G4;<BR>
Ilow;1{lay}|low@1||15|12|R||D5G4;<BR>
AMetal-1|net@0||3|S0|low@1||5|22|low@0||-4|22<BR>
X<BR>
<BR>
# Cell low{lay}<BR>
Clow;1{lay}||mocmos|1093555232000|1094258870406|<BR>
Ngeneric:Facet-Center|art@0||0|0|0|0||AV<BR>
NMetal-1-Metal-2-Con|contact@0||-10|10|5|5||<BR>
NMetal-1-Pin|pin@0||10|10|3|3||W<BR>
NMetal-2-Pin|pin@1||-10|-10|3|3||W<BR>
AMetal-1|net@0||3|S1800|contact@0||-10|10|pin@0||10|10<BR>
AMetal-2|net@1||3|S900|contact@0||-10|10|pin@1||-10|-10<BR>
Ea||D5G2;|pin@0||I<BR>
X<BR>
<BR>
# Groups:<BR>
G|high;1{lay}<BR>
G|low;1{lay}
</CODE></TD></TR></TABLE></CENTER>
</BODY>
</HTML>
